{"version":3,"mappings":"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","names":["__iconNode","Key","createLucideIcon","CTEDialog","open","onOpenChange","tripId","onSuccess","user","useAuth","loading","setLoading","useState","importing","setImporting","trips","setTrips","fileInputRef","useRef","formData","setFormData","numero_cte","serie","tipo_cte","tipo_servico","trip_id","remetente_nome","remetente_cnpj","remetente_endereco","remetente_cidade","remetente_uf","remetente_cep","destinatario_nome","destinatario_cnpj","destinatario_endereco","destinatario_cidade","destinatario_uf","destinatario_cep","tomador_tipo","tomador_nome","tomador_cnpj","produto_predominante","peso_bruto","peso_cubado","quantidade_volumes","valor_mercadoria","modal","valor_frete","valor_pedagio","valor_total","tipo_frete","placa_veiculo","placa_carreta","uf_veiculo","rntrc","observacoes","useEffect","loadApprovedTrips","generateCTENumber","selectedTrip","find","t","id","prev","vehicle_plate","frete","parseFloat","pedagio","total","toFixed","timestamp","Date","now","random","Math","floor","toString","padStart","cteNumber","slice","data","error","supabase","from","select","in","order","ascending","handleImportXML","current","files","toast","file","fileName","name","toLowerCase","endsWith","JSZip","__vitePreload","__vite_default__","n","default","zipContent","loadAsync","xmlFiles","filename","fileData","Object","entries","dir","content","async","push","length","info","functions","invoke","body","xml_files","results","errors","console","warn","warning","ctes_created","duration","messages","clients_created","vehicles_created","success","join","xmlContent","text","xml_content","message","value","handleSubmit","vehicleExists","eq","toUpperCase","maybeSingle","insert","parseInt","created_by","status","Dialog","jsxs","DialogContent","jsx","DialogHeader","DialogTitle","Tabs","TabsList","TabsTrigger","TabsContent","Upload","e","target","Button","click","Label","Input","Select","SelectTrigger","SelectValue","SelectContent","map","SelectItem","trip","origin","destination","VehicleSelect","v","type","Textarea","DialogFooter","RADIO_NAME","createRadioContext","createRadioScope","createContextScope","RadioProvider","useRadioContext","Radio","React.forwardRef","props","forwardedRef","__scopeRadio","checked","required","disabled","onCheck","form","radioProps","button","setButton","React.useState","composedRefs","useComposedRefs","node","hasConsumerStoppedPropagationRef","React.useRef","isFormControl","Primitive","getState","composeEventHandlers","event","RadioBubbleInput","INDICATOR_NAME","RadioIndicator","forceMount","indicatorProps","context","Presence","BUBBLE_INPUT_NAME","control","bubbles","ref","prevChecked","usePrevious","controlSize","useSize","React.useEffect","input","inputProto","setChecked","ARROW_KEYS","RADIO_GROUP_NAME","createRadioGroupContext","createContextScope2","createRovingFocusGroupScope","useRovingFocusGroupScope","useRadioScope","RadioGroupProvider","useRadioGroupContext","RadioGroup","React2.forwardRef","__scopeRadioGroup","defaultValue","valueProp","orientation","loop","onValueChange","groupProps","rovingFocusGroupScope","direction","useDirection","setValue","useControllableState","jsx2","RovingFocusGroup.Root","Primitive2","ITEM_NAME","RadioGroupItem","itemProps","isDisabled","radioScope","React2.useRef","useComposedRefs2","isArrowKeyPressedRef","React2.useEffect","handleKeyDown","handleKeyUp","RovingFocusGroup.Item","composeEventHandlers2","_a","INDICATOR_NAME2","RadioGroupIndicator","Root2","Item2","Indicator","React","className","RadioGroupPrimitive.Root","cn","displayName","RadioGroupPrimitive","RadioGroupPrimitive.Item","RadioGroupPrimitive.Indicator","Circle","ImportCTEDialog","tipo","setTipo","dataInicial","setDataInicial","dataFinal","setDataFinal","chaveAcesso","setChaveAcesso","handleImport","replace","description","Calendar","Fragment","Loader2","EmitirCTEDialog","useToast","numero","tipo_tomador","tomador_razao","tomador_endereco","tomador_municipio","tomador_uf","tomador_cep","remetente_razao","remetente_municipio","destinatario_razao","destinatario_municipio","valor_carga","municipio_origem","uf_origem","municipio_destino","uf_destino","preventDefault","title","chave","Error","variant","CTEManagement","ctes","setCTEs","dialogOpen","setDialogOpen","importDialogOpen","setImportDialogOpen","emitirDialogOpen","setEmitirDialogOpen","searchTerm","setSearchTerm","loadCTEs","getStatusBadge","variants","rascunho","label","emitido","autorizado","cancelado","rejeitado","config","Badge","filteredCTEs","filter","cte","includes","Card","CardHeader","CardTitle","FileText","Search","Download","Plus","CardContent","Table","TableHeader","TableRow","TableHead","TableBody","TableCell","format","data_emissao","toLocaleString","minimumFractionDigits","Eye","EmitirMDFEDialog","setCtes","selectedCtes","setSelectedCtes","uf_inicio","uf_fim","ufs_percurso","placa_cavalo","uf_cavalo","cpf_motorista","nome_motorista","loadCTes","is","limit","selectedCtesData","pesoTotal","reduce","sum","valorTotal","quantidade_ctes","chave_acesso","split","uf","trim","condutores","cpf","nome","toggleCte","cteId","Checkbox","MDFEManagement","mdfes","setMdfes","loadMdfes","handleEncerrar","mdfe","confirm","numero_mdfe","municipio","prompt","mdfe_id","uf_encerramento","municipio_encerramento","processando","encerrado","toLocaleDateString","veiculo_tracao_placa","peso_total_kg","valor_total_carga","CheckCircle","navigator","clipboard","writeText","TripCreationDialog","onTripCreated","drivers","setDrivers","selectedDriver","setSelectedDriver","selectedVehicle","setSelectedVehicle","selectedCarreta","setSelectedCarreta","estimatedDeparture","setEstimatedDeparture","estimatedArrival","setEstimatedArrival","notes","setNotes","loadDrivers","tomorrow","setDate","getDate","setHours","toISOString","arrival","driversData","driverRoles","driverIds","r","user_id","availableDrivers","d","full_name","email","available","selectedDriverData","tripError","driver_id","driver_name","estimated_departure","estimated_arrival","single","cteError","update","data_inicio","tipo_motorista","module","read","Sparkles","DialogDescription","MapPin","User","AlertCircle","driver","Truck","TripManagement","availableCTEs","setAvailableCTEs","activeTrips","setActiveTrips","selectedCTE","setSelectedCTE","showTripDialog","setShowTripDialog","loadData","Promise","all","loadAvailableCTEs","loadActiveTrips","tripsWithCTEs","Array","isArray","profiles","handleCreateTrip","handleTripCreated","getStatusColor","planejada","aprovada","em_andamento","concluida","calculateDistance","Package","Clock","Navigation","OrdemColetaDialog","ordem","numero_ordem","fornecedor_nome","fornecedor_cidade","fornecedor_uf","cliente_nome","cliente_cnpj","motorista_nome","motorista_telefone","capacidade_carreta","produto","pedido_venda","generateNumeroOrdem","getFullYear","String","getMonth","auth","getUser","OrdemColetaManagement","ordens","setOrdens","selectedOrdem","setSelectedOrdem","loadOrdens","handleGeneratePDF","ordem_id","printWindow","window","document","write","html","close","focus","setTimeout","print","filteredOrdens","pendente","coletado","VehicleList","vehicles","setVehicles","loadVehicles","padding","fontSize","marginBottom","listStyle","background","borderRadius","placa","modelo","proprietario","estimateRouteCost","params","distanceKm","max","kmpl","avgConsumptionKmPerLiter","fuelPrice","fuelPricePerLiter","tolls","varPerKm","variableCostPerKm","fixedCost","liters","fuelCost","variableCost","CostEstimator","setForm","calc","TMS","Layout","StatCard","positive","DollarSign","RouteOptimizer","RevenueAnalysis"],"ignoreList":[0,2],"sources":["../../node_modules/lucide-react/dist/esm/icons/key.js","../../src/components/tms/CTEDialog.tsx","../../node_modules/@radix-ui/react-radio-group/dist/index.mjs","../../src/components/ui/radio-group.tsx","../../src/components/tms/ImportCTEDialog.tsx","../../src/components/tms/EmitirCTEDialog.tsx","../../src/components/tms/CTEManagement.tsx","../../src/components/tms/EmitirMDFEDialog.tsx","../../src/components/tms/MDFEManagement.tsx","../../src/components/tms/TripCreationDialog.tsx","../../src/components/tms/TripManagement.tsx","../../src/components/tms/OrdemColetaDialog.tsx","../../src/components/tms/OrdemColetaManagement.tsx","../../src/components/tms/VehicleList.tsx","../../src/utils/costEstimator.ts","../../src/components/tms/CostEstimator.tsx","../../src/pages/TMS.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.511.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4\", key: \"g0fldk\" }],\n  [\"path\", { d: \"m21 2-9.6 9.6\", key: \"1j0ho8\" }],\n  [\"circle\", { cx: \"7.5\", cy: \"15.5\", r: \"5.5\", key: \"yqb3hr\" }]\n];\nconst Key = createLucideIcon(\"key\", __iconNode);\n\nexport { __iconNode, Key as default };\n//# sourceMappingURL=key.js.map\n","import { useState, useRef, useEffect } from 'react';\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogFooter } from '@/components/ui/dialog';\r\nimport { VehicleSelect } from '@/components/VehicleSelect';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\r\nimport { Textarea } from '@/components/ui/textarea';\r\nimport { supabase } from '@/integrations/supabase/client';\r\nimport { useAuth } from '@/contexts/AuthContext';\r\nimport { toast } from 'sonner';\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\r\nimport { Upload } from 'lucide-react';\r\n\r\ninterface CTEDialogProps {\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n  tripId?: string;\r\n  onSuccess?: () => void;\r\n}\r\n\r\nexport function CTEDialog({ open, onOpenChange, tripId, onSuccess }: CTEDialogProps) {\r\n  const { user } = useAuth();\r\n  const [loading, setLoading] = useState(false);\r\n  const [importing, setImporting] = useState(false);\r\n  const [trips, setTrips] = useState<any[]>([]);\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n  \r\n  const [formData, setFormData] = useState({\r\n    numero_cte: '',\r\n    serie: '1',\r\n    tipo_cte: 'normal',\r\n    tipo_servico: 'normal',\r\n    trip_id: tripId || '',\r\n    \r\n    // Remetente\r\n    remetente_nome: '',\r\n    remetente_cnpj: '',\r\n    remetente_endereco: '',\r\n    remetente_cidade: '',\r\n    remetente_uf: '',\r\n    remetente_cep: '',\r\n    \r\n    // Destinatrio\r\n    destinatario_nome: '',\r\n    destinatario_cnpj: '',\r\n    destinatario_endereco: '',\r\n    destinatario_cidade: '',\r\n    destinatario_uf: '',\r\n    destinatario_cep: '',\r\n    \r\n    // Tomador\r\n    tomador_tipo: 'remetente' as const,\r\n    tomador_nome: '',\r\n    tomador_cnpj: '',\r\n    \r\n    // Carga\r\n    produto_predominante: '',\r\n    peso_bruto: '',\r\n    peso_cubado: '',\r\n    quantidade_volumes: '',\r\n    valor_mercadoria: '',\r\n    \r\n    // Frete\r\n    modal: 'rodoviario',\r\n    valor_frete: '',\r\n    valor_pedagio: '',\r\n    valor_total: '',\r\n    tipo_frete: 'cif',\r\n    \r\n    // Transporte\r\n    placa_veiculo: '',\r\n    placa_carreta: '',\r\n    uf_veiculo: '',\r\n    rntrc: '',\r\n    \r\n    observacoes: ''\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (open) {\r\n      loadApprovedTrips();\r\n      // Gerar nmero CTe automaticamente\r\n      generateCTENumber();\r\n    }\r\n  }, [open]);\r\n\r\n  useEffect(() => {\r\n    // Auto-preencher placa do veculo da viagem selecionada\r\n    if (formData.trip_id) {\r\n      const selectedTrip = trips.find(t => t.id === formData.trip_id);\r\n      if (selectedTrip) {\r\n        setFormData(prev => ({\r\n          ...prev,\r\n          placa_veiculo: selectedTrip.vehicle_plate || ''\r\n        }));\r\n      }\r\n    }\r\n  }, [formData.trip_id, trips]);\r\n\r\n  useEffect(() => {\r\n    // Calcular valor total\r\n    const frete = parseFloat(formData.valor_frete) || 0;\r\n    const pedagio = parseFloat(formData.valor_pedagio) || 0;\r\n    const total = frete + pedagio;\r\n    \r\n    if (total > 0 && formData.valor_total !== total.toFixed(2)) {\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        valor_total: total.toFixed(2)\r\n      }));\r\n    }\r\n  }, [formData.valor_frete, formData.valor_pedagio]);\r\n\r\n  const generateCTENumber = () => {\r\n    const timestamp = Date.now();\r\n    const random = Math.floor(Math.random() * 1000).toString().padStart(3, '0');\r\n    const cteNumber = `${timestamp}${random}`.slice(-9);\r\n    setFormData(prev => ({ ...prev, numero_cte: cteNumber }));\r\n  };\r\n\r\n  const loadApprovedTrips = async () => {\r\n    const { data, error } = await supabase\r\n      .from('trips')\r\n      .select('*')\r\n      .in('status', ['aprovada', 'em_andamento'])\r\n      .order('created_at', { ascending: false });\r\n    \r\n    if (data) {\r\n      setTrips(data);\r\n    }\r\n  };\r\n\r\n  const handleImportXML = async () => {\r\n    if (!fileInputRef.current?.files?.[0]) {\r\n      toast.error('Selecione um arquivo');\r\n      return;\r\n    }\r\n\r\n    const file = fileInputRef.current.files[0];\r\n    const fileName = file.name.toLowerCase();\r\n    \r\n    if (!fileName.endsWith('.xml') && !fileName.endsWith('.zip')) {\r\n      toast.error('Por favor, selecione um arquivo XML ou ZIP');\r\n      return;\r\n    }\r\n\r\n    setImporting(true);\r\n\r\n    try {\r\n      if (fileName.endsWith('.zip')) {\r\n        // Importao em lote de ZIP\r\n        const JSZip = (await import('jszip')).default;\r\n        const zip = new JSZip();\r\n        const zipContent = await zip.loadAsync(file);\r\n        \r\n        const xmlFiles: string[] = [];\r\n        \r\n        // Extrair todos os XMLs do ZIP\r\n        for (const [filename, fileData] of Object.entries(zipContent.files)) {\r\n          if (!fileData.dir && filename.toLowerCase().endsWith('.xml')) {\r\n            const content = await fileData.async('text');\r\n            xmlFiles.push(content);\r\n          }\r\n        }\r\n\r\n        if (xmlFiles.length === 0) {\r\n          toast.error('Nenhum arquivo XML encontrado no ZIP');\r\n          return;\r\n        }\r\n\r\n        toast.info(`Processando ${xmlFiles.length} CT-es...`);\r\n\r\n        const { data, error } = await supabase.functions.invoke('import-cte-batch', {\r\n          body: { xml_files: xmlFiles }\r\n        });\r\n\r\n        if (error) throw error;\r\n\r\n        const results = data as {\r\n          success: string[];\r\n          errors: Array<{ numero_cte: string; error: string }>;\r\n          clients_created: number;\r\n          vehicles_created: number;\r\n          ctes_created: number;\r\n        };\r\n\r\n        if (results.errors.length > 0) {\r\n          console.warn('Erros na importao:', results.errors);\r\n          toast.warning(\r\n            `${results.ctes_created} CT-es importados com sucesso. ${results.errors.length} falharam.`,\r\n            { duration: 5000 }\r\n          );\r\n        } else {\r\n          const messages = [\r\n            ` ${results.ctes_created} CT-es importados`,\r\n            ` ${results.clients_created} novos clientes cadastrados`,\r\n          ];\r\n          \r\n          if (results.vehicles_created > 0) {\r\n            messages.push(` ${results.vehicles_created} veculos auto-cadastrados`);\r\n          }\r\n          \r\n          messages.push(' Contas a receber criadas', ' Indicadores atualizados');\r\n          \r\n          toast.success(\r\n            messages.join('\\n'),\r\n            { duration: 6000 }\r\n          );\r\n        }\r\n\r\n      } else {\r\n        // Importao individual de XML\r\n        const xmlContent = await file.text();\r\n        \r\n        const { data, error } = await supabase.functions.invoke('import-cte-xml', {\r\n          body: { xml_content: xmlContent }\r\n        });\r\n\r\n        if (error) throw error;\r\n\r\n        toast.success('CT-e importado com sucesso!');\r\n      }\r\n\r\n      onSuccess?.();\r\n      onOpenChange(false);\r\n    } catch (error: any) {\r\n      console.error('Erro ao importar:', error);\r\n      toast.error(error.message || 'Erro ao importar CT-e');\r\n    } finally {\r\n      setImporting(false);\r\n      if (fileInputRef.current) {\r\n        fileInputRef.current.value = '';\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async () => {\r\n    if (!formData.trip_id || !formData.remetente_nome || !formData.destinatario_nome) {\r\n      toast.error('Preencha todos os campos obrigatrios');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n\r\n    try {\r\n      // Validar se a placa existe na tabela vehicles\r\n      const { data: vehicleExists } = await supabase\r\n        .from('vehicles')\r\n        .select('placa')\r\n        .eq('placa', formData.placa_veiculo.toUpperCase())\r\n        .maybeSingle();\r\n\r\n      if (!vehicleExists) {\r\n        toast.error(`Placa ${formData.placa_veiculo} no encontrada. Importe os veculos primeiro.`);\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      const { error } = await supabase\r\n        .from('cte')\r\n        .insert({\r\n          ...formData,\r\n          placa_veiculo: formData.placa_veiculo.toUpperCase(),\r\n          peso_bruto: parseFloat(formData.peso_bruto),\r\n          peso_cubado: formData.peso_cubado ? parseFloat(formData.peso_cubado) : null,\r\n          quantidade_volumes: parseInt(formData.quantidade_volumes),\r\n          valor_mercadoria: parseFloat(formData.valor_mercadoria),\r\n          valor_frete: parseFloat(formData.valor_frete),\r\n          valor_pedagio: parseFloat(formData.valor_pedagio),\r\n          valor_total: parseFloat(formData.valor_total),\r\n          created_by: user?.id,\r\n          status: 'emitido'\r\n        });\r\n\r\n      if (error) throw error;\r\n\r\n      toast.success('CT-e criado com sucesso! Disponvel no app do motorista.');\r\n      onSuccess?.();\r\n      onOpenChange(false);\r\n      \r\n      // Reset form\r\n      setFormData({\r\n        numero_cte: '',\r\n        serie: '1',\r\n        tipo_cte: 'normal',\r\n        tipo_servico: 'normal',\r\n        trip_id: '',\r\n        remetente_nome: '',\r\n        remetente_cnpj: '',\r\n        remetente_endereco: '',\r\n        remetente_cidade: '',\r\n        remetente_uf: '',\r\n        remetente_cep: '',\r\n        destinatario_nome: '',\r\n        destinatario_cnpj: '',\r\n        destinatario_endereco: '',\r\n        destinatario_cidade: '',\r\n        destinatario_uf: '',\r\n        destinatario_cep: '',\r\n        tomador_tipo: 'remetente',\r\n        tomador_nome: '',\r\n        tomador_cnpj: '',\r\n        produto_predominante: '',\r\n        peso_bruto: '',\r\n        peso_cubado: '',\r\n        quantidade_volumes: '',\r\n        valor_mercadoria: '',\r\n        modal: 'rodoviario',\r\n        valor_frete: '',\r\n        valor_pedagio: '',\r\n        valor_total: '',\r\n        tipo_frete: 'cif',\r\n        placa_veiculo: '',\r\n        placa_carreta: '',\r\n        uf_veiculo: '',\r\n        rntrc: '',\r\n        observacoes: ''\r\n      });\r\n    } catch (error) {\r\n      console.error('Erro ao criar CT-e:', error);\r\n      toast.error('Erro ao criar CT-e');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={onOpenChange}>\r\n      <DialogContent className=\"max-w-4xl max-h-[90vh] overflow-y-auto\">\r\n        <DialogHeader>\r\n          <DialogTitle>Emitir CT-e (Conhecimento de Transporte Eletrnico)</DialogTitle>\r\n        </DialogHeader>\r\n\r\n        <Tabs defaultValue=\"basicos\" className=\"w-full\">\r\n          <TabsList className=\"grid w-full grid-cols-6\">\r\n            <TabsTrigger value=\"xml\">Importar XML</TabsTrigger>\r\n            <TabsTrigger value=\"basicos\">Bsicos</TabsTrigger>\r\n            <TabsTrigger value=\"remetente\">Remetente</TabsTrigger>\r\n            <TabsTrigger value=\"destinatario\">Destinatrio</TabsTrigger>\r\n            <TabsTrigger value=\"carga\">Carga</TabsTrigger>\r\n            <TabsTrigger value=\"transporte\">Transporte</TabsTrigger>\r\n          </TabsList>\r\n\r\n          <TabsContent value=\"xml\" className=\"space-y-4\">\r\n            <div className=\"border-2 border-dashed border-border rounded-lg p-8 text-center\">\r\n              <Upload className=\"mx-auto h-12 w-12 text-muted-foreground mb-4\" />\r\n              <h3 className=\"text-lg font-semibold mb-2\">Importar CT-e via XML ou ZIP</h3>\r\n              <p className=\"text-sm text-muted-foreground mb-4\">\r\n                Faa upload de um XML individual ou um arquivo ZIP contendo mltiplos XMLs\r\n              </p>\r\n              \r\n              <input\r\n                ref={fileInputRef}\r\n                type=\"file\"\r\n                accept=\".xml,.zip\"\r\n                className=\"hidden\"\r\n                onChange={(e) => {\r\n                  if (e.target.files?.[0]) {\r\n                    toast.info('Arquivo selecionado: ' + e.target.files[0].name);\r\n                  }\r\n                }}\r\n              />\r\n              \r\n              <div className=\"flex gap-2 justify-center\">\r\n                <Button\r\n                  type=\"button\"\r\n                  variant=\"outline\"\r\n                  onClick={() => fileInputRef.current?.click()}\r\n                >\r\n                  Selecionar XML ou ZIP\r\n                </Button>\r\n                \r\n                <Button\r\n                  type=\"button\"\r\n                  onClick={handleImportXML}\r\n                  disabled={importing}\r\n                >\r\n                  {importing ? 'Importando...' : 'Importar'}\r\n                </Button>\r\n              </div>\r\n              \r\n              <div className=\"mt-6 space-y-2 text-left max-w-md mx-auto\">\r\n                <p className=\"text-xs text-muted-foreground font-semibold\">\r\n                   Importao sem placa:\r\n                </p>\r\n                <p className=\"text-xs text-muted-foreground ml-4\">\r\n                   Se o XML no trouxer placa vlida, ser usado 'SEM-PLACA' e voc define a placa no Manifesto depois\r\n                </p>\r\n                \r\n                <p className=\"text-xs text-success font-semibold mt-4\">\r\n                   O sistema far automaticamente:\r\n                </p>\r\n                <p className=\"text-xs text-success ml-4\">\r\n                   Cadastro de clientes (se no existirem)\r\n                </p>\r\n                <p className=\"text-xs text-success ml-4\">\r\n                   Criao de contas a receber\r\n                </p>\r\n                <p className=\"text-xs text-success ml-4\">\r\n                   Criao automtica do veculo \"SEM-PLACA\" quando necessrio\r\n                </p>\r\n                <p className=\"text-xs text-success ml-4\">\r\n                   Atualizao de indicadores financeiros\r\n                </p>\r\n                <p className=\"text-xs text-success ml-4\">\r\n                   Clculo de anlises por cliente\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </TabsContent>\r\n\r\n          <TabsContent value=\"basicos\" className=\"space-y-4\">\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div>\r\n                <Label>Nmero CT-e *</Label>\r\n                <Input\r\n                  value={formData.numero_cte}\r\n                  onChange={e => setFormData({ ...formData, numero_cte: e.target.value })}\r\n                  placeholder=\"Auto-gerado\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>Srie</Label>\r\n                <Input\r\n                  value={formData.serie}\r\n                  onChange={e => setFormData({ ...formData, serie: e.target.value })}\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>Viagem *</Label>\r\n                <Select value={formData.trip_id} onValueChange={value => setFormData({ ...formData, trip_id: value })}>\r\n                  <SelectTrigger>\r\n                    <SelectValue placeholder=\"Selecione a viagem\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    {trips.map(trip => (\r\n                      <SelectItem key={trip.id} value={trip.id}>\r\n                        {trip.origin}  {trip.destination} ({trip.vehicle_plate})\r\n                      </SelectItem>\r\n                    ))}\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n              <div>\r\n                <Label>Tipo CT-e</Label>\r\n                <Select value={formData.tipo_cte} onValueChange={value => setFormData({ ...formData, tipo_cte: value })}>\r\n                  <SelectTrigger>\r\n                    <SelectValue />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    <SelectItem value=\"normal\">Normal</SelectItem>\r\n                    <SelectItem value=\"complementar\">Complementar</SelectItem>\r\n                    <SelectItem value=\"anulacao\">Anulao</SelectItem>\r\n                    <SelectItem value=\"substituto\">Substituto</SelectItem>\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n              <div>\r\n                <Label>Tipo Servio</Label>\r\n                <Select value={formData.tipo_servico} onValueChange={value => setFormData({ ...formData, tipo_servico: value })}>\r\n                  <SelectTrigger>\r\n                    <SelectValue />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    <SelectItem value=\"normal\">Normal</SelectItem>\r\n                    <SelectItem value=\"subcontratacao\">Subcontratao</SelectItem>\r\n                    <SelectItem value=\"redespacho\">Redespacho</SelectItem>\r\n                    <SelectItem value=\"intermediario\">Intermedirio</SelectItem>\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n              <div>\r\n                <Label>Tipo Frete</Label>\r\n                <Select value={formData.tipo_frete} onValueChange={value => setFormData({ ...formData, tipo_frete: value })}>\r\n                  <SelectTrigger>\r\n                    <SelectValue />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    <SelectItem value=\"cif\">CIF (Pago pelo Remetente)</SelectItem>\r\n                    <SelectItem value=\"fob\">FOB (Pago pelo Destinatrio)</SelectItem>\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n            </div>\r\n          </TabsContent>\r\n\r\n          <TabsContent value=\"remetente\" className=\"space-y-4\">\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div className=\"col-span-2\">\r\n                <Label>Nome/Razo Social *</Label>\r\n                <Input\r\n                  value={formData.remetente_nome}\r\n                  onChange={e => setFormData({ ...formData, remetente_nome: e.target.value })}\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>CNPJ *</Label>\r\n                <Input\r\n                  value={formData.remetente_cnpj}\r\n                  onChange={e => setFormData({ ...formData, remetente_cnpj: e.target.value })}\r\n                  placeholder=\"00.000.000/0000-00\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>CEP *</Label>\r\n                <Input\r\n                  value={formData.remetente_cep}\r\n                  onChange={e => setFormData({ ...formData, remetente_cep: e.target.value })}\r\n                  placeholder=\"00000-000\"\r\n                />\r\n              </div>\r\n              <div className=\"col-span-2\">\r\n                <Label>Endereo *</Label>\r\n                <Input\r\n                  value={formData.remetente_endereco}\r\n                  onChange={e => setFormData({ ...formData, remetente_endereco: e.target.value })}\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>Cidade *</Label>\r\n                <Input\r\n                  value={formData.remetente_cidade}\r\n                  onChange={e => setFormData({ ...formData, remetente_cidade: e.target.value })}\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>UF *</Label>\r\n                <Input\r\n                  value={formData.remetente_uf}\r\n                  onChange={e => setFormData({ ...formData, remetente_uf: e.target.value })}\r\n                  maxLength={2}\r\n                  placeholder=\"SP\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </TabsContent>\r\n\r\n          <TabsContent value=\"destinatario\" className=\"space-y-4\">\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div className=\"col-span-2\">\r\n                <Label>Nome/Razo Social *</Label>\r\n                <Input\r\n                  value={formData.destinatario_nome}\r\n                  onChange={e => setFormData({ ...formData, destinatario_nome: e.target.value })}\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>CNPJ *</Label>\r\n                <Input\r\n                  value={formData.destinatario_cnpj}\r\n                  onChange={e => setFormData({ ...formData, destinatario_cnpj: e.target.value })}\r\n                  placeholder=\"00.000.000/0000-00\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>CEP *</Label>\r\n                <Input\r\n                  value={formData.destinatario_cep}\r\n                  onChange={e => setFormData({ ...formData, destinatario_cep: e.target.value })}\r\n                  placeholder=\"00000-000\"\r\n                />\r\n              </div>\r\n              <div className=\"col-span-2\">\r\n                <Label>Endereo *</Label>\r\n                <Input\r\n                  value={formData.destinatario_endereco}\r\n                  onChange={e => setFormData({ ...formData, destinatario_endereco: e.target.value })}\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>Cidade *</Label>\r\n                <Input\r\n                  value={formData.destinatario_cidade}\r\n                  onChange={e => setFormData({ ...formData, destinatario_cidade: e.target.value })}\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>UF *</Label>\r\n                <Input\r\n                  value={formData.destinatario_uf}\r\n                  onChange={e => setFormData({ ...formData, destinatario_uf: e.target.value })}\r\n                  maxLength={2}\r\n                  placeholder=\"RJ\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </TabsContent>\r\n\r\n          <TabsContent value=\"carga\" className=\"space-y-4\">\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div className=\"col-span-2\">\r\n                <Label>Produto Predominante *</Label>\r\n                <Input\r\n                  value={formData.produto_predominante}\r\n                  onChange={e => setFormData({ ...formData, produto_predominante: e.target.value })}\r\n                  placeholder=\"Ex: Produtos Diversos\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>Peso Bruto (kg) *</Label>\r\n                <Input\r\n                  type=\"number\"\r\n                  step=\"0.01\"\r\n                  value={formData.peso_bruto}\r\n                  onChange={e => setFormData({ ...formData, peso_bruto: e.target.value })}\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>Peso Cubado (kg)</Label>\r\n                <Input\r\n                  type=\"number\"\r\n                  step=\"0.01\"\r\n                  value={formData.peso_cubado}\r\n                  onChange={e => setFormData({ ...formData, peso_cubado: e.target.value })}\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>Quantidade Volumes *</Label>\r\n                <Input\r\n                  type=\"number\"\r\n                  value={formData.quantidade_volumes}\r\n                  onChange={e => setFormData({ ...formData, quantidade_volumes: e.target.value })}\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>Valor Mercadoria (R$) *</Label>\r\n                <Input\r\n                  type=\"number\"\r\n                  step=\"0.01\"\r\n                  value={formData.valor_mercadoria}\r\n                  onChange={e => setFormData({ ...formData, valor_mercadoria: e.target.value })}\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>Valor Frete (R$) *</Label>\r\n                <Input\r\n                  type=\"number\"\r\n                  step=\"0.01\"\r\n                  value={formData.valor_frete}\r\n                  onChange={e => setFormData({ ...formData, valor_frete: e.target.value })}\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>Valor Pedgio (R$)</Label>\r\n                <Input\r\n                  type=\"number\"\r\n                  step=\"0.01\"\r\n                  value={formData.valor_pedagio}\r\n                  onChange={e => setFormData({ ...formData, valor_pedagio: e.target.value })}\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>Valor Total (R$) *</Label>\r\n                <Input\r\n                  type=\"number\"\r\n                  step=\"0.01\"\r\n                  value={formData.valor_total}\r\n                  readOnly\r\n                  className=\"bg-muted\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </TabsContent>\r\n\r\n          <TabsContent value=\"transporte\" className=\"space-y-4\">\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div>\r\n                <Label>Modal</Label>\r\n                <Select value={formData.modal} onValueChange={value => setFormData({ ...formData, modal: value })}>\r\n                  <SelectTrigger>\r\n                    <SelectValue />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    <SelectItem value=\"rodoviario\">Rodovirio</SelectItem>\r\n                    <SelectItem value=\"aereo\">Areo</SelectItem>\r\n                    <SelectItem value=\"aquaviario\">Aquavirio</SelectItem>\r\n                    <SelectItem value=\"ferroviario\">Ferrovirio</SelectItem>\r\n                    <SelectItem value=\"dutoviario\">Dutovirio</SelectItem>\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n              <div>\r\n                <Label>UF Veculo *</Label>\r\n                <Input\r\n                  value={formData.uf_veiculo}\r\n                  onChange={e => setFormData({ ...formData, uf_veiculo: e.target.value })}\r\n                  maxLength={2}\r\n                  placeholder=\"SP\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>Placa Veculo *</Label>\r\n                <VehicleSelect\r\n                  value={formData.placa_veiculo}\r\n                  onChange={value => setFormData({ ...formData, placa_veiculo: value })}\r\n                  filter={v => v.type === 'caminhao' || v.type === 'cavalo'}\r\n                  placeholder=\"Selecione\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>Placa Carreta</Label>\r\n                <VehicleSelect\r\n                  value={formData.placa_carreta}\r\n                  onChange={value => setFormData({ ...formData, placa_carreta: value })}\r\n                  filter={v => v.type === 'carreta' || v.type === 'reboque'}\r\n                  placeholder=\"Selecione (Opcional)\"\r\n                />\r\n              </div>\r\n              <div className=\"col-span-2\">\r\n                <Label>RNTRC (Transportador Autnomo)</Label>\r\n                <Input\r\n                  value={formData.rntrc}\r\n                  onChange={e => setFormData({ ...formData, rntrc: e.target.value })}\r\n                />\r\n              </div>\r\n              <div className=\"col-span-2\">\r\n                <Label>Observaes</Label>\r\n                <Textarea\r\n                  value={formData.observacoes}\r\n                  onChange={e => setFormData({ ...formData, observacoes: e.target.value })}\r\n                  rows={3}\r\n                />\r\n              </div>\r\n            </div>\r\n          </TabsContent>\r\n        </Tabs>\r\n\r\n        <DialogFooter>\r\n          <Button variant=\"outline\" onClick={() => onOpenChange(false)}>\r\n            Cancelar\r\n          </Button>\r\n          <Button onClick={handleSubmit} disabled={loading}>\r\n            {loading ? 'Emitindo...' : 'Emitir CT-e'}\r\n          </Button>\r\n        </DialogFooter>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n","\"use client\";\n\n// src/radio-group.tsx\nimport * as React2 from \"react\";\nimport { composeEventHandlers as composeEventHandlers2 } from \"@radix-ui/primitive\";\nimport { useComposedRefs as useComposedRefs2 } from \"@radix-ui/react-compose-refs\";\nimport { createContextScope as createContextScope2 } from \"@radix-ui/react-context\";\nimport { Primitive as Primitive2 } from \"@radix-ui/react-primitive\";\nimport * as RovingFocusGroup from \"@radix-ui/react-roving-focus\";\nimport { createRovingFocusGroupScope } from \"@radix-ui/react-roving-focus\";\nimport { useControllableState } from \"@radix-ui/react-use-controllable-state\";\nimport { useDirection } from \"@radix-ui/react-direction\";\n\n// src/radio.tsx\nimport * as React from \"react\";\nimport { composeEventHandlers } from \"@radix-ui/primitive\";\nimport { useComposedRefs } from \"@radix-ui/react-compose-refs\";\nimport { createContextScope } from \"@radix-ui/react-context\";\nimport { useSize } from \"@radix-ui/react-use-size\";\nimport { usePrevious } from \"@radix-ui/react-use-previous\";\nimport { Presence } from \"@radix-ui/react-presence\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { jsx, jsxs } from \"react/jsx-runtime\";\nvar RADIO_NAME = \"Radio\";\nvar [createRadioContext, createRadioScope] = createContextScope(RADIO_NAME);\nvar [RadioProvider, useRadioContext] = createRadioContext(RADIO_NAME);\nvar Radio = React.forwardRef(\n  (props, forwardedRef) => {\n    const {\n      __scopeRadio,\n      name,\n      checked = false,\n      required,\n      disabled,\n      value = \"on\",\n      onCheck,\n      form,\n      ...radioProps\n    } = props;\n    const [button, setButton] = React.useState(null);\n    const composedRefs = useComposedRefs(forwardedRef, (node) => setButton(node));\n    const hasConsumerStoppedPropagationRef = React.useRef(false);\n    const isFormControl = button ? form || !!button.closest(\"form\") : true;\n    return /* @__PURE__ */ jsxs(RadioProvider, { scope: __scopeRadio, checked, disabled, children: [\n      /* @__PURE__ */ jsx(\n        Primitive.button,\n        {\n          type: \"button\",\n          role: \"radio\",\n          \"aria-checked\": checked,\n          \"data-state\": getState(checked),\n          \"data-disabled\": disabled ? \"\" : void 0,\n          disabled,\n          value,\n          ...radioProps,\n          ref: composedRefs,\n          onClick: composeEventHandlers(props.onClick, (event) => {\n            if (!checked) onCheck?.();\n            if (isFormControl) {\n              hasConsumerStoppedPropagationRef.current = event.isPropagationStopped();\n              if (!hasConsumerStoppedPropagationRef.current) event.stopPropagation();\n            }\n          })\n        }\n      ),\n      isFormControl && /* @__PURE__ */ jsx(\n        RadioBubbleInput,\n        {\n          control: button,\n          bubbles: !hasConsumerStoppedPropagationRef.current,\n          name,\n          value,\n          checked,\n          required,\n          disabled,\n          form,\n          style: { transform: \"translateX(-100%)\" }\n        }\n      )\n    ] });\n  }\n);\nRadio.displayName = RADIO_NAME;\nvar INDICATOR_NAME = \"RadioIndicator\";\nvar RadioIndicator = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeRadio, forceMount, ...indicatorProps } = props;\n    const context = useRadioContext(INDICATOR_NAME, __scopeRadio);\n    return /* @__PURE__ */ jsx(Presence, { present: forceMount || context.checked, children: /* @__PURE__ */ jsx(\n      Primitive.span,\n      {\n        \"data-state\": getState(context.checked),\n        \"data-disabled\": context.disabled ? \"\" : void 0,\n        ...indicatorProps,\n        ref: forwardedRef\n      }\n    ) });\n  }\n);\nRadioIndicator.displayName = INDICATOR_NAME;\nvar BUBBLE_INPUT_NAME = \"RadioBubbleInput\";\nvar RadioBubbleInput = React.forwardRef(\n  ({\n    __scopeRadio,\n    control,\n    checked,\n    bubbles = true,\n    ...props\n  }, forwardedRef) => {\n    const ref = React.useRef(null);\n    const composedRefs = useComposedRefs(ref, forwardedRef);\n    const prevChecked = usePrevious(checked);\n    const controlSize = useSize(control);\n    React.useEffect(() => {\n      const input = ref.current;\n      if (!input) return;\n      const inputProto = window.HTMLInputElement.prototype;\n      const descriptor = Object.getOwnPropertyDescriptor(\n        inputProto,\n        \"checked\"\n      );\n      const setChecked = descriptor.set;\n      if (prevChecked !== checked && setChecked) {\n        const event = new Event(\"click\", { bubbles });\n        setChecked.call(input, checked);\n        input.dispatchEvent(event);\n      }\n    }, [prevChecked, checked, bubbles]);\n    return /* @__PURE__ */ jsx(\n      Primitive.input,\n      {\n        type: \"radio\",\n        \"aria-hidden\": true,\n        defaultChecked: checked,\n        ...props,\n        tabIndex: -1,\n        ref: composedRefs,\n        style: {\n          ...props.style,\n          ...controlSize,\n          position: \"absolute\",\n          pointerEvents: \"none\",\n          opacity: 0,\n          margin: 0\n        }\n      }\n    );\n  }\n);\nRadioBubbleInput.displayName = BUBBLE_INPUT_NAME;\nfunction getState(checked) {\n  return checked ? \"checked\" : \"unchecked\";\n}\n\n// src/radio-group.tsx\nimport { jsx as jsx2 } from \"react/jsx-runtime\";\nvar ARROW_KEYS = [\"ArrowUp\", \"ArrowDown\", \"ArrowLeft\", \"ArrowRight\"];\nvar RADIO_GROUP_NAME = \"RadioGroup\";\nvar [createRadioGroupContext, createRadioGroupScope] = createContextScope2(RADIO_GROUP_NAME, [\n  createRovingFocusGroupScope,\n  createRadioScope\n]);\nvar useRovingFocusGroupScope = createRovingFocusGroupScope();\nvar useRadioScope = createRadioScope();\nvar [RadioGroupProvider, useRadioGroupContext] = createRadioGroupContext(RADIO_GROUP_NAME);\nvar RadioGroup = React2.forwardRef(\n  (props, forwardedRef) => {\n    const {\n      __scopeRadioGroup,\n      name,\n      defaultValue,\n      value: valueProp,\n      required = false,\n      disabled = false,\n      orientation,\n      dir,\n      loop = true,\n      onValueChange,\n      ...groupProps\n    } = props;\n    const rovingFocusGroupScope = useRovingFocusGroupScope(__scopeRadioGroup);\n    const direction = useDirection(dir);\n    const [value, setValue] = useControllableState({\n      prop: valueProp,\n      defaultProp: defaultValue ?? null,\n      onChange: onValueChange,\n      caller: RADIO_GROUP_NAME\n    });\n    return /* @__PURE__ */ jsx2(\n      RadioGroupProvider,\n      {\n        scope: __scopeRadioGroup,\n        name,\n        required,\n        disabled,\n        value,\n        onValueChange: setValue,\n        children: /* @__PURE__ */ jsx2(\n          RovingFocusGroup.Root,\n          {\n            asChild: true,\n            ...rovingFocusGroupScope,\n            orientation,\n            dir: direction,\n            loop,\n            children: /* @__PURE__ */ jsx2(\n              Primitive2.div,\n              {\n                role: \"radiogroup\",\n                \"aria-required\": required,\n                \"aria-orientation\": orientation,\n                \"data-disabled\": disabled ? \"\" : void 0,\n                dir: direction,\n                ...groupProps,\n                ref: forwardedRef\n              }\n            )\n          }\n        )\n      }\n    );\n  }\n);\nRadioGroup.displayName = RADIO_GROUP_NAME;\nvar ITEM_NAME = \"RadioGroupItem\";\nvar RadioGroupItem = React2.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeRadioGroup, disabled, ...itemProps } = props;\n    const context = useRadioGroupContext(ITEM_NAME, __scopeRadioGroup);\n    const isDisabled = context.disabled || disabled;\n    const rovingFocusGroupScope = useRovingFocusGroupScope(__scopeRadioGroup);\n    const radioScope = useRadioScope(__scopeRadioGroup);\n    const ref = React2.useRef(null);\n    const composedRefs = useComposedRefs2(forwardedRef, ref);\n    const checked = context.value === itemProps.value;\n    const isArrowKeyPressedRef = React2.useRef(false);\n    React2.useEffect(() => {\n      const handleKeyDown = (event) => {\n        if (ARROW_KEYS.includes(event.key)) {\n          isArrowKeyPressedRef.current = true;\n        }\n      };\n      const handleKeyUp = () => isArrowKeyPressedRef.current = false;\n      document.addEventListener(\"keydown\", handleKeyDown);\n      document.addEventListener(\"keyup\", handleKeyUp);\n      return () => {\n        document.removeEventListener(\"keydown\", handleKeyDown);\n        document.removeEventListener(\"keyup\", handleKeyUp);\n      };\n    }, []);\n    return /* @__PURE__ */ jsx2(\n      RovingFocusGroup.Item,\n      {\n        asChild: true,\n        ...rovingFocusGroupScope,\n        focusable: !isDisabled,\n        active: checked,\n        children: /* @__PURE__ */ jsx2(\n          Radio,\n          {\n            disabled: isDisabled,\n            required: context.required,\n            checked,\n            ...radioScope,\n            ...itemProps,\n            name: context.name,\n            ref: composedRefs,\n            onCheck: () => context.onValueChange(itemProps.value),\n            onKeyDown: composeEventHandlers2((event) => {\n              if (event.key === \"Enter\") event.preventDefault();\n            }),\n            onFocus: composeEventHandlers2(itemProps.onFocus, () => {\n              if (isArrowKeyPressedRef.current) ref.current?.click();\n            })\n          }\n        )\n      }\n    );\n  }\n);\nRadioGroupItem.displayName = ITEM_NAME;\nvar INDICATOR_NAME2 = \"RadioGroupIndicator\";\nvar RadioGroupIndicator = React2.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeRadioGroup, ...indicatorProps } = props;\n    const radioScope = useRadioScope(__scopeRadioGroup);\n    return /* @__PURE__ */ jsx2(RadioIndicator, { ...radioScope, ...indicatorProps, ref: forwardedRef });\n  }\n);\nRadioGroupIndicator.displayName = INDICATOR_NAME2;\nvar Root2 = RadioGroup;\nvar Item2 = RadioGroupItem;\nvar Indicator = RadioGroupIndicator;\nexport {\n  Indicator,\n  Item2 as Item,\n  RadioGroup,\n  RadioGroupIndicator,\n  RadioGroupItem,\n  Root2 as Root,\n  createRadioGroupScope\n};\n//# sourceMappingURL=index.mjs.map\n","import * as React from \"react\";\r\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\";\r\nimport { Circle } from \"lucide-react\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst RadioGroup = React.forwardRef<\r\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\r\n>(({ className, ...props }, ref) => {\r\n  return <RadioGroupPrimitive.Root className={cn(\"grid gap-2\", className)} {...props} ref={ref} />;\r\n});\r\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName;\r\n\r\nconst RadioGroupItem = React.forwardRef<\r\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\r\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\r\n>(({ className, ...props }, ref) => {\r\n  return (\r\n    <RadioGroupPrimitive.Item\r\n      ref={ref}\r\n      className={cn(\r\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\r\n        className,\r\n      )}\r\n      {...props}\r\n    >\r\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\r\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\r\n      </RadioGroupPrimitive.Indicator>\r\n    </RadioGroupPrimitive.Item>\r\n  );\r\n});\r\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName;\r\n\r\nexport { RadioGroup, RadioGroupItem };\r\n","import { useState } from 'react';\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { RadioGroup, RadioGroupItem } from '@/components/ui/radio-group';\r\nimport { Calendar, Key, Loader2 } from 'lucide-react';\r\nimport { supabase } from '@/integrations/supabase/client';\r\nimport { toast } from 'sonner';\r\n\r\ninterface ImportCTEDialogProps {\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n  onSuccess: () => void;\r\n}\r\n\r\nexport function ImportCTEDialog({ open, onOpenChange, onSuccess }: ImportCTEDialogProps) {\r\n  const [tipo, setTipo] = useState<'periodo' | 'chave'>('periodo');\r\n  const [dataInicial, setDataInicial] = useState('');\r\n  const [dataFinal, setDataFinal] = useState('');\r\n  const [chaveAcesso, setChaveAcesso] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleImport = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const body: any = { tipo };\r\n\r\n      if (tipo === 'periodo') {\r\n        if (!dataInicial || !dataFinal) {\r\n          toast.error('Preencha as datas inicial e final');\r\n          return;\r\n        }\r\n        body.dataInicial = dataInicial;\r\n        body.dataFinal = dataFinal;\r\n      } else {\r\n        if (!chaveAcesso) {\r\n          toast.error('Informe a chave de acesso do CT-e');\r\n          return;\r\n        }\r\n        body.chaveAcesso = chaveAcesso.replace(/\\s/g, '');\r\n      }\r\n\r\n      const { data, error } = await supabase.functions.invoke('import-cte-brasilnfe', {\r\n        body\r\n      });\r\n\r\n      if (error) throw error;\r\n\r\n      if (data.errors && data.errors.length > 0) {\r\n        toast.warning(data.message, {\r\n          description: `${data.errors.length} erro(s) encontrado(s)`\r\n        });\r\n      } else {\r\n        toast.success(data.message);\r\n      }\r\n\r\n      onSuccess();\r\n      onOpenChange(false);\r\n      \r\n      // Limpar campos\r\n      setDataInicial('');\r\n      setDataFinal('');\r\n      setChaveAcesso('');\r\n      \r\n    } catch (error) {\r\n      console.error('Erro ao importar CT-e:', error);\r\n      toast.error('Erro ao importar CT-e da BrasilNFe');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={onOpenChange}>\r\n      <DialogContent className=\"sm:max-w-md\">\r\n        <DialogHeader>\r\n          <DialogTitle>Importar CT-e da BrasilNFe</DialogTitle>\r\n        </DialogHeader>\r\n\r\n        <div className=\"space-y-6 pt-4\">\r\n          <RadioGroup value={tipo} onValueChange={(value) => setTipo(value as 'periodo' | 'chave')}>\r\n            <div className=\"flex items-center space-x-2\">\r\n              <RadioGroupItem value=\"periodo\" id=\"periodo\" />\r\n              <Label htmlFor=\"periodo\" className=\"flex items-center gap-2 cursor-pointer\">\r\n                <Calendar className=\"h-4 w-4\" />\r\n                Importar por perodo\r\n              </Label>\r\n            </div>\r\n            <div className=\"flex items-center space-x-2\">\r\n              <RadioGroupItem value=\"chave\" id=\"chave\" />\r\n              <Label htmlFor=\"chave\" className=\"flex items-center gap-2 cursor-pointer\">\r\n                <Key className=\"h-4 w-4\" />\r\n                Importar por chave de acesso\r\n              </Label>\r\n            </div>\r\n          </RadioGroup>\r\n\r\n          {tipo === 'periodo' ? (\r\n            <div className=\"space-y-4\">\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"dataInicial\">Data Inicial</Label>\r\n                <Input\r\n                  id=\"dataInicial\"\r\n                  type=\"date\"\r\n                  value={dataInicial}\r\n                  onChange={(e) => setDataInicial(e.target.value)}\r\n                />\r\n              </div>\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"dataFinal\">Data Final</Label>\r\n                <Input\r\n                  id=\"dataFinal\"\r\n                  type=\"date\"\r\n                  value={dataFinal}\r\n                  onChange={(e) => setDataFinal(e.target.value)}\r\n                />\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"chaveAcesso\">Chave de Acesso</Label>\r\n              <Input\r\n                id=\"chaveAcesso\"\r\n                placeholder=\"Digite a chave de 44 dgitos\"\r\n                value={chaveAcesso}\r\n                onChange={(e) => setChaveAcesso(e.target.value)}\r\n                maxLength={44}\r\n              />\r\n              <p className=\"text-xs text-muted-foreground\">\r\n                44 dgitos sem espaos ou formatao\r\n              </p>\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"flex gap-2 pt-4\">\r\n            <Button\r\n              variant=\"outline\"\r\n              className=\"flex-1\"\r\n              onClick={() => onOpenChange(false)}\r\n              disabled={loading}\r\n            >\r\n              Cancelar\r\n            </Button>\r\n            <Button\r\n              className=\"flex-1\"\r\n              onClick={handleImport}\r\n              disabled={loading}\r\n            >\r\n              {loading ? (\r\n                <>\r\n                  <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\r\n                  Importando...\r\n                </>\r\n              ) : (\r\n                'Importar'\r\n              )}\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n","import { VehicleSelect } from \"@/components/VehicleSelect\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport { Loader2 } from \"lucide-react\";\r\n\r\ninterface EmitirCTEDialogProps {\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n  onSuccess: () => void;\r\n}\r\n\r\nexport default function EmitirCTEDialog({ open, onOpenChange, onSuccess }: EmitirCTEDialogProps) {\r\n  const { toast } = useToast();\r\n  const [loading, setLoading] = useState(false);\r\n  const [formData, setFormData] = useState({\r\n    numero: \"\",\r\n    serie: \"1\",\r\n    tipo_tomador: \"0\",\r\n    // Tomador\r\n    tomador_cnpj: \"\",\r\n    tomador_razao: \"\",\r\n    tomador_endereco: \"\",\r\n    tomador_municipio: \"\",\r\n    tomador_uf: \"\",\r\n    tomador_cep: \"\",\r\n    // Remetente\r\n    remetente_cnpj: \"\",\r\n    remetente_razao: \"\",\r\n    remetente_endereco: \"\",\r\n    remetente_municipio: \"\",\r\n    remetente_uf: \"\",\r\n    remetente_cep: \"\",\r\n    // Destinatrio\r\n    destinatario_cnpj: \"\",\r\n    destinatario_razao: \"\",\r\n    destinatario_endereco: \"\",\r\n    destinatario_municipio: \"\",\r\n    destinatario_uf: \"\",\r\n    destinatario_cep: \"\",\r\n    // Carga\r\n    produto_predominante: \"PRODUTOS QUIMICOS\",\r\n    quantidade_volumes: \"1\",\r\n    peso_bruto: \"\",\r\n    valor_carga: \"\",\r\n    valor_total: \"\",\r\n    // Veculo\r\n    placa_veiculo: \"\",\r\n    uf_veiculo: \"PE\",\r\n    // Origem/Destino\r\n    municipio_origem: \"\",\r\n    uf_origem: \"\",\r\n    municipio_destino: \"\",\r\n    uf_destino: \"\",\r\n  });\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n\r\n    try {\r\n      const { data, error } = await supabase.functions.invoke(\"emitir-cte\", {\r\n        body: {\r\n          ...formData,\r\n          quantidade_volumes: parseInt(formData.quantidade_volumes),\r\n          peso_bruto: parseFloat(formData.peso_bruto),\r\n          valor_carga: parseFloat(formData.valor_carga),\r\n          valor_total: parseFloat(formData.valor_total),\r\n        },\r\n      });\r\n\r\n      if (error) throw error;\r\n\r\n      if (data.success) {\r\n        toast({\r\n          title: \"CT-e emitido com sucesso!\",\r\n          description: `Nmero: ${data.numero} | Chave: ${data.chave}`,\r\n        });\r\n        onSuccess();\r\n        onOpenChange(false);\r\n      } else {\r\n        throw new Error(data.error || \"Erro ao emitir CT-e\");\r\n      }\r\n    } catch (error: any) {\r\n      console.error(\"Erro:\", error);\r\n      toast({\r\n        title: \"Erro ao emitir CT-e\",\r\n        description: error.message,\r\n        variant: \"destructive\",\r\n      });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={onOpenChange}>\r\n      <DialogContent className=\"max-w-4xl max-h-[90vh] overflow-y-auto\">\r\n        <DialogHeader>\r\n          <DialogTitle>Emitir CT-e</DialogTitle>\r\n        </DialogHeader>\r\n\r\n        <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n          {/* Dados Bsicos */}\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"font-semibold\">Dados do CT-e</h3>\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div>\r\n                <Label>Nmero</Label>\r\n                <Input\r\n                  required\r\n                  value={formData.numero}\r\n                  onChange={(e) => setFormData({ ...formData, numero: e.target.value })}\r\n                  placeholder=\"000001\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>Srie</Label>\r\n                <Input\r\n                  value={formData.serie}\r\n                  onChange={(e) => setFormData({ ...formData, serie: e.target.value })}\r\n                  placeholder=\"1\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Tomador */}\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"font-semibold\">Tomador do Servio</h3>\r\n            <div>\r\n              <Label>Tipo de Tomador</Label>\r\n              <Select\r\n                value={formData.tipo_tomador}\r\n                onValueChange={(value) => setFormData({ ...formData, tipo_tomador: value })}\r\n              >\r\n                <SelectTrigger>\r\n                  <SelectValue />\r\n                </SelectTrigger>\r\n                <SelectContent>\r\n                  <SelectItem value=\"0\">Remetente</SelectItem>\r\n                  <SelectItem value=\"1\">Expedidor</SelectItem>\r\n                  <SelectItem value=\"2\">Recebedor</SelectItem>\r\n                  <SelectItem value=\"3\">Destinatrio</SelectItem>\r\n                </SelectContent>\r\n              </Select>\r\n            </div>\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div>\r\n                <Label>CNPJ</Label>\r\n                <Input\r\n                  required\r\n                  value={formData.tomador_cnpj}\r\n                  onChange={(e) => setFormData({ ...formData, tomador_cnpj: e.target.value })}\r\n                  placeholder=\"00.000.000/0000-00\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>Razo Social</Label>\r\n                <Input\r\n                  required\r\n                  value={formData.tomador_razao}\r\n                  onChange={(e) => setFormData({ ...formData, tomador_razao: e.target.value })}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"grid grid-cols-3 gap-4\">\r\n              <div className=\"col-span-2\">\r\n                <Label>Endereo</Label>\r\n                <Input\r\n                  required\r\n                  value={formData.tomador_endereco}\r\n                  onChange={(e) => setFormData({ ...formData, tomador_endereco: e.target.value })}\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>CEP</Label>\r\n                <Input\r\n                  required\r\n                  value={formData.tomador_cep}\r\n                  onChange={(e) => setFormData({ ...formData, tomador_cep: e.target.value })}\r\n                  placeholder=\"00000-000\"\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div>\r\n                <Label>Municpio</Label>\r\n                <Input\r\n                  required\r\n                  value={formData.tomador_municipio}\r\n                  onChange={(e) => setFormData({ ...formData, tomador_municipio: e.target.value })}\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>UF</Label>\r\n                <Input\r\n                  required\r\n                  maxLength={2}\r\n                  value={formData.tomador_uf}\r\n                  onChange={(e) => setFormData({ ...formData, tomador_uf: e.target.value.toUpperCase() })}\r\n                  placeholder=\"PE\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Remetente */}\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"font-semibold\">Remetente</h3>\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div>\r\n                <Label>CNPJ</Label>\r\n                <Input\r\n                  required\r\n                  value={formData.remetente_cnpj}\r\n                  onChange={(e) => setFormData({ ...formData, remetente_cnpj: e.target.value })}\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>Razo Social</Label>\r\n                <Input\r\n                  required\r\n                  value={formData.remetente_razao}\r\n                  onChange={(e) => setFormData({ ...formData, remetente_razao: e.target.value })}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div>\r\n                <Label>Municpio</Label>\r\n                <Input\r\n                  required\r\n                  value={formData.remetente_municipio}\r\n                  onChange={(e) =>\r\n                    setFormData({ ...formData, remetente_municipio: e.target.value, municipio_origem: e.target.value })\r\n                  }\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>UF</Label>\r\n                <Input\r\n                  required\r\n                  maxLength={2}\r\n                  value={formData.remetente_uf}\r\n                  onChange={(e) =>\r\n                    setFormData({\r\n                      ...formData,\r\n                      remetente_uf: e.target.value.toUpperCase(),\r\n                      uf_origem: e.target.value.toUpperCase(),\r\n                    })\r\n                  }\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Destinatrio */}\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"font-semibold\">Destinatrio</h3>\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div>\r\n                <Label>CNPJ</Label>\r\n                <Input\r\n                  required\r\n                  value={formData.destinatario_cnpj}\r\n                  onChange={(e) => setFormData({ ...formData, destinatario_cnpj: e.target.value })}\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>Razo Social</Label>\r\n                <Input\r\n                  required\r\n                  value={formData.destinatario_razao}\r\n                  onChange={(e) => setFormData({ ...formData, destinatario_razao: e.target.value })}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div>\r\n                <Label>Municpio</Label>\r\n                <Input\r\n                  required\r\n                  value={formData.destinatario_municipio}\r\n                  onChange={(e) =>\r\n                    setFormData({\r\n                      ...formData,\r\n                      destinatario_municipio: e.target.value,\r\n                      municipio_destino: e.target.value,\r\n                    })\r\n                  }\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>UF</Label>\r\n                <Input\r\n                  required\r\n                  maxLength={2}\r\n                  value={formData.destinatario_uf}\r\n                  onChange={(e) =>\r\n                    setFormData({\r\n                      ...formData,\r\n                      destinatario_uf: e.target.value.toUpperCase(),\r\n                      uf_destino: e.target.value.toUpperCase(),\r\n                    })\r\n                  }\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Carga e Valores */}\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"font-semibold\">Carga e Valores</h3>\r\n            <div className=\"grid grid-cols-3 gap-4\">\r\n              <div>\r\n                <Label>Produto</Label>\r\n                <Input\r\n                  value={formData.produto_predominante}\r\n                  onChange={(e) => setFormData({ ...formData, produto_predominante: e.target.value })}\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>Volumes</Label>\r\n                <Input\r\n                  type=\"number\"\r\n                  required\r\n                  value={formData.quantidade_volumes}\r\n                  onChange={(e) => setFormData({ ...formData, quantidade_volumes: e.target.value })}\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>Peso Bruto (kg)</Label>\r\n                <Input\r\n                  type=\"number\"\r\n                  step=\"0.01\"\r\n                  required\r\n                  value={formData.peso_bruto}\r\n                  onChange={(e) => setFormData({ ...formData, peso_bruto: e.target.value })}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div>\r\n                <Label>Valor da Carga (R$)</Label>\r\n                <Input\r\n                  type=\"number\"\r\n                  step=\"0.01\"\r\n                  required\r\n                  value={formData.valor_carga}\r\n                  onChange={(e) => setFormData({ ...formData, valor_carga: e.target.value })}\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>Valor do Frete (R$)</Label>\r\n                <Input\r\n                  type=\"number\"\r\n                  step=\"0.01\"\r\n                  required\r\n                  value={formData.valor_total}\r\n                  onChange={(e) => setFormData({ ...formData, valor_total: e.target.value })}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Veculo */}\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"font-semibold\">Veculo</h3>\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div>\r\n                <Label>Placa</Label>\r\n                <VehicleSelect\r\n                  value={formData.placa_veiculo}\r\n                  onChange={(value) => setFormData({ ...formData, placa_veiculo: value })}\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>UF</Label>\r\n                <Input\r\n                  required\r\n                  maxLength={2}\r\n                  value={formData.uf_veiculo}\r\n                  onChange={(e) => setFormData({ ...formData, uf_veiculo: e.target.value.toUpperCase() })}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex justify-end gap-2\">\r\n            <Button type=\"button\" variant=\"outline\" onClick={() => onOpenChange(false)}>\r\n              Cancelar\r\n            </Button>\r\n            <Button type=\"submit\" disabled={loading}>\r\n              {loading && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\r\n              Emitir CT-e\r\n            </Button>\r\n          </div>\r\n        </form>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n","import { useState, useEffect } from 'react';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table';\r\nimport { Plus, Search, FileText, Eye, Download } from 'lucide-react';\r\nimport { supabase } from '@/integrations/supabase/client';\r\nimport { toast } from 'sonner';\r\nimport { CTEDialog } from './CTEDialog';\r\nimport { ImportCTEDialog } from './ImportCTEDialog';\r\nimport EmitirCTEDialog from './EmitirCTEDialog';\r\nimport { format } from 'date-fns';\r\n\r\ninterface CTE {\r\n  id: string;\r\n  numero_cte: string;\r\n  status: string;\r\n  remetente_nome: string;\r\n  destinatario_nome: string;\r\n  valor_total: number;\r\n  placa_veiculo: string;\r\n  data_emissao: string;\r\n}\r\n\r\nexport function CTEManagement() {\r\n  const [ctes, setCTEs] = useState<CTE[]>([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [dialogOpen, setDialogOpen] = useState(false);\r\n  const [importDialogOpen, setImportDialogOpen] = useState(false);\r\n  const [emitirDialogOpen, setEmitirDialogOpen] = useState(false);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n\r\n  useEffect(() => {\r\n    loadCTEs();\r\n  }, []);\r\n\r\n  const loadCTEs = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from('cte')\r\n        .select('*')\r\n        .order('created_at', { ascending: false });\r\n\r\n      if (error) throw error;\r\n      setCTEs(data || []);\r\n    } catch (error) {\r\n      console.error('Erro ao carregar CT-e:', error);\r\n      toast.error('Erro ao carregar CT-e');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const getStatusBadge = (status: string) => {\r\n    const variants: Record<string, { variant: any; label: string }> = {\r\n      rascunho: { variant: 'outline', label: 'Rascunho' },\r\n      emitido: { variant: 'default', label: 'Emitido' },\r\n      autorizado: { variant: 'secondary', label: 'Autorizado' },\r\n      cancelado: { variant: 'destructive', label: 'Cancelado' },\r\n      rejeitado: { variant: 'destructive', label: 'Rejeitado' }\r\n    };\r\n\r\n    const config = variants[status] || variants.rascunho;\r\n    return <Badge variant={config.variant}>{config.label}</Badge>;\r\n  };\r\n\r\n  const filteredCTEs = ctes.filter(cte =>\r\n    cte.numero_cte.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n    cte.placa_veiculo.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n    cte.remetente_nome.toLowerCase().includes(searchTerm.toLowerCase())\r\n  );\r\n\r\n  return (\r\n    <>\r\n      <Card>\r\n        <CardHeader>\r\n          <div className=\"flex justify-between items-center\">\r\n            <CardTitle className=\"flex items-center gap-2\">\r\n              <FileText className=\"h-5 w-5\" />\r\n              Gesto de CT-e\r\n            </CardTitle>\r\n            <div className=\"flex gap-2\">\r\n              <div className=\"relative\">\r\n                <Search className=\"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground\" />\r\n                <Input\r\n                  placeholder=\"Buscar CT-e...\"\r\n                  className=\"pl-8 w-64\"\r\n                  value={searchTerm}\r\n                  onChange={e => setSearchTerm(e.target.value)}\r\n                />\r\n              </div>\r\n              <Button variant=\"outline\" onClick={() => setImportDialogOpen(true)}>\r\n                <Download className=\"mr-2 h-4 w-4\" />\r\n                Importar da BrasilNFe\r\n              </Button>\r\n              <Button onClick={() => setEmitirDialogOpen(true)}>\r\n                <Plus className=\"mr-2 h-4 w-4\" />\r\n                Emitir CT-e\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </CardHeader>\r\n        <CardContent>\r\n          {loading ? (\r\n            <div className=\"text-center py-8\">Carregando...</div>\r\n          ) : filteredCTEs.length === 0 ? (\r\n            <div className=\"text-center py-8 text-muted-foreground\">\r\n              <FileText className=\"h-12 w-12 mx-auto mb-2 opacity-50\" />\r\n              <p>Nenhum CT-e encontrado</p>\r\n            </div>\r\n          ) : (\r\n            <Table>\r\n              <TableHeader>\r\n                <TableRow>\r\n                  <TableHead>Nmero</TableHead>\r\n                  <TableHead>Data Emisso</TableHead>\r\n                  <TableHead>Remetente</TableHead>\r\n                  <TableHead>Destinatrio</TableHead>\r\n                  <TableHead>Placa</TableHead>\r\n                  <TableHead>Valor Total</TableHead>\r\n                  <TableHead>Status</TableHead>\r\n                  <TableHead>Aes</TableHead>\r\n                </TableRow>\r\n              </TableHeader>\r\n              <TableBody>\r\n                {filteredCTEs.map(cte => (\r\n                  <TableRow key={cte.id}>\r\n                    <TableCell className=\"font-mono\">{cte.numero_cte}</TableCell>\r\n                    <TableCell>\r\n                      {format(new Date(cte.data_emissao), 'dd/MM/yyyy HH:mm')}\r\n                    </TableCell>\r\n                    <TableCell>{cte.remetente_nome}</TableCell>\r\n                    <TableCell>{cte.destinatario_nome}</TableCell>\r\n                    <TableCell className=\"font-mono\">{cte.placa_veiculo}</TableCell>\r\n                    <TableCell className=\"font-semibold text-green-600\">\r\n                      R$ {cte.valor_total.toLocaleString('pt-BR', { minimumFractionDigits: 2 })}\r\n                    </TableCell>\r\n                    <TableCell>{getStatusBadge(cte.status)}</TableCell>\r\n                    <TableCell>\r\n                      <Button variant=\"ghost\" size=\"sm\">\r\n                        <Eye className=\"h-4 w-4\" />\r\n                      </Button>\r\n                    </TableCell>\r\n                  </TableRow>\r\n                ))}\r\n              </TableBody>\r\n            </Table>\r\n          )}\r\n        </CardContent>\r\n      </Card>\r\n\r\n      <CTEDialog\r\n        open={dialogOpen}\r\n        onOpenChange={setDialogOpen}\r\n        onSuccess={loadCTEs}\r\n      />\r\n\r\n      <ImportCTEDialog\r\n        open={importDialogOpen}\r\n        onOpenChange={setImportDialogOpen}\r\n        onSuccess={loadCTEs}\r\n      />\r\n\r\n      <EmitirCTEDialog\r\n        open={emitirDialogOpen}\r\n        onOpenChange={setEmitirDialogOpen}\r\n        onSuccess={loadCTEs}\r\n      />\r\n    </>\r\n  );\r\n}\r\n","import { VehicleSelect } from \"@/components/VehicleSelect\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Checkbox } from \"@/components/ui/checkbox\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport { Loader2 } from \"lucide-react\";\r\n\r\ninterface EmitirMDFEDialogProps {\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n  onSuccess: () => void;\r\n}\r\n\r\ninterface CTe {\r\n  id: string;\r\n  numero_cte: string;\r\n  chave_acesso: string;\r\n  remetente_cidade: string;\r\n  destinatario_cidade: string;\r\n  valor_total: number;\r\n  peso_bruto: number;\r\n}\r\n\r\nexport default function EmitirMDFEDialog({ open, onOpenChange, onSuccess }: EmitirMDFEDialogProps) {\r\n  const { toast } = useToast();\r\n  const [loading, setLoading] = useState(false);\r\n  const [ctes, setCtes] = useState<CTe[]>([]);\r\n  const [selectedCtes, setSelectedCtes] = useState<string[]>([]);\r\n  const [formData, setFormData] = useState({\r\n    numero: \"\",\r\n    serie: \"1\",\r\n    uf_inicio: \"PE\",\r\n    uf_fim: \"\",\r\n    ufs_percurso: \"\",\r\n    placa_cavalo: \"\",\r\n    uf_cavalo: \"PE\",\r\n    cpf_motorista: \"\",\r\n    nome_motorista: \"\",\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (open) {\r\n      loadCTes();\r\n    }\r\n  }, [open]);\r\n\r\n  const loadCTes = async () => {\r\n    const { data, error } = await supabase\r\n      .from(\"cte\")\r\n      .select(\"id, numero_cte, chave_acesso, remetente_cidade, destinatario_cidade, valor_total, peso_bruto\")\r\n      .eq(\"status\", \"autorizado\")\r\n      .is(\"trip_id\", null)\r\n      .order(\"created_at\", { ascending: false })\r\n      .limit(50);\r\n\r\n    if (error) {\r\n      console.error(\"Erro ao carregar CT-es:\", error);\r\n      return;\r\n    }\r\n\r\n    setCtes(data || []);\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n\r\n    if (selectedCtes.length === 0) {\r\n      toast({\r\n        title: \"Selecione pelo menos um CT-e\",\r\n        variant: \"destructive\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n\r\n    try {\r\n      const selectedCtesData = ctes.filter((cte) => selectedCtes.includes(cte.id));\r\n      const pesoTotal = selectedCtesData.reduce((sum, cte) => sum + cte.peso_bruto, 0);\r\n      const valorTotal = selectedCtesData.reduce((sum, cte) => sum + cte.valor_total, 0);\r\n\r\n      const { data, error } = await supabase.functions.invoke(\"emitir-mdfe\", {\r\n        body: {\r\n          ...formData,\r\n          quantidade_ctes: selectedCtes.length,\r\n          peso_bruto: pesoTotal,\r\n          valor_carga: valorTotal,\r\n          ctes: selectedCtesData.map((cte) => ({\r\n            chave: cte.chave_acesso,\r\n          })),\r\n          ufs_percurso: formData.ufs_percurso\r\n            .split(\",\")\r\n            .map((uf) => uf.trim().toUpperCase())\r\n            .filter((uf) => uf),\r\n          condutores: [\r\n            {\r\n              cpf: formData.cpf_motorista,\r\n              nome: formData.nome_motorista,\r\n            },\r\n          ],\r\n        },\r\n      });\r\n\r\n      if (error) throw error;\r\n\r\n      if (data.success) {\r\n        toast({\r\n          title: \"MDF-e emitido com sucesso!\",\r\n          description: `Nmero: ${data.numero} | Chave: ${data.chave}`,\r\n        });\r\n        onSuccess();\r\n        onOpenChange(false);\r\n      } else {\r\n        throw new Error(data.error || \"Erro ao emitir MDF-e\");\r\n      }\r\n    } catch (error: any) {\r\n      console.error(\"Erro:\", error);\r\n      toast({\r\n        title: \"Erro ao emitir MDF-e\",\r\n        description: error.message,\r\n        variant: \"destructive\",\r\n      });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const toggleCte = (cteId: string) => {\r\n    setSelectedCtes((prev) => (prev.includes(cteId) ? prev.filter((id) => id !== cteId) : [...prev, cteId]));\r\n  };\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={onOpenChange}>\r\n      <DialogContent className=\"max-w-4xl max-h-[90vh] overflow-y-auto\">\r\n        <DialogHeader>\r\n          <DialogTitle>Emitir MDF-e</DialogTitle>\r\n        </DialogHeader>\r\n\r\n        <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n          {/* Dados Bsicos */}\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"font-semibold\">Dados do MDF-e</h3>\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div>\r\n                <Label>Nmero</Label>\r\n                <Input\r\n                  required\r\n                  value={formData.numero}\r\n                  onChange={(e) => setFormData({ ...formData, numero: e.target.value })}\r\n                  placeholder=\"000001\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>Srie</Label>\r\n                <Input\r\n                  value={formData.serie}\r\n                  onChange={(e) => setFormData({ ...formData, serie: e.target.value })}\r\n                  placeholder=\"1\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Percurso */}\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"font-semibold\">Percurso</h3>\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div>\r\n                <Label>UF Incio</Label>\r\n                <Input\r\n                  required\r\n                  maxLength={2}\r\n                  value={formData.uf_inicio}\r\n                  onChange={(e) => setFormData({ ...formData, uf_inicio: e.target.value.toUpperCase() })}\r\n                  placeholder=\"PE\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>UF Fim</Label>\r\n                <Input\r\n                  required\r\n                  maxLength={2}\r\n                  value={formData.uf_fim}\r\n                  onChange={(e) => setFormData({ ...formData, uf_fim: e.target.value.toUpperCase() })}\r\n                  placeholder=\"SP\"\r\n                />\r\n              </div>\r\n            </div>\r\n            <div>\r\n              <Label>UFs do Percurso (separadas por vrgula)</Label>\r\n              <Input\r\n                value={formData.ufs_percurso}\r\n                onChange={(e) => setFormData({ ...formData, ufs_percurso: e.target.value })}\r\n                placeholder=\"PE,AL,SE,BA,MG,SP\"\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {/* Veculo */}\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"font-semibold\">Veculo de Trao</h3>\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div>\r\n                <Label>Placa</Label>\r\n                <VehicleSelect\r\n                  value={formData.placa_cavalo}\r\n                  onChange={(value) => setFormData({ ...formData, placa_cavalo: value })}\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>UF</Label>\r\n                <Input\r\n                  required\r\n                  maxLength={2}\r\n                  value={formData.uf_cavalo}\r\n                  onChange={(e) => setFormData({ ...formData, uf_cavalo: e.target.value.toUpperCase() })}\r\n                  placeholder=\"PE\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Motorista */}\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"font-semibold\">Condutor</h3>\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div>\r\n                <Label>CPF</Label>\r\n                <Input\r\n                  required\r\n                  value={formData.cpf_motorista}\r\n                  onChange={(e) => setFormData({ ...formData, cpf_motorista: e.target.value })}\r\n                  placeholder=\"000.000.000-00\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>Nome</Label>\r\n                <Input\r\n                  required\r\n                  value={formData.nome_motorista}\r\n                  onChange={(e) => setFormData({ ...formData, nome_motorista: e.target.value })}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* CT-es Disponveis */}\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"font-semibold\">CT-es para Vincular ({selectedCtes.length} selecionados)</h3>\r\n            <div className=\"border rounded-md p-4 max-h-60 overflow-y-auto space-y-2\">\r\n              {ctes.length === 0 ? (\r\n                <p className=\"text-sm text-muted-foreground\">Nenhum CT-e autorizado disponvel</p>\r\n              ) : (\r\n                ctes.map((cte) => (\r\n                  <div key={cte.id} className=\"flex items-center space-x-2 p-2 hover:bg-accent rounded\">\r\n                    <Checkbox checked={selectedCtes.includes(cte.id)} onCheckedChange={() => toggleCte(cte.id)} />\r\n                    <div className=\"flex-1 text-sm\">\r\n                      <div className=\"font-medium\">CT-e {cte.numero_cte}</div>\r\n                      <div className=\"text-muted-foreground\">\r\n                        {cte.remetente_cidade}  {cte.destinatario_cidade} | {cte.peso_bruto}kg | R${\" \"}\r\n                        {cte.valor_total.toFixed(2)}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                ))\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex justify-end gap-2\">\r\n            <Button type=\"button\" variant=\"outline\" onClick={() => onOpenChange(false)}>\r\n              Cancelar\r\n            </Button>\r\n            <Button type=\"submit\" disabled={loading || selectedCtes.length === 0}>\r\n              {loading && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\r\n              Emitir MDF-e\r\n            </Button>\r\n          </div>\r\n        </form>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n","import { useState, useEffect } from \"react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Plus, FileText, CheckCircle, XCircle } from \"lucide-react\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport EmitirMDFEDialog from \"./EmitirMDFEDialog\";\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\r\n\r\ninterface MDFE {\r\n  id: string;\r\n  numero_mdfe: string;\r\n  serie: string;\r\n  chave_acesso: string | null;\r\n  status: string;\r\n  data_emissao: string;\r\n  uf_inicio: string;\r\n  uf_fim: string;\r\n  veiculo_tracao_placa: string;\r\n  quantidade_ctes: number;\r\n  peso_total_kg: number;\r\n  valor_total_carga: number;\r\n}\r\n\r\nexport default function MDFEManagement() {\r\n  const { toast } = useToast();\r\n  const [mdfes, setMdfes] = useState<MDFE[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [emitirDialogOpen, setEmitirDialogOpen] = useState(false);\r\n\r\n  useEffect(() => {\r\n    loadMdfes();\r\n  }, []);\r\n\r\n  const loadMdfes = async () => {\r\n    setLoading(true);\r\n    const { data, error } = await supabase.from(\"mdfe\").select(\"*\").order(\"created_at\", { ascending: false });\r\n\r\n    if (error) {\r\n      console.error(\"Erro ao carregar MDF-es:\", error);\r\n      toast({\r\n        title: \"Erro ao carregar MDF-es\",\r\n        description: error.message,\r\n        variant: \"destructive\",\r\n      });\r\n    } else {\r\n      setMdfes(data || []);\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  const handleEncerrar = async (mdfe: MDFE) => {\r\n    if (!confirm(`Confirma o encerramento do MDF-e ${mdfe.numero_mdfe}?`)) return;\r\n\r\n    const municipio = prompt(\"Municpio de encerramento:\");\r\n    if (!municipio) return;\r\n\r\n    try {\r\n      const { data, error } = await supabase.functions.invoke(\"encerrar-mdfe\", {\r\n        body: {\r\n          mdfe_id: mdfe.id,\r\n          chave_acesso: mdfe.chave_acesso,\r\n          uf_encerramento: mdfe.uf_fim,\r\n          municipio_encerramento: municipio,\r\n        },\r\n      });\r\n\r\n      if (error) throw error;\r\n\r\n      if (data.success) {\r\n        toast({\r\n          title: \"MDF-e encerrado com sucesso!\",\r\n        });\r\n        loadMdfes();\r\n      } else {\r\n        throw new Error(data.error);\r\n      }\r\n    } catch (error: any) {\r\n      toast({\r\n        title: \"Erro ao encerrar MDF-e\",\r\n        description: error.message,\r\n        variant: \"destructive\",\r\n      });\r\n    }\r\n  };\r\n\r\n  const getStatusBadge = (status: string) => {\r\n    const variants: Record<string, \"default\" | \"secondary\" | \"outline\" | \"destructive\"> = {\r\n      autorizado: \"default\",\r\n      processando: \"secondary\",\r\n      encerrado: \"outline\",\r\n      cancelado: \"destructive\",\r\n    };\r\n\r\n    return <Badge variant={variants[status] || \"default\"}>{status.toUpperCase()}</Badge>;\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      <div className=\"flex justify-between items-center\">\r\n        <h2 className=\"text-2xl font-bold\">MDF-e - Manifesto Eletrnico</h2>\r\n        <Button onClick={() => setEmitirDialogOpen(true)}>\r\n          <Plus className=\"mr-2 h-4 w-4\" />\r\n          Emitir MDF-e\r\n        </Button>\r\n      </div>\r\n\r\n      <Card>\r\n        <CardHeader>\r\n          <CardTitle>MDF-es Emitidos</CardTitle>\r\n        </CardHeader>\r\n        <CardContent>\r\n          {loading ? (\r\n            <p>Carregando...</p>\r\n          ) : mdfes.length === 0 ? (\r\n            <p className=\"text-muted-foreground\">Nenhum MDF-e emitido</p>\r\n          ) : (\r\n            <Table>\r\n              <TableHeader>\r\n                <TableRow>\r\n                  <TableHead>Nmero</TableHead>\r\n                  <TableHead>Status</TableHead>\r\n                  <TableHead>Percurso</TableHead>\r\n                  <TableHead>Veculo</TableHead>\r\n                  <TableHead>CT-es</TableHead>\r\n                  <TableHead>Peso</TableHead>\r\n                  <TableHead>Valor</TableHead>\r\n                  <TableHead>Aes</TableHead>\r\n                </TableRow>\r\n              </TableHeader>\r\n              <TableBody>\r\n                {mdfes.map((mdfe) => (\r\n                  <TableRow key={mdfe.id}>\r\n                    <TableCell>\r\n                      <div>\r\n                        <div className=\"font-medium\">\r\n                          {mdfe.numero_mdfe}/{mdfe.serie}\r\n                        </div>\r\n                        <div className=\"text-xs text-muted-foreground\">\r\n                          {new Date(mdfe.data_emissao).toLocaleDateString()}\r\n                        </div>\r\n                      </div>\r\n                    </TableCell>\r\n                    <TableCell>{getStatusBadge(mdfe.status)}</TableCell>\r\n                    <TableCell>\r\n                      {mdfe.uf_inicio}  {mdfe.uf_fim}\r\n                    </TableCell>\r\n                    <TableCell>{mdfe.veiculo_tracao_placa}</TableCell>\r\n                    <TableCell className=\"text-center\">{mdfe.quantidade_ctes}</TableCell>\r\n                    <TableCell>{mdfe.peso_total_kg.toFixed(0)} kg</TableCell>\r\n                    <TableCell>R$ {mdfe.valor_total_carga.toFixed(2)}</TableCell>\r\n                    <TableCell>\r\n                      <div className=\"flex gap-2\">\r\n                        {mdfe.status === \"autorizado\" && (\r\n                          <Button size=\"sm\" variant=\"outline\" onClick={() => handleEncerrar(mdfe)}>\r\n                            <CheckCircle className=\"h-4 w-4 mr-1\" />\r\n                            Encerrar\r\n                          </Button>\r\n                        )}\r\n                        {mdfe.chave_acesso && (\r\n                          <Button\r\n                            size=\"sm\"\r\n                            variant=\"ghost\"\r\n                            onClick={() => {\r\n                              navigator.clipboard.writeText(mdfe.chave_acesso!);\r\n                              toast({ title: \"Chave copiada!\" });\r\n                            }}\r\n                          >\r\n                            <FileText className=\"h-4 w-4\" />\r\n                          </Button>\r\n                        )}\r\n                      </div>\r\n                    </TableCell>\r\n                  </TableRow>\r\n                ))}\r\n              </TableBody>\r\n            </Table>\r\n          )}\r\n        </CardContent>\r\n      </Card>\r\n\r\n      <EmitirMDFEDialog open={emitirDialogOpen} onOpenChange={setEmitirDialogOpen} onSuccess={loadMdfes} />\r\n    </div>\r\n  );\r\n}\r\n","import { useState, useEffect } from \"react\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogDescription } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { supabase } from \"@/integrations/supabase/client\";\nimport { toast } from \"sonner\";\nimport { Truck, User, Calendar, MapPin, AlertCircle, Sparkles } from \"lucide-react\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { VehicleSelect } from \"@/components/VehicleSelect\";\n\ninterface TripCreationDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  cte: any;\n  onTripCreated: () => void;\n}\n\ninterface Driver {\n  id: string;\n  full_name: string;\n  email: string;\n  available: boolean;\n}\n\nexport const TripCreationDialog = ({ open, onOpenChange, cte, onTripCreated }: TripCreationDialogProps) => {\n  const [loading, setLoading] = useState(false);\n  const [drivers, setDrivers] = useState<Driver[]>([]);\n  const [selectedDriver, setSelectedDriver] = useState(\"\");\n  const [selectedVehicle, setSelectedVehicle] = useState(\"\");\n  const [selectedCarreta, setSelectedCarreta] = useState(\"\");\n  const [estimatedDeparture, setEstimatedDeparture] = useState(\"\");\n  const [estimatedArrival, setEstimatedArrival] = useState(\"\");\n  const [notes, setNotes] = useState(\"\");\n\n  useEffect(() => {\n    if (open) {\n      loadDrivers();\n      // Pre-selecionar veculo sugerido no CT-e\n      if (cte?.placa_veiculo) {\n        setSelectedVehicle(cte.placa_veiculo);\n      }\n      // Sugerir datas\n      const tomorrow = new Date();\n      tomorrow.setDate(tomorrow.getDate() + 1);\n      tomorrow.setHours(8, 0, 0, 0);\n      setEstimatedDeparture(tomorrow.toISOString().slice(0, 16));\n      \n      const arrival = new Date(tomorrow);\n      arrival.setDate(arrival.getDate() + 2);\n      setEstimatedArrival(arrival.toISOString().slice(0, 16));\n    }\n  }, [open, cte]);\n\n  const loadDrivers = async () => {\n    // Buscar motoristas\n    const { data: driversData } = await supabase\n      .from('profiles')\n      .select('id, full_name, email')\n      .order('full_name');\n\n    // Buscar motoristas com role 'driver'\n    const { data: driverRoles } = await supabase\n      .from('user_roles')\n      .select('user_id')\n      .eq('role', 'driver');\n\n    const driverIds = driverRoles?.map(r => r.user_id) || [];\n    const availableDrivers = (driversData || [])\n      .filter(d => driverIds.includes(d.id))\n      .map(d => ({\n        id: d.id,\n        full_name: d.full_name,\n        email: d.email,\n        available: true // Pode verificar viagens ativas\n      }));\n\n    setDrivers(availableDrivers);\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!selectedDriver || !estimatedDeparture || !estimatedArrival) {\n      toast.error('Preencha todos os campos obrigatrios (Motorista e Datas)');\n      return;\n    }\n\n    if (!selectedVehicle) {\n      toast.error('Selecione um veculo (Cavalo Mecnico)');\n      return;\n    }\n\n    setLoading(true);\n\n    try {\n      // Buscar nome do motorista\n      const selectedDriverData = drivers.find(d => d.id === selectedDriver);\n      \n      // Criar viagem\n      const { data: trip, error: tripError } = await supabase\n        .from('trips')\n        .insert({\n          origin: `${cte.remetente_cidade}/${cte.remetente_uf}`,\n          destination: `${cte.destinatario_cidade}/${cte.destinatario_uf}`,\n          driver_id: selectedDriver,\n          driver_name: selectedDriverData?.full_name || 'Motorista',\n          vehicle_plate: selectedVehicle || cte.placa_veiculo || 'SEM-PLACA',\n          status: 'aprovada',\n          estimated_departure: estimatedDeparture,\n          estimated_arrival: estimatedArrival,\n          notes: notes || null,\n        })\n        .select()\n        .single();\n\n      if (tripError) throw tripError;\n\n      // Vincular CT-e  viagem\n      const { error: cteError } = await supabase\n        .from('cte')\n        .update({ trip_id: trip.id })\n        .eq('id', cte.id);\n\n      if (cteError) throw cteError;\n\n      // Criar sesso de trabalho para o motorista\n      await supabase\n        .from('driver_work_sessions')\n        .insert({\n          driver_id: selectedDriver,\n          vehicle_plate: selectedVehicle,\n          trip_id: trip.id,\n          data_inicio: estimatedDeparture,\n          status: 'planejada',\n          tipo_motorista: 'carga'\n        });\n\n      // Criar notificao para o motorista\n      await supabase\n        .from('notifications')\n        .insert({\n          user_id: selectedDriver,\n          title: ' Nova Viagem Atribuda!',\n          message: `Viagem: ${cte.remetente_cidade}/${cte.remetente_uf}  ${cte.destinatario_cidade}/${cte.destinatario_uf}\\n` +\n                   `Veculo: ${selectedVehicle}${selectedCarreta && selectedCarreta !== 'none' ? ` + Carreta ${selectedCarreta}` : ''}\\n` +\n                   `Partida: ${new Date(estimatedDeparture).toLocaleString('pt-BR')}\\n` +\n                   `CT-e: ${cte.numero_cte} - ${cte.produto_predominante}`,\n          type: 'info',\n          module: 'tms',\n          read: false\n        });\n\n      toast.success('Viagem criada com sucesso!', {\n        description: 'O motorista recebeu uma notificao com os detalhes da viagem.'\n      });\n\n      onTripCreated();\n    } catch (error: any) {\n      console.error('Erro ao criar viagem:', error);\n      toast.error('Erro ao criar viagem', {\n        description: error.message\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (!cte) return null;\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle className=\"text-2xl flex items-center gap-2\">\n            <Sparkles className=\"h-6 w-6 text-primary\" />\n            Criar Nova Viagem\n          </DialogTitle>\n          <DialogDescription>\n            Configure os detalhes da viagem para o CT-e {cte.numero_cte}\n          </DialogDescription>\n        </DialogHeader>\n\n        <form onSubmit={handleSubmit} className=\"space-y-6\">\n          {/* Informaes do CT-e */}\n          <div className=\"p-4 bg-primary/5 rounded-lg border border-primary/20\">\n            <h3 className=\"font-semibold mb-3 flex items-center gap-2\">\n              <MapPin className=\"h-4 w-4\" />\n              Rota do CT-e\n            </h3>\n            <div className=\"grid grid-cols-2 gap-4 text-sm\">\n              <div>\n                <p className=\"text-muted-foreground\">Origem</p>\n                <p className=\"font-semibold\">{cte.remetente_cidade}/{cte.remetente_uf}</p>\n              </div>\n              <div>\n                <p className=\"text-muted-foreground\">Destino</p>\n                <p className=\"font-semibold\">{cte.destinatario_cidade}/{cte.destinatario_uf}</p>\n              </div>\n              <div>\n                <p className=\"text-muted-foreground\">Produto</p>\n                <p className=\"font-semibold\">{cte.produto_predominante}</p>\n              </div>\n              <div>\n                <p className=\"text-muted-foreground\">Valor</p>\n                <p className=\"font-semibold text-green-600\">\n                  R$ {cte.valor_total.toLocaleString('pt-BR', { minimumFractionDigits: 2 })}\n                </p>\n              </div>\n            </div>\n          </div>\n\n          {/* Seleo de Motorista */}\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"driver\" className=\"flex items-center gap-2\">\n              <User className=\"h-4 w-4\" />\n              Motorista *\n            </Label>\n            <Select value={selectedDriver} onValueChange={setSelectedDriver} required>\n              <SelectTrigger id=\"driver\">\n                <SelectValue placeholder=\"Selecione um motorista\" />\n              </SelectTrigger>\n              <SelectContent>\n                {drivers.length === 0 ? (\n                  <div className=\"p-4 text-center text-sm text-muted-foreground\">\n                    <AlertCircle className=\"h-8 w-8 mx-auto mb-2 opacity-50\" />\n                    Nenhum motorista cadastrado\n                  </div>\n                ) : (\n                  drivers.map((driver) => (\n                    <SelectItem key={driver.id} value={driver.id}>\n                      <div className=\"flex items-center justify-between w-full\">\n                        <span>{driver.full_name}</span>\n                        {driver.available && (\n                          <Badge variant=\"outline\" className=\"ml-2 bg-green-500/10 text-green-600\">\n                            Disponvel\n                          </Badge>\n                        )}\n                      </div>\n                    </SelectItem>\n                  ))\n                )}\n              </SelectContent>\n            </Select>\n          </div>\n\n          {/* Seleo de Veculo (Cavalo) */}\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"vehicle\" className=\"flex items-center gap-2\">\n              <Truck className=\"h-4 w-4\" />\n              Veculo (Cavalo Mecnico) *\n            </Label>\n            <VehicleSelect \n              value={selectedVehicle} \n              onChange={setSelectedVehicle}\n              placeholder=\"Selecione um cavalo mecnico\"\n              filter={(v) => v.type?.toLowerCase() === 'cavalo' || v.type?.toLowerCase() === 'caminho'}\n            />\n          </div>\n\n          {/* Seleo de Carreta */}\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"carreta\" className=\"flex items-center gap-2\">\n              <Truck className=\"h-4 w-4\" />\n              Carreta (Opcional)\n            </Label>\n            <VehicleSelect \n              value={selectedCarreta} \n              onChange={setSelectedCarreta}\n              placeholder=\"Selecione uma carreta (se aplicvel)\"\n              filter={(v) => v.type?.toLowerCase() === 'carreta' || v.type?.toLowerCase() === 'reboque'}\n            />\n          </div>\n\n          {/* Datas */}\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"departure\" className=\"flex items-center gap-2\">\n                <Calendar className=\"h-4 w-4\" />\n                Partida Prevista *\n              </Label>\n              <Input\n                id=\"departure\"\n                type=\"datetime-local\"\n                value={estimatedDeparture}\n                onChange={(e) => setEstimatedDeparture(e.target.value)}\n                required\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"arrival\" className=\"flex items-center gap-2\">\n                <Calendar className=\"h-4 w-4\" />\n                Chegada Prevista *\n              </Label>\n              <Input\n                id=\"arrival\"\n                type=\"datetime-local\"\n                value={estimatedArrival}\n                onChange={(e) => setEstimatedArrival(e.target.value)}\n                required\n              />\n            </div>\n          </div>\n\n          {/* Observaes */}\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"notes\">Observaes</Label>\n            <Textarea\n              id=\"notes\"\n              value={notes}\n              onChange={(e) => setNotes(e.target.value)}\n              placeholder=\"Instrues especiais, pontos de ateno, etc.\"\n              rows={3}\n            />\n          </div>\n\n          {/* Botes */}\n          <div className=\"flex gap-2 justify-end pt-4 border-t\">\n            <Button\n              type=\"button\"\n              variant=\"outline\"\n              onClick={() => onOpenChange(false)}\n              disabled={loading}\n            >\n              Cancelar\n            </Button>\n            <Button\n              type=\"submit\"\n              disabled={loading}\n              className=\"bg-gradient-to-r from-primary to-primary/80\"\n            >\n              {loading ? 'Criando...' : 'Criar Viagem'}\n            </Button>\n          </div>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n};\n","import { useState, useEffect } from \"react\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport { Package, Truck, MapPin, Clock, CheckCircle, AlertCircle, Navigation } from \"lucide-react\";\r\nimport { TripCreationDialog } from \"./TripCreationDialog\";\r\nimport { toast } from \"sonner\";\r\n\r\ninterface CTEData {\r\n  id: string;\r\n  numero_cte: string;\r\n  remetente_nome: string;\r\n  remetente_cidade: string;\r\n  remetente_uf: string;\r\n  destinatario_nome: string;\r\n  destinatario_cidade: string;\r\n  destinatario_uf: string;\r\n  produto_predominante: string;\r\n  peso_bruto: number;\r\n  valor_total: number;\r\n  placa_veiculo: string;\r\n  status: string;\r\n  trip_id: string | null;\r\n}\r\n\r\ninterface TripData {\r\n  id: string;\r\n  origin: string;\r\n  destination: string;\r\n  driver_id: string;\r\n  vehicle_plate: string;\r\n  status: string;\r\n  estimated_departure: string;\r\n  estimated_arrival: string;\r\n  notes: string | null;\r\n  created_at: string;\r\n  driver?: {\r\n    full_name: string;\r\n    email: string;\r\n  };\r\n  ctes?: CTEData[];\r\n}\r\n\r\nexport const TripManagement = () => {\r\n  const [availableCTEs, setAvailableCTEs] = useState<CTEData[]>([]);\r\n  const [activeTrips, setActiveTrips] = useState<TripData[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [selectedCTE, setSelectedCTE] = useState<CTEData | null>(null);\r\n  const [showTripDialog, setShowTripDialog] = useState(false);\r\n\r\n  useEffect(() => {\r\n    loadData();\r\n  }, []);\r\n\r\n  const loadData = async () => {\r\n    setLoading(true);\r\n    await Promise.all([loadAvailableCTEs(), loadActiveTrips()]);\r\n    setLoading(false);\r\n  };\r\n\r\n  const loadAvailableCTEs = async () => {\r\n    const { data, error } = await supabase\r\n      .from('cte')\r\n      .select('*')\r\n      .is('trip_id', null)\r\n      .in('status', ['emitido', 'autorizado'])\r\n      .order('data_emissao', { ascending: false });\r\n\r\n    if (error) {\r\n      toast.error('Erro ao carregar CT-es disponveis');\r\n      return;\r\n    }\r\n\r\n    setAvailableCTEs(data || []);\r\n  };\r\n\r\n  const loadActiveTrips = async () => {\r\n    const { data: trips, error } = await supabase\r\n      .from('trips')\r\n      .select(`\r\n        *,\r\n        profiles:driver_id (full_name, email)\r\n      `)\r\n      .in('status', ['aprovada', 'em_andamento', 'planejada'])\r\n      .order('created_at', { ascending: false });\r\n\r\n    if (error) {\r\n      toast.error('Erro ao carregar viagens');\r\n      return;\r\n    }\r\n\r\n    // Carregar CT-es de cada viagem\r\n    const tripsWithCTEs = await Promise.all(\r\n      (trips || []).map(async (trip) => {\r\n        const { data: ctes } = await supabase\r\n          .from('cte')\r\n          .select('*')\r\n          .eq('trip_id', trip.id);\r\n\r\n        return {\r\n          ...trip,\r\n          driver: Array.isArray(trip.profiles) ? trip.profiles[0] : trip.profiles,\r\n          ctes: ctes || []\r\n        };\r\n      })\r\n    );\r\n\r\n    setActiveTrips(tripsWithCTEs);\r\n  };\r\n\r\n  const handleCreateTrip = (cte: CTEData) => {\r\n    setSelectedCTE(cte);\r\n    setShowTripDialog(true);\r\n  };\r\n\r\n  const handleTripCreated = () => {\r\n    setShowTripDialog(false);\r\n    setSelectedCTE(null);\r\n    loadData();\r\n    toast.success('Viagem criada! O motorista j pode visualizar no app.');\r\n  };\r\n\r\n  const getStatusColor = (status: string) => {\r\n    const colors = {\r\n      planejada: 'bg-blue-500/20 text-blue-600 border-blue-500/30',\r\n      aprovada: 'bg-green-500/20 text-green-600 border-green-500/30',\r\n      em_andamento: 'bg-purple-500/20 text-purple-600 border-purple-500/30',\r\n      concluida: 'bg-gray-500/20 text-gray-600 border-gray-500/30',\r\n    };\r\n    return colors[status as keyof typeof colors] || 'bg-gray-500/20 text-gray-600';\r\n  };\r\n\r\n  const calculateDistance = (origin: string, destination: string) => {\r\n    // Simulao - em produo usar API de mapas\r\n    return Math.floor(Math.random() * 800) + 200;\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Tabs defaultValue=\"available\" className=\"w-full\">\r\n        <TabsList className=\"grid w-full grid-cols-2\">\r\n          <TabsTrigger value=\"available\" className=\"gap-2\">\r\n            <Package className=\"h-4 w-4\" />\r\n            CT-es Disponveis\r\n            {availableCTEs.length > 0 && (\r\n              <Badge variant=\"secondary\" className=\"ml-2\">{availableCTEs.length}</Badge>\r\n            )}\r\n          </TabsTrigger>\r\n          <TabsTrigger value=\"active\" className=\"gap-2\">\r\n            <Truck className=\"h-4 w-4\" />\r\n            Viagens Ativas\r\n            {activeTrips.length > 0 && (\r\n              <Badge variant=\"secondary\" className=\"ml-2\">{activeTrips.length}</Badge>\r\n            )}\r\n          </TabsTrigger>\r\n        </TabsList>\r\n\r\n        <TabsContent value=\"available\" className=\"space-y-4 mt-6\">\r\n          <div className=\"flex items-center justify-between mb-4\">\r\n            <div>\r\n              <h3 className=\"text-lg font-semibold\">CT-es Aguardando Alocao</h3>\r\n              <p className=\"text-sm text-muted-foreground\">\r\n                Selecione um CT-e para criar uma viagem\r\n              </p>\r\n            </div>\r\n          </div>\r\n\r\n          {loading ? (\r\n            <div className=\"text-center py-12 text-muted-foreground\">\r\n              Carregando CT-es...\r\n            </div>\r\n          ) : availableCTEs.length === 0 ? (\r\n            <Card className=\"border-dashed\">\r\n              <CardContent className=\"flex flex-col items-center justify-center py-12 text-center\">\r\n                <Package className=\"h-12 w-12 text-muted-foreground mb-4 opacity-50\" />\r\n                <h3 className=\"font-semibold text-lg mb-2\">Nenhum CT-e disponvel</h3>\r\n                <p className=\"text-sm text-muted-foreground max-w-sm\">\r\n                  Todos os CT-es emitidos j foram alocados para viagens ou no h CT-es cadastrados.\r\n                </p>\r\n              </CardContent>\r\n            </Card>\r\n          ) : (\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4\">\r\n              {availableCTEs.map((cte) => (\r\n                <Card key={cte.id} className=\"hover:shadow-lg transition-all duration-300 border-2 hover:border-primary/50\">\r\n                  <CardHeader className=\"pb-3\">\r\n                    <div className=\"flex items-start justify-between\">\r\n                      <div className=\"space-y-1\">\r\n                        <CardTitle className=\"text-lg flex items-center gap-2\">\r\n                          <Package className=\"h-5 w-5 text-primary\" />\r\n                          CT-e {cte.numero_cte}\r\n                        </CardTitle>\r\n                        <Badge variant=\"outline\" className=\"bg-blue-500/10 text-blue-600 border-blue-500/30\">\r\n                          {cte.status === 'emitido' ? 'Emitido' : 'Autorizado'}\r\n                        </Badge>\r\n                      </div>\r\n                      <Button \r\n                        onClick={() => handleCreateTrip(cte)}\r\n                        className=\"bg-gradient-to-r from-primary to-primary/80\"\r\n                      >\r\n                        <Truck className=\"mr-2 h-4 w-4\" />\r\n                        Criar Viagem\r\n                      </Button>\r\n                    </div>\r\n                  </CardHeader>\r\n                  <CardContent className=\"space-y-4\">\r\n                    {/* Rota */}\r\n                    <div className=\"space-y-2 p-3 bg-muted/30 rounded-lg\">\r\n                      <div className=\"flex items-start gap-2\">\r\n                        <MapPin className=\"h-5 w-5 text-green-600 mt-0.5 flex-shrink-0\" />\r\n                        <div className=\"flex-1 min-w-0\">\r\n                          <p className=\"font-semibold text-sm truncate\">{cte.remetente_nome}</p>\r\n                          <p className=\"text-xs text-muted-foreground\">\r\n                            {cte.remetente_cidade}/{cte.remetente_uf}\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n                      \r\n                      <div className=\"flex items-center gap-2 pl-2\">\r\n                        <div className=\"h-8 w-px bg-gradient-to-b from-green-600 to-red-600\" />\r\n                        <span className=\"text-xs text-muted-foreground\">\r\n                          ~{calculateDistance(cte.remetente_cidade, cte.destinatario_cidade)} km\r\n                        </span>\r\n                      </div>\r\n\r\n                      <div className=\"flex items-start gap-2\">\r\n                        <MapPin className=\"h-5 w-5 text-red-600 mt-0.5 flex-shrink-0\" />\r\n                        <div className=\"flex-1 min-w-0\">\r\n                          <p className=\"font-semibold text-sm truncate\">{cte.destinatario_nome}</p>\r\n                          <p className=\"text-xs text-muted-foreground\">\r\n                            {cte.destinatario_cidade}/{cte.destinatario_uf}\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* Detalhes da Carga */}\r\n                    <div className=\"grid grid-cols-2 gap-3\">\r\n                      <div className=\"p-2 bg-primary/5 rounded-lg\">\r\n                        <p className=\"text-xs text-muted-foreground\">Produto</p>\r\n                        <p className=\"font-semibold text-sm truncate\">{cte.produto_predominante}</p>\r\n                      </div>\r\n                      <div className=\"p-2 bg-primary/5 rounded-lg\">\r\n                        <p className=\"text-xs text-muted-foreground\">Veculo Sugerido</p>\r\n                        <p className=\"font-semibold text-sm font-mono\">{cte.placa_veiculo}</p>\r\n                      </div>\r\n                      <div className=\"p-2 bg-primary/5 rounded-lg\">\r\n                        <p className=\"text-xs text-muted-foreground\">Peso</p>\r\n                        <p className=\"font-semibold text-sm\">{cte.peso_bruto.toLocaleString('pt-BR')} kg</p>\r\n                      </div>\r\n                      <div className=\"p-2 bg-green-500/10 rounded-lg\">\r\n                        <p className=\"text-xs text-muted-foreground\">Valor</p>\r\n                        <p className=\"font-semibold text-sm text-green-600\">\r\n                          R$ {cte.valor_total.toLocaleString('pt-BR', { minimumFractionDigits: 2 })}\r\n                        </p>\r\n                      </div>\r\n                    </div>\r\n                  </CardContent>\r\n                </Card>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </TabsContent>\r\n\r\n        <TabsContent value=\"active\" className=\"space-y-4 mt-6\">\r\n          <div className=\"flex items-center justify-between mb-4\">\r\n            <div>\r\n              <h3 className=\"text-lg font-semibold\">Viagens em Operao</h3>\r\n              <p className=\"text-sm text-muted-foreground\">\r\n                Acompanhe todas as viagens planejadas e em andamento\r\n              </p>\r\n            </div>\r\n          </div>\r\n\r\n          {loading ? (\r\n            <div className=\"text-center py-12 text-muted-foreground\">\r\n              Carregando viagens...\r\n            </div>\r\n          ) : activeTrips.length === 0 ? (\r\n            <Card className=\"border-dashed\">\r\n              <CardContent className=\"flex flex-col items-center justify-center py-12 text-center\">\r\n                <Truck className=\"h-12 w-12 text-muted-foreground mb-4 opacity-50\" />\r\n                <h3 className=\"font-semibold text-lg mb-2\">Nenhuma viagem ativa</h3>\r\n                <p className=\"text-sm text-muted-foreground max-w-sm\">\r\n                  Crie viagens a partir dos CT-es disponveis para comear o acompanhamento.\r\n                </p>\r\n              </CardContent>\r\n            </Card>\r\n          ) : (\r\n            <div className=\"space-y-4\">\r\n              {activeTrips.map((trip) => (\r\n                <Card key={trip.id} className=\"hover:shadow-lg transition-all duration-300\">\r\n                  <CardHeader className=\"pb-3\">\r\n                    <div className=\"flex items-start justify-between\">\r\n                      <div className=\"space-y-2\">\r\n                        <div className=\"flex items-center gap-3\">\r\n                          <CardTitle className=\"text-lg flex items-center gap-2\">\r\n                            <Truck className=\"h-5 w-5 text-primary\" />\r\n                            {trip.origin}  {trip.destination}\r\n                          </CardTitle>\r\n                          <Badge className={getStatusColor(trip.status)}>\r\n                            {trip.status === 'planejada' ? 'Planejada' :\r\n                             trip.status === 'aprovada' ? 'Aprovada' :\r\n                             trip.status === 'em_andamento' ? 'Em Andamento' : 'Concluda'}\r\n                          </Badge>\r\n                        </div>\r\n                        <div className=\"flex items-center gap-4 text-sm text-muted-foreground\">\r\n                          <span className=\"flex items-center gap-1\">\r\n                            <Truck className=\"h-4 w-4\" />\r\n                            {trip.vehicle_plate}\r\n                          </span>\r\n                          {trip.driver && (\r\n                            <span className=\"flex items-center gap-1\">\r\n                               {trip.driver.full_name}\r\n                            </span>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </CardHeader>\r\n                  <CardContent className=\"space-y-4\">\r\n                    {/* Timeline */}\r\n                    <div className=\"grid grid-cols-2 gap-4 p-3 bg-muted/30 rounded-lg\">\r\n                      <div>\r\n                        <p className=\"text-xs text-muted-foreground mb-1\">Partida Prevista</p>\r\n                        <p className=\"font-semibold text-sm flex items-center gap-1\">\r\n                          <Clock className=\"h-4 w-4\" />\r\n                          {new Date(trip.estimated_departure).toLocaleString('pt-BR')}\r\n                        </p>\r\n                      </div>\r\n                      <div>\r\n                        <p className=\"text-xs text-muted-foreground mb-1\">Chegada Prevista</p>\r\n                        <p className=\"font-semibold text-sm flex items-center gap-1\">\r\n                          <Clock className=\"h-4 w-4\" />\r\n                          {new Date(trip.estimated_arrival).toLocaleString('pt-BR')}\r\n                        </p>\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* CT-es Vinculados */}\r\n                    {trip.ctes && trip.ctes.length > 0 && (\r\n                      <div>\r\n                        <p className=\"text-sm font-semibold mb-2 flex items-center gap-2\">\r\n                          <Package className=\"h-4 w-4\" />\r\n                          CT-es Vinculados ({trip.ctes.length})\r\n                        </p>\r\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-2\">\r\n                          {trip.ctes.map((cte) => (\r\n                            <div key={cte.id} className=\"p-2 bg-primary/5 rounded border border-primary/20\">\r\n                              <div className=\"flex items-center justify-between\">\r\n                                <span className=\"text-xs font-mono font-semibold\">{cte.numero_cte}</span>\r\n                                <Badge variant=\"outline\" className=\"text-xs\">\r\n                                  R$ {cte.valor_total.toLocaleString('pt-BR', { minimumFractionDigits: 2 })}\r\n                                </Badge>\r\n                              </div>\r\n                              <p className=\"text-xs text-muted-foreground mt-1 truncate\">\r\n                                {cte.produto_predominante}\r\n                              </p>\r\n                            </div>\r\n                          ))}\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n\r\n                    {trip.notes && (\r\n                      <div className=\"p-2 bg-blue-500/5 rounded border border-blue-500/20\">\r\n                        <p className=\"text-xs text-muted-foreground\">Observaes</p>\r\n                        <p className=\"text-sm\">{trip.notes}</p>\r\n                      </div>\r\n                    )}\r\n\r\n                    {/* Aes */}\r\n                    <div className=\"flex gap-2\">\r\n                      <Button variant=\"outline\" className=\"flex-1\" size=\"sm\">\r\n                        <Navigation className=\"mr-2 h-4 w-4\" />\r\n                        Ver Rastreamento\r\n                      </Button>\r\n                      {trip.status === 'planejada' && (\r\n                        <Button \r\n                          className=\"flex-1 bg-green-600 hover:bg-green-700\" \r\n                          size=\"sm\"\r\n                          onClick={async () => {\r\n                            await supabase\r\n                              .from('trips')\r\n                              .update({ status: 'aprovada' })\r\n                              .eq('id', trip.id);\r\n                            loadData();\r\n                            toast.success('Viagem aprovada!');\r\n                          }}\r\n                        >\r\n                          <CheckCircle className=\"mr-2 h-4 w-4\" />\r\n                          Aprovar\r\n                        </Button>\r\n                      )}\r\n                    </div>\r\n                  </CardContent>\r\n                </Card>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </TabsContent>\r\n      </Tabs>\r\n\r\n      <TripCreationDialog\r\n        open={showTripDialog}\r\n        onOpenChange={setShowTripDialog}\r\n        cte={selectedCTE}\r\n        onTripCreated={handleTripCreated}\r\n      />\r\n    </>\r\n  );\r\n};\r\n","import { useState, useEffect } from \"react\";\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { VehicleSelect } from \"@/components/VehicleSelect\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport { toast } from \"sonner\";\r\nimport { Loader2 } from \"lucide-react\";\r\n\r\ninterface OrdemColetaDialogProps {\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n  ordem?: any;\r\n  onSuccess?: () => void;\r\n}\r\n\r\nexport function OrdemColetaDialog({ open, onOpenChange, ordem, onSuccess }: OrdemColetaDialogProps) {\r\n  const [loading, setLoading] = useState(false);\r\n  const [formData, setFormData] = useState({\r\n    numero_ordem: '',\r\n    fornecedor_nome: '',\r\n    fornecedor_cidade: '',\r\n    fornecedor_uf: '',\r\n    cliente_nome: '',\r\n    cliente_cnpj: '',\r\n    motorista_nome: '',\r\n    motorista_telefone: '',\r\n    placa_cavalo: '',\r\n    placa_carreta: '',\r\n    capacidade_carreta: '',\r\n    produto: '',\r\n    pedido_venda: ''\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (open) {\r\n      if (ordem) {\r\n        setFormData({\r\n          numero_ordem: ordem.numero_ordem || '',\r\n          fornecedor_nome: ordem.fornecedor_nome || '',\r\n          fornecedor_cidade: ordem.fornecedor_cidade || '',\r\n          fornecedor_uf: ordem.fornecedor_uf || '',\r\n          cliente_nome: ordem.cliente_nome || '',\r\n          cliente_cnpj: ordem.cliente_cnpj || '',\r\n          motorista_nome: ordem.motorista_nome || '',\r\n          motorista_telefone: ordem.motorista_telefone || '',\r\n          placa_cavalo: ordem.placa_cavalo || '',\r\n          placa_carreta: ordem.placa_carreta || '',\r\n          capacidade_carreta: ordem.capacidade_carreta || '',\r\n          produto: ordem.produto || '',\r\n          pedido_venda: ordem.pedido_venda || ''\r\n        });\r\n      } else {\r\n        generateNumeroOrdem();\r\n      }\r\n    }\r\n  }, [open, ordem]);\r\n\r\n  const generateNumeroOrdem = () => {\r\n    const now = new Date();\r\n    const numero = `OC-${now.getFullYear()}${String(now.getMonth() + 1).padStart(2, '0')}${String(now.getDate()).padStart(2, '0')}-${Math.floor(Math.random() * 10000).toString().padStart(4, '0')}`;\r\n    setFormData(prev => ({ ...prev, numero_ordem: numero }));\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n\r\n    try {\r\n      const { data: { user } } = await supabase.auth.getUser();\r\n      \r\n      if (ordem) {\r\n        const { error } = await supabase\r\n          .from('ordem_coleta')\r\n          .update(formData)\r\n          .eq('id', ordem.id);\r\n        \r\n        if (error) throw error;\r\n        toast.success('Ordem de coleta atualizada!');\r\n      } else {\r\n        const { error } = await supabase\r\n          .from('ordem_coleta')\r\n          .insert({ ...formData, created_by: user?.id });\r\n        \r\n        if (error) throw error;\r\n        toast.success('Ordem de coleta criada!');\r\n      }\r\n\r\n      onSuccess?.();\r\n      onOpenChange(false);\r\n    } catch (error: any) {\r\n      console.error('Erro:', error);\r\n      toast.error(error.message || 'Erro ao salvar ordem de coleta');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={onOpenChange}>\r\n      <DialogContent className=\"max-w-3xl max-h-[90vh] overflow-y-auto\">\r\n        <DialogHeader>\r\n          <DialogTitle>{ordem ? 'Editar' : 'Nova'} Ordem de Coleta</DialogTitle>\r\n        </DialogHeader>\r\n        \r\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n          <div className=\"grid grid-cols-2 gap-4\">\r\n            <div>\r\n              <Label>Nmero da Ordem</Label>\r\n              <Input value={formData.numero_ordem} onChange={e => setFormData({...formData, numero_ordem: e.target.value})} required />\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"space-y-2\">\r\n            <h3 className=\"font-semibold\">Fornecedor</h3>\r\n            <div className=\"grid grid-cols-3 gap-4\">\r\n              <div className=\"col-span-2\">\r\n                <Label>Nome</Label>\r\n                <Input value={formData.fornecedor_nome} onChange={e => setFormData({...formData, fornecedor_nome: e.target.value})} required />\r\n              </div>\r\n              <div>\r\n                <Label>Cidade</Label>\r\n                <Input value={formData.fornecedor_cidade} onChange={e => setFormData({...formData, fornecedor_cidade: e.target.value})} />\r\n              </div>\r\n              <div>\r\n                <Label>UF</Label>\r\n                <Input value={formData.fornecedor_uf} onChange={e => setFormData({...formData, fornecedor_uf: e.target.value})} maxLength={2} />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"space-y-2\">\r\n            <h3 className=\"font-semibold\">Destino / Cliente</h3>\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div>\r\n                <Label>Nome</Label>\r\n                <Input value={formData.cliente_nome} onChange={e => setFormData({...formData, cliente_nome: e.target.value})} required />\r\n              </div>\r\n              <div>\r\n                <Label>CNPJ</Label>\r\n                <Input value={formData.cliente_cnpj} onChange={e => setFormData({...formData, cliente_cnpj: e.target.value})} required />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"space-y-2\">\r\n            <h3 className=\"font-semibold\">Motorista</h3>\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div>\r\n                <Label>Nome</Label>\r\n                <Input value={formData.motorista_nome} onChange={e => setFormData({...formData, motorista_nome: e.target.value})} required />\r\n              </div>\r\n              <div>\r\n                <Label>Telefone</Label>\r\n                <Input value={formData.motorista_telefone} onChange={e => setFormData({...formData, motorista_telefone: e.target.value})} />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"space-y-2\">\r\n            <h3 className=\"font-semibold\">Veculos</h3>\r\n            <div className=\"grid grid-cols-3 gap-4\">\r\n              <div>\r\n                <Label>Placa Cavalo</Label>\r\n                <VehicleSelect \r\n                  value={formData.placa_cavalo} \r\n                  onChange={v => setFormData({...formData, placa_cavalo: v})}\r\n                  filter={v => v.type === 'caminhao' || v.type === 'cavalo'}\r\n                  placeholder=\"Selecione\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>Placa Carreta</Label>\r\n                <VehicleSelect \r\n                  value={formData.placa_carreta} \r\n                  onChange={v => setFormData({...formData, placa_carreta: v})}\r\n                  filter={v => v.type === 'carreta' || v.type === 'reboque'}\r\n                  placeholder=\"Selecione\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>Capacidade</Label>\r\n                <Input value={formData.capacidade_carreta} onChange={e => setFormData({...formData, capacidade_carreta: e.target.value})} placeholder=\"Ex: 24.000 LT - 36 TON\" />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"grid grid-cols-2 gap-4\">\r\n            <div>\r\n              <Label>Produto</Label>\r\n              <Input value={formData.produto} onChange={e => setFormData({...formData, produto: e.target.value})} required />\r\n            </div>\r\n            <div>\r\n              <Label>Pedido de Venda</Label>\r\n              <Input value={formData.pedido_venda} onChange={e => setFormData({...formData, pedido_venda: e.target.value})} />\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex justify-end gap-2\">\r\n            <Button type=\"button\" variant=\"outline\" onClick={() => onOpenChange(false)}>Cancelar</Button>\r\n            <Button type=\"submit\" disabled={loading}>\r\n              {loading && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\r\n              {ordem ? 'Atualizar' : 'Criar'}\r\n            </Button>\r\n          </div>\r\n        </form>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}","import { useState, useEffect } from \"react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Card } from \"@/components/ui/card\";\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport { toast } from \"sonner\";\r\nimport { Plus, Search, FileText, Download } from \"lucide-react\";\r\nimport { OrdemColetaDialog } from \"./OrdemColetaDialog\";\r\nimport { format } from \"date-fns\";\r\n\r\nexport function OrdemColetaManagement() {\r\n  const [ordens, setOrdens] = useState<any[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [searchTerm, setSearchTerm] = useState(\"\");\r\n  const [dialogOpen, setDialogOpen] = useState(false);\r\n  const [selectedOrdem, setSelectedOrdem] = useState<any>(null);\r\n\r\n  useEffect(() => {\r\n    loadOrdens();\r\n  }, []);\r\n\r\n  const loadOrdens = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from('ordem_coleta')\r\n        .select('*')\r\n        .order('data_emissao', { ascending: false });\r\n\r\n      if (error) throw error;\r\n      setOrdens(data || []);\r\n    } catch (error: any) {\r\n      toast.error('Erro ao carregar ordens de coleta');\r\n      console.error(error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleGeneratePDF = async (ordem: any) => {\r\n    try {\r\n      toast.info('Gerando PDF...');\r\n      \r\n      const { data, error } = await supabase.functions.invoke('generate-ordem-coleta-pdf', {\r\n        body: { ordem_id: ordem.id }\r\n      });\r\n\r\n      if (error) throw error;\r\n\r\n      // Criar um elemento temporrio para renderizar o HTML\r\n      const printWindow = window.open('', '_blank');\r\n      if (printWindow) {\r\n        printWindow.document.write(data.html);\r\n        printWindow.document.close();\r\n        printWindow.focus();\r\n        \r\n        // Aguardar um pouco para garantir que o contedo foi carregado\r\n        setTimeout(() => {\r\n          printWindow.print();\r\n        }, 250);\r\n      }\r\n      \r\n      toast.success('PDF gerado com sucesso!');\r\n    } catch (error: any) {\r\n      console.error('Erro ao gerar PDF:', error);\r\n      toast.error('Erro ao gerar PDF');\r\n    }\r\n  };\r\n\r\n  const filteredOrdens = ordens.filter(ordem =>\r\n    ordem.numero_ordem?.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n    ordem.cliente_nome?.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n    ordem.motorista_nome?.toLowerCase().includes(searchTerm.toLowerCase())\r\n  );\r\n\r\n  const getStatusBadge = (status: string) => {\r\n    const variants: Record<string, \"default\" | \"secondary\" | \"destructive\" | \"outline\"> = {\r\n      pendente: \"secondary\",\r\n      coletado: \"default\",\r\n      cancelado: \"destructive\"\r\n    };\r\n    return <Badge variant={variants[status] || \"outline\"}>{status}</Badge>;\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <h2 className=\"text-2xl font-bold\">Ordens de Coleta</h2>\r\n        <Button onClick={() => { setSelectedOrdem(null); setDialogOpen(true); }}>\r\n          <Plus className=\"mr-2 h-4 w-4\" />\r\n          Nova Ordem\r\n        </Button>\r\n      </div>\r\n\r\n      <Card className=\"p-4\">\r\n        <div className=\"flex items-center gap-2 mb-4\">\r\n          <Search className=\"h-4 w-4 text-muted-foreground\" />\r\n          <Input\r\n            placeholder=\"Buscar por nmero, cliente ou motorista...\"\r\n            value={searchTerm}\r\n            onChange={(e) => setSearchTerm(e.target.value)}\r\n            className=\"max-w-sm\"\r\n          />\r\n        </div>\r\n\r\n        {loading ? (\r\n          <div className=\"text-center py-8 text-muted-foreground\">Carregando...</div>\r\n        ) : filteredOrdens.length === 0 ? (\r\n          <div className=\"text-center py-8 text-muted-foreground\">\r\n            <FileText className=\"h-12 w-12 mx-auto mb-2 opacity-50\" />\r\n            <p>Nenhuma ordem de coleta encontrada</p>\r\n          </div>\r\n        ) : (\r\n          <Table>\r\n            <TableHeader>\r\n              <TableRow>\r\n                <TableHead>Nmero</TableHead>\r\n                <TableHead>Data</TableHead>\r\n                <TableHead>Cliente</TableHead>\r\n                <TableHead>Motorista</TableHead>\r\n                <TableHead>Placas</TableHead>\r\n                <TableHead>Produto</TableHead>\r\n                <TableHead>Status</TableHead>\r\n                <TableHead>Aes</TableHead>\r\n              </TableRow>\r\n            </TableHeader>\r\n            <TableBody>\r\n              {filteredOrdens.map((ordem) => (\r\n                <TableRow key={ordem.id}>\r\n                  <TableCell className=\"font-medium\">{ordem.numero_ordem}</TableCell>\r\n                  <TableCell>{format(new Date(ordem.data_emissao), 'dd/MM/yyyy')}</TableCell>\r\n                  <TableCell>{ordem.cliente_nome}</TableCell>\r\n                  <TableCell>{ordem.motorista_nome}</TableCell>\r\n                  <TableCell>\r\n                    <div className=\"text-sm\">\r\n                      {ordem.placa_cavalo}\r\n                      {ordem.placa_carreta && ` / ${ordem.placa_carreta}`}\r\n                    </div>\r\n                  </TableCell>\r\n                  <TableCell>{ordem.produto}</TableCell>\r\n                  <TableCell>{getStatusBadge(ordem.status)}</TableCell>\r\n                  <TableCell>\r\n                    <div className=\"flex gap-2\">\r\n                      <Button\r\n                        size=\"sm\"\r\n                        variant=\"outline\"\r\n                        onClick={() => handleGeneratePDF(ordem)}\r\n                      >\r\n                        <Download className=\"h-4 w-4\" />\r\n                      </Button>\r\n                      <Button\r\n                        size=\"sm\"\r\n                        variant=\"ghost\"\r\n                        onClick={() => { setSelectedOrdem(ordem); setDialogOpen(true); }}\r\n                      >\r\n                        Editar\r\n                      </Button>\r\n                    </div>\r\n                  </TableCell>\r\n                </TableRow>\r\n              ))}\r\n            </TableBody>\r\n          </Table>\r\n        )}\r\n      </Card>\r\n\r\n      <OrdemColetaDialog\r\n        open={dialogOpen}\r\n        onOpenChange={setDialogOpen}\r\n        ordem={selectedOrdem}\r\n        onSuccess={loadOrdens}\r\n      />\r\n    </div>\r\n  );\r\n}","import { useEffect, useState } from \"react\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\n\r\nexport function VehicleList() {\r\n  const [vehicles, setVehicles] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    async function loadVehicles() {\r\n      setLoading(true);\r\n\r\n      const { data, error } = await supabase\r\n        .from(\"vehicles\")\r\n        .select(\"*\") //  FIX AQUI  removeu o filtro errado\r\n        .order(\"placa\", { ascending: true });\r\n\r\n      if (error) {\r\n        console.error(\"Erro ao carregar veculos:\", error);\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      setVehicles(data || []);\r\n      setLoading(false);\r\n    }\r\n\r\n    loadVehicles();\r\n  }, []);\r\n\r\n  if (loading) {\r\n    return <p>Carregando veculos...</p>;\r\n  }\r\n\r\n  return (\r\n    <div style={{ padding: \"16px\" }}>\r\n      <h2 style={{ fontSize: \"20px\", marginBottom: \"12px\" }}>Lista de Veculos</h2>\r\n\r\n      {vehicles.length === 0 && <p>Nenhum veculo encontrado.</p>}\r\n\r\n      <ul style={{ listStyle: \"none\", padding: 0 }}>\r\n        {vehicles.map((v) => (\r\n          <li\r\n            key={v.id}\r\n            style={{\r\n              padding: \"12px\",\r\n              marginBottom: \"10px\",\r\n              background: \"#f5f5f5\",\r\n              borderRadius: \"6px\",\r\n            }}\r\n          >\r\n            <strong>Placa:</strong> {v.placa} <br />\r\n            <strong>Tipo:</strong> {v.tipo} <br />\r\n            <strong>Modelo:</strong> {v.modelo} <br />\r\n            <strong>Proprietrio:</strong> {v.proprietario || \"\"}\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n","export function estimateRouteCost(params: { distanceKm: number; avgConsumptionKmPerLiter: number; fuelPricePerLiter: number; tolls?: number; variableCostPerKm?: number; fixedCost?: number }) {\n  const distanceKm = Math.max(0, params.distanceKm || 0);\n  const kmpl = Math.max(0.1, params.avgConsumptionKmPerLiter || 3);\n  const fuelPrice = Math.max(0, params.fuelPricePerLiter || 5);\n  const tolls = Math.max(0, params.tolls || 0);\n  const varPerKm = Math.max(0, params.variableCostPerKm || 0.5);\n  const fixedCost = Math.max(0, params.fixedCost || 0);\n  const liters = distanceKm / kmpl;\n  const fuelCost = liters * fuelPrice;\n  const variableCost = varPerKm * distanceKm;\n  const total = fixedCost + fuelCost + tolls + variableCost;\n  return { total, fuelCost, tolls, variableCost, liters };\n}\n\n","import { useState } from \"react\";\nimport { Card } from \"@/components/ui/card\";\nimport { Input } from \"@/components/ui/input\";\nimport { Button } from \"@/components/ui/button\";\nimport { estimateRouteCost } from \"@/utils/costEstimator\";\n\nexport function CostEstimator() {\n  const [form, setForm] = useState({ distanceKm: \"\", avgConsumptionKmPerLiter: \"3.5\", fuelPricePerLiter: \"6.00\", tolls: \"0\", variableCostPerKm: \"0.50\", fixedCost: \"0\" });\n  const calc = estimateRouteCost({\n    distanceKm: parseFloat(form.distanceKm || \"0\"),\n    avgConsumptionKmPerLiter: parseFloat(form.avgConsumptionKmPerLiter || \"0\"),\n    fuelPricePerLiter: parseFloat(form.fuelPricePerLiter || \"0\"),\n    tolls: parseFloat(form.tolls || \"0\"),\n    variableCostPerKm: parseFloat(form.variableCostPerKm || \"0\"),\n    fixedCost: parseFloat(form.fixedCost || \"0\"),\n  });\n\n  return (\n    <Card className=\"p-4 space-y-3\">\n      <div className=\"font-semibold\">Estimativa de Custo da Rota</div>\n      <div className=\"grid grid-cols-2 md:grid-cols-3 gap-2\">\n        <Input placeholder=\"Distncia (km)\" value={form.distanceKm} onChange={(e)=>setForm({...form, distanceKm: e.target.value})} />\n        <Input placeholder=\"KM/L\" value={form.avgConsumptionKmPerLiter} onChange={(e)=>setForm({...form, avgConsumptionKmPerLiter: e.target.value})} />\n        <Input placeholder=\"Preo/L (R$)\" value={form.fuelPricePerLiter} onChange={(e)=>setForm({...form, fuelPricePerLiter: e.target.value})} />\n        <Input placeholder=\"Pedgios (R$)\" value={form.tolls} onChange={(e)=>setForm({...form, tolls: e.target.value})} />\n        <Input placeholder=\"Var R$/km\" value={form.variableCostPerKm} onChange={(e)=>setForm({...form, variableCostPerKm: e.target.value})} />\n        <Input placeholder=\"Fixo (R$)\" value={form.fixedCost} onChange={(e)=>setForm({...form, fixedCost: e.target.value})} />\n      </div>\n      <div className=\"grid grid-cols-2 md:grid-cols-3 gap-2 text-sm\">\n        <div>Combustvel: R$ {calc.fuelCost.toFixed(2)}  {calc.liters.toFixed(1)} L</div>\n        <div>Pedgios: R$ {calc.tolls.toFixed(2)}</div>\n        <div>Varivel: R$ {calc.variableCost.toFixed(2)}</div>\n        <div className=\"font-bold\">Total: R$ {calc.total.toFixed(2)}</div>\n      </div>\n      <div className=\"flex justify-end\">\n        <Button variant=\"modern\">Aplicar na Viagem</Button>\n      </div>\n    </Card>\n  );\n}\n\n","import { Layout } from \"@/components/Layout\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\r\nimport { \r\n  Truck, \r\n  Clock,\r\n  DollarSign,\r\n  Package,\r\n} from \"lucide-react\";\r\nimport { StatCard } from \"@/components/StatCard\";\r\nimport { CTEManagement } from \"@/components/tms/CTEManagement\";\r\nimport MDFEManagement from \"@/components/tms/MDFEManagement\";\nimport { RevenueAnalysis } from \"@/components/revenue/RevenueAnalysis\";\r\nimport { TripManagement } from \"@/components/tms/TripManagement\";\nimport { OrdemColetaManagement } from \"@/components/tms/OrdemColetaManagement\";\nimport { RouteOptimizer } from \"@/components/tms/RouteOptimizer\";\nimport { VehicleList } from \"@/components/tms/VehicleList\";\nimport { CostEstimator } from \"@/components/tms/CostEstimator\";\n\r\nconst TMS = () => {\r\n  return (\r\n    <Layout>\r\n      <div className=\"space-y-8\">\r\n        <div className=\"space-y-1\">\r\n          <h1 className=\"text-4xl font-bold tracking-tight text-foreground\">TMS - Transport Management</h1>\r\n          <p className=\"text-base text-muted-foreground\">\r\n            Sistema de Gesto de Transportes e Logstica\r\n          </p>\r\n        </div>\r\n\r\n        {/* KPIs */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n          <StatCard \r\n            title=\"Viagens Ativas\" \r\n            value=\"38\" \r\n            icon={Truck}\r\n            trend={{ value: \"+5 hoje\", positive: true }}\r\n          />\r\n          <StatCard \r\n            title=\"Taxa Ocupao\" \r\n            value=\"87%\" \r\n            icon={Package}\r\n            trend={{ value: \"+3% vs ontem\", positive: true }}\r\n          />\r\n          <StatCard \r\n            title=\"Entregas no Prazo\" \r\n            value=\"94.2%\" \r\n            icon={Clock}\r\n          />\r\n          <StatCard \r\n            title=\"Receita Ms\" \r\n            value=\"R$ 485k\" \r\n            icon={DollarSign}\r\n            trend={{ value: \"+12%\", positive: true }}\r\n          />\r\n        </div>\r\n\r\n        {/* Tabs */}\r\n        <Tabs defaultValue=\"trips\" className=\"w-full\">\r\n          <TabsList className=\"grid w-full grid-cols-2 sm:grid-cols-3 lg:grid-cols-7 gap-1\">\r\n            <TabsTrigger value=\"trips\" className=\"text-xs sm:text-sm\">Viagens</TabsTrigger>\r\n            <TabsTrigger value=\"rotas\" className=\"text-xs sm:text-sm\">Rotas</TabsTrigger>\r\n            <TabsTrigger value=\"ordem-coleta\" className=\"text-xs sm:text-sm\">Ordem Coleta</TabsTrigger>\r\n            <TabsTrigger value=\"veiculos\" className=\"text-xs sm:text-sm\">Cavalos</TabsTrigger>\r\n            <TabsTrigger value=\"cte\" className=\"text-xs sm:text-sm\">CT-e</TabsTrigger>\r\n            <TabsTrigger value=\"mdfe\" className=\"text-xs sm:text-sm\">MDF-e</TabsTrigger>\r\n            <TabsTrigger value=\"receita\" className=\"text-xs sm:text-sm\">Receita</TabsTrigger>\r\n          </TabsList>\r\n\r\n          {/* Gesto de Viagens */}\r\n          <TabsContent value=\"trips\">\r\n            <TripManagement />\r\n          </TabsContent>\r\n\r\n          {/* Planejamento de Rotas */}\r\n          <TabsContent value=\"rotas\">\r\n            <RouteOptimizer />\r\n          </TabsContent>\r\n\r\n          {/* Ordem de Coleta */}\r\n          <TabsContent value=\"ordem-coleta\">\r\n            <OrdemColetaManagement />\r\n          </TabsContent>\r\n\r\n          {/* Veculos */}\r\n          <TabsContent value=\"veiculos\">\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle className=\"flex items-center gap-2\">\r\n                  <Truck className=\"h-5 w-5\" />\r\n                  Lista de Cavalos Mecnicos\r\n                </CardTitle>\r\n              </CardHeader>\r\n              <CardContent>\r\n                <VehicleList />\r\n              </CardContent>\r\n            </Card>\r\n          </TabsContent>\r\n\r\n          {/* CT-e */}\n          <TabsContent value=\"cte\">\n            <div className=\"grid gap-4\">\n              <CostEstimator />\n              <CTEManagement />\n            </div>\n          </TabsContent>\n\r\n          {/* MDF-e */}\r\n          <TabsContent value=\"mdfe\">\r\n            <MDFEManagement />\r\n          </TabsContent>\r\n\r\n          {/* Receita */}\r\n          <TabsContent value=\"receita\">\r\n            <RevenueAnalysis />\r\n          </TabsContent>\r\n        </Tabs>\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default TMS;\r\n"],"file":"assets/TMS-6gIXv8MP.js"}