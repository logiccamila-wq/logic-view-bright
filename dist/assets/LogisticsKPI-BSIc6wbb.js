import{j as t,s as c}from"./index-BiNiRHKa.js";import{L as v}from"./Layout-Dp_kOeVO.js";import{C as a}from"./card-TfuIT_5Q.js";import{u as C}from"./useQuery-CFkLnJnT.js";import"./index-DIpBNjZJ.js";import"./index-CwEJSXtc.js";import"./index-CDnZEIrr.js";import"./badge-DNXvGi58.js";import"./select-QQKt8PR4.js";import"./index-BjTUNxlL.js";import"./chevron-down-CMfBZ8DZ.js";import"./check-CRXfG46A.js";import"./user-DUMs6VdZ.js";import"./triangle-alert-DWEkvv_3.js";import"./circle-check-big-SjvrQ4v6.js";import"./warehouse-DuizGI0Y.js";import"./trending-up-DqnRdfA9.js";import"./settings-ADCDQZ7C.js";import"./sparkles-Dn6_ZUdd.js";import"./input-CbZeJBr9.js";import"./tabs-D0EqSZrJ.js";function f(e,r,n){return n<=0?0:(e+r)/n}function L(e,r){return r<=0?0:e/r}function w(e,r){return r<=0?0:e/r*100}function b(e,r){return r<=0?0:e/r}const $=()=>{var l,m;const e=C({queryKey:["refuelings"],queryFn:async()=>(await c.from("refuelings").select("km,liters,total_value,cost_per_km,timestamp").order("timestamp",{ascending:!1})).data||[]}),r=C({queryKey:["revenue_records"],queryFn:async()=>(await c.from("revenue_records").select("data_emissao,valor_frete,peso_kg").order("data_emissao",{ascending:!1})).data||[]}),n=C({queryKey:["driver_work_sessions"],queryFn:async()=>(await c.from("driver_work_sessions").select("start_time,end_time,km_start,km_end").order("start_time",{ascending:!1})).data||[]}),o=(n.data||[]).reduce((s,i)=>s+Math.max(0,(i.km_end||0)-(i.km_start||0)),0),p=(e.data||[]).reduce((s,i)=>s+(i.liters||0),0),d=(e.data||[]).reduce((s,i)=>s+(i.total_value||0),0),g=(e.data||[]).filter(s=>s.cost_per_km).reduce((s,i)=>s+(i.cost_per_km||0),0)/Math.max(1,(e.data||[]).filter(s=>s.cost_per_km).length),u=L(o,p),x=g||f(0,d,o),h=w(0,o),A=b(o,(n.data||[]).reduce((s,i)=>s+Math.max(0,(new Date(i.end_time||i.start_time).getTime()-new Date(i.start_time).getTime())/(1e3*60*60)),0));return t.jsx(v,{children:t.jsxs("div",{"trae-inspector-start-line":"33","trae-inspector-start-column":"6","trae-inspector-end-line":"45","trae-inspector-end-column":"12","trae-inspector-file-path":"src\\\\pages\\\\LogisticsKPI.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"space-y-6",children:[t.jsx("h1",{"trae-inspector-start-line":"34","trae-inspector-start-column":"8","trae-inspector-end-line":"34","trae-inspector-end-column":"70","trae-inspector-file-path":"src\\\\pages\\\\LogisticsKPI.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Indicadores%20Log%C3%ADsticos%22%2C%22textStartLine%22%3A%2234%22%2C%22textStartColumn%22%3A%2243%22%2C%22textEndLine%22%3A%2234%22%2C%22textEndColumn%22%3A%2265%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-2xl font-bold",children:"Indicadores Logísticos"}),t.jsxs("div",{"trae-inspector-start-line":"35","trae-inspector-start-column":"8","trae-inspector-end-line":"40","trae-inspector-end-column":"14","trae-inspector-file-path":"src\\\\pages\\\\LogisticsKPI.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsxs(a,{className:"p-4",children:[t.jsx("div",{"trae-inspector-start-line":"36","trae-inspector-start-column":"32","trae-inspector-end-line":"36","trae-inspector-end-column":"97","trae-inspector-file-path":"src\\\\pages\\\\LogisticsKPI.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Custo%20por%20KM%22%2C%22textStartLine%22%3A%2236%22%2C%22textStartColumn%22%3A%2279%22%2C%22textEndLine%22%3A%2236%22%2C%22textEndColumn%22%3A%2291%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-sm text-muted-foreground",children:"Custo por KM"}),t.jsxs("div",{"trae-inspector-start-line":"36","trae-inspector-start-column":"97","trae-inspector-end-line":"36","trae-inspector-end-column":"158","trae-inspector-file-path":"src\\\\pages\\\\LogisticsKPI.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-3xl font-bold",children:["R$ ",x.toFixed(2)]})]}),t.jsxs(a,{className:"p-4",children:[t.jsx("div",{"trae-inspector-start-line":"37","trae-inspector-start-column":"32","trae-inspector-end-line":"37","trae-inspector-end-column":"105","trae-inspector-file-path":"src\\\\pages\\\\LogisticsKPI.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Consumo%20M%C3%A9dio%20(KM%2FL)%22%2C%22textStartLine%22%3A%2237%22%2C%22textStartColumn%22%3A%2279%22%2C%22textEndLine%22%3A%2237%22%2C%22textEndColumn%22%3A%2299%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-sm text-muted-foreground",children:"Consumo Médio (KM/L)"}),t.jsx("div",{"trae-inspector-start-line":"37","trae-inspector-start-column":"105","trae-inspector-end-line":"37","trae-inspector-end-column":"164","trae-inspector-file-path":"src\\\\pages\\\\LogisticsKPI.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-3xl font-bold",children:u.toFixed(2)})]}),t.jsxs(a,{className:"p-4",children:[t.jsx("div",{"trae-inspector-start-line":"38","trae-inspector-start-column":"32","trae-inspector-end-line":"38","trae-inspector-end-column":"107","trae-inspector-file-path":"src\\\\pages\\\\LogisticsKPI.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Quilometragem%20em%20Vazio%22%2C%22textStartLine%22%3A%2238%22%2C%22textStartColumn%22%3A%2279%22%2C%22textEndLine%22%3A%2238%22%2C%22textEndColumn%22%3A%22101%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-sm text-muted-foreground",children:"Quilometragem em Vazio"}),t.jsxs("div",{"trae-inspector-start-line":"38","trae-inspector-start-column":"107","trae-inspector-end-line":"38","trae-inspector-end-column":"171","trae-inspector-file-path":"src\\\\pages\\\\LogisticsKPI.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-3xl font-bold",children:[h.toFixed(1),"%"]})]}),t.jsxs(a,{className:"p-4",children:[t.jsx("div",{"trae-inspector-start-line":"39","trae-inspector-start-column":"32","trae-inspector-end-line":"39","trae-inspector-end-column":"101","trae-inspector-file-path":"src\\\\pages\\\\LogisticsKPI.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Velocidade%20M%C3%A9dia%22%2C%22textStartLine%22%3A%2239%22%2C%22textStartColumn%22%3A%2279%22%2C%22textEndLine%22%3A%2239%22%2C%22textEndColumn%22%3A%2295%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-sm text-muted-foreground",children:"Velocidade Média"}),t.jsxs("div",{"trae-inspector-start-line":"39","trae-inspector-start-column":"101","trae-inspector-end-line":"39","trae-inspector-end-column":"166","trae-inspector-file-path":"src\\\\pages\\\\LogisticsKPI.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-3xl font-bold",children:[A.toFixed(1)," km/h"]})]})]}),t.jsxs("div",{"trae-inspector-start-line":"41","trae-inspector-start-column":"8","trae-inspector-end-line":"44","trae-inspector-end-column":"14","trae-inspector-file-path":"src\\\\pages\\\\LogisticsKPI.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs(a,{className:"p-4",children:[t.jsx("div",{"trae-inspector-start-line":"42","trae-inspector-start-column":"32","trae-inspector-end-line":"42","trae-inspector-end-column":"102","trae-inspector-file-path":"src\\\\pages\\\\LogisticsKPI.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Entregas%20Recentes%22%2C%22textStartLine%22%3A%2242%22%2C%22textStartColumn%22%3A%2279%22%2C%22textEndLine%22%3A%2242%22%2C%22textEndColumn%22%3A%2296%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-sm text-muted-foreground",children:"Entregas Recentes"}),t.jsx("div",{"trae-inspector-start-line":"42","trae-inspector-start-column":"102","trae-inspector-end-line":"42","trae-inspector-end-column":"174","trae-inspector-file-path":"src\\\\pages\\\\LogisticsKPI.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-3xl font-bold",children:((l=r.data)==null?void 0:l.length)||0})]}),t.jsxs(a,{className:"p-4",children:[t.jsx("div",{"trae-inspector-start-line":"43","trae-inspector-start-column":"32","trae-inspector-end-line":"43","trae-inspector-end-column":"99","trae-inspector-file-path":"src\\\\pages\\\\LogisticsKPI.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Abastecimentos%22%2C%22textStartLine%22%3A%2243%22%2C%22textStartColumn%22%3A%2279%22%2C%22textEndLine%22%3A%2243%22%2C%22textEndColumn%22%3A%2293%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-sm text-muted-foreground",children:"Abastecimentos"}),t.jsx("div",{"trae-inspector-start-line":"43","trae-inspector-start-column":"99","trae-inspector-end-line":"43","trae-inspector-end-column":"167","trae-inspector-file-path":"src\\\\pages\\\\LogisticsKPI.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-3xl font-bold",children:((m=e.data)==null?void 0:m.length)||0})]})]})]})})};export{$ as default};
