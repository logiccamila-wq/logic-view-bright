import{c as ce,r as u,s as w,j as e,T as Q,B as L,d as v,a as q,Z as Te,a6 as Be,P as Ve}from"./index-BiNiRHKa.js";import{t as we,C as He,R as Se,p as J,M as Z,z as re,P as Me,T as qe,L as Ae,W as fe}from"./Layout-Dp_kOeVO.js";import{T as De,a as be,b as R,c as F}from"./tabs-D0EqSZrJ.js";import{C as E,a as V,b as H,d as P}from"./card-TfuIT_5Q.js";import{B as M,D as Ue}from"./badge-DNXvGi58.js";import{u as ie}from"./useQuery-CFkLnJnT.js";import{S as te}from"./StatCard-D_xC6Z5I.js";import{T as _e}from"./textarea-DY8BSV4k.js";import{D as de,a as ue,b as ge,c as he,e as We,f as Ee}from"./dialog-Cg8eQnwj.js";import{L as U}from"./label-UYjdQhGu.js";import{S as se,a as ae,b as ne,c as oe,d as T}from"./select-QQKt8PR4.js";import{P as pe}from"./play-CAnAmSuT.js";import{C as ze,F as xe,A as Ie,D as Oe,a as $e}from"./DriverEarnings-BYLrtq5d.js";import{C as X}from"./warehouse-DuizGI0Y.js";import{C as Pe}from"./circle-check-big-SjvrQ4v6.js";import{T as Je}from"./triangle-alert-DWEkvv_3.js";import{V as ve}from"./VehicleSelect-By-7KCVO.js";import{I as $}from"./input-CbZeJBr9.js";import{C as Ge}from"./checkbox-DFwEB-hm.js";import{C as ke}from"./clipboard-check-7ZVhhWHc.js";import{B as me}from"./user-DUMs6VdZ.js";import{N as Re}from"./navigation-CKYRs-6Q.js";import{d as Ke,f as G}from"./format-1t5ish9B.js";import{T as ee}from"./trending-up-DqnRdfA9.js";import{T as Ze}from"./target-C34BtU2x.js";import{S as Ye}from"./star-DPCMTmin.js";import{H as Qe}from"./history-iASH-fby.js";import{F as Xe}from"./index-DIpBNjZJ.js";import{C as Y}from"./calendar-B64dnvJa.js";import{u as et}from"./useTomTom-DA6LhlUd.js";import{L as Fe}from"./loader-circle-B3QIm2JW.js";import{G as tt}from"./GaelChatbot-DDvpa6a0.js";import"./index-CwEJSXtc.js";import"./check-CRXfG46A.js";import"./settings-ADCDQZ7C.js";import"./sparkles-Dn6_ZUdd.js";import"./index-CDnZEIrr.js";import"./index-BjTUNxlL.js";import"./chevron-down-CMfBZ8DZ.js";import"./circle-play-DbVGsE3-.js";import"./demoStore-BIsfGJR8.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rt=[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]],je=ce("route",rt);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const it=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Le=ce("square",it);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]],at=ce("trophy",st);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nt=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]],ot=ce("utensils",nt);function Ne(t,r){const g=we(t),n=we(r),p=ye(g,n),o=Math.abs(Ke(g,n));g.setDate(g.getDate()-p*o);const m=+(ye(g,n)===-p),c=p*(o-m);return c===0?0:c}function ye(t,r){const g=t.getFullYear()-r.getFullYear()||t.getMonth()-r.getMonth()||t.getDate()-r.getDate()||t.getHours()-r.getHours()||t.getMinutes()-r.getMinutes()||t.getSeconds()-r.getSeconds()||t.getMilliseconds()-r.getMilliseconds();return g<0?-1:g>0?1:g}const ct=({open:t,onOpenChange:r,currentSessionId:g,currentVehicle:n,onVehicleChanged:p})=>{const[o,m]=u.useState(!1),[c,i]=u.useState([]),[a,d]=u.useState([]),[A,s]=u.useState(n),[x,b]=u.useState(""),[C,h]=u.useState("");u.useEffect(()=>{t&&N()},[t]);const N=async()=>{const{data:y,error:_}=await w.from("vehicles").select("*").eq("tipo","cavalo").in("status",["ativo","Ativo"]);_&&console.error("Erro ao carregar cavalos:",_);const k=(y||[]).map(f=>({placa:f.placa||f.plate,modelo:f.modelo||f.model||"",tipo:f.tipo||""})).filter(f=>!!f.placa).sort((f,l)=>f.placa.localeCompare(l.placa));i(k);const{data:W,error:z}=await w.from("vehicles").select("*").eq("tipo","carreta").in("status",["ativo","Ativo"]);z&&console.error("Erro ao carregar carretas:",z);const D=(W||[]).map(f=>({placa:f.placa||f.plate,modelo:f.modelo||f.model||"",tipo:f.tipo||""})).filter(f=>!!f.placa).sort((f,l)=>f.placa.localeCompare(l.placa));d(D)},O=async y=>{var _;if(y.preventDefault(),!A){v.error("Selecione o novo cavalo mecânico");return}if(!C){v.error("Informe o motivo da troca");return}m(!0);try{const{error:k}=await w.from("driver_work_sessions").update({vehicle_plate:A,updated_at:new Date().toISOString()}).eq("id",g);if(k)throw k;const{error:W}=await w.from("driver_work_events").insert({session_id:g,driver_id:(_=(await w.auth.getUser()).data.user)==null?void 0:_.id,tipo_atividade:"trabalho",data_hora_inicio:new Date().toISOString(),observacoes:`Troca de veículo: ${n} → ${A}${x?` + Carreta ${x}`:""}
Motivo: ${C}`,automatico:!1});if(W)throw W;v.success("Veículo atualizado com sucesso!"),p(),r(!1)}catch(k){console.error("Erro ao trocar veículo:",k),v.error("Erro ao trocar veículo")}finally{m(!1)}};return e.jsx(de,{open:t,onOpenChange:r,children:e.jsxs(ue,{className:"sm:max-w-[500px]",children:[e.jsxs(ge,{children:[e.jsxs(he,{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"h-5 w-5"}),"Trocar Veículo"]}),e.jsx(We,{children:"Registre a troca de cavalo mecânico e/ou carreta durante a viagem"})]}),e.jsxs("form",{"trae-inspector-start-line":"149","trae-inspector-start-column":"8","trae-inspector-end-line":"239","trae-inspector-end-column":"15","trae-inspector-file-path":"src\\\\components\\\\driver\\\\VehicleChangeDialog.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",onSubmit:O,className:"space-y-4 pt-4",children:[e.jsxs("div",{"trae-inspector-start-line":"150","trae-inspector-start-column":"10","trae-inspector-end-line":"157","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\components\\\\driver\\\\VehicleChangeDialog.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"space-y-2",children:[e.jsx(U,{children:"Veículo Atual"}),e.jsx("div",{"trae-inspector-start-line":"152","trae-inspector-start-column":"12","trae-inspector-end-line":"156","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\components\\\\driver\\\\VehicleChangeDialog.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"p-3 bg-muted rounded-lg",children:e.jsx(M,{variant:"outline",className:"font-mono",children:n})})]}),e.jsxs("div",{"trae-inspector-start-line":"159","trae-inspector-start-column":"10","trae-inspector-end-line":"179","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\components\\\\driver\\\\VehicleChangeDialog.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"space-y-2",children:[e.jsx(U,{htmlFor:"vehicle",children:"Novo Cavalo Mecânico *"}),e.jsxs(se,{value:A,onValueChange:s,children:[e.jsx(ae,{id:"vehicle",children:e.jsx(ne,{placeholder:"Selecione o cavalo"})}),e.jsx(oe,{children:c.map(y=>e.jsx(T,{value:y.placa,children:e.jsxs("div",{"trae-inspector-start-line":"168","trae-inspector-start-column":"20","trae-inspector-end-line":"174","trae-inspector-end-column":"26","trae-inspector-file-path":"src\\\\components\\\\driver\\\\VehicleChangeDialog.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex items-center gap-2",children:[e.jsx(Q,{className:"h-4 w-4"}),e.jsx("span",{"trae-inspector-start-line":"170","trae-inspector-start-column":"22","trae-inspector-end-line":"170","trae-inspector-end-column":"86","trae-inspector-file-path":"src\\\\components\\\\driver\\\\VehicleChangeDialog.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"font-mono font-semibold",children:y.placa}),e.jsxs("span",{"trae-inspector-start-line":"171","trae-inspector-start-column":"22","trae-inspector-end-line":"173","trae-inspector-end-column":"29","trae-inspector-file-path":"src\\\\components\\\\driver\\\\VehicleChangeDialog.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-muted-foreground text-sm",children:["- ",y.modelo]})]})},y.placa))})]})]}),e.jsxs("div",{"trae-inspector-start-line":"181","trae-inspector-start-column":"10","trae-inspector-end-line":"201","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\components\\\\driver\\\\VehicleChangeDialog.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"space-y-2",children:[e.jsx(U,{htmlFor:"carreta",children:"Carreta (Opcional)"}),e.jsxs(se,{value:x,onValueChange:b,children:[e.jsx(ae,{id:"carreta",children:e.jsx(ne,{placeholder:"Selecione a carreta (se aplicável)"})}),e.jsxs(oe,{children:[e.jsx(T,{value:"nenhuma",children:"Nenhuma"}),a.map(y=>e.jsx(T,{value:y.placa,children:e.jsxs("div",{"trae-inspector-start-line":"191","trae-inspector-start-column":"20","trae-inspector-end-line":"196","trae-inspector-end-column":"26","trae-inspector-file-path":"src\\\\components\\\\driver\\\\VehicleChangeDialog.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex items-center gap-2",children:[e.jsx("span",{"trae-inspector-start-line":"192","trae-inspector-start-column":"22","trae-inspector-end-line":"192","trae-inspector-end-column":"86","trae-inspector-file-path":"src\\\\components\\\\driver\\\\VehicleChangeDialog.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"font-mono font-semibold",children:y.placa}),e.jsxs("span",{"trae-inspector-start-line":"193","trae-inspector-start-column":"22","trae-inspector-end-line":"195","trae-inspector-end-column":"29","trae-inspector-file-path":"src\\\\components\\\\driver\\\\VehicleChangeDialog.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-muted-foreground text-sm",children:["- ",y.modelo]})]})},y.placa))]})]})]}),e.jsxs("div",{"trae-inspector-start-line":"203","trae-inspector-start-column":"10","trae-inspector-end-line":"212","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\components\\\\driver\\\\VehicleChangeDialog.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"space-y-2",children:[e.jsx(U,{htmlFor:"motivo",children:"Motivo da Troca *"}),e.jsx(_e,{id:"motivo",placeholder:"Ex: Manutenção preventiva, troca de rota, problema mecânico...",value:C,onChange:y=>h(y.target.value),rows:3})]}),e.jsxs("div",{"trae-inspector-start-line":"214","trae-inspector-start-column":"10","trae-inspector-end-line":"219","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\components\\\\driver\\\\VehicleChangeDialog.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex items-start gap-2 p-3 bg-amber-50 dark:bg-amber-950/20 rounded-lg border border-amber-200 dark:border-amber-900",children:[e.jsx(He,{className:"h-4 w-4 text-amber-600 dark:text-amber-400 mt-0.5"}),e.jsx("p",{"trae-inspector-start-line":"216","trae-inspector-start-column":"12","trae-inspector-end-line":"218","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\components\\\\driver\\\\VehicleChangeDialog.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22A%20troca%20ser%C3%A1%20registrada%20no%20sistema%20e%20refletir%C3%A1%20nos%20c%C3%A1lculos%20de%20gratifica%C3%A7%C3%A3o%22%2C%22textStartLine%22%3A%22216%22%2C%22textStartColumn%22%3A%2270%22%2C%22textEndLine%22%3A%22218%22%2C%22textEndColumn%22%3A%2212%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-sm text-amber-800 dark:text-amber-200",children:"A troca será registrada no sistema e refletirá nos cálculos de gratificação"})]}),e.jsxs("div",{"trae-inspector-start-line":"221","trae-inspector-start-column":"10","trae-inspector-end-line":"238","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\components\\\\driver\\\\VehicleChangeDialog.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex gap-3 pt-4",children:[e.jsx(L,{type:"button",variant:"outline",className:"flex-1",onClick:()=>r(!1),disabled:o,children:"Cancelar"}),e.jsx(L,{type:"submit",className:"flex-1",disabled:o,children:o?"Registrando...":"Confirmar Troca"})]})]})]})})},le=[{id:"direcao",label:"Direção",icon:pe,color:"bg-blue-500"},{id:"descanso",label:"Descanso",icon:ze,color:"bg-green-500"},{id:"refeicao",label:"Refeição",icon:ot,color:"bg-orange-500"},{id:"espera",label:"Espera",icon:X,color:"bg-yellow-500"},{id:"trabalho",label:"Trabalho",icon:Pe,color:"bg-purple-500"}];function lt(){var f;const{user:t}=q(),[r,g]=u.useState(null),[n,p]=u.useState(null),[o,m]=u.useState(""),[c,i]=u.useState(!1),[a,d]=u.useState(!1);u.useEffect(()=>{A()},[t]);const A=async()=>{if(!t)return;const{data:l}=await w.from("driver_work_sessions").select("*").eq("driver_id",t.id).eq("status","em_andamento").order("data_inicio",{ascending:!1}).limit(1).maybeSingle();if(g(l),l){const{data:B}=await w.from("driver_work_events").select("*").eq("session_id",l.id).is("data_hora_fim",null).order("data_hora_inicio",{ascending:!1}).limit(1).maybeSingle();p(B)}},[s,x]=u.useState(!1),[b,C]=u.useState([]),[h,N]=u.useState(""),O=async()=>{x(!0),i(!0);try{const{data:l,error:B}=await w.from("vehicles").select("*").in("tipo",["cavalo_mecanico","caminhao","cavalo","carreta"]).in("status",["ativo","Ativo"]);if(B)console.error("Erro ao carregar veículos:",B),v.error("Erro ao carregar veículos"),C([]);else{const j=(l||[]).map(S=>({placa:S.placa||S.plate,modelo:S.modelo||S.model||"",ano:S.ano||S.year,tipo:S.tipo||""})).filter(S=>!!S.placa).sort((S,I)=>S.placa.localeCompare(I.placa));console.log("Veículos carregados:",j),C(j)}}catch(l){console.error("Erro ao carregar veículos:",l),v.error("Erro ao carregar veículos"),C([])}finally{i(!1)}},y=async()=>{if(t){i(!0);try{const{data:l}=await w.from("trips").select("id, vehicle_plate").eq("driver_id",t.id).eq("status","em_andamento").order("created_at",{ascending:!1}).limit(1).maybeSingle();if(!l){v.error("Nenhuma viagem ativa encontrada"),i(!1);return}const{data:B,error:j}=await w.from("driver_work_sessions").insert({driver_id:t.id,vehicle_plate:l.vehicle_plate,trip_id:l.id,data_inicio:new Date().toISOString(),status:"em_andamento"}).select().single();if(j)throw j;g(B),v.success("Jornada iniciada com viagem vinculada!")}catch(l){console.error("Erro ao iniciar jornada:",l),v.error("Erro ao iniciar jornada")}finally{i(!1)}}},_=async()=>{if(!t||!h){v.error("Selecione um veículo");return}i(!0);try{const{data:l,error:B}=await w.from("driver_work_sessions").insert({driver_id:t.id,vehicle_plate:h,trip_id:null,data_inicio:new Date().toISOString(),status:"em_andamento"}).select().single();if(B)throw B;g(l),x(!1),N(""),v.success("Jornada iniciada sem viagem (manobra/oficina)!")}catch(l){console.error("Erro ao iniciar jornada:",l),v.error("Erro ao iniciar jornada")}finally{i(!1)}},k=async()=>{if(r){i(!0);try{n&&await z();const{error:l}=await w.from("driver_work_sessions").update({status:"concluida",data_fim:new Date().toISOString()}).eq("id",r.id);if(l)throw l;await w.functions.invoke("analyze-driver-journey",{body:{sessionId:r.id}}),g(null),p(null),v.success("Jornada finalizada e analisada!")}catch(l){console.error("Erro ao finalizar jornada:",l),v.error("Erro ao finalizar jornada")}finally{i(!1)}}},W=async l=>{var B;if(r){i(!0);try{n&&await z();const{data:j,error:S}=await w.from("driver_work_events").insert([{session_id:r.id,driver_id:t.id,tipo_atividade:l,data_hora_inicio:new Date().toISOString(),observacoes:o}]).select().single();if(S)throw S;p(j),m(""),v.success(`${(B=le.find(I=>I.id===l))==null?void 0:B.label} iniciada`)}catch(j){console.error("Erro ao iniciar atividade:",j),v.error("Erro ao iniciar atividade")}finally{i(!1)}}},z=async()=>{if(!n)return;const l=new Date,B=new Date(n.data_hora_inicio),j=Math.round((l.getTime()-B.getTime())/(1e3*60)),{error:S}=await w.from("driver_work_events").update({data_hora_fim:l.toISOString(),duracao_minutos:j}).eq("id",n.id);if(S)throw S;const I=n.tipo_atividade,K={};I==="direcao"?(K.total_direcao_minutos=((r==null?void 0:r.total_direcao_minutos)||0)+j,K.total_trabalho_minutos=((r==null?void 0:r.total_trabalho_minutos)||0)+j):I==="espera"||I==="trabalho"?(I==="espera"&&(K.total_espera_minutos=((r==null?void 0:r.total_espera_minutos)||0)+j),K.total_trabalho_minutos=((r==null?void 0:r.total_trabalho_minutos)||0)+j):I==="descanso"&&(K.total_descanso_minutos=((r==null?void 0:r.total_descanso_minutos)||0)+j),await w.from("driver_work_sessions").update(K).eq("id",r.id),p(null)},D=l=>{const B=Math.floor(l/60),j=l%60;return`${B}h${j.toString().padStart(2,"0")}min`};return e.jsxs(E,{className:"p-6",children:[e.jsx("h2",{"trae-inspector-start-line":"329","trae-inspector-start-column":"6","trae-inspector-end-line":"329","trae-inspector-end-column":"68","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Jornada%20Motorista%22%2C%22textStartLine%22%3A%22329%22%2C%22textStartColumn%22%3A%2246%22%2C%22textEndLine%22%3A%22329%22%2C%22textEndColumn%22%3A%2263%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-2xl font-bold mb-6",children:"Jornada Motorista"}),r?e.jsxs("div",{"trae-inspector-start-line":"397","trae-inspector-start-column":"8","trae-inspector-end-line":"529","trae-inspector-end-column":"14","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"space-y-6",children:[e.jsxs("div",{"trae-inspector-start-line":"399","trae-inspector-start-column":"10","trae-inspector-end-line":"410","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{"trae-inspector-start-line":"400","trae-inspector-start-column":"12","trae-inspector-end-line":"403","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"p-4 bg-primary/10 border border-primary/20 rounded-lg",children:[e.jsx("p",{"trae-inspector-start-line":"401","trae-inspector-start-column":"14","trae-inspector-end-line":"401","trae-inspector-end-column":"81","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Ve%C3%ADculo%20Atual%22%2C%22textStartLine%22%3A%22401%22%2C%22textStartColumn%22%3A%2264%22%2C%22textEndLine%22%3A%22401%22%2C%22textEndColumn%22%3A%2277%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-sm text-muted-foreground mb-1",children:"Veículo Atual"}),e.jsx("p",{"trae-inspector-start-line":"402","trae-inspector-start-column":"14","trae-inspector-end-line":"402","trae-inspector-end-column":"95","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-3xl font-bold text-primary",children:r.vehicle_plate})]}),e.jsxs("div",{"trae-inspector-start-line":"404","trae-inspector-start-column":"12","trae-inspector-end-line":"409","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",children:[e.jsx("p",{"trae-inspector-start-line":"405","trae-inspector-start-column":"14","trae-inspector-end-line":"405","trae-inspector-end-column":"79","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Tempo%20Trabalhado%22%2C%22textStartLine%22%3A%22405%22%2C%22textStartColumn%22%3A%2259%22%2C%22textEndLine%22%3A%22405%22%2C%22textEndColumn%22%3A%2275%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-sm text-muted-foreground",children:"Tempo Trabalhado"}),e.jsx("p",{"trae-inspector-start-line":"406","trae-inspector-start-column":"14","trae-inspector-end-line":"408","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-2xl font-bold",children:D(r.total_trabalho_minutos)})]})]}),e.jsxs("div",{"trae-inspector-start-line":"413","trae-inspector-start-column":"10","trae-inspector-end-line":"436","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{"trae-inspector-start-line":"414","trae-inspector-start-column":"12","trae-inspector-end-line":"419","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",children:[e.jsx("p",{"trae-inspector-start-line":"415","trae-inspector-start-column":"14","trae-inspector-end-line":"415","trae-inspector-end-column":"76","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Tempo%20Dire%C3%A7%C3%A3o%22%2C%22textStartLine%22%3A%22415%22%2C%22textStartColumn%22%3A%2259%22%2C%22textEndLine%22%3A%22415%22%2C%22textEndColumn%22%3A%2272%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-sm text-muted-foreground",children:"Tempo Direção"}),e.jsx("p",{"trae-inspector-start-line":"416","trae-inspector-start-column":"14","trae-inspector-end-line":"418","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-2xl font-bold",children:D(r.total_direcao_minutos)})]}),e.jsxs("div",{"trae-inspector-start-line":"420","trae-inspector-start-column":"12","trae-inspector-end-line":"425","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",children:[e.jsx("p",{"trae-inspector-start-line":"421","trae-inspector-start-column":"14","trae-inspector-end-line":"421","trae-inspector-end-column":"75","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Horas%20Extras%22%2C%22textStartLine%22%3A%22421%22%2C%22textStartColumn%22%3A%2259%22%2C%22textEndLine%22%3A%22421%22%2C%22textEndColumn%22%3A%2271%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-sm text-muted-foreground",children:"Horas Extras"}),e.jsx("p",{"trae-inspector-start-line":"422","trae-inspector-start-column":"14","trae-inspector-end-line":"424","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-2xl font-bold text-orange-500",children:D(r.horas_extras_minutos)})]}),e.jsxs("div",{"trae-inspector-start-line":"426","trae-inspector-start-column":"12","trae-inspector-end-line":"435","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",children:[e.jsx("p",{"trae-inspector-start-line":"427","trae-inspector-start-column":"14","trae-inspector-end-line":"427","trae-inspector-end-column":"76","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Limite%20Di%C3%A1rio%22%2C%22textStartLine%22%3A%22427%22%2C%22textStartColumn%22%3A%2259%22%2C%22textEndLine%22%3A%22427%22%2C%22textEndColumn%22%3A%2272%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-sm text-muted-foreground",children:"Limite Diário"}),e.jsx("p",{"trae-inspector-start-line":"428","trae-inspector-start-column":"14","trae-inspector-end-line":"434","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-2xl font-bold",children:r.total_trabalho_minutos>720?e.jsx("span",{"trae-inspector-start-line":"430","trae-inspector-start-column":"18","trae-inspector-end-line":"430","trae-inspector-end-column":"61","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22text%22%3A%2212h00%22%2C%22textStartLine%22%3A%22430%22%2C%22textStartColumn%22%3A%2249%22%2C%22textEndLine%22%3A%22430%22%2C%22textEndColumn%22%3A%2254%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-red-500",children:"12h00"}):"12h00"})]})]}),n&&e.jsx("div",{"trae-inspector-start-line":"440","trae-inspector-start-column":"12","trae-inspector-end-line":"460","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"bg-primary/10 p-4 rounded-lg",children:e.jsxs("div",{"trae-inspector-start-line":"441","trae-inspector-start-column":"14","trae-inspector-end-line":"459","trae-inspector-end-column":"20","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex items-center justify-between",children:[e.jsxs("div",{"trae-inspector-start-line":"442","trae-inspector-start-column":"16","trae-inspector-end-line":"449","trae-inspector-end-column":"22","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex items-center gap-2",children:[e.jsx(M,{variant:"outline",className:"animate-pulse",children:"EM ANDAMENTO"}),e.jsx("span",{"trae-inspector-start-line":"446","trae-inspector-start-column":"18","trae-inspector-end-line":"448","trae-inspector-end-column":"25","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"font-semibold",children:(f=le.find(l=>l.id===n.tipo_atividade))==null?void 0:f.label})]}),e.jsxs(L,{onClick:z,variant:"outline",size:"sm",disabled:c,children:[e.jsx(Le,{className:"mr-2 h-4 w-4"}),"Finalizar"]})]})}),e.jsxs("div",{"trae-inspector-start-line":"464","trae-inspector-start-column":"10","trae-inspector-end-line":"474","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",children:[e.jsx("label",{"trae-inspector-start-line":"465","trae-inspector-start-column":"12","trae-inspector-end-line":"467","trae-inspector-end-column":"20","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Observa%C3%A7%C3%B5es%20(opcional)%22%2C%22textStartLine%22%3A%22465%22%2C%22textStartColumn%22%3A%2262%22%2C%22textEndLine%22%3A%22467%22%2C%22textEndColumn%22%3A%2212%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-sm font-medium mb-2 block",children:"Observações (opcional)"}),e.jsx(_e,{value:o,onChange:l=>m(l.target.value),placeholder:"Ex: Carregamento atrasado, condições da estrada, etc.",rows:2})]}),e.jsx("div",{"trae-inspector-start-line":"477","trae-inspector-start-column":"10","trae-inspector-end-line":"495","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:le.map(l=>{const B=l.icon,j=(n==null?void 0:n.tipo_atividade)===l.id;return e.jsxs(L,{onClick:()=>W(l.id),disabled:c||j,variant:j?"default":"outline",className:"h-20 flex-col",children:[e.jsx(B,{className:"h-6 w-6 mb-2"}),l.label]},l.id)})}),r.total_trabalho_minutos>660&&e.jsxs("div",{"trae-inspector-start-line":"499","trae-inspector-start-column":"12","trae-inspector-end-line":"504","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"bg-orange-500/10 border border-orange-500 p-4 rounded-lg flex items-center gap-2",children:[e.jsx(Je,{className:"h-5 w-5 text-orange-500"}),e.jsx("span",{"trae-inspector-start-line":"501","trae-inspector-start-column":"14","trae-inspector-end-line":"503","trae-inspector-end-column":"21","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Aten%C3%A7%C3%A3o%3A%20Voc%C3%AA%20est%C3%A1%20pr%C3%B3ximo%20do%20limite%20de%2012h%20di%C3%A1rias%22%2C%22textStartLine%22%3A%22501%22%2C%22textStartColumn%22%3A%2240%22%2C%22textEndLine%22%3A%22503%22%2C%22textEndColumn%22%3A%2214%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-sm",children:"Atenção: Você está próximo do limite de 12h diárias"})]}),e.jsxs("div",{"trae-inspector-start-line":"508","trae-inspector-start-column":"10","trae-inspector-end-line":"528","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex gap-2",children:[e.jsxs(L,{onClick:k,disabled:c,variant:"destructive",className:"flex-1",size:"lg",children:[e.jsx(Le,{className:"mr-2 h-5 w-5"}),"Finalizar Jornada"]}),e.jsxs(L,{onClick:()=>d(!0),disabled:c,variant:"outline",size:"lg",children:[e.jsx(Q,{className:"mr-2 h-5 w-5"}),"Trocar Veículo"]})]})]}):e.jsxs("div",{"trae-inspector-start-line":"332","trae-inspector-start-column":"8","trae-inspector-end-line":"395","trae-inspector-end-column":"14","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-center py-8 space-y-4",children:[e.jsx("p",{"trae-inspector-start-line":"333","trae-inspector-start-column":"10","trae-inspector-end-line":"335","trae-inspector-end-column":"14","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Nenhuma%20jornada%20em%20andamento%22%2C%22textStartLine%22%3A%22333%22%2C%22textStartColumn%22%3A%2252%22%2C%22textEndLine%22%3A%22335%22%2C%22textEndColumn%22%3A%2210%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-muted-foreground mb-4",children:"Nenhuma jornada em andamento"}),s?e.jsxs("div",{"trae-inspector-start-line":"349","trae-inspector-start-column":"12","trae-inspector-end-line":"393","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"max-w-md mx-auto space-y-4",children:[e.jsxs("div",{"trae-inspector-start-line":"350","trae-inspector-start-column":"14","trae-inspector-end-line":"370","trae-inspector-end-column":"20","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",children:[e.jsx("label",{"trae-inspector-start-line":"351","trae-inspector-start-column":"16","trae-inspector-end-line":"351","trae-inspector-end-column":"93","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Selecione%20o%20Ve%C3%ADculo%22%2C%22textStartLine%22%3A%22351%22%2C%22textStartColumn%22%3A%2266%22%2C%22textEndLine%22%3A%22351%22%2C%22textEndColumn%22%3A%2285%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-sm font-medium mb-2 block",children:"Selecione o Veículo"}),e.jsxs(se,{value:h,onValueChange:N,children:[e.jsx(ae,{children:e.jsx(ne,{placeholder:"Escolha um cavalo mecânico"})}),e.jsx(oe,{children:b.length===0?e.jsx(T,{value:"nenhum",disabled:!0,children:"Nenhum veículo disponível"}):b.map(l=>e.jsxs(T,{value:l.placa,children:[l.placa," - ",l.modelo," ",l.ano?`(${l.ano})`:""]},l.placa))})]})]}),e.jsxs("div",{"trae-inspector-start-line":"371","trae-inspector-start-column":"14","trae-inspector-end-line":"392","trae-inspector-end-column":"20","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex gap-2",children:[e.jsxs(L,{onClick:_,disabled:c||!h,size:"lg",className:"flex-1",children:[e.jsx(pe,{className:"mr-2 h-5 w-5"}),"Confirmar"]}),e.jsx(L,{onClick:()=>{x(!1),N("")},disabled:c,variant:"outline",size:"lg",children:"Cancelar"})]})]}):e.jsxs("div",{"trae-inspector-start-line":"338","trae-inspector-start-column":"12","trae-inspector-end-line":"347","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex gap-3 justify-center",children:[e.jsxs(L,{onClick:y,disabled:c,size:"lg",children:[e.jsx(pe,{className:"mr-2 h-5 w-5"}),"Com Viagem Ativa"]}),e.jsxs(L,{onClick:O,disabled:c,size:"lg",variant:"outline",children:[e.jsx(Q,{className:"mr-2 h-5 w-5"}),"Sem Viagem (Manobra/Oficina)"]})]})]}),r&&e.jsx(ct,{open:a,onOpenChange:d,currentSessionId:r.id,currentVehicle:r.vehicle_plate,onVehicleChanged:A})]})}function Ct(){const{user:t}=q(),[r,g]=u.useState(!1),[n,p]=u.useState(!1),[o,m]=u.useState([]),[c,i]=u.useState({vehicle_plate:"",km:"",liters:"",total_value:""}),a=parseFloat(c.liters||"0"),d=parseFloat(c.total_value||"0"),A=parseInt(c.km||"0"),s=a>0?d/a:0,x=!!c.vehicle_plate&&A>0&&a>0&&d>0;u.useEffect(()=>{r&&(async()=>{const{data:h}=await w.from("refuelings").select("*").order("created_at",{ascending:!1}).limit(5);m(h||[])})()},[r]);const b=async C=>{C.preventDefault(),p(!0);try{const{error:h}=await w.from("refuelings").insert({driver_id:t==null?void 0:t.id,vehicle_plate:c.vehicle_plate,km:A,liters:a,total_value:d,cost_per_km:d/Math.max(A,1),price_per_liter:s});if(h)throw h;v.success("Abastecimento registrado!"),g(!1),i({vehicle_plate:"",km:"",liters:"",total_value:""})}catch(h){console.error(h),v.error("Erro ao registrar abastecimento")}finally{p(!1)}};return e.jsxs(de,{open:r,onOpenChange:g,children:[e.jsx(Ee,{asChild:!0,children:e.jsxs(L,{className:"w-full",children:[e.jsx(xe,{className:"w-4 h-4 mr-2"}),"Registrar Abastecimento"]})}),e.jsxs(ue,{children:[e.jsx(ge,{children:e.jsx(he,{children:"Lançamento de Combustível"})}),e.jsxs("form",{"trae-inspector-start-line":"78","trae-inspector-start-column":"8","trae-inspector-end-line":"133","trae-inspector-end-column":"15","trae-inspector-file-path":"src\\\\components\\\\driver\\\\FuelExpenseDialog.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",onSubmit:b,className:"space-y-4",children:[e.jsxs("div",{"trae-inspector-start-line":"79","trae-inspector-start-column":"10","trae-inspector-end-line":"86","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\components\\\\driver\\\\FuelExpenseDialog.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",children:[e.jsx(U,{children:"Placa do Veículo"}),e.jsx(ve,{value:c.vehicle_plate,onChange:C=>i({...c,vehicle_plate:C}),placeholder:"Selecione a placa"})]}),e.jsxs("div",{"trae-inspector-start-line":"87","trae-inspector-start-column":"10","trae-inspector-end-line":"95","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\components\\\\driver\\\\FuelExpenseDialog.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",children:[e.jsx(U,{children:"KM Real"}),e.jsx($,{required:!0,type:"number",value:c.km,onChange:C=>i({...c,km:C.target.value})})]}),e.jsxs("div",{"trae-inspector-start-line":"96","trae-inspector-start-column":"10","trae-inspector-end-line":"105","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\components\\\\driver\\\\FuelExpenseDialog.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",children:[e.jsx(U,{children:"Litros"}),e.jsx($,{required:!0,type:"number",step:"0.01",value:c.liters,onChange:C=>i({...c,liters:C.target.value})})]}),e.jsxs("div",{"trae-inspector-start-line":"106","trae-inspector-start-column":"10","trae-inspector-end-line":"115","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\components\\\\driver\\\\FuelExpenseDialog.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",children:[e.jsx(U,{children:"Valor Total (R$)"}),e.jsx($,{required:!0,type:"number",step:"0.01",value:c.total_value,onChange:C=>i({...c,total_value:C.target.value})})]}),e.jsxs("div",{"trae-inspector-start-line":"116","trae-inspector-start-column":"10","trae-inspector-end-line":"119","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\components\\\\driver\\\\FuelExpenseDialog.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",children:[e.jsx(U,{children:"Preço por Litro (R$/L)"}),e.jsx($,{disabled:!0,value:s>0?s.toFixed(2):""})]}),e.jsx(L,{type:"submit",className:"w-full",disabled:n||!x,children:n?"Salvando...":"Registrar"}),o.length>0&&e.jsxs("div",{"trae-inspector-start-line":"124","trae-inspector-start-column":"12","trae-inspector-end-line":"131","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\components\\\\driver\\\\FuelExpenseDialog.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"space-y-2",children:[e.jsx(U,{children:"Últimos abastecimentos"}),o.map(C=>e.jsxs("div",{"trae-inspector-start-line":"127","trae-inspector-start-column":"16","trae-inspector-end-line":"129","trae-inspector-end-column":"22","trae-inspector-file-path":"src\\\\components\\\\driver\\\\FuelExpenseDialog.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-sm text-muted-foreground",children:[C.vehicle_plate," • ",C.km," km • ",C.liters," L • R$ ",Number(C.total_value||0).toFixed(2)]},C.id))]})]})]})]})}function pt(){const{user:t}=q(),[r,g]=u.useState(!1),[n,p]=u.useState(!1),[o,m]=u.useState({tipo:"",descricao:"",valor:"",plate:""}),c=async i=>{i.preventDefault(),p(!0);try{const{error:a}=await w.from("contas_pagar").insert({fornecedor:"Motorista",descricao:`${o.tipo}: ${o.descricao} (Veículo: ${o.plate})`,valor:parseFloat(o.valor),data_vencimento:new Date().toISOString(),status:"pendente",categoria:"despesas_viagem",created_by:t==null?void 0:t.id});if(a)throw a;await w.from("notifications").insert({user_id:t==null?void 0:t.id,title:"Solicitação de Despesa",message:`Motorista solicitou aprovação de despesa: ${o.tipo} - R$ ${o.valor} - Veículo ${o.plate}`,type:"warning",module:"driver"}),v.success("Despesa enviada para aprovação!"),g(!1),m({tipo:"",descricao:"",valor:"",plate:""})}catch(a){console.error(a),v.error("Erro ao registrar despesa")}finally{p(!1)}};return e.jsxs(de,{open:r,onOpenChange:g,children:[e.jsx(Ee,{asChild:!0,children:e.jsxs(L,{variant:"outline",className:"w-full",children:[e.jsx(Se,{className:"w-4 h-4 mr-2"}),"Registrar Despesa"]})}),e.jsxs(ue,{children:[e.jsx(ge,{children:e.jsx(he,{children:"Lançamento de Despesas de Viagem"})}),e.jsxs("form",{"trae-inspector-start-line":"74","trae-inspector-start-column":"8","trae-inspector-end-line":"120","trae-inspector-end-column":"15","trae-inspector-file-path":"src\\\\components\\\\driver\\\\TripExpenseDialog.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",onSubmit:c,className:"space-y-4",children:[e.jsxs("div",{"trae-inspector-start-line":"75","trae-inspector-start-column":"10","trae-inspector-end-line":"82","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\components\\\\driver\\\\TripExpenseDialog.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",children:[e.jsx(U,{children:"Veículo"}),e.jsx(ve,{value:o.plate,onChange:i=>m({...o,plate:i}),placeholder:"Selecione o Veículo"})]}),e.jsxs("div",{"trae-inspector-start-line":"83","trae-inspector-start-column":"10","trae-inspector-end-line":"97","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\components\\\\driver\\\\TripExpenseDialog.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",children:[e.jsx(U,{children:"Tipo de Despesa"}),e.jsxs(se,{value:o.tipo,onValueChange:i=>m({...o,tipo:i}),children:[e.jsx(ae,{children:e.jsx(ne,{placeholder:"Selecione..."})}),e.jsxs(oe,{children:[e.jsx(T,{value:"refeicao",children:"Refeição (Kamoa)"}),e.jsx(T,{value:"disco_tacografo",children:"Disco de Tacógrafo"}),e.jsx(T,{value:"pedagio",children:"Pedágio"}),e.jsx(T,{value:"estacionamento",children:"Estacionamento"}),e.jsx(T,{value:"outros",children:"Outros"})]})]})]}),e.jsxs("div",{"trae-inspector-start-line":"98","trae-inspector-start-column":"10","trae-inspector-end-line":"106","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\components\\\\driver\\\\TripExpenseDialog.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",children:[e.jsx(U,{children:"Descrição"}),e.jsx($,{required:!0,value:o.descricao,onChange:i=>m({...o,descricao:i.target.value}),placeholder:"Detalhe a despesa..."})]}),e.jsxs("div",{"trae-inspector-start-line":"107","trae-inspector-start-column":"10","trae-inspector-end-line":"116","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\components\\\\driver\\\\TripExpenseDialog.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",children:[e.jsx(U,{children:"Valor (R$)"}),e.jsx($,{required:!0,type:"number",step:"0.01",value:o.valor,onChange:i=>m({...o,valor:i.target.value})})]}),e.jsx(L,{type:"submit",className:"w-full",disabled:n,children:n?"Enviando...":"Solicitar Aprovação"})]})]})]})}const Ce=[{id:"pneus",label:"Verificar pressão dos pneus"},{id:"oleo",label:"Verificar nível de óleo"},{id:"agua",label:"Verificar nível de água"},{id:"freios",label:"Testar freios"},{id:"luzes",label:"Verificar todas as luzes"},{id:"documentos",label:"Verificar documentação do veículo"},{id:"carga",label:"Conferir amarração da carga"},{id:"extintor",label:"Verificar extintor"}];function mt(){const{user:t}=q(),[r,g]=u.useState({}),[n,p]=u.useState(!1),[o,m]=u.useState(""),c=async()=>{if(!Ce.every(a=>r[a.id])){v.error("Complete todos os itens do checklist");return}if(!o){v.error("Informe a placa do veículo");return}p(!0);try{const a=Ce.map(A=>({id:A.id,label:A.label,checked:r[A.id],timestamp:new Date().toISOString()})),{error:d}=await w.from("maintenance_checklists").insert({vehicle_plate:o,checklist_type:"pre_trip",mechanic_id:t==null?void 0:t.id,status:"concluido",items:a,completed_at:new Date().toISOString()});if(d)throw d;v.success("Checklist concluído!"),g({}),m("")}catch(a){console.error(a),v.error("Erro ao salvar checklist")}finally{p(!1)}};return e.jsxs(E,{children:[e.jsx(V,{children:e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(ke,{className:"w-5 h-5"}),"Checklist Pré-Viagem"]})}),e.jsxs(P,{className:"space-y-4",children:[e.jsxs("div",{"trae-inspector-start-line":"83","trae-inspector-start-column":"8","trae-inspector-end-line":"90","trae-inspector-end-column":"14","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverChecklist.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",children:[e.jsx(U,{className:"mb-2 block",children:"Placa do Veículo"}),e.jsx(ve,{value:o,onChange:m,placeholder:"Selecione a placa"})]}),e.jsx("div",{"trae-inspector-start-line":"92","trae-inspector-start-column":"8","trae-inspector-end-line":"110","trae-inspector-end-column":"14","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverChecklist.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"space-y-3",children:Ce.map(i=>e.jsxs("div",{"trae-inspector-start-line":"94","trae-inspector-start-column":"12","trae-inspector-end-line":"108","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverChecklist.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex items-center space-x-2",children:[e.jsx(Ge,{id:i.id,checked:r[i.id]||!1,onCheckedChange:a=>g({...r,[i.id]:a})}),e.jsx("label",{"trae-inspector-start-line":"102","trae-inspector-start-column":"14","trae-inspector-end-line":"107","trae-inspector-end-column":"22","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverChecklist.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",htmlFor:i.id,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:i.label})]},i.id))}),e.jsx(L,{onClick:c,className:"w-full",disabled:n,children:n?"Salvando...":"Concluir Checklist"})]})]})}function dt(){const{user:t}=q(),{data:r,refetch:g}=ie({queryKey:["driver-trips",t==null?void 0:t.id],queryFn:async()=>{const{data:p,error:o}=await w.from("trips").select(`
          *,
          cte(
            destinatario_cidade,
            destinatario_uf,
            remetente_cidade,
            remetente_uf
          )
        `).eq("driver_id",t==null?void 0:t.id).eq("status","pending").order("created_at",{ascending:!1}).limit(5);if(o)throw o;return p},enabled:!!(t!=null&&t.id)}),n=async p=>{try{const{error:o}=await w.from("trips").update({status:"in_progress"}).eq("id",p);if(o)throw o;v.success("Viagem aceita!"),g()}catch(o){console.error(o),v.error("Erro ao aceitar viagem")}};return e.jsxs(E,{children:[e.jsx(V,{children:e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(me,{className:"w-5 h-5"}),"Novas Viagens"]})}),e.jsx(P,{className:"space-y-3",children:r&&r.length>0?r.map(p=>e.jsx(E,{className:"border-l-4 border-l-blue-500",children:e.jsxs(P,{className:"p-4 space-y-3",children:[e.jsxs("div",{"trae-inspector-start-line":"70","trae-inspector-start-column":"16","trae-inspector-end-line":"77","trae-inspector-end-column":"22","trae-inspector-file-path":"src\\\\components\\\\driver\\\\TripAlerts.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex items-center justify-between",children:[e.jsx(M,{variant:"secondary",children:p.vehicle_plate}),e.jsx(M,{children:G(new Date(p.created_at),"dd/MM HH:mm",{locale:J})})]}),p.cte&&p.cte[0]&&e.jsxs("div",{"trae-inspector-start-line":"80","trae-inspector-start-column":"18","trae-inspector-end-line":"93","trae-inspector-end-column":"24","trae-inspector-file-path":"src\\\\components\\\\driver\\\\TripAlerts.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"space-y-2 text-sm",children:[e.jsxs("div",{"trae-inspector-start-line":"81","trae-inspector-start-column":"20","trae-inspector-end-line":"86","trae-inspector-end-column":"26","trae-inspector-file-path":"src\\\\components\\\\driver\\\\TripAlerts.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex items-start gap-2",children:[e.jsx(Z,{className:"w-4 h-4 mt-0.5 text-green-600"}),e.jsxs("div",{"trae-inspector-start-line":"83","trae-inspector-start-column":"22","trae-inspector-end-line":"85","trae-inspector-end-column":"28","trae-inspector-file-path":"src\\\\components\\\\driver\\\\TripAlerts.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",children:[e.jsx("strong",{"trae-inspector-start-line":"84","trae-inspector-start-column":"24","trae-inspector-end-line":"84","trae-inspector-end-column":"48","trae-inspector-file-path":"src\\\\components\\\\driver\\\\TripAlerts.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Origem%3A%22%2C%22textStartLine%22%3A%2284%22%2C%22textStartColumn%22%3A%2232%22%2C%22textEndLine%22%3A%2284%22%2C%22textEndColumn%22%3A%2239%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",children:"Origem:"})," ",p.cte[0].remetente_cidade,"/",p.cte[0].remetente_uf]})]}),e.jsxs("div",{"trae-inspector-start-line":"87","trae-inspector-start-column":"20","trae-inspector-end-line":"92","trae-inspector-end-column":"26","trae-inspector-file-path":"src\\\\components\\\\driver\\\\TripAlerts.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex items-start gap-2",children:[e.jsx(Re,{className:"w-4 h-4 mt-0.5 text-red-600"}),e.jsxs("div",{"trae-inspector-start-line":"89","trae-inspector-start-column":"22","trae-inspector-end-line":"91","trae-inspector-end-column":"28","trae-inspector-file-path":"src\\\\components\\\\driver\\\\TripAlerts.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",children:[e.jsx("strong",{"trae-inspector-start-line":"90","trae-inspector-start-column":"24","trae-inspector-end-line":"90","trae-inspector-end-column":"49","trae-inspector-file-path":"src\\\\components\\\\driver\\\\TripAlerts.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Destino%3A%22%2C%22textStartLine%22%3A%2290%22%2C%22textStartColumn%22%3A%2232%22%2C%22textEndLine%22%3A%2290%22%2C%22textEndColumn%22%3A%2240%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",children:"Destino:"})," ",p.cte[0].destinatario_cidade,"/",p.cte[0].destinatario_uf]})]})]}),e.jsxs("div",{"trae-inspector-start-line":"96","trae-inspector-start-column":"16","trae-inspector-end-line":"99","trae-inspector-end-column":"22","trae-inspector-file-path":"src\\\\components\\\\driver\\\\TripAlerts.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(X,{className:"w-4 h-4"}),e.jsxs("span",{"trae-inspector-start-line":"98","trae-inspector-start-column":"18","trae-inspector-end-line":"98","trae-inspector-end-column":"130","trae-inspector-file-path":"src\\\\components\\\\driver\\\\TripAlerts.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",children:["Início previsto: ",G(new Date(p.departure_date),"dd/MM/yyyy 'às' HH:mm",{locale:J})]})]}),e.jsx(L,{onClick:()=>n(p.id),className:"w-full",size:"sm",children:"Aceitar Viagem"})]})},p.id)):e.jsxs("div",{"trae-inspector-start-line":"112","trae-inspector-start-column":"10","trae-inspector-end-line":"115","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\components\\\\driver\\\\TripAlerts.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-center py-8 text-muted-foreground",children:[e.jsx(me,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{"trae-inspector-start-line":"114","trae-inspector-start-column":"12","trae-inspector-end-line":"114","trae-inspector-end-column":"62","trae-inspector-file-path":"src\\\\components\\\\driver\\\\TripAlerts.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Nenhuma%20viagem%20pendente%22%2C%22textStartLine%22%3A%22114%22%2C%22textStartColumn%22%3A%2235%22%2C%22textEndLine%22%3A%22114%22%2C%22textEndColumn%22%3A%2258%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-sm",children:"Nenhuma viagem pendente"})]})})]})}const ut=()=>{const{user:t}=q(),[r,g]=u.useState({onTimeDeliveries:0,totalTrips:0,averageRating:0,totalKm:0,violations:0}),[n,p]=u.useState([]);u.useEffect(()=>{o()},[t]);const o=async()=>{var h;if(!t)return;const{data:c}=await w.from("driver_work_sessions").select("*").eq("driver_id",t.id).eq("status","finalizada"),{data:i}=await w.from("driver_violations").select("*").eq("driver_id",t.id).eq("resolvida",!1),{data:a}=await w.from("refuelings").select("km").eq("driver_id",t.id).order("km",{ascending:!1}).limit(1),d=(c==null?void 0:c.length)||0,A=((h=a==null?void 0:a[0])==null?void 0:h.km)||0,s=(i==null?void 0:i.length)||0,x=s===0?.98:Math.max(.85,1-s*.05);g({onTimeDeliveries:Math.round(d*x),totalTrips:d,averageRating:4.8,totalKm:A,violations:s});const b=[];d>=100&&b.push({id:1,icon:"⚡",title:"100 Entregas",description:"Sem atrasos",achieved:!0}),s===0&&d>=10&&b.push({id:2,icon:"🌟",title:"5 Estrelas",description:`${d} avaliações`,achieved:!0});const C=new Date().toLocaleDateString("pt-BR",{month:"long",year:"numeric"});x>=.95&&b.push({id:3,icon:"🏆",title:"Motorista do Mês",description:C,achieved:!0}),p(b)},m=r.totalTrips>0?Math.round(r.onTimeDeliveries/r.totalTrips*100):0;return e.jsxs("div",{"trae-inspector-start-line":"105","trae-inspector-start-column":"4","trae-inspector-end-line":"196","trae-inspector-end-column":"10","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPerformance.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"space-y-6",children:[e.jsxs(E,{children:[e.jsx(V,{children:e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"h-5 w-5"}),"Desempenho"]})}),e.jsx(P,{className:"space-y-4",children:e.jsxs("div",{"trae-inspector-start-line":"114","trae-inspector-start-column":"10","trae-inspector-end-line":"158","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPerformance.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{"trae-inspector-start-line":"115","trae-inspector-start-column":"12","trae-inspector-end-line":"124","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPerformance.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"space-y-2 p-4 bg-green-500/10 rounded-lg border border-green-500/20",children:[e.jsxs("div",{"trae-inspector-start-line":"116","trae-inspector-start-column":"14","trae-inspector-end-line":"119","trae-inspector-end-column":"20","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPerformance.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex items-center gap-2",children:[e.jsx(Ze,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{"trae-inspector-start-line":"118","trae-inspector-start-column":"16","trae-inspector-end-line":"118","trae-inspector-end-column":"88","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPerformance.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Entregas%20no%20Prazo%22%2C%22textStartLine%22%3A%22118%22%2C%22textStartColumn%22%3A%2264%22%2C%22textEndLine%22%3A%22118%22%2C%22textEndColumn%22%3A%2281%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-sm text-muted-foreground",children:"Entregas no Prazo"})]}),e.jsxs("p",{"trae-inspector-start-line":"120","trae-inspector-start-column":"14","trae-inspector-end-line":"120","trae-inspector-end-column":"86","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPerformance.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-3xl font-bold text-green-600",children:[m,"%"]}),e.jsxs("p",{"trae-inspector-start-line":"121","trae-inspector-start-column":"14","trae-inspector-end-line":"123","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPerformance.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-xs text-muted-foreground",children:[r.onTimeDeliveries," de ",r.totalTrips," viagens"]})]}),e.jsxs("div",{"trae-inspector-start-line":"126","trae-inspector-start-column":"12","trae-inspector-end-line":"135","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPerformance.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"space-y-2 p-4 bg-yellow-500/10 rounded-lg border border-yellow-500/20",children:[e.jsxs("div",{"trae-inspector-start-line":"127","trae-inspector-start-column":"14","trae-inspector-end-line":"130","trae-inspector-end-column":"20","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPerformance.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex items-center gap-2",children:[e.jsx(Ye,{className:"h-4 w-4 text-yellow-600"}),e.jsx("span",{"trae-inspector-start-line":"129","trae-inspector-start-column":"16","trae-inspector-end-line":"129","trae-inspector-end-column":"86","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPerformance.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Avalia%C3%A7%C3%A3o%20M%C3%A9dia%22%2C%22textStartLine%22%3A%22129%22%2C%22textStartColumn%22%3A%2264%22%2C%22textEndLine%22%3A%22129%22%2C%22textEndColumn%22%3A%2279%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-sm text-muted-foreground",children:"Avaliação Média"})]}),e.jsxs("p",{"trae-inspector-start-line":"131","trae-inspector-start-column":"14","trae-inspector-end-line":"131","trae-inspector-end-column":"91","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPerformance.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-3xl font-bold text-yellow-600",children:[r.averageRating," ⭐"]}),e.jsxs("p",{"trae-inspector-start-line":"132","trae-inspector-start-column":"14","trae-inspector-end-line":"134","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPerformance.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-xs text-muted-foreground",children:["Baseado em ",r.totalTrips," viagens"]})]}),e.jsxs("div",{"trae-inspector-start-line":"137","trae-inspector-start-column":"12","trae-inspector-end-line":"146","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPerformance.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"space-y-2 p-4 bg-blue-500/10 rounded-lg border border-blue-500/20",children:[e.jsxs("div",{"trae-inspector-start-line":"138","trae-inspector-start-column":"14","trae-inspector-end-line":"141","trae-inspector-end-column":"20","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPerformance.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex items-center gap-2",children:[e.jsx(ee,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{"trae-inspector-start-line":"140","trae-inspector-start-column":"16","trae-inspector-end-line":"140","trae-inspector-end-column":"81","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPerformance.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Km%20Rodados%22%2C%22textStartLine%22%3A%22140%22%2C%22textStartColumn%22%3A%2264%22%2C%22textEndLine%22%3A%22140%22%2C%22textEndColumn%22%3A%2274%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-sm text-muted-foreground",children:"Km Rodados"})]}),e.jsxs("p",{"trae-inspector-start-line":"142","trae-inspector-start-column":"14","trae-inspector-end-line":"144","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPerformance.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-2xl font-bold text-blue-600",children:[(r.totalKm/1e3).toFixed(1)," mil km"]}),e.jsx("p",{"trae-inspector-start-line":"145","trae-inspector-start-column":"14","trae-inspector-end-line":"145","trae-inspector-end-column":"78","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPerformance.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Total%20acumulado%22%2C%22textStartLine%22%3A%22145%22%2C%22textStartColumn%22%3A%2259%22%2C%22textEndLine%22%3A%22145%22%2C%22textEndColumn%22%3A%2274%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-xs text-muted-foreground",children:"Total acumulado"})]}),e.jsxs("div",{"trae-inspector-start-line":"148","trae-inspector-start-column":"12","trae-inspector-end-line":"157","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPerformance.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"space-y-2 p-4 bg-red-500/10 rounded-lg border border-red-500/20",children:[e.jsxs("div",{"trae-inspector-start-line":"149","trae-inspector-start-column":"14","trae-inspector-end-line":"152","trae-inspector-end-column":"20","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPerformance.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex items-center gap-2",children:[e.jsx(Te,{className:"h-4 w-4 text-red-600"}),e.jsx("span",{"trae-inspector-start-line":"151","trae-inspector-start-column":"16","trae-inspector-end-line":"151","trae-inspector-end-column":"80","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPerformance.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Viola%C3%A7%C3%B5es%22%2C%22textStartLine%22%3A%22151%22%2C%22textStartColumn%22%3A%2264%22%2C%22textEndLine%22%3A%22151%22%2C%22textEndColumn%22%3A%2273%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-sm text-muted-foreground",children:"Violações"})]}),e.jsx("p",{"trae-inspector-start-line":"153","trae-inspector-start-column":"14","trae-inspector-end-line":"153","trae-inspector-end-column":"83","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPerformance.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-3xl font-bold text-red-600",children:r.violations}),e.jsx("p",{"trae-inspector-start-line":"154","trae-inspector-start-column":"14","trae-inspector-end-line":"156","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPerformance.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-xs text-muted-foreground",children:r.violations===0?"Parabéns!":"Pendentes"})]})]})})]}),e.jsxs(E,{children:[e.jsx(V,{children:e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(at,{className:"h-5 w-5"}),"Conquistas"]})}),e.jsx(P,{children:n.length>0?e.jsx("div",{"trae-inspector-start-line":"171","trae-inspector-start-column":"12","trae-inspector-end-line":"187","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPerformance.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:n.map(c=>e.jsxs("div",{"trae-inspector-start-line":"173","trae-inspector-start-column":"16","trae-inspector-end-line":"185","trae-inspector-end-column":"22","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPerformance.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"p-4 bg-gradient-to-br from-primary/10 to-primary/5 rounded-lg border border-primary/20",children:[e.jsx("div",{"trae-inspector-start-line":"177","trae-inspector-start-column":"18","trae-inspector-end-line":"177","trae-inspector-end-column":"73","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPerformance.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-4xl mb-2",children:c.icon}),e.jsx("h4",{"trae-inspector-start-line":"178","trae-inspector-start-column":"18","trae-inspector-end-line":"178","trae-inspector-end-column":"77","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPerformance.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"font-semibold mb-1",children:c.title}),e.jsx("p",{"trae-inspector-start-line":"179","trae-inspector-start-column":"18","trae-inspector-end-line":"179","trae-inspector-end-column":"92","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPerformance.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-sm text-muted-foreground",children:c.description}),c.achieved&&e.jsx(M,{variant:"default",className:"mt-2",children:"Conquistado"})]},c.id))}):e.jsxs("div",{"trae-inspector-start-line":"189","trae-inspector-start-column":"12","trae-inspector-end-line":"192","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPerformance.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-center py-8 text-muted-foreground",children:[e.jsx(Ie,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{"trae-inspector-start-line":"191","trae-inspector-start-column":"14","trae-inspector-end-line":"191","trae-inspector-end-column":"70","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPerformance.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Continue%20trabalhando%20para%20desbloquear%20conquistas!%22%2C%22textStartLine%22%3A%22191%22%2C%22textStartColumn%22%3A%2217%22%2C%22textEndLine%22%3A%22191%22%2C%22textEndColumn%22%3A%2266%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",children:"Continue trabalhando para desbloquear conquistas!"})]})})]})]})},gt=()=>{const{user:t}=q(),[r,g]=u.useState([]),[n,p]=u.useState(!0);u.useEffect(()=>{o()},[t]);const o=async()=>{if(!t)return;const{data:a,error:d}=await w.from("driver_payroll").select("*").eq("driver_id",t.id).order("ano",{ascending:!1}).order("mes",{ascending:!1}).limit(12);a&&g(a),p(!1)},m=a=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(a),c=(a,d)=>{const A=new Date(d,a-1,1);return G(A,"MMMM 'de' yyyy",{locale:J})},i=a=>{const d={calculado:{variant:"secondary",label:"Calculado"},aprovado:{variant:"default",label:"Aprovado"},pago:{variant:"outline",label:"Pago"},pendente:{variant:"destructive",label:"Pendente"}},A=d[a]||d.calculado;return e.jsx(M,{variant:A.variant,children:A.label})};return e.jsxs(E,{children:[e.jsx(V,{children:e.jsxs("div",{"trae-inspector-start-line":"65","trae-inspector-start-column":"8","trae-inspector-end-line":"74","trae-inspector-end-column":"14","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPayrollHistory.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex items-center justify-between",children:[e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(Qe,{className:"h-5 w-5"}),"Memória de Cálculos"]}),e.jsxs(M,{variant:"outline",className:"flex items-center gap-1",children:[e.jsx(Xe,{className:"h-3 w-3"}),"Últimos 12 meses"]})]})}),e.jsx(P,{children:e.jsx(Be,{className:"h-[600px] pr-4",children:n?e.jsx("div",{"trae-inspector-start-line":"79","trae-inspector-start-column":"12","trae-inspector-end-line":"81","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPayrollHistory.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Carregando%20hist%C3%B3rico...%22%2C%22textStartLine%22%3A%2279%22%2C%22textStartColumn%22%3A%2268%22%2C%22textEndLine%22%3A%2281%22%2C%22textEndColumn%22%3A%2212%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-center py-8 text-muted-foreground",children:"Carregando histórico..."}):r.length>0?e.jsx("div",{"trae-inspector-start-line":"83","trae-inspector-start-column":"12","trae-inspector-end-line":"185","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPayrollHistory.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"space-y-4",children:r.map(a=>e.jsxs("div",{"trae-inspector-start-line":"85","trae-inspector-start-column":"16","trae-inspector-end-line":"183","trae-inspector-end-column":"22","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPayrollHistory.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[e.jsxs("div",{"trae-inspector-start-line":"89","trae-inspector-start-column":"18","trae-inspector-end-line":"102","trae-inspector-end-column":"24","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPayrollHistory.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{"trae-inspector-start-line":"90","trae-inspector-start-column":"20","trae-inspector-end-line":"100","trae-inspector-end-column":"26","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPayrollHistory.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",children:[e.jsxs("div",{"trae-inspector-start-line":"91","trae-inspector-start-column":"22","trae-inspector-end-line":"96","trae-inspector-end-column":"28","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPayrollHistory.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex items-center gap-2 mb-1",children:[e.jsx(Y,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("h4",{"trae-inspector-start-line":"93","trae-inspector-start-column":"24","trae-inspector-end-line":"95","trae-inspector-end-column":"29","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPayrollHistory.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"font-semibold capitalize",children:c(a.mes,a.ano)})]}),e.jsxs("p",{"trae-inspector-start-line":"97","trae-inspector-start-column":"22","trae-inspector-end-line":"99","trae-inspector-end-column":"26","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPayrollHistory.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-xs text-muted-foreground",children:["Calculado em ",G(new Date(a.created_at),"dd/MM/yyyy 'às' HH:mm",{locale:J})]})]}),i(a.status)]}),e.jsx(re,{className:"my-3"}),e.jsxs("div",{"trae-inspector-start-line":"106","trae-inspector-start-column":"18","trae-inspector-end-line":"182","trae-inspector-end-column":"24","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPayrollHistory.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"space-y-2",children:[e.jsxs("div",{"trae-inspector-start-line":"107","trae-inspector-start-column":"20","trae-inspector-end-line":"132","trae-inspector-end-column":"26","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPayrollHistory.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{"trae-inspector-start-line":"108","trae-inspector-start-column":"22","trae-inspector-end-line":"113","trae-inspector-end-column":"28","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPayrollHistory.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"space-y-1",children:[e.jsx("p",{"trae-inspector-start-line":"109","trae-inspector-start-column":"24","trae-inspector-end-line":"109","trae-inspector-end-column":"85","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPayrollHistory.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Sal%C3%A1rio%20Base%22%2C%22textStartLine%22%3A%22109%22%2C%22textStartColumn%22%3A%2269%22%2C%22textEndLine%22%3A%22109%22%2C%22textEndColumn%22%3A%2281%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-xs text-muted-foreground",children:"Salário Base"}),e.jsx("p",{"trae-inspector-start-line":"110","trae-inspector-start-column":"24","trae-inspector-end-line":"112","trae-inspector-end-column":"28","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPayrollHistory.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-sm font-semibold",children:m(a.salario_base)})]}),e.jsxs("div",{"trae-inspector-start-line":"114","trae-inspector-start-column":"22","trae-inspector-end-line":"119","trae-inspector-end-column":"28","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPayrollHistory.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"space-y-1",children:[e.jsx("p",{"trae-inspector-start-line":"115","trae-inspector-start-column":"24","trae-inspector-end-line":"115","trae-inspector-end-column":"86","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPayrollHistory.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Horas%20Normais%22%2C%22textStartLine%22%3A%22115%22%2C%22textStartColumn%22%3A%2269%22%2C%22textEndLine%22%3A%22115%22%2C%22textEndColumn%22%3A%2282%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-xs text-muted-foreground",children:"Horas Normais"}),e.jsx("p",{"trae-inspector-start-line":"116","trae-inspector-start-column":"24","trae-inspector-end-line":"118","trae-inspector-end-column":"28","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPayrollHistory.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-sm font-semibold",children:m(a.valor_horas_normais)})]}),e.jsxs("div",{"trae-inspector-start-line":"120","trae-inspector-start-column":"22","trae-inspector-end-line":"125","trae-inspector-end-column":"28","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPayrollHistory.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"space-y-1",children:[e.jsx("p",{"trae-inspector-start-line":"121","trae-inspector-start-column":"24","trae-inspector-end-line":"121","trae-inspector-end-column":"85","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPayrollHistory.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Horas%20Extras%22%2C%22textStartLine%22%3A%22121%22%2C%22textStartColumn%22%3A%2269%22%2C%22textEndLine%22%3A%22121%22%2C%22textEndColumn%22%3A%2281%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-xs text-muted-foreground",children:"Horas Extras"}),e.jsxs("p",{"trae-inspector-start-line":"122","trae-inspector-start-column":"24","trae-inspector-end-line":"124","trae-inspector-end-column":"28","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPayrollHistory.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-sm font-semibold text-green-600",children:["+",m(a.valor_horas_extras)]})]}),e.jsxs("div",{"trae-inspector-start-line":"126","trae-inspector-start-column":"22","trae-inspector-end-line":"131","trae-inspector-end-column":"28","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPayrollHistory.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"space-y-1",children:[e.jsx("p",{"trae-inspector-start-line":"127","trae-inspector-start-column":"24","trae-inspector-end-line":"127","trae-inspector-end-column":"85","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPayrollHistory.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Horas%20Espera%22%2C%22textStartLine%22%3A%22127%22%2C%22textStartColumn%22%3A%2269%22%2C%22textEndLine%22%3A%22127%22%2C%22textEndColumn%22%3A%2281%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-xs text-muted-foreground",children:"Horas Espera"}),e.jsx("p",{"trae-inspector-start-line":"128","trae-inspector-start-column":"24","trae-inspector-end-line":"130","trae-inspector-end-column":"28","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPayrollHistory.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-sm font-semibold",children:m(a.valor_horas_espera)})]})]}),e.jsx(re,{className:"my-2"}),e.jsxs("div",{"trae-inspector-start-line":"136","trae-inspector-start-column":"20","trae-inspector-end-line":"161","trae-inspector-end-column":"26","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPayrollHistory.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{"trae-inspector-start-line":"137","trae-inspector-start-column":"22","trae-inspector-end-line":"142","trae-inspector-end-column":"28","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPayrollHistory.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"space-y-1",children:[e.jsx("p",{"trae-inspector-start-line":"138","trae-inspector-start-column":"24","trae-inspector-end-line":"138","trae-inspector-end-column":"83","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPayrollHistory.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Total%20CT-e%22%2C%22textStartLine%22%3A%22138%22%2C%22textStartColumn%22%3A%2269%22%2C%22textEndLine%22%3A%22138%22%2C%22textEndColumn%22%3A%2279%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-xs text-muted-foreground",children:"Total CT-e"}),e.jsx("p",{"trae-inspector-start-line":"139","trae-inspector-start-column":"24","trae-inspector-end-line":"141","trae-inspector-end-column":"28","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPayrollHistory.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-sm font-semibold",children:m(a.total_valor_ctes)})]}),e.jsxs("div",{"trae-inspector-start-line":"143","trae-inspector-start-column":"22","trae-inspector-end-line":"148","trae-inspector-end-column":"28","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPayrollHistory.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"space-y-1",children:[e.jsx("p",{"trae-inspector-start-line":"144","trae-inspector-start-column":"24","trae-inspector-end-line":"144","trae-inspector-end-column":"84","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPayrollHistory.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Combust%C3%ADvel%22%2C%22textStartLine%22%3A%22144%22%2C%22textStartColumn%22%3A%2269%22%2C%22textEndLine%22%3A%22144%22%2C%22textEndColumn%22%3A%2280%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-xs text-muted-foreground",children:"Combustível"}),e.jsxs("p",{"trae-inspector-start-line":"145","trae-inspector-start-column":"24","trae-inspector-end-line":"147","trae-inspector-end-column":"28","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPayrollHistory.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-sm font-semibold text-red-600",children:["-",m(a.total_combustivel)]})]}),e.jsxs("div",{"trae-inspector-start-line":"149","trae-inspector-start-column":"22","trae-inspector-end-line":"154","trae-inspector-end-column":"28","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPayrollHistory.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"space-y-1",children:[e.jsx("p",{"trae-inspector-start-line":"150","trae-inspector-start-column":"24","trae-inspector-end-line":"150","trae-inspector-end-column":"90","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPayrollHistory.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Base%20Gratifica%C3%A7%C3%A3o%22%2C%22textStartLine%22%3A%22150%22%2C%22textStartColumn%22%3A%2269%22%2C%22textEndLine%22%3A%22150%22%2C%22textEndColumn%22%3A%2286%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-xs text-muted-foreground",children:"Base Gratificação"}),e.jsx("p",{"trae-inspector-start-line":"151","trae-inspector-start-column":"24","trae-inspector-end-line":"153","trae-inspector-end-column":"28","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPayrollHistory.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-sm font-semibold",children:m(a.base_calculo_gratificacao)})]}),e.jsxs("div",{"trae-inspector-start-line":"155","trae-inspector-start-column":"22","trae-inspector-end-line":"160","trae-inspector-end-column":"28","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPayrollHistory.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"space-y-1",children:[e.jsx("p",{"trae-inspector-start-line":"156","trae-inspector-start-column":"24","trae-inspector-end-line":"156","trae-inspector-end-column":"85","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPayrollHistory.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Gratifica%C3%A7%C3%A3o%22%2C%22textStartLine%22%3A%22156%22%2C%22textStartColumn%22%3A%2269%22%2C%22textEndLine%22%3A%22156%22%2C%22textEndColumn%22%3A%2281%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-xs text-muted-foreground",children:"Gratificação"}),e.jsxs("p",{"trae-inspector-start-line":"157","trae-inspector-start-column":"24","trae-inspector-end-line":"159","trae-inspector-end-column":"28","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPayrollHistory.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-sm font-semibold text-green-600",children:["+",m(a.valor_gratificacao)]})]})]}),e.jsx(re,{className:"my-2"}),e.jsxs("div",{"trae-inspector-start-line":"165","trae-inspector-start-column":"20","trae-inspector-end-line":"173","trae-inspector-end-column":"26","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPayrollHistory.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex items-center justify-between p-3 bg-primary/10 rounded-lg",children:[e.jsxs("div",{"trae-inspector-start-line":"166","trae-inspector-start-column":"22","trae-inspector-end-line":"169","trae-inspector-end-column":"28","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPayrollHistory.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex items-center gap-2",children:[e.jsx(Ue,{className:"h-4 w-4"}),e.jsx("span",{"trae-inspector-start-line":"168","trae-inspector-start-column":"24","trae-inspector-end-line":"168","trae-inspector-end-column":"76","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPayrollHistory.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Total%20L%C3%ADquido%22%2C%22textStartLine%22%3A%22168%22%2C%22textStartColumn%22%3A%2256%22%2C%22textEndLine%22%3A%22168%22%2C%22textEndColumn%22%3A%2269%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"font-semibold",children:"Total Líquido"})]}),e.jsx("span",{"trae-inspector-start-line":"170","trae-inspector-start-column":"22","trae-inspector-end-line":"172","trae-inspector-end-column":"29","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPayrollHistory.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-lg font-bold text-primary",children:m(a.total_liquido)})]}),a.observacoes&&e.jsx("div",{"trae-inspector-start-line":"176","trae-inspector-start-column":"22","trae-inspector-end-line":"180","trae-inspector-end-column":"28","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPayrollHistory.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"mt-2 p-2 bg-muted/50 rounded text-xs",children:e.jsxs("p",{"trae-inspector-start-line":"177","trae-inspector-start-column":"24","trae-inspector-end-line":"179","trae-inspector-end-column":"28","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPayrollHistory.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-muted-foreground",children:[e.jsx("strong",{"trae-inspector-start-line":"178","trae-inspector-start-column":"26","trae-inspector-end-line":"178","trae-inspector-end-column":"47","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPayrollHistory.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Obs%3A%22%2C%22textStartLine%22%3A%22178%22%2C%22textStartColumn%22%3A%2234%22%2C%22textEndLine%22%3A%22178%22%2C%22textEndColumn%22%3A%2238%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",children:"Obs:"})," ",a.observacoes]})})]})]},a.id))}):e.jsxs("div",{"trae-inspector-start-line":"187","trae-inspector-start-column":"12","trae-inspector-end-line":"190","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPayrollHistory.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-center py-8 text-muted-foreground",children:[e.jsx(ee,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{"trae-inspector-start-line":"189","trae-inspector-start-column":"14","trae-inspector-end-line":"189","trae-inspector-end-column":"61","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverPayrollHistory.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Nenhum%20hist%C3%B3rico%20de%20pagamento%20encontrado%22%2C%22textStartLine%22%3A%22189%22%2C%22textStartColumn%22%3A%2217%22%2C%22textEndLine%22%3A%22189%22%2C%22textEndColumn%22%3A%2257%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",children:"Nenhum histórico de pagamento encontrado"})]})})})]})},ht=()=>{const{user:t}=q(),[r,g]=u.useState([]),[n,p]=u.useState(!0);u.useEffect(()=>{o()},[t]);const o=async()=>{if(!t)return;const{data:i}=await w.from("driver_work_sessions").select("*").eq("driver_id",t.id).eq("status","finalizada").not("trip_id","is",null).order("data_inicio",{ascending:!1}).limit(20);if(!i){p(!1);return}const a=[];for(const d of i){const{data:A}=await w.from("cte").select("*").eq("trip_id",d.trip_id),{data:s}=await w.from("refuelings").select("*").eq("driver_id",t.id).gte("timestamp",d.data_inicio).lte("timestamp",d.data_fim||new Date().toISOString()),x=(A==null?void 0:A.reduce((h,N)=>h+Number(N.valor_total),0))||0,b=(s==null?void 0:s.reduce((h,N)=>h+Number(N.total_value),0))||0,C=x-b;a.push({session:d,ctes:A||[],refuelings:s||[],totalRevenue:x,totalFuel:b,netValue:C})}g(a),p(!1)},m=i=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(i),c=i=>{if(i.length===0)return{origin:"N/A",destination:"N/A"};const a=i[0],d=i[i.length-1];return{origin:`${a.remetente_cidade}/${a.remetente_uf}`,destination:`${d.destinatario_cidade}/${d.destinatario_uf}`}};return e.jsxs(E,{children:[e.jsx(V,{children:e.jsxs("div",{"trae-inspector-start-line":"106","trae-inspector-start-column":"8","trae-inspector-end-line":"112","trae-inspector-end-column":"14","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverRouteFinancial.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex items-center justify-between",children:[e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(je,{className:"h-5 w-5"}),"Rotas & Financeiro"]}),e.jsx(M,{variant:"outline",children:"Últimas 20 viagens"})]})}),e.jsx(P,{children:e.jsx(Be,{className:"h-[600px] pr-4",children:n?e.jsx("div",{"trae-inspector-start-line":"117","trae-inspector-start-column":"12","trae-inspector-end-line":"119","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverRouteFinancial.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Carregando%20rotas...%22%2C%22textStartLine%22%3A%22117%22%2C%22textStartColumn%22%3A%2268%22%2C%22textEndLine%22%3A%22119%22%2C%22textEndColumn%22%3A%2212%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-center py-8 text-muted-foreground",children:"Carregando rotas..."}):r.length>0?e.jsx("div",{"trae-inspector-start-line":"121","trae-inspector-start-column":"12","trae-inspector-end-line":"217","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverRouteFinancial.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"space-y-4",children:r.map((i,a)=>{const{origin:d,destination:A}=c(i.ctes);return e.jsxs("div",{"trae-inspector-start-line":"126","trae-inspector-start-column":"18","trae-inspector-end-line":"214","trae-inspector-end-column":"24","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverRouteFinancial.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[e.jsx("div",{"trae-inspector-start-line":"130","trae-inspector-start-column":"20","trae-inspector-end-line":"154","trae-inspector-end-column":"26","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverRouteFinancial.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex items-start justify-between mb-3",children:e.jsxs("div",{"trae-inspector-start-line":"131","trae-inspector-start-column":"22","trae-inspector-end-line":"153","trae-inspector-end-column":"28","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverRouteFinancial.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex-1",children:[e.jsxs("div",{"trae-inspector-start-line":"132","trae-inspector-start-column":"24","trae-inspector-end-line":"135","trae-inspector-end-column":"30","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverRouteFinancial.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex items-center gap-2 mb-2",children:[e.jsx(Z,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{"trae-inspector-start-line":"134","trae-inspector-start-column":"26","trae-inspector-end-line":"134","trae-inspector-end-column":"96","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverRouteFinancial.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"font-semibold",children:["Viagem #",r.length-a]})]}),e.jsxs("div",{"trae-inspector-start-line":"136","trae-inspector-start-column":"24","trae-inspector-end-line":"152","trae-inspector-end-column":"30","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverRouteFinancial.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"space-y-1 text-sm",children:[e.jsxs("p",{"trae-inspector-start-line":"137","trae-inspector-start-column":"26","trae-inspector-end-line":"139","trae-inspector-end-column":"30","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverRouteFinancial.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-muted-foreground",children:[e.jsx("strong",{"trae-inspector-start-line":"138","trae-inspector-start-column":"28","trae-inspector-end-line":"138","trae-inspector-end-column":"52","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverRouteFinancial.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Origem%3A%22%2C%22textStartLine%22%3A%22138%22%2C%22textStartColumn%22%3A%2236%22%2C%22textEndLine%22%3A%22138%22%2C%22textEndColumn%22%3A%2243%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",children:"Origem:"})," ",d]}),e.jsxs("p",{"trae-inspector-start-line":"140","trae-inspector-start-column":"26","trae-inspector-end-line":"142","trae-inspector-end-column":"30","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverRouteFinancial.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-muted-foreground",children:[e.jsx("strong",{"trae-inspector-start-line":"141","trae-inspector-start-column":"28","trae-inspector-end-line":"141","trae-inspector-end-column":"53","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverRouteFinancial.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Destino%3A%22%2C%22textStartLine%22%3A%22141%22%2C%22textStartColumn%22%3A%2236%22%2C%22textEndLine%22%3A%22141%22%2C%22textEndColumn%22%3A%2244%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",children:"Destino:"})," ",A]}),e.jsxs("p",{"trae-inspector-start-line":"143","trae-inspector-start-column":"26","trae-inspector-end-line":"145","trae-inspector-end-column":"30","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverRouteFinancial.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-muted-foreground",children:[e.jsx("strong",{"trae-inspector-start-line":"144","trae-inspector-start-column":"28","trae-inspector-end-line":"144","trae-inspector-end-column":"53","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverRouteFinancial.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Ve%C3%ADculo%3A%22%2C%22textStartLine%22%3A%22144%22%2C%22textStartColumn%22%3A%2236%22%2C%22textEndLine%22%3A%22144%22%2C%22textEndColumn%22%3A%2244%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",children:"Veículo:"})," ",i.session.vehicle_plate]}),e.jsxs("p",{"trae-inspector-start-line":"146","trae-inspector-start-column":"26","trae-inspector-end-line":"151","trae-inspector-end-column":"30","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverRouteFinancial.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-xs text-muted-foreground",children:[G(new Date(i.session.data_inicio),"dd/MM/yyyy",{locale:J}),i.session.data_fim&&` - ${G(new Date(i.session.data_fim),"dd/MM/yyyy",{locale:J})}`]})]})]})}),e.jsx(re,{className:"my-3"}),e.jsxs("div",{"trae-inspector-start-line":"158","trae-inspector-start-column":"20","trae-inspector-end-line":"184","trae-inspector-end-column":"26","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverRouteFinancial.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"grid grid-cols-2 gap-3 mb-3",children:[e.jsxs("div",{"trae-inspector-start-line":"159","trae-inspector-start-column":"22","trae-inspector-end-line":"170","trae-inspector-end-column":"28","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverRouteFinancial.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"p-3 bg-green-500/10 rounded-lg",children:[e.jsxs("div",{"trae-inspector-start-line":"160","trae-inspector-start-column":"24","trae-inspector-end-line":"163","trae-inspector-end-column":"30","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverRouteFinancial.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex items-center gap-2 mb-1",children:[e.jsx(Ve,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{"trae-inspector-start-line":"162","trae-inspector-start-column":"26","trae-inspector-end-line":"162","trae-inspector-end-column":"86","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverRouteFinancial.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22CT-es%22%2C%22textStartLine%22%3A%22162%22%2C%22textStartColumn%22%3A%2274%22%2C%22textEndLine%22%3A%22162%22%2C%22textEndColumn%22%3A%2279%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-xs text-muted-foreground",children:"CT-es"})]}),e.jsx("p",{"trae-inspector-start-line":"164","trae-inspector-start-column":"24","trae-inspector-end-line":"166","trae-inspector-end-column":"28","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverRouteFinancial.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-lg font-bold text-green-600",children:i.ctes.length}),e.jsx("p",{"trae-inspector-start-line":"167","trae-inspector-start-column":"24","trae-inspector-end-line":"169","trae-inspector-end-column":"28","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverRouteFinancial.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-xs text-muted-foreground",children:m(i.totalRevenue)})]}),e.jsxs("div",{"trae-inspector-start-line":"172","trae-inspector-start-column":"22","trae-inspector-end-line":"183","trae-inspector-end-column":"28","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverRouteFinancial.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"p-3 bg-red-500/10 rounded-lg",children:[e.jsxs("div",{"trae-inspector-start-line":"173","trae-inspector-start-column":"24","trae-inspector-end-line":"176","trae-inspector-end-column":"30","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverRouteFinancial.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex items-center gap-2 mb-1",children:[e.jsx(xe,{className:"h-4 w-4 text-red-600"}),e.jsx("span",{"trae-inspector-start-line":"175","trae-inspector-start-column":"26","trae-inspector-end-line":"175","trae-inspector-end-column":"92","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverRouteFinancial.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Combust%C3%ADvel%22%2C%22textStartLine%22%3A%22175%22%2C%22textStartColumn%22%3A%2274%22%2C%22textEndLine%22%3A%22175%22%2C%22textEndColumn%22%3A%2285%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-xs text-muted-foreground",children:"Combustível"})]}),e.jsxs("p",{"trae-inspector-start-line":"177","trae-inspector-start-column":"24","trae-inspector-end-line":"179","trae-inspector-end-column":"28","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverRouteFinancial.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-lg font-bold text-red-600",children:[i.refuelings.length,"x"]}),e.jsx("p",{"trae-inspector-start-line":"180","trae-inspector-start-column":"24","trae-inspector-end-line":"182","trae-inspector-end-column":"28","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverRouteFinancial.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-xs text-muted-foreground",children:m(i.totalFuel)})]})]}),e.jsxs("div",{"trae-inspector-start-line":"186","trae-inspector-start-column":"20","trae-inspector-end-line":"194","trae-inspector-end-column":"26","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverRouteFinancial.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex items-center justify-between p-3 bg-primary/10 rounded-lg",children:[e.jsxs("div",{"trae-inspector-start-line":"187","trae-inspector-start-column":"22","trae-inspector-end-line":"190","trae-inspector-end-column":"28","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverRouteFinancial.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex items-center gap-2",children:[e.jsx(ee,{className:"h-4 w-4"}),e.jsx("span",{"trae-inspector-start-line":"189","trae-inspector-start-column":"24","trae-inspector-end-line":"189","trae-inspector-end-column":"76","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverRouteFinancial.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Valor%20L%C3%ADquido%22%2C%22textStartLine%22%3A%22189%22%2C%22textStartColumn%22%3A%2256%22%2C%22textEndLine%22%3A%22189%22%2C%22textEndColumn%22%3A%2269%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"font-semibold",children:"Valor Líquido"})]}),e.jsx("span",{"trae-inspector-start-line":"191","trae-inspector-start-column":"22","trae-inspector-end-line":"193","trae-inspector-end-column":"29","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverRouteFinancial.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:`text-lg font-bold ${i.netValue>=0?"text-green-600":"text-red-600"}`,children:m(i.netValue)})]}),i.ctes.length>0&&e.jsxs("div",{"trae-inspector-start-line":"197","trae-inspector-start-column":"22","trae-inspector-end-line":"212","trae-inspector-end-column":"28","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverRouteFinancial.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"mt-3 space-y-1",children:[e.jsx("p",{"trae-inspector-start-line":"198","trae-inspector-start-column":"24","trae-inspector-end-line":"198","trae-inspector-end-column":"104","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverRouteFinancial.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22CT-es%20desta%20rota%3A%22%2C%22textStartLine%22%3A%22198%22%2C%22textStartColumn%22%3A%2283%22%2C%22textEndLine%22%3A%22198%22%2C%22textEndColumn%22%3A%22100%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-xs font-semibold text-muted-foreground",children:"CT-es desta rota:"}),e.jsx("div",{"trae-inspector-start-line":"199","trae-inspector-start-column":"24","trae-inspector-end-line":"211","trae-inspector-end-column":"30","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverRouteFinancial.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"space-y-1",children:i.ctes.map(s=>e.jsxs("div",{"trae-inspector-start-line":"201","trae-inspector-start-column":"28","trae-inspector-end-line":"209","trae-inspector-end-column":"34","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverRouteFinancial.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-xs p-2 bg-muted/30 rounded",children:[e.jsx("span",{"trae-inspector-start-line":"202","trae-inspector-start-column":"30","trae-inspector-end-line":"202","trae-inspector-end-column":"81","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverRouteFinancial.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"font-mono",children:s.numero_cte})," - ",e.jsxs("span",{"trae-inspector-start-line":"204","trae-inspector-start-column":"30","trae-inspector-end-line":"206","trae-inspector-end-column":"37","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverRouteFinancial.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-muted-foreground",children:[s.remetente_cidade,"/",s.remetente_uf," → ",s.destinatario_cidade,"/",s.destinatario_uf]})," - ",e.jsx("span",{"trae-inspector-start-line":"208","trae-inspector-start-column":"30","trae-inspector-end-line":"208","trae-inspector-end-column":"102","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverRouteFinancial.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"font-semibold",children:m(s.valor_total)})]},s.id))})]})]},i.session.id)})}):e.jsxs("div",{"trae-inspector-start-line":"219","trae-inspector-start-column":"12","trae-inspector-end-line":"222","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverRouteFinancial.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-center py-8 text-muted-foreground",children:[e.jsx(je,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{"trae-inspector-start-line":"221","trae-inspector-start-column":"14","trae-inspector-end-line":"221","trae-inspector-end-column":"66","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DriverRouteFinancial.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Nenhuma%20rota%20com%20dados%20financeiros%20encontrada%22%2C%22textStartLine%22%3A%22221%22%2C%22textStartColumn%22%3A%2217%22%2C%22textEndLine%22%3A%22221%22%2C%22textEndColumn%22%3A%2262%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",children:"Nenhuma rota com dados financeiros encontrada"})]})})})]})};function xt(){const{geocode:t,calculateRoute:r,loading:g}=et(),[n,p]=u.useState({address:""}),[o,m]=u.useState([{address:""}]),[c,i]=u.useState(null),[a,d]=u.useState(!1),A=()=>{m([...o,{address:""}])},s=C=>{o.length>1&&m(o.filter((h,N)=>N!==C))},x=(C,h)=>{const N=[...o];N[C].address=h,m(N)},b=async()=>{if(!n.address.trim()){v.error("Informe o endereço de origem");return}const C=o.filter(h=>h.address.trim());if(C.length===0){v.error("Informe pelo menos um endereço de entrega");return}d(!0),i(null);try{v.info("Buscando endereço de origem...");const h=await t(n.address);if(!h){v.error("Endereço de origem não encontrado"),d(!1);return}const N={lat:h.position.lat,lng:h.position.lon,address:h.address.freeformAddress};p(D=>({...D,lat:N.lat,lng:N.lng})),v.info("Buscando endereços de entrega...");const O=[];for(let D=0;D<C.length;D++){const f=await t(C[D].address);if(!f){v.warning(`Entrega ${D+1}: endereço não encontrado, pulando...`);continue}O.push({lat:f.position.lat,lng:f.position.lon,address:f.address.freeformAddress,originalIndex:o.indexOf(C[D])})}if(O.length===0){v.error("Nenhum endereço de entrega válido encontrado"),d(!1);return}const y=[...o];O.forEach(D=>{y[D.originalIndex]={address:D.address,lat:D.lat,lng:D.lng}}),m(y),v.info("Calculando rota otimizada...");const _=[N,...O],k=[];let W=0,z=0;for(let D=0;D<_.length-1;D++){const f=await r({lat:_[D].lat,lng:_[D].lng},{lat:_[D+1].lat,lng:_[D+1].lng},"truck");f&&(W+=f.distance,z+=f.duration,k.push({from:_[D].address,to:_[D+1].address,distance:f.distance,duration:f.duration}))}i({totalDistance:W,totalDuration:z,segments:k}),v.success("Rota calculada com sucesso!")}catch(h){console.error("Erro ao calcular rota:",h),v.error("Erro ao calcular rota")}finally{d(!1)}};return e.jsxs("div",{"trae-inspector-start-line":"157","trae-inspector-start-column":"4","trae-inspector-end-line":"307","trae-inspector-end-column":"10","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DeliveryRouting.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"space-y-6",children:[e.jsxs(E,{children:[e.jsx(V,{children:e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"h-5 w-5 text-green-500"}),"Origem da Viagem"]})}),e.jsx(P,{children:e.jsxs("div",{"trae-inspector-start-line":"166","trae-inspector-start-column":"10","trae-inspector-end-line":"182","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DeliveryRouting.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"space-y-3",children:[e.jsxs("div",{"trae-inspector-start-line":"167","trae-inspector-start-column":"12","trae-inspector-end-line":"176","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DeliveryRouting.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",children:[e.jsx(U,{htmlFor:"origin",children:"Endereço de Origem"}),e.jsx($,{id:"origin",value:n.address,onChange:C=>p({address:C.target.value}),placeholder:"Ex: Av. Paulista, 1000 - São Paulo, SP",disabled:a})]}),n.lat&&n.lng&&e.jsxs("div",{"trae-inspector-start-line":"178","trae-inspector-start-column":"14","trae-inspector-end-line":"180","trae-inspector-end-column":"20","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DeliveryRouting.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-xs text-muted-foreground bg-muted p-2 rounded",children:["📍 Coordenadas: ",n.lat.toFixed(6),", ",n.lng.toFixed(6)]})]})})]}),e.jsxs(E,{children:[e.jsx(V,{children:e.jsxs(H,{className:"flex items-center justify-between",children:[e.jsxs("span",{"trae-inspector-start-line":"189","trae-inspector-start-column":"12","trae-inspector-end-line":"192","trae-inspector-end-column":"19","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DeliveryRouting.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex items-center gap-2",children:[e.jsx(Z,{className:"h-5 w-5 text-blue-500"}),"Entregas"]}),e.jsxs(L,{size:"sm",onClick:A,disabled:a,children:[e.jsx(Me,{className:"h-4 w-4 mr-1"}),"Adicionar"]})]})}),e.jsx(P,{className:"space-y-4",children:o.map((C,h)=>e.jsxs("div",{"trae-inspector-start-line":"201","trae-inspector-start-column":"12","trae-inspector-end-line":"226","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DeliveryRouting.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"space-y-3 p-4 border rounded-lg",children:[e.jsxs("div",{"trae-inspector-start-line":"202","trae-inspector-start-column":"14","trae-inspector-end-line":"214","trae-inspector-end-column":"20","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DeliveryRouting.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex items-center justify-between",children:[e.jsxs(U,{children:["Entrega ",h+1]}),o.length>1&&e.jsx(L,{size:"sm",variant:"ghost",onClick:()=>s(h),disabled:a,children:e.jsx(qe,{className:"h-4 w-4 text-destructive"})})]}),e.jsx($,{value:C.address,onChange:N=>x(h,N.target.value),placeholder:"Ex: Rua Augusta, 500 - São Paulo, SP",disabled:a}),C.lat&&C.lng&&e.jsxs("div",{"trae-inspector-start-line":"222","trae-inspector-start-column":"16","trae-inspector-end-line":"224","trae-inspector-end-column":"22","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DeliveryRouting.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-xs text-muted-foreground bg-muted p-2 rounded",children:["📍 Coordenadas: ",C.lat.toFixed(6),", ",C.lng.toFixed(6)]})]},h))})]}),e.jsx(L,{className:"w-full",size:"lg",onClick:b,disabled:a||g,children:a||g?e.jsxs(e.Fragment,{children:[e.jsx(Fe,{className:"h-5 w-5 mr-2 animate-spin"}),"Calculando rota..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Re,{className:"h-5 w-5 mr-2"}),"Calcular Rota Otimizada"]})}),c&&e.jsxs(E,{className:"border-primary",children:[e.jsx(V,{children:e.jsx(H,{children:"Resumo da Rota"})}),e.jsxs(P,{className:"space-y-4",children:[e.jsxs("div",{"trae-inspector-start-line":"256","trae-inspector-start-column":"12","trae-inspector-end-line":"276","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DeliveryRouting.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{"trae-inspector-start-line":"257","trae-inspector-start-column":"14","trae-inspector-end-line":"265","trae-inspector-end-column":"20","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DeliveryRouting.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"space-y-2",children:[e.jsxs("div",{"trae-inspector-start-line":"258","trae-inspector-start-column":"16","trae-inspector-end-line":"261","trae-inspector-end-column":"22","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DeliveryRouting.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(ee,{className:"h-4 w-4"}),"Distância Total"]}),e.jsxs("div",{"trae-inspector-start-line":"262","trae-inspector-start-column":"16","trae-inspector-end-line":"264","trae-inspector-end-column":"22","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DeliveryRouting.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-2xl font-bold",children:[(c.totalDistance/1e3).toFixed(1)," km"]})]}),e.jsxs("div",{"trae-inspector-start-line":"266","trae-inspector-start-column":"14","trae-inspector-end-line":"275","trae-inspector-end-column":"20","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DeliveryRouting.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"space-y-2",children:[e.jsxs("div",{"trae-inspector-start-line":"267","trae-inspector-start-column":"16","trae-inspector-end-line":"270","trae-inspector-end-column":"22","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DeliveryRouting.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(X,{className:"h-4 w-4"}),"Tempo Estimado"]}),e.jsxs("div",{"trae-inspector-start-line":"271","trae-inspector-start-column":"16","trae-inspector-end-line":"274","trae-inspector-end-column":"22","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DeliveryRouting.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-2xl font-bold",children:[Math.floor(c.totalDuration/3600),"h"," ",Math.floor(c.totalDuration%3600/60),"min"]})]})]}),e.jsxs("div",{"trae-inspector-start-line":"278","trae-inspector-start-column":"12","trae-inspector-end-line":"303","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DeliveryRouting.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"border-t pt-4",children:[e.jsx("h4",{"trae-inspector-start-line":"279","trae-inspector-start-column":"14","trae-inspector-end-line":"279","trae-inspector-end-column":"71","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DeliveryRouting.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Segmentos%20da%20Rota%22%2C%22textStartLine%22%3A%22279%22%2C%22textStartColumn%22%3A%2249%22%2C%22textEndLine%22%3A%22279%22%2C%22textEndColumn%22%3A%2266%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"font-semibold mb-3",children:"Segmentos da Rota"}),e.jsx("div",{"trae-inspector-start-line":"280","trae-inspector-start-column":"14","trae-inspector-end-line":"302","trae-inspector-end-column":"20","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DeliveryRouting.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"space-y-2",children:c.segments.map((C,h)=>e.jsxs("div",{"trae-inspector-start-line":"282","trae-inspector-start-column":"18","trae-inspector-end-line":"300","trae-inspector-end-column":"24","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DeliveryRouting.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex items-start gap-3 p-3 bg-muted rounded-lg text-sm",children:[e.jsx("div",{"trae-inspector-start-line":"286","trae-inspector-start-column":"20","trae-inspector-end-line":"288","trae-inspector-end-column":"26","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DeliveryRouting.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex-shrink-0 w-8 h-8 rounded-full bg-primary text-primary-foreground flex items-center justify-center font-bold",children:h+1}),e.jsxs("div",{"trae-inspector-start-line":"289","trae-inspector-start-column":"20","trae-inspector-end-line":"299","trae-inspector-end-column":"26","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DeliveryRouting.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex-1 space-y-1",children:[e.jsxs("div",{"trae-inspector-start-line":"290","trae-inspector-start-column":"22","trae-inspector-end-line":"292","trae-inspector-end-column":"28","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DeliveryRouting.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"font-medium",children:[C.from," → ",C.to]}),e.jsxs("div",{"trae-inspector-start-line":"293","trae-inspector-start-column":"22","trae-inspector-end-line":"298","trae-inspector-end-column":"28","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DeliveryRouting.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-muted-foreground flex gap-4",children:[e.jsxs("span",{"trae-inspector-start-line":"294","trae-inspector-start-column":"24","trae-inspector-end-line":"294","trae-inspector-end-column":"78","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DeliveryRouting.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",children:[(C.distance/1e3).toFixed(1)," km"]}),e.jsxs("span",{"trae-inspector-start-line":"295","trae-inspector-start-column":"24","trae-inspector-end-line":"297","trae-inspector-end-column":"31","trae-inspector-file-path":"src\\\\components\\\\driver\\\\DeliveryRouting.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",children:[Math.floor(C.duration/60)," min"]})]})]})]},h))})]})]})]})]})}function vt(){const{user:t}=q(),[r,g]=u.useState(!1),n=u.useRef(null);u.useEffect(()=>()=>{n.current!=null&&navigator.geolocation.clearWatch(n.current)},[]);const p=()=>{t&&(n.current=navigator.geolocation.watchPosition(async m=>{const{latitude:c,longitude:i}=m.coords;await w.from("vehicle_tracking").insert({driver_id:t.id,vehicle_plate:null,latitude:c,longitude:i,speed_kmh:null,recorded_at:new Date().toISOString()})},()=>{},{enableHighAccuracy:!0,maximumAge:1e4,timeout:2e4}),g(!0))},o=()=>{n.current!=null&&navigator.geolocation.clearWatch(n.current),n.current=null,g(!1)};return e.jsx("div",{"trae-inspector-start-line":"33","trae-inspector-start-column":"4","trae-inspector-end-line":"35","trae-inspector-end-column":"10","trae-inspector-file-path":"src\\\\components\\\\driver\\\\LiveLocationToggle.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex items-center gap-2",children:e.jsx(L,{variant:r?"destructive":"modern",onClick:r?o:p,children:r?"Parar Localização Ao Vivo":"Iniciar Localização Ao Vivo"})})}function nr(){const{user:t}=q(),{data:r,isLoading:g}=ie({queryKey:["active-session",t==null?void 0:t.id],queryFn:async()=>{const{data:s,error:x}=await w.from("driver_work_sessions").select("*").eq("driver_id",t==null?void 0:t.id).eq("status","em_andamento").single();if(x&&x.code!=="PGRST116")throw x;return s},enabled:!!(t!=null&&t.id)}),{data:n,isLoading:p,refetch:o}=ie({queryKey:["daily-allowances",t==null?void 0:t.id],queryFn:async()=>{const{data:s,error:x}=await w.from("driver_work_sessions").select("*").eq("driver_id",t==null?void 0:t.id).eq("status","finalizada").order("data_inicio",{ascending:!1}).limit(10);if(x)throw x;return s||[]},enabled:!!(t!=null&&t.id)}),{data:m,isLoading:c}=ie({queryKey:["monthly-earnings",t==null?void 0:t.id],queryFn:async()=>{const s=new Date,{data:x,error:b}=await w.from("driver_payroll").select("*").eq("driver_id",t==null?void 0:t.id).eq("mes",s.getMonth()+1).eq("ano",s.getFullYear()).maybeSingle();if(b)throw b;return x},enabled:!!(t!=null&&t.id)}),i=s=>{if(!s.data_inicio||!s.data_fim)return 0;const x=new Date(s.data_inicio),b=new Date(s.data_fim);return Ne(b,x)*80},a=async s=>{try{const{error:x}=await w.from("notifications").insert({user_id:t==null?void 0:t.id,title:"Solicitação de Diária",message:`Motorista solicitou aprovação de diária da viagem ${s}`,type:"info",module:"driver"});if(x)throw x;v.success("Solicitação enviada!",{description:"Seu pedido de diária foi enviado para aprovação"}),o()}catch(x){console.error("Erro ao solicitar aprovação:",x),v.error("Erro ao enviar solicitação")}},d=s=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(s);if(g||p||c)return e.jsx(Ae,{children:e.jsx("div",{"trae-inspector-start-line":"147","trae-inspector-start-column":"8","trae-inspector-end-line":"149","trae-inspector-end-column":"14","trae-inspector-file-path":"src\\\\pages\\\\DriverApp.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex items-center justify-center h-96",children:e.jsx(Fe,{className:"w-8 h-8 animate-spin text-primary"})})});const A=(n==null?void 0:n.filter(s=>!s.allowance_approved).reduce((s,x)=>s+i(x),0))||0;return e.jsx(Ae,{children:e.jsxs("div",{"trae-inspector-start-line":"160","trae-inspector-start-column":"6","trae-inspector-end-line":"394","trae-inspector-end-column":"12","trae-inspector-file-path":"src\\\\pages\\\\DriverApp.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"space-y-6 max-w-7xl mx-auto",children:[e.jsxs("div",{"trae-inspector-start-line":"162","trae-inspector-start-column":"8","trae-inspector-end-line":"168","trae-inspector-end-column":"14","trae-inspector-file-path":"src\\\\pages\\\\DriverApp.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"space-y-2",children:[e.jsx("h1",{"trae-inspector-start-line":"163","trae-inspector-start-column":"10","trae-inspector-end-line":"163","trae-inspector-end-column":"72","trae-inspector-file-path":"src\\\\pages\\\\DriverApp.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%F0%9F%9A%9A%20Meu%20App%22%2C%22textStartLine%22%3A%22163%22%2C%22textStartColumn%22%3A%2257%22%2C%22textEndLine%22%3A%22163%22%2C%22textEndColumn%22%3A%2267%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-2xl md:text-3xl font-bold",children:"🚚 Meu App"}),e.jsx("p",{"trae-inspector-start-line":"164","trae-inspector-start-column":"10","trae-inspector-end-line":"166","trae-inspector-end-column":"14","trae-inspector-file-path":"src\\\\pages\\\\DriverApp.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Gest%C3%A3o%20completa%20da%20sua%20jornada%22%2C%22textStartLine%22%3A%22164%22%2C%22textStartColumn%22%3A%2268%22%2C%22textEndLine%22%3A%22166%22%2C%22textEndColumn%22%3A%2210%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-sm md:text-base text-muted-foreground",children:"Gestão completa da sua jornada"}),e.jsx(vt,{})]}),e.jsxs("div",{"trae-inspector-start-line":"171","trae-inspector-start-column":"8","trae-inspector-end-line":"196","trae-inspector-end-column":"14","trae-inspector-file-path":"src\\\\pages\\\\DriverApp.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-4",children:[e.jsx(te,{title:"Status",value:r?"Em Viagem":"Parado",icon:Q,className:"text-sm"}),e.jsx(te,{title:"Mês Atual",value:d((m==null?void 0:m.total_liquido)||0),icon:fe,className:"text-sm"}),e.jsx(te,{title:"Diárias Pendentes",value:(n==null?void 0:n.filter(s=>!s.allowance_approved).length)||0,icon:Y,className:"text-sm"}),e.jsx(te,{title:"Diárias R$",value:d(A),icon:Ue,className:"text-sm"})]}),e.jsxs(De,{defaultValue:"jornada",className:"w-full",children:[e.jsxs(be,{className:"grid w-full grid-cols-3 sm:grid-cols-4 lg:grid-cols-9 h-auto gap-1",children:[e.jsxs(R,{value:"jornada",className:"text-xs py-2",children:[e.jsx(X,{className:"w-4 h-4 mr-1"}),e.jsx("span",{"trae-inspector-start-line":"203","trae-inspector-start-column":"14","trae-inspector-end-line":"203","trae-inspector-end-column":"63","trae-inspector-file-path":"src\\\\pages\\\\DriverApp.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Jornada%22%2C%22textStartLine%22%3A%22203%22%2C%22textStartColumn%22%3A%2249%22%2C%22textEndLine%22%3A%22203%22%2C%22textEndColumn%22%3A%2256%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"hidden sm:inline",children:"Jornada"})]}),e.jsxs(R,{value:"gratificacao",className:"text-xs py-2",children:[e.jsx(fe,{className:"w-4 h-4 mr-1"}),e.jsx("span",{"trae-inspector-start-line":"207","trae-inspector-start-column":"14","trae-inspector-end-line":"207","trae-inspector-end-column":"68","trae-inspector-file-path":"src\\\\pages\\\\DriverApp.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Gratifica%C3%A7%C3%A3o%22%2C%22textStartLine%22%3A%22207%22%2C%22textStartColumn%22%3A%2249%22%2C%22textEndLine%22%3A%22207%22%2C%22textEndColumn%22%3A%2261%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"hidden sm:inline",children:"Gratificação"})]}),e.jsxs(R,{value:"desempenho",className:"text-xs py-2",children:[e.jsx(X,{className:"w-4 h-4 mr-1"}),e.jsx("span",{"trae-inspector-start-line":"211","trae-inspector-start-column":"14","trae-inspector-end-line":"211","trae-inspector-end-column":"66","trae-inspector-file-path":"src\\\\pages\\\\DriverApp.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Desempenho%22%2C%22textStartLine%22%3A%22211%22%2C%22textStartColumn%22%3A%2249%22%2C%22textEndLine%22%3A%22211%22%2C%22textEndColumn%22%3A%2259%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"hidden sm:inline",children:"Desempenho"})]}),e.jsxs(R,{value:"historico",className:"text-xs py-2",children:[e.jsx(Se,{className:"w-4 h-4 mr-1"}),e.jsx("span",{"trae-inspector-start-line":"215","trae-inspector-start-column":"14","trae-inspector-end-line":"215","trae-inspector-end-column":"65","trae-inspector-file-path":"src\\\\pages\\\\DriverApp.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Hist%C3%B3rico%22%2C%22textStartLine%22%3A%22215%22%2C%22textStartColumn%22%3A%2249%22%2C%22textEndLine%22%3A%22215%22%2C%22textEndColumn%22%3A%2258%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"hidden sm:inline",children:"Histórico"})]}),e.jsxs(R,{value:"rotas",className:"text-xs py-2",children:[e.jsx(Z,{className:"w-4 h-4 mr-1"}),e.jsx("span",{"trae-inspector-start-line":"219","trae-inspector-start-column":"14","trae-inspector-end-line":"219","trae-inspector-end-column":"61","trae-inspector-file-path":"src\\\\pages\\\\DriverApp.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Rotas%22%2C%22textStartLine%22%3A%22219%22%2C%22textStartColumn%22%3A%2249%22%2C%22textEndLine%22%3A%22219%22%2C%22textEndColumn%22%3A%2254%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"hidden sm:inline",children:"Rotas"})]}),e.jsxs(R,{value:"diarias",className:"text-xs py-2",children:[e.jsx(Y,{className:"w-4 h-4 mr-1"}),e.jsx("span",{"trae-inspector-start-line":"223","trae-inspector-start-column":"14","trae-inspector-end-line":"223","trae-inspector-end-column":"63","trae-inspector-file-path":"src\\\\pages\\\\DriverApp.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Di%C3%A1rias%22%2C%22textStartLine%22%3A%22223%22%2C%22textStartColumn%22%3A%2249%22%2C%22textEndLine%22%3A%22223%22%2C%22textEndColumn%22%3A%2256%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"hidden sm:inline",children:"Diárias"})]}),e.jsxs(R,{value:"despesas",className:"text-xs py-2",children:[e.jsx(xe,{className:"w-4 h-4 mr-1"}),e.jsx("span",{"trae-inspector-start-line":"227","trae-inspector-start-column":"14","trae-inspector-end-line":"227","trae-inspector-end-column":"64","trae-inspector-file-path":"src\\\\pages\\\\DriverApp.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Despesas%22%2C%22textStartLine%22%3A%22227%22%2C%22textStartColumn%22%3A%2249%22%2C%22textEndLine%22%3A%22227%22%2C%22textEndColumn%22%3A%2257%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"hidden sm:inline",children:"Despesas"})]}),e.jsxs(R,{value:"checklist",className:"text-xs py-2",children:[e.jsx(ke,{className:"w-4 h-4 mr-1"}),e.jsx("span",{"trae-inspector-start-line":"231","trae-inspector-start-column":"14","trae-inspector-end-line":"231","trae-inspector-end-column":"65","trae-inspector-file-path":"src\\\\pages\\\\DriverApp.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Checklist%22%2C%22textStartLine%22%3A%22231%22%2C%22textStartColumn%22%3A%2249%22%2C%22textEndLine%22%3A%22231%22%2C%22textEndColumn%22%3A%2258%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"hidden sm:inline",children:"Checklist"})]}),e.jsxs(R,{value:"viagens",className:"text-xs py-2",children:[e.jsx(me,{className:"w-4 h-4 mr-1"}),e.jsx("span",{"trae-inspector-start-line":"235","trae-inspector-start-column":"14","trae-inspector-end-line":"235","trae-inspector-end-column":"63","trae-inspector-file-path":"src\\\\pages\\\\DriverApp.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Viagens%22%2C%22textStartLine%22%3A%22235%22%2C%22textStartColumn%22%3A%2249%22%2C%22textEndLine%22%3A%22235%22%2C%22textEndColumn%22%3A%2256%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"hidden sm:inline",children:"Viagens"})]})]}),e.jsxs(F,{value:"jornada",className:"space-y-4 mt-4",children:[r&&e.jsx(Oe,{}),e.jsx(lt,{})]}),e.jsx(F,{value:"gratificacao",className:"space-y-4 mt-4",children:e.jsx($e,{})}),e.jsx(F,{value:"desempenho",className:"space-y-4 mt-4",children:e.jsx(ut,{})}),e.jsx(F,{value:"historico",className:"space-y-4 mt-4",children:e.jsx(gt,{})}),e.jsx(F,{value:"rotas",className:"space-y-4 mt-4",children:e.jsxs(De,{defaultValue:"planejamento",className:"w-full",children:[e.jsxs(be,{className:"grid w-full grid-cols-2",children:[e.jsx(R,{value:"planejamento",children:"Planejar Rota"}),e.jsx(R,{value:"financeiro",children:"Financeiro"})]}),e.jsx(F,{value:"planejamento",className:"mt-4",children:e.jsx(xt,{})}),e.jsx(F,{value:"financeiro",className:"mt-4",children:e.jsx(ht,{})})]})}),e.jsx(F,{value:"diarias",className:"space-y-4 mt-4",children:e.jsxs(E,{children:[e.jsxs(V,{children:[e.jsxs(H,{className:"flex items-center gap-2 text-lg md:text-xl",children:[e.jsx(Y,{className:"w-5 h-5"}),"Minhas Diárias"]}),e.jsx("p",{"trae-inspector-start-line":"284","trae-inspector-start-column":"16","trae-inspector-end-line":"286","trae-inspector-end-column":"20","trae-inspector-file-path":"src\\\\pages\\\\DriverApp.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Di%C3%A1rias%20autom%C3%A1ticas%20baseadas%20em%20dias%20fora%20da%20garagem%22%2C%22textStartLine%22%3A%22284%22%2C%22textStartColumn%22%3A%2272%22%2C%22textEndLine%22%3A%22286%22%2C%22textEndColumn%22%3A%2216%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-xs md:text-sm text-muted-foreground",children:"Diárias automáticas baseadas em dias fora da garagem"})]}),e.jsx(P,{className:"space-y-3",children:n&&n.length>0?n.map(s=>{const x=s.data_fim?Ne(new Date(s.data_fim),new Date(s.data_inicio)):0,b=i(s);return e.jsx(E,{className:"border-l-4 border-l-primary/20",children:e.jsxs(P,{className:"p-4 space-y-3",children:[e.jsxs("div",{"trae-inspector-start-line":"299","trae-inspector-start-column":"26","trae-inspector-end-line":"346","trae-inspector-end-column":"32","trae-inspector-file-path":"src\\\\pages\\\\DriverApp.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[e.jsxs("div",{"trae-inspector-start-line":"300","trae-inspector-start-column":"28","trae-inspector-end-line":"314","trae-inspector-end-column":"34","trae-inspector-file-path":"src\\\\pages\\\\DriverApp.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"space-y-1",children:[e.jsxs("div",{"trae-inspector-start-line":"301","trae-inspector-start-column":"30","trae-inspector-end-line":"310","trae-inspector-end-column":"36","trae-inspector-file-path":"src\\\\pages\\\\DriverApp.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex items-center gap-2 flex-wrap",children:[e.jsx(M,{variant:"outline",className:"text-xs",children:s.vehicle_plate}),e.jsxs("span",{"trae-inspector-start-line":"305","trae-inspector-start-column":"32","trae-inspector-end-line":"309","trae-inspector-end-column":"39","trae-inspector-file-path":"src\\\\pages\\\\DriverApp.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-xs text-muted-foreground",children:[G(new Date(s.data_inicio),"dd/MM/yyyy",{locale:J})," → ",s.data_fim&&G(new Date(s.data_fim),"dd/MM/yyyy",{locale:J})]})]}),e.jsxs("p",{"trae-inspector-start-line":"311","trae-inspector-start-column":"30","trae-inspector-end-line":"313","trae-inspector-end-column":"34","trae-inspector-file-path":"src\\\\pages\\\\DriverApp.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-sm font-medium",children:[x," ",x===1?"dia":"dias"," fora"]})]}),e.jsxs("div",{"trae-inspector-start-line":"316","trae-inspector-start-column":"28","trae-inspector-end-line":"345","trae-inspector-end-column":"34","trae-inspector-file-path":"src\\\\pages\\\\DriverApp.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex items-center gap-3",children:[e.jsxs("div",{"trae-inspector-start-line":"317","trae-inspector-start-column":"30","trae-inspector-end-line":"334","trae-inspector-end-column":"36","trae-inspector-file-path":"src\\\\pages\\\\DriverApp.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-right",children:[e.jsx("p",{"trae-inspector-start-line":"318","trae-inspector-start-column":"32","trae-inspector-end-line":"320","trae-inspector-end-column":"36","trae-inspector-file-path":"src\\\\pages\\\\DriverApp.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-lg font-bold text-green-600",children:d(b)}),e.jsx(M,{variant:s.allowance_approved?"default":"secondary",className:"text-xs",children:s.allowance_approved?e.jsxs(e.Fragment,{children:[e.jsx(Pe,{className:"w-3 h-3 mr-1"}),"Aprovado"]}):"Pendente"})]}),!s.allowance_approved&&e.jsx(L,{size:"sm",onClick:()=>a(s.id),className:"text-xs",children:"Solicitar"})]})]}),s.localizacao_inicio&&e.jsxs("div",{"trae-inspector-start-line":"349","trae-inspector-start-column":"28","trae-inspector-end-line":"355","trae-inspector-end-column":"34","trae-inspector-file-path":"src\\\\pages\\\\DriverApp.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex items-start gap-2 text-xs text-muted-foreground pt-2 border-t",children:[e.jsx(Z,{className:"w-3 h-3 mt-0.5 flex-shrink-0"}),e.jsxs("span",{"trae-inspector-start-line":"351","trae-inspector-start-column":"30","trae-inspector-end-line":"354","trae-inspector-end-column":"37","trae-inspector-file-path":"src\\\\pages\\\\DriverApp.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"line-clamp-1",children:[s.localizacao_inicio.city,", ",s.localizacao_inicio.state,s.localizacao_fim&&` → ${s.localizacao_fim.city}, ${s.localizacao_fim.state}`]})]})]})},s.id)}):e.jsxs("div",{"trae-inspector-start-line":"362","trae-inspector-start-column":"18","trae-inspector-end-line":"365","trae-inspector-end-column":"24","trae-inspector-file-path":"src\\\\pages\\\\DriverApp.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-center py-8 text-muted-foreground",children:[e.jsx(Y,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{"trae-inspector-start-line":"364","trae-inspector-start-column":"20","trae-inspector-end-line":"364","trae-inspector-end-column":"72","trae-inspector-file-path":"src\\\\pages\\\\DriverApp.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Nenhuma%20di%C3%A1ria%20registrada%22%2C%22textStartLine%22%3A%22364%22%2C%22textStartColumn%22%3A%2243%22%2C%22textEndLine%22%3A%22364%22%2C%22textEndColumn%22%3A%2268%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-sm",children:"Nenhuma diária registrada"})]})})]})}),e.jsx(F,{value:"despesas",className:"space-y-4 mt-4",children:e.jsxs("div",{"trae-inspector-start-line":"373","trae-inspector-start-column":"12","trae-inspector-end-line":"376","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\pages\\\\DriverApp.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"grid gap-4",children:[e.jsx(Ct,{}),e.jsx(pt,{})]})}),e.jsx(F,{value:"checklist",className:"space-y-4 mt-4",children:e.jsx(mt,{})}),e.jsx(F,{value:"viagens",className:"space-y-4 mt-4",children:e.jsx(dt,{})})]}),e.jsx("div",{"trae-inspector-start-line":"391","trae-inspector-start-column":"8","trae-inspector-end-line":"393","trae-inspector-end-column":"14","trae-inspector-file-path":"src\\\\pages\\\\DriverApp.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"fixed bottom-4 right-4 z-50",children:e.jsx(tt,{})})]})})}export{nr as default};
