{"version":3,"file":"ResetPassword-DSxho0qX.js","sources":["../../src/assets/optilog-logo.png","../../src/assets/ejg-logo.png","../../src/pages/ResetPassword.tsx"],"sourcesContent":["export default \"__VITE_ASSET__DQIrM__j__\"","export default \"__VITE_ASSET__DPVXwVDH__\"","import { useState, useEffect } from \"react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Lock } from \"lucide-react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport { toast } from \"sonner\";\r\nimport optilogLogo from \"@/assets/optilog-logo.png\";\r\nimport ejgLogo from \"@/assets/ejg-logo.png\";\r\n\r\nconst ResetPassword = () => {\r\n  const navigate = useNavigate();\r\n  const [password, setPassword] = useState(\"\");\r\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    // Verificar se há um hash de recuperação de senha na URL\r\n    const hashParams = new URLSearchParams(window.location.hash.substring(1));\r\n    const type = hashParams.get('type');\r\n    \r\n    if (type !== 'recovery') {\r\n      toast.error(\"Link inválido ou expirado\");\r\n      navigate(\"/login\");\r\n    }\r\n  }, [navigate]);\r\n\r\n  const handleResetPassword = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    \r\n    if (password !== confirmPassword) {\r\n      toast.error(\"As senhas não coincidem\");\r\n      return;\r\n    }\r\n\r\n    if (password.length < 6) {\r\n      toast.error(\"A senha deve ter no mínimo 6 caracteres\");\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    \r\n    try {\r\n      const { error } = await supabase.auth.updateUser({\r\n        password: password\r\n      });\r\n      \r\n      if (error) throw error;\r\n      \r\n      toast.success(\"Senha redefinida com sucesso!\");\r\n      navigate(\"/login\");\r\n    } catch (error: any) {\r\n      toast.error(error.message || \"Erro ao redefinir senha\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex items-center justify-center bg-background p-4\">\r\n      <Card className=\"w-full max-w-md\">\r\n        <CardHeader className=\"text-center space-y-4\">\r\n          <div className=\"flex items-center justify-center gap-4 mb-4\">\r\n            <img src={optilogLogo} alt=\"OptiLog\" className=\"h-12 w-auto\" />\r\n            <div className=\"h-12 w-px bg-border\" />\r\n            <img src={ejgLogo} alt=\"EJG Transportes\" className=\"h-12 w-12\" />\r\n          </div>\r\n          <CardTitle className=\"text-2xl\">Nova Senha</CardTitle>\r\n          <CardDescription className=\"text-muted-foreground\">\r\n            Digite sua nova senha\r\n          </CardDescription>\r\n        </CardHeader>\r\n        <CardContent>\r\n          <form onSubmit={handleResetPassword} className=\"space-y-4\">\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"password\">Nova Senha *</Label>\r\n              <Input\r\n                id=\"password\"\r\n                type=\"password\"\r\n                placeholder=\"••••••••\"\r\n                value={password}\r\n                onChange={(e) => setPassword(e.target.value)}\r\n                required\r\n                disabled={loading}\r\n                minLength={6}\r\n              />\r\n            </div>\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"confirmPassword\">Confirmar Senha *</Label>\r\n              <Input\r\n                id=\"confirmPassword\"\r\n                type=\"password\"\r\n                placeholder=\"••••••••\"\r\n                value={confirmPassword}\r\n                onChange={(e) => setConfirmPassword(e.target.value)}\r\n                required\r\n                disabled={loading}\r\n                minLength={6}\r\n              />\r\n            </div>\r\n            <Button type=\"submit\" className=\"w-full\" size=\"lg\" disabled={loading}>\r\n              {loading ? \"Salvando...\" : \"SALVAR NOVA SENHA\"}\r\n            </Button>\r\n            <p className=\"text-center text-xs text-muted-foreground flex items-center justify-center gap-2\">\r\n              <Lock className=\"w-3 h-3\" />\r\n              Dados protegidos com criptografia\r\n            </p>\r\n          </form>\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ResetPassword;\r\n"],"names":["optilogLogo","ejgLogo","ResetPassword","navigate","useNavigate","password","setPassword","useState","confirmPassword","setConfirmPassword","loading","setLoading","useEffect","URLSearchParams","window","location","hash","substring","get","toast","error","handleResetPassword","e","preventDefault","length","supabase","auth","updateUser","success","message","jsxs","Card","CardHeader","jsx","CardTitle","CardDescription","CardContent","Label","Input","target","value","Button","Lock"],"mappings":"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"}