{"version":3,"file":"SuperGestor-6Tl6Jtbi.js","sources":["../../src/pages/SuperGestor.tsx"],"sourcesContent":["import { Layout } from \"@/components/Layout\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { useEffect, useState } from \"react\";\n\ntype Insight = {\n  title: string;\n  value: string | number;\n  detail?: string;\n};\n\nexport default function Supergestor() {\n  const [insights, setInsights] = useState<Insight[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(\"\");\n\n  const fetchInsights = async () => {\n    setLoading(true);\n    setError(\"\");\n    try {\n      const r = await fetch(\"/api/supergestor-insights\");\n      const js = await r.json();\n      const fmt = new Intl.NumberFormat('pt-BR', { style: 'currency', currency: 'BRL' });\n      const list: Insight[] = [\n        { title: \"Receita Total (12m)\", value: fmt.format(js.receitaTotal || 0) },\n        { title: \"ICMS Total (12m)\", value: fmt.format(js.icmsTotal || 0) },\n        { title: \"Veículos Ativos\", value: js.vehiclesActive || 0 },\n        { title: \"Ordens Pendentes\", value: js.ordersPending || 0 },\n        { title: \"NCs Críticas\", value: js.criticalNC || 0 },\n        { title: \"Rotas em Andamento\", value: js.tripsRunning || 0 },\n        { title: \"Custo/KM Médio\", value: js.avgCostKm || \"--\" },\n        { title: \"Previsões Manutenção (30d)\", value: js.predictedMaint || 0 },\n      ];\n      setInsights(list);\n    } catch (e: unknown) {\n      const message = e instanceof Error ? e.message : String(e);\n      setError(message || \"Falha ao carregar insights\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => { fetchInsights(); }, []);\n\n  return (\n    <Layout>\n      <div className=\"space-y-6\">\n        <div>\n          <h1 className=\"text-3xl font-bold\">Supergestor</h1>\n          <p className=\"text-muted-foreground\">IA integrada para decisões operacionais e financeiras</p>\n        </div>\n\n        {error && (\n          <Card className=\"border-destructive\">\n            <CardContent className=\"p-4 text-destructive\">{error}</CardContent>\n          </Card>\n        )}\n\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n          {insights.map((i, idx) => (\n            <Card key={idx}>\n              <CardHeader>\n                <CardTitle>{i.title}</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"text-2xl font-bold\">{i.value}</div>\n                {i.detail && <p className=\"text-sm text-muted-foreground mt-1\">{i.detail}</p>}\n              </CardContent>\n            </Card>\n          ))}\n        </div>\n\n        <div className=\"flex gap-2\">\n          <Button onClick={fetchInsights} disabled={loading}>Atualizar Insights</Button>\n          <Button variant=\"outline\" onClick={async () => {\n            try {\n              const r = await fetch(\"/api/predict-maintenance\");\n              const js = await r.json();\n              alert(`Previstos: ${js.predictions?.length || 0}`);\n            } catch (err) {\n              const msg = err instanceof Error ? err.message : String(err);\n              alert(`Falha ao rodar preditivo: ${msg}`);\n            }\n          }}>Rodar Preditivo</Button>\n        </div>\n      </div>\n    </Layout>\n  );\n}\n"],"names":["Supergestor","insights","setInsights","useState","loading","setLoading","error","setError","fetchInsights","js","fetch","json","fmt","Intl","NumberFormat","style","currency","list","title","value","format","receitaTotal","icmsTotal","vehiclesActive","ordersPending","criticalNC","tripsRunning","avgCostKm","predictedMaint","e","message","Error","String","useEffect","Layout","jsxs","jsx","Card","CardContent","map","i","idx","CardHeader","CardTitle","detail","Button","alert","predictions","length","err","msg"],"mappings":"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"}