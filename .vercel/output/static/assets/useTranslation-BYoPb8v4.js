import{r as u,I as q,F as X,R as Y,G as $}from"./index-C8gJK6VO.js";import{r as B}from"./index-De_FPpeP.js";const H=(e,n,a,l)=>{var t,g,y,d;const i=[a,{code:n,...l||{}}];if((g=(t=e==null?void 0:e.services)==null?void 0:t.logger)!=null&&g.forward)return e.services.logger.forward(i,"warn","react-i18next::",!0);p(i[0])&&(i[0]=`react-i18next:: ${i[0]}`),(d=(y=e==null?void 0:e.services)==null?void 0:y.logger)!=null&&d.warn?e.services.logger.warn(...i):console!=null&&console.warn&&console.warn(...i)},j={},z=(e,n,a,l)=>{p(a)&&j[a]||(p(a)&&(j[a]=new Date),H(e,n,a,l))},A=(e,n)=>()=>{if(e.isInitialized)n();else{const a=()=>{setTimeout(()=>{e.off("initialized",a)},0),n()};e.on("initialized",a)}},R=(e,n,a)=>{e.loadNamespaces(n,A(e,a))},k=(e,n,a,l)=>{if(p(a)&&(a=[a]),e.options.preload&&e.options.preload.indexOf(n)>-1)return R(e,a,l);a.forEach(i=>{e.options.ns.indexOf(i)<0&&e.options.ns.push(i)}),e.loadLanguages(n,A(e,l))},J=(e,n,a={})=>!n.languages||!n.languages.length?(z(n,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:n.languages}),!0):n.hasLoadedNamespace(e,{lng:a.lng,precheck:(l,i)=>{if(a.bindI18n&&a.bindI18n.indexOf("languageChanging")>-1&&l.services.backendConnector.backend&&l.isLanguageChangingTo&&!i(l.isLanguageChangingTo,e))return!1}}),p=e=>typeof e=="string",K=e=>typeof e=="object"&&e!==null;var Q=B();const Z=(e,n)=>p(n)?n:K(n)&&p(n.defaultValue)?n.defaultValue:Array.isArray(e)?e[e.length-1]:e,D={t:Z,ready:!1},V=()=>()=>{},ne=(e,n={})=>{var T,h,E;const{i18n:a}=n,{i18n:l,defaultNS:i}=u.useContext(q)||{},t=a||l||X();t&&!t.reportNamespaces&&(t.reportNamespaces=new Y),t||z(t,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const g=u.useMemo(()=>{var r;return{...$(),...(r=t==null?void 0:t.options)==null?void 0:r.react,...n}},[t,n]),{useSuspense:y,keyPrefix:d}=g,N=i||((T=t==null?void 0:t.options)==null?void 0:T.defaultNS),O=p(N)?[N]:N||["translation"],f=u.useMemo(()=>O,O);(E=(h=t==null?void 0:t.reportNamespaces)==null?void 0:h.addUsedNamespaces)==null||E.call(h,f);const _=u.useRef(0),F=u.useCallback(r=>{if(!t)return V;const{bindI18n:s,bindI18nStore:o}=g,c=()=>{_.current+=1,r()};return s&&t.on(s,c),o&&t.store.on(o,c),()=>{s&&s.split(" ").forEach(x=>t.off(x,c)),o&&o.split(" ").forEach(x=>t.store.off(x,c))}},[t,g]),v=u.useRef(),L=u.useCallback(()=>{if(!t)return D;const r=!!(t.isInitialized||t.initializedStoreOnce)&&f.every(U=>J(U,t,g)),s=n.lng||t.language,o=_.current,c=v.current;if(c&&c.ready===r&&c.lng===s&&c.keyPrefix===d&&c.revision===o)return c;const P={t:t.getFixedT(s,g.nsMode==="fallback"?f:f[0],d),ready:r,lng:s,keyPrefix:d,revision:o};return v.current=P,P},[t,f,d,g,n.lng]),[M,G]=u.useState(0),{t:S,ready:m}=Q.useSyncExternalStore(F,L,L);u.useEffect(()=>{if(t&&!m&&!y){const r=()=>G(s=>s+1);n.lng?k(t,n.lng,f,r):R(t,f,r)}},[t,n.lng,f,m,y,M]);const b=t||{},w=u.useRef(null),C=u.useRef(),I=r=>{const s=Object.getOwnPropertyDescriptors(r);s.__original&&delete s.__original;const o=Object.create(Object.getPrototypeOf(r),s);if(!Object.prototype.hasOwnProperty.call(o,"__original"))try{Object.defineProperty(o,"__original",{value:r,writable:!1,enumerable:!1,configurable:!1})}catch{}return o},W=u.useMemo(()=>{const r=b,s=r==null?void 0:r.language;let o=r;r&&(w.current&&w.current.__original===r?C.current!==s?(o=I(r),w.current=o,C.current=s):o=w.current:(o=I(r),w.current=o,C.current=s));const c=[S,o,m];return c.t=S,c.i18n=o,c.ready=m,c},[S,b,m,b.resolvedLanguage,b.language,b.languages]);if(t&&y&&!m)throw new Promise(r=>{const s=()=>r();n.lng?k(t,n.lng,f,s):R(t,f,s)});return W};export{ne as u};
