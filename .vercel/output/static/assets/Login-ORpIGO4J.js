import{j as e,B as u,u as R,e as q,a as P,r as n,Z as I,s as F,d as m}from"./index-C8gJK6VO.js";import{I as L}from"./input-D5Ccm-s1.js";import{L as A}from"./label-C3geKGxC.js";import{C as Z,a as _,b as M,c as X,d as V}from"./card-XpOOVLWI.js";import{L as Y}from"./lock-DcLaNi--.js";function z(){const i=async()=>{try{if("serviceWorker"in navigator){const o=await navigator.serviceWorker.getRegistrations();for(const c of o)await c.unregister()}if("caches"in window){const o=await caches.keys();await Promise.all(o.map(c=>caches.delete(c)))}}finally{window.location.reload()}};return e.jsx(u,{variant:"outline",onClick:i,children:"Atualizar App"})}const J=()=>{const i=R(),o=q(),{signIn:c,user:h,roles:l,loading:w}=P(),[p,j]=n.useState(""),[d,D]=n.useState(""),[C,g]=n.useState(!1),[s,x]=n.useState(!1),[y,f]=n.useState(!1);n.useEffect(()=>{if(!h||w)return;const r=l.length>0&&l.every(v=>v==="fleet_maintenance"||v==="maintenance_assistant"),a=l.length===1&&l[0]==="driver";i(r?"/mechanic":a?"/driver":"/dashboard")},[h,l,w,i]);const N=async r=>{if(r.preventDefault(),!p.trim()){m.error("Por favor, informe o email");return}if(!d){m.error("Por favor, informe a senha");return}if(d.length<6){m.error("A senha deve ter no mínimo 6 caracteres");return}g(!0);try{await c(p.trim(),d)}catch{}finally{g(!1)}},U=async r=>{r.preventDefault(),g(!0);try{const{error:a}=await F.auth.resetPasswordForEmail(p,{redirectTo:`${window.location.origin}/reset-password`});if(a)throw a;f(!0),m.success("Email enviado! Verifique sua caixa de entrada.")}catch(a){m.error(a.message||"Erro ao enviar email de redefinição")}finally{g(!1)}},b=new URLSearchParams(o.search),t=(b.get("brand")||"").toLowerCase()==="albuquerque",B=t?"Albuquerque":"XYZLogicFlow",E=t?"Acesse sua conta Albuquerque":"Acesse sua conta XYZLogicFlow",k=t?"#2b2d31":void 0,S=()=>{if(t){const a=b.get("logo")||""||"https://trae-api-us.mchost.guru/api/ide/v1/text_to_image?prompt="+encodeURIComponent("SDXL render of a metallic white monogram letter A with molecule nodes motif, centered above ALBUQUERQUE text and QUIMICA subtitle, embossed 3D on dark graphite background, cinematic studio lighting, ultra-detailed, logo mark minimal, no extra text beyond brand")+"&image_size=square_hd";return e.jsx("img",{"trae-inspector-start-line":"105","trae-inspector-start-column":"13","trae-inspector-end-line":"105","trae-inspector-end-column":"70","trae-inspector-file-path":"src\\\\pages\\\\Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",src:a,alt:B,className:"h-16 w-auto"})}return e.jsxs("div",{"trae-inspector-start-line":"109","trae-inspector-start-column":"6","trae-inspector-end-line":"114","trae-inspector-end-column":"12","trae-inspector-file-path":"src\\\\pages\\\\Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex flex-col items-center gap-2",children:[e.jsx("div",{"trae-inspector-start-line":"110","trae-inspector-start-column":"8","trae-inspector-end-line":"112","trae-inspector-end-column":"14","trae-inspector-file-path":"src\\\\pages\\\\Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"bg-white/20 p-3 rounded-xl backdrop-blur-md",children:e.jsx(I,{className:"h-10 w-10 text-white"})}),e.jsx("span",{"trae-inspector-start-line":"113","trae-inspector-start-column":"8","trae-inspector-end-line":"113","trae-inspector-end-column":"89","trae-inspector-file-path":"src\\\\pages\\\\Login.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22XYZLogicFlow%22%2C%22textStartLine%22%3A%22113%22%2C%22textStartColumn%22%3A%2270%22%2C%22textEndLine%22%3A%22113%22%2C%22textEndColumn%22%3A%2282%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-white font-bold text-xl tracking-tight",children:"XYZLogicFlow"})]})};return e.jsxs("div",{"trae-inspector-start-line":"119","trae-inspector-start-column":"4","trae-inspector-end-line":"199","trae-inspector-end-column":"10","trae-inspector-file-path":"src\\\\pages\\\\Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:`min-h-screen flex items-center justify-center p-4 ${t?"":"bg-gradient-to-br from-indigo-700 via-blue-600 to-cyan-600"}`,style:t?{backgroundColor:k}:void 0,children:[e.jsxs(Z,{className:"w-full max-w-md border border-white/20 bg-white/10 backdrop-blur-xl shadow-2xl",children:[e.jsxs(_,{className:"text-center space-y-4",children:[e.jsx("div",{"trae-inspector-start-line":"122","trae-inspector-start-column":"10","trae-inspector-end-line":"124","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\pages\\\\Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex items-center justify-center mb-4",children:e.jsx(S,{})}),e.jsx(M,{className:"text-2xl text-white",children:s?"Redefinir Senha":"Entrar"}),e.jsx(X,{className:"text-white/80",children:s?"Digite seu e-mail para receber as instruções":E})]}),e.jsx(V,{children:y?e.jsxs("div",{"trae-inspector-start-line":"134","trae-inspector-start-column":"12","trae-inspector-end-line":"148","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\pages\\\\Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-center space-y-4",children:[e.jsxs("p",{"trae-inspector-start-line":"135","trae-inspector-start-column":"14","trae-inspector-end-line":"137","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\pages\\\\Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-sm text-white/80",children:["Um e-mail com as instruções foi enviado para ",e.jsx("strong",{"trae-inspector-start-line":"136","trae-inspector-start-column":"61","trae-inspector-end-line":"136","trae-inspector-end-column":"85","trae-inspector-file-path":"src\\\\pages\\\\Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",children:p})]}),e.jsx(u,{variant:"outline",className:"w-full",onClick:()=>{f(!1),x(!1)},children:"Voltar ao Login"})]}):e.jsxs("form",{"trae-inspector-start-line":"150","trae-inspector-start-column":"12","trae-inspector-end-line":"194","trae-inspector-end-column":"17","trae-inspector-file-path":"src\\\\pages\\\\Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",onSubmit:s?U:N,className:"space-y-4",children:[e.jsxs("div",{"trae-inspector-start-line":"151","trae-inspector-start-column":"14","trae-inspector-end-line":"162","trae-inspector-end-column":"20","trae-inspector-file-path":"src\\\\pages\\\\Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"space-y-2",children:[e.jsx(A,{htmlFor:"email",className:t?"":"text-white",children:"E-mail *"}),e.jsx(L,{id:"email",type:"email",placeholder:"seu@email.com",value:p,onChange:r=>j(r.target.value),required:!0,disabled:C})]}),!s&&e.jsxs("div",{"trae-inspector-start-line":"164","trae-inspector-start-column":"16","trae-inspector-end-line":"176","trae-inspector-end-column":"22","trae-inspector-file-path":"src\\\\pages\\\\Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"space-y-2",children:[e.jsx(A,{htmlFor:"password",className:t?"":"text-white",children:"Senha *"}),e.jsx(L,{id:"password",type:"password",placeholder:"••••••••",value:d,onChange:r=>D(r.target.value),required:!0,minLength:6,disabled:C})]}),e.jsx(u,{type:"submit",className:"w-full",size:"lg",disabled:C,variant:t?void 0:"modern",style:t?{backgroundColor:"#bfc5cc",color:"#1f2326"}:void 0,children:C?s?"Enviando...":"Entrando...":s?"ENVIAR E-MAIL":"ENTRAR"}),e.jsx(u,{type:"button",variant:"ghost",className:"w-full text-sm text-white/90",onClick:()=>x(!s),disabled:C,children:s?"Voltar ao Login":"Esqueci minha senha"}),e.jsxs("p",{"trae-inspector-start-line":"190","trae-inspector-start-column":"14","trae-inspector-end-line":"193","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\pages\\\\Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-center text-xs text-white/80 flex items-center justify-center gap-2",children:[e.jsx(Y,{className:"w-3 h-3"}),"Seus dados estão protegidos por criptografia de ponta a ponta."]})]})})]}),e.jsx("div",{"trae-inspector-start-line":"198","trae-inspector-start-column":"6","trae-inspector-end-line":"198","trae-inspector-end-column":"51","trae-inspector-file-path":"src\\\\pages\\\\Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"mt-4",children:e.jsx(z,{})})]})};export{J as default};
