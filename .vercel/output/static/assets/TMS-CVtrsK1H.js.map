{"version":3,"mappings":";gqFAqBO,SAASA,GAAU,CAAEC,OAAMC,eAAcC,SAAQC,WAA0B,EAAG,CACnF,KAAM,CAAEC,QAASC,KACX,CAACC,EAASC,CAAU,EAAIC,WAAS,EAAK,EACtC,CAACC,EAAWC,CAAY,EAAIF,WAAS,EAAK,EAC1C,CAACG,EAAOC,CAAQ,EAAIJ,WAAgB,EAAE,EACtCK,EAAeC,SAAyB,IAAI,EAE5C,CAACC,EAAUC,CAAW,EAAIR,WAAS,CACvCS,WAAY,GACZC,MAAO,IACPC,SAAU,SACVC,aAAc,SACdC,QAASnB,GAAU,GAGnBoB,eAAgB,GAChBC,eAAgB,GAChBC,mBAAoB,GACpBC,iBAAkB,GAClBC,aAAc,GACdC,cAAe,GAGfC,kBAAmB,GACnBC,kBAAmB,GACnBC,sBAAuB,GACvBC,oBAAqB,GACrBC,gBAAiB,GACjBC,iBAAkB,GAGlBC,aAAc,YACdC,aAAc,GACdC,aAAc,GAGdC,qBAAsB,GACtBC,WAAY,GACZC,YAAa,GACbC,mBAAoB,GACpBC,iBAAkB,GAGlBC,MAAO,aACPC,YAAa,GACbC,cAAe,GACfC,YAAa,GACbC,WAAY,MAGZC,cAAe,GACfC,cAAe,GACfC,WAAY,GACZC,MAAO,GAEPC,YAAa,GACd,EAEDC,YAAU,IAAM,CACVpD,IACFqD,IAEAC,IAEJ,EAAG,CAACtD,CAAI,CAAC,EAEToD,YAAU,IAAM,CAEd,GAAIrC,EAASM,QAAS,CACpB,MAAMkC,EAAe5C,EAAM6C,QAAUC,EAAEC,KAAO3C,EAASM,OAAO,EAC1DkC,GACFvC,EAAY2C,IAAS,CACnB,GAAGA,EACHZ,cAAeQ,EAAaK,eAAiB,IAC7C,CAEN,CACF,EAAG,CAAC7C,EAASM,QAASV,CAAK,CAAC,EAE5ByC,YAAU,IAAM,CAEd,MAAMS,EAAQC,WAAW/C,EAAS4B,WAAW,GAAK,EAC5CoB,EAAUD,WAAW/C,EAAS6B,aAAa,GAAK,EAChDoB,EAAQH,EAAQE,EAElBC,EAAQ,GAAKjD,EAAS8B,cAAgBmB,EAAMC,QAAQ,CAAC,GACvDjD,EAAY2C,IAAS,CACnB,GAAGA,EACHd,YAAamB,EAAMC,QAAQ,CAAC,GAC5B,CAEN,EAAG,CAAClD,EAAS4B,YAAa5B,EAAS6B,aAAa,CAAC,EAEjD,MAAMU,EAAoBA,IAAM,CAC9B,MAAMY,EAAYC,KAAKC,MACjBC,EAASC,KAAKC,MAAMD,KAAKD,SAAW,GAAI,EAAEG,WAAWC,SAAS,EAAG,GAAG,EACpEC,EAAY,GAAGR,CAAS,GAAGG,CAAM,GAAGM,MAAM,EAAE,EAClD3D,EAAY2C,IAAS,CAAE,GAAGA,EAAM1C,WAAYyD,GAAY,CAC1D,EAEMrB,EAAoB,SAAY,CACpC,KAAM,CAAEuB,OAAMC,SAAU,MAAMC,EAC3BC,KAAK,OAAO,EACZC,OAAO,GAAG,EACVC,GAAG,SAAU,CAAC,WAAY,cAAc,CAAC,EACzCC,MAAM,aAAc,CAAEC,UAAW,GAAO,EAEvCP,GACFhE,EAASgE,CAAI,CAEjB,EAEMQ,EAAkB,SAAY,SAClC,GAAI,GAACvE,OAAawE,UAAbxE,cAAsByE,QAAtBzE,QAA8B,IAAI,CACrC0E,EAAMV,MAAM,sBAAsB,EAClC,MACF,CAEA,MAAMW,EAAO3E,EAAawE,QAAQC,MAAM,CAAC,EACnCG,EAAWD,EAAKE,KAAKC,cAE3B,GAAI,CAACF,EAASG,SAAS,MAAM,GAAK,CAACH,EAASG,SAAS,MAAM,EAAG,CAC5DL,EAAMV,MAAM,4CAA4C,EACxD,MACF,CAEAnE,EAAa,EAAI,EAEjB,GAAI,CACF,GAAI+E,EAASG,SAAS,MAAM,EAAG,CAE7B,MAAMC,GAAS,MAAAC,GAAA,wBAAAC,CAAA,OAAM,QAAO,yBAAO,OAAAC,OAAA,kBAAAD,CAAA,8BAAGE,QAEhCC,EAAa,MADP,IAAIL,IACaM,UAAUX,CAAI,EAErCY,EAAqB,GAG3B,SAAW,CAACC,EAAUC,EAAQ,IAAKC,OAAOC,QAAQN,EAAWZ,KAAK,EAChE,GAAI,CAACgB,GAASG,KAAOJ,EAASV,cAAcC,SAAS,MAAM,EAAG,CAC5D,MAAMc,GAAU,MAAMJ,GAASK,MAAM,MAAM,EAC3CP,EAASQ,KAAKF,EAAO,CACvB,CAGF,GAAIN,EAASS,SAAW,EAAG,CACzBtB,EAAMV,MAAM,sCAAsC,EAClD,MACF,CAEAU,EAAMuB,KAAK,eAAeV,EAASS,MAAM,WAAW,EAEpD,KAAM,CAAEjC,OAAMC,UAAU,MAAMC,EAASiC,UAAUC,OAAO,mBAAoB,CAC1EC,KAAM,CAAEC,UAAWd,EAAS,CAC7B,EAED,GAAIvB,GAAO,MAAMA,GAEjB,MAAMsC,EAAUvC,EAQhB,GAAIuC,EAAQC,OAAOP,OAAS,EAC1BQ,QAAQC,KAAK,uBAAwBH,EAAQC,MAAM,EACnD7B,EAAMgC,QACJ,GAAGJ,EAAQK,YAAY,kCAAkCL,EAAQC,OAAOP,MAAM,aAC9E,CAAEY,SAAU,IACd,MACK,CACL,MAAMC,EAAW,CACf,KAAKP,EAAQK,YAAY,oBACzB,KAAKL,EAAQQ,eAAe,6BAA6B,EAGvDR,EAAQS,iBAAmB,GAC7BF,EAASd,KAAK,KAAKO,EAAQS,gBAAgB,4BAA4B,EAGzEF,EAASd,KAAK,6BAA8B,2BAA2B,EAEvErB,EAAMsC,QACJH,EAASI,KAAK;AAAA,CAAI,EAClB,CAAEL,SAAU,IACd,CACF,CAEF,KAAO,CAEL,MAAMM,EAAa,MAAMvC,EAAKwC,OAExB,CAAEpD,OAAMC,SAAU,MAAMC,EAASiC,UAAUC,OAAO,iBAAkB,CACxEC,KAAM,CAAEgB,YAAaF,EAAW,CACjC,EAED,GAAIlD,EAAO,MAAMA,EAEjBU,EAAMsC,QAAQ,6BAA6B,CAC7C,CAEA1H,aACAF,EAAa,EAAK,CACpB,OAAS4E,EAAY,CACnBwC,QAAQxC,MAAM,oBAAqBA,CAAK,EACxCU,EAAMV,MAAMA,EAAMqD,SAAW,uBAAuB,CACtD,SACExH,EAAa,EAAK,EACdG,EAAawE,UACfxE,EAAawE,QAAQ8C,MAAQ,GAEjC,CACF,EAEMC,EAAe,SAAY,CAC/B,GAAI,CAACrH,EAASM,SAAW,CAACN,EAASO,gBAAkB,CAACP,EAASa,kBAAmB,CAChF2D,EAAMV,MAAM,uCAAuC,EACnD,MACF,CAEAtE,EAAW,EAAI,EAEf,GAAI,CAEF,KAAM,CAAEqE,KAAMyD,GAAkB,MAAMvD,EACnCC,KAAK,UAAU,EACfC,OAAO,OAAO,EACdsD,GAAG,QAASvH,EAASgC,cAAcwF,aAAa,EAChDC,cAEH,GAAI,CAACH,EAAe,CAClB9C,EAAMV,MAAM,SAAS9D,EAASgC,aAAa,gDAAgD,EAC3FxC,EAAW,EAAK,EAChB,MACF,CAEA,KAAM,CAAEqE,KAAM6D,EAAS5D,SAAU,MAAMC,EACpCC,KAAK,KAAK,EACV2D,OAAO,CACN,GAAG3H,EACHgC,cAAehC,EAASgC,cAAcwF,cACtCjG,WAAYwB,WAAW/C,EAASuB,UAAU,EAC1CC,YAAaxB,EAASwB,YAAcuB,WAAW/C,EAASwB,WAAW,EAAI,KACvEC,mBAAoBmG,SAAS5H,EAASyB,kBAAkB,EACxDC,iBAAkBqB,WAAW/C,EAAS0B,gBAAgB,EACtDE,YAAamB,WAAW/C,EAAS4B,WAAW,EAC5CC,cAAekB,WAAW/C,EAAS6B,aAAa,EAChDC,YAAaiB,WAAW/C,EAAS8B,WAAW,EAC5C+F,WAAYxI,iBAAMsD,GAClBmF,OAAQ,UACT,EACA7D,SACA8D,SAEH,GAAIjE,EAAO,MAAMA,EAGjB,GAAI,CACF,MAAMkE,MAAiB5E,KACvB4E,EAAWC,QAAQD,EAAWE,UAAY,EAAE,EAE5C,MAAMC,EAAcnI,EAASoB,eAC1BpB,EAAS+B,aAAe,MAAQ/B,EAASO,eAAiBP,EAASa,mBAEhE,CAAEiD,MAAOsE,GAAiB,MAAMrE,EACnCC,KAAK,gBAAgB,EACrB2D,OAAO,CACNU,UAAW,QAAQrI,EAASE,UAAU,MAAMF,EAASsB,oBAAoB,GACzEgH,QAASH,EACTI,MAAOxF,WAAW/C,EAAS8B,WAAW,EACtC0G,gBAAiBR,EAAWS,cAAcC,MAAM,GAAG,EAAE,CAAC,EACtDZ,OAAQ,WACR1F,YAAa;AAAA,UAAwDpC,EAASU,gBAAgB,IAAIV,EAASW,YAAY;AAAA,WAAcX,EAASgB,mBAAmB,IAAIhB,EAASiB,eAAe,GAE9L,EAECmH,GACF9B,QAAQxC,MAAM,iCAAkCsE,CAAY,EAC5D5D,EAAMV,MAAM,qDAAqD,GAEjEU,EAAMsC,QAAQ,qCAAqC,CAEvD,OAAS6B,EAAK,CACZrC,QAAQxC,MAAM,gCAAiC6E,CAAG,CACpD,CAEAnE,EAAMsC,QAAQ,0DAA0D,EACxE1H,aACAF,EAAa,EAAK,EAGlBe,EAAY,CACVC,WAAY,GACZC,MAAO,IACPC,SAAU,SACVC,aAAc,SACdC,QAAS,GACTC,eAAgB,GAChBC,eAAgB,GAChBC,mBAAoB,GACpBC,iBAAkB,GAClBC,aAAc,GACdC,cAAe,GACfC,kBAAmB,GACnBC,kBAAmB,GACnBC,sBAAuB,GACvBC,oBAAqB,GACrBC,gBAAiB,GACjBC,iBAAkB,GAClBC,aAAc,YACdC,aAAc,GACdC,aAAc,GACdC,qBAAsB,GACtBC,WAAY,GACZC,YAAa,GACbC,mBAAoB,GACpBC,iBAAkB,GAClBC,MAAO,aACPC,YAAa,GACbC,cAAe,GACfC,YAAa,GACbC,WAAY,MACZC,cAAe,GACfC,cAAe,GACfC,WAAY,GACZC,MAAO,GACPC,YAAa,GACd,CACH,OAAS0B,EAAO,CACdwC,QAAQxC,MAAM,sBAAuBA,CAAK,EAC1CU,EAAMV,MAAM,oBAAoB,CAClC,SACEtE,EAAW,EAAK,CAClB,CACF,EAEA,aACGoJ,EAAA,CAAO,KAAA3J,EAAY,aAAAC,EAClB,SAAA2J,OAACC,EAAA,CAAc,UAAU,yCACvB,UAAAC,MAACC,EAAA,CACC,SAAAD,MAACE,GAAA,CAAY,+DAAmD,EAClE,EAEAJ,OAACK,GAAA,CAAK,aAAa,UAAU,UAAU,SACrC,UAAAL,OAACM,GAAA,CAAS,UAAU,0BAClB,UAAAJ,MAACK,EAAA,CAAY,MAAM,MAAM,wBAAY,EACrCL,MAACK,EAAA,CAAY,MAAM,UAAU,mBAAO,EACpCL,MAACK,EAAA,CAAY,MAAM,YAAY,qBAAS,EACxCL,MAACK,EAAA,CAAY,MAAM,eAAe,wBAAY,EAC9CL,MAACK,EAAA,CAAY,MAAM,QAAQ,iBAAK,EAChCL,MAACK,EAAA,CAAY,MAAM,aAAa,sBAAU,GAC5C,EAEAL,MAACM,GAAY,MAAM,MAAM,UAAU,YACjC,SAAAR,OAAC,OAAG,kXAAC,UAAU,kEACb,UAAAE,MAACO,GAAA,CAAO,UAAU,+CAA8C,QAC/D,MAAE,ojBAAC,UAAU,6BAA6B,wCAA4B,QACtE,KAAC,0nBAAC,UAAU,qCAAqC,sFAElD,EAEAP,MAAC,SAAK,kXACJ,IAAKjJ,EACL,KAAK,OACL,OAAO,YACP,UAAU,SACV,SAAWyJ,GAAM,QACXA,IAAEC,OAAOjF,QAATgF,QAAiB,IACnB/E,EAAMuB,KAAK,wBAA0BwD,EAAEC,OAAOjF,MAAM,CAAC,EAAEI,IAAI,CAE/D,EAAE,EAGJkE,OAAC,OAAG,kXAAC,UAAU,4BACb,UAAAE,MAACU,EAAA,CACC,KAAK,SACL,QAAQ,UACR,QAAS,WAAM3J,WAAawE,UAAbxE,cAAsB4J,SACtC,iCAED,EAEAX,MAACU,EAAA,CACC,KAAK,SACL,QAASpF,EACT,SAAU3E,EAETA,WAAY,gBAAkB,WACjC,GACF,EAEAmJ,OAAC,OAAG,kXAAC,UAAU,4CACb,UAAAE,MAAC,KAAC,wkBAAC,UAAU,8CAA8C,oCAE3D,QACC,KAAC,qrBAAC,UAAU,qCAAqC,iHAElD,QAEC,KAAC,skBAAC,UAAU,0CAA0C,6CAEvD,QACC,KAAC,glBAAC,UAAU,4BAA4B,qDAEzC,QACC,KAAC,ukBAAC,UAAU,4BAA4B,yCAEzC,QACC,KAAC,ooBAAC,UAAU,4BAA4B,yEAEzC,QACC,KAAC,glBAAC,UAAU,4BAA4B,oDAEzC,QACC,KAAC,2kBAAC,UAAU,4BAA4B,6CAEzC,GACF,GACF,EACF,EAEAA,MAACM,GAAY,MAAM,UAAU,UAAU,YACrC,SAAAR,OAAC,OAAG,kXAAC,UAAU,yBACb,UAAAA,OAAC,OAAG,kXACF,UAAAE,MAACY,GAAM,yBAAa,QACnBC,EAAA,CACC,MAAO5J,EAASE,WAChB,YAAeD,EAAY,CAAE,GAAGD,EAAUE,WAAYqJ,EAAEC,OAAOpC,MAAO,EACtE,YAAY,cAAa,GAE7B,EACAyB,OAAC,OAAG,kXACF,UAAAE,MAACY,GAAM,iBAAK,QACXC,EAAA,CACC,MAAO5J,EAASG,MAChB,YAAeF,EAAY,CAAE,GAAGD,EAAUG,MAAOoJ,EAAEC,OAAOpC,MAAO,EAAE,GAEvE,EACAyB,OAAC,OAAG,kXACF,UAAAE,MAACY,GAAM,oBAAQ,SACdE,EAAA,CAAO,MAAO7J,EAASM,QAAS,iBAAwBL,EAAY,CAAE,GAAGD,EAAUM,QAAS8G,EAAO,EAClG,UAAA2B,MAACe,EAAA,CACC,SAAAf,MAACgB,EAAA,CAAY,YAAY,qBAAoB,EAC/C,EACAhB,MAACiB,GACEpK,WAAMqK,OACLpB,OAACqB,EAAA,CAAyB,MAAOC,EAAKxH,GACnCwH,YAAKC,OAAO,MAAID,EAAKE,YAAY,KAAGF,EAAKtH,cAAc,MADzCsH,EAAKxH,EAEtB,CACD,EACH,GACF,GACF,EACAkG,OAAC,OAAG,kXACF,UAAAE,MAACY,GAAM,qBAAS,SACfE,EAAA,CAAO,MAAO7J,EAASI,SAAU,iBAAwBH,EAAY,CAAE,GAAGD,EAAUI,SAAUgH,EAAO,EACpG,UAAA2B,MAACe,EAAA,CACC,SAAAf,MAACgB,EAAA,EAAW,EACd,SACCC,EAAA,CACC,UAAAjB,MAACmB,EAAA,CAAW,MAAM,SAAS,kBAAM,EACjCnB,MAACmB,EAAA,CAAW,MAAM,eAAe,wBAAY,EAC7CnB,MAACmB,EAAA,CAAW,MAAM,WAAW,oBAAQ,EACrCnB,MAACmB,EAAA,CAAW,MAAM,aAAa,sBAAU,GAC3C,GACF,GACF,EACArB,OAAC,OAAG,kXACF,UAAAE,MAACY,GAAM,wBAAY,SAClBE,EAAA,CAAO,MAAO7J,EAASK,aAAc,iBAAwBJ,EAAY,CAAE,GAAGD,EAAUK,aAAc+G,EAAO,EAC5G,UAAA2B,MAACe,EAAA,CACC,SAAAf,MAACgB,EAAA,EAAW,EACd,SACCC,EAAA,CACC,UAAAjB,MAACmB,EAAA,CAAW,MAAM,SAAS,kBAAM,EACjCnB,MAACmB,EAAA,CAAW,MAAM,iBAAiB,0BAAc,EACjDnB,MAACmB,EAAA,CAAW,MAAM,aAAa,sBAAU,EACzCnB,MAACmB,EAAA,CAAW,MAAM,gBAAgB,yBAAa,GACjD,GACF,GACF,EACArB,OAAC,OAAG,kXACF,UAAAE,MAACY,GAAM,sBAAU,SAChBE,EAAA,CAAO,MAAO7J,EAAS+B,WAAY,iBAAwB9B,EAAY,CAAE,GAAGD,EAAU+B,WAAYqF,EAAO,EACxG,UAAA2B,MAACe,EAAA,CACC,SAAAf,MAACgB,EAAA,EAAW,EACd,SACCC,EAAA,CACC,UAAAjB,MAACmB,EAAA,CAAW,MAAM,MAAM,qCAAyB,EACjDnB,MAACmB,EAAA,CAAW,MAAM,MAAM,wCAA4B,GACtD,GACF,GACF,GACF,EACF,EAEAnB,MAACM,GAAY,MAAM,YAAY,UAAU,YACvC,SAAAR,OAAC,OAAG,kXAAC,UAAU,yBACb,UAAAA,OAAC,OAAG,kXAAC,UAAU,aACb,UAAAE,MAACY,GAAM,+BAAmB,QACzBC,EAAA,CACC,MAAO5J,EAASO,eAChB,YAAeN,EAAY,CAAE,GAAGD,EAAUO,eAAgBgJ,EAAEC,OAAOpC,MAAO,EAAE,GAEhF,EACAyB,OAAC,OAAG,kXACF,UAAAE,MAACY,GAAM,kBAAM,QACZC,EAAA,CACC,MAAO5J,EAASQ,eAChB,YAAeP,EAAY,CAAE,GAAGD,EAAUQ,eAAgB+I,EAAEC,OAAOpC,MAAO,EAC1E,YAAY,qBAAoB,GAEpC,EACAyB,OAAC,OAAG,kXACF,UAAAE,MAACY,GAAM,iBAAK,QACXC,EAAA,CACC,MAAO5J,EAASY,cAChB,YAAeX,EAAY,CAAE,GAAGD,EAAUY,cAAe2I,EAAEC,OAAOpC,MAAO,EACzE,YAAY,YAAW,GAE3B,EACAyB,OAAC,OAAG,kXAAC,UAAU,aACb,UAAAE,MAACY,GAAM,sBAAU,QAChBC,EAAA,CACC,MAAO5J,EAASS,mBAChB,YAAeR,EAAY,CAAE,GAAGD,EAAUS,mBAAoB8I,EAAEC,OAAOpC,MAAO,EAAE,GAEpF,EACAyB,OAAC,OAAG,kXACF,UAAAE,MAACY,GAAM,oBAAQ,QACdC,EAAA,CACC,MAAO5J,EAASU,iBAChB,YAAeT,EAAY,CAAE,GAAGD,EAAUU,iBAAkB6I,EAAEC,OAAOpC,MAAO,EAAE,GAElF,EACAyB,OAAC,OAAG,kXACF,UAAAE,MAACY,GAAM,gBAAI,QACVC,EAAA,CACC,MAAO5J,EAASW,aAChB,YAAeV,EAAY,CAAE,GAAGD,EAAUW,aAAc4I,EAAEC,OAAOpC,MAAO,EACxE,UAAW,EACX,YAAY,KAAI,GAEpB,GACF,EACF,EAEA2B,MAACM,GAAY,MAAM,eAAe,UAAU,YAC1C,SAAAR,OAAC,OAAG,kXAAC,UAAU,yBACb,UAAAA,OAAC,OAAG,kXAAC,UAAU,aACb,UAAAE,MAACY,GAAM,+BAAmB,QACzBC,EAAA,CACC,MAAO5J,EAASa,kBAChB,YAAeZ,EAAY,CAAE,GAAGD,EAAUa,kBAAmB0I,EAAEC,OAAOpC,MAAO,EAAE,GAEnF,EACAyB,OAAC,OAAG,kXACF,UAAAE,MAACY,GAAM,kBAAM,QACZC,EAAA,CACC,MAAO5J,EAASc,kBAChB,YAAeb,EAAY,CAAE,GAAGD,EAAUc,kBAAmByI,EAAEC,OAAOpC,MAAO,EAC7E,YAAY,qBAAoB,GAEpC,EACAyB,OAAC,OAAG,kXACF,UAAAE,MAACY,GAAM,iBAAK,QACXC,EAAA,CACC,MAAO5J,EAASkB,iBAChB,YAAejB,EAAY,CAAE,GAAGD,EAAUkB,iBAAkBqI,EAAEC,OAAOpC,MAAO,EAC5E,YAAY,YAAW,GAE3B,EACAyB,OAAC,OAAG,kXAAC,UAAU,aACb,UAAAE,MAACY,GAAM,sBAAU,QAChBC,EAAA,CACC,MAAO5J,EAASe,sBAChB,YAAed,EAAY,CAAE,GAAGD,EAAUe,sBAAuBwI,EAAEC,OAAOpC,MAAO,EAAE,GAEvF,EACAyB,OAAC,OAAG,kXACF,UAAAE,MAACY,GAAM,oBAAQ,QACdC,EAAA,CACC,MAAO5J,EAASgB,oBAChB,YAAef,EAAY,CAAE,GAAGD,EAAUgB,oBAAqBuI,EAAEC,OAAOpC,MAAO,EAAE,GAErF,EACAyB,OAAC,OAAG,kXACF,UAAAE,MAACY,GAAM,gBAAI,QACVC,EAAA,CACC,MAAO5J,EAASiB,gBAChB,YAAehB,EAAY,CAAE,GAAGD,EAAUiB,gBAAiBsI,EAAEC,OAAOpC,MAAO,EAC3E,UAAW,EACX,YAAY,KAAI,GAEpB,GACF,EACF,EAEA2B,MAACM,GAAY,MAAM,QAAQ,UAAU,YACnC,SAAAR,OAAC,OAAG,kXAAC,UAAU,yBACb,UAAAA,OAAC,OAAG,kXAAC,UAAU,aACb,UAAAE,MAACY,GAAM,kCAAsB,QAC5BC,EAAA,CACC,MAAO5J,EAASsB,qBAChB,YAAerB,EAAY,CAAE,GAAGD,EAAUsB,qBAAsBiI,EAAEC,OAAOpC,MAAO,EAChF,YAAY,wBAAuB,GAEvC,EACAyB,OAAC,OAAG,kXACF,UAAAE,MAACY,GAAM,6BAAiB,EACxBZ,MAACa,EAAA,CACC,KAAK,SACL,KAAK,OACL,MAAO5J,EAASuB,WAChB,SAAUgI,GAAKtJ,EAAY,CAAE,GAAGD,EAAUuB,WAAYgI,EAAEC,OAAOpC,MAAO,EAAE,GAE5E,EACAyB,OAAC,OAAG,kXACF,UAAAE,MAACY,GAAM,4BAAgB,EACvBZ,MAACa,EAAA,CACC,KAAK,SACL,KAAK,OACL,MAAO5J,EAASwB,YAChB,SAAU+H,GAAKtJ,EAAY,CAAE,GAAGD,EAAUwB,YAAa+H,EAAEC,OAAOpC,MAAO,EAAE,GAE7E,EACAyB,OAAC,OAAG,kXACF,UAAAE,MAACY,GAAM,gCAAoB,EAC3BZ,MAACa,GACC,KAAK,SACL,MAAO5J,EAASyB,mBAChB,SAAU8H,GAAKtJ,EAAY,CAAE,GAAGD,EAAUyB,mBAAoB8H,EAAEC,OAAOpC,MAAO,EAAE,GAEpF,EACAyB,OAAC,OAAG,kXACF,UAAAE,MAACY,GAAM,mCAAuB,EAC9BZ,MAACa,EAAA,CACC,KAAK,SACL,KAAK,OACL,MAAO5J,EAAS0B,iBAChB,SAAU6H,GAAKtJ,EAAY,CAAE,GAAGD,EAAU0B,iBAAkB6H,EAAEC,OAAOpC,MAAO,EAAE,GAElF,EACAyB,OAAC,OAAG,kXACF,UAAAE,MAACY,GAAM,8BAAkB,EACzBZ,MAACa,EAAA,CACC,KAAK,SACL,KAAK,OACL,MAAO5J,EAAS4B,YAChB,SAAU2H,GAAKtJ,EAAY,CAAE,GAAGD,EAAU4B,YAAa2H,EAAEC,OAAOpC,MAAO,EAAE,GAE7E,EACAyB,OAAC,OAAG,kXACF,UAAAE,MAACY,GAAM,8BAAkB,EACzBZ,MAACa,EAAA,CACC,KAAK,SACL,KAAK,OACL,MAAO5J,EAAS6B,cAChB,SAAU0H,GAAKtJ,EAAY,CAAE,GAAGD,EAAU6B,cAAe0H,EAAEC,OAAOpC,MAAO,EAAE,GAE/E,EACAyB,OAAC,OAAG,kXACF,UAAAE,MAACY,GAAM,8BAAkB,EACzBZ,MAACa,EAAA,CACC,KAAK,SACL,KAAK,OACL,MAAO5J,EAAS8B,YAChB,SAAQ,GACR,UAAU,WAAU,GAExB,GACF,EACF,EAEAiH,MAACM,GAAY,MAAM,aAAa,UAAU,YACxC,SAAAR,OAAC,OAAG,kXAAC,UAAU,yBACb,UAAAA,OAAC,OAAG,kXACF,UAAAE,MAACY,GAAM,iBAAK,SACXE,EAAA,CAAO,MAAO7J,EAAS2B,MAAO,iBAAwB1B,EAAY,CAAE,GAAGD,EAAU2B,MAAOyF,EAAO,EAC9F,UAAA2B,MAACe,EAAA,CACC,SAAAf,MAACgB,EAAA,EAAW,EACd,SACCC,EAAA,CACC,UAAAjB,MAACmB,EAAA,CAAW,MAAM,aAAa,sBAAU,EACzCnB,MAACmB,EAAA,CAAW,MAAM,QAAQ,iBAAK,EAC/BnB,MAACmB,EAAA,CAAW,MAAM,aAAa,sBAAU,EACzCnB,MAACmB,EAAA,CAAW,MAAM,cAAc,uBAAW,EAC3CnB,MAACmB,EAAA,CAAW,MAAM,aAAa,sBAAU,GAC3C,GACF,GACF,EACArB,OAAC,OAAG,kXACF,UAAAE,MAACY,GAAM,wBAAY,QAClBC,EAAA,CACC,MAAO5J,EAASkC,WAChB,YAAejC,EAAY,CAAE,GAAGD,EAAUkC,WAAYqH,EAAEC,OAAOpC,MAAO,EACtE,UAAW,EACX,YAAY,KAAI,GAEpB,EACAyB,OAAC,OAAG,kXACF,UAAAE,MAACY,GAAM,2BAAe,QACrBW,EAAA,CACC,MAAOtK,EAASgC,cAChB,YAAmB/B,EAAY,CAAE,GAAGD,EAAUgC,cAAeoF,EAAO,EACpE,OAAQmD,GAAKA,EAAEC,OAAS,YAAcD,EAAEC,OAAS,SACjD,YAAY,YAAW,GAE3B,EACA3B,OAAC,OAAG,kXACF,UAAAE,MAACY,GAAM,yBAAa,QACnBW,EAAA,CACC,MAAOtK,EAASiC,cAChB,YAAmBhC,EAAY,CAAE,GAAGD,EAAUiC,cAAemF,EAAO,EACpE,OAAQmD,GAAKA,EAAEC,OAAS,WAAaD,EAAEC,OAAS,UAChD,YAAY,uBAAsB,GAEtC,EACA3B,OAAC,OAAG,kXAAC,UAAU,aACb,UAAAE,MAACY,GAAM,0CAA8B,QACpCC,EAAA,CACC,MAAO5J,EAASmC,MAChB,YAAelC,EAAY,CAAE,GAAGD,EAAUmC,MAAOoH,EAAEC,OAAOpC,MAAO,EAAE,GAEvE,EACAyB,OAAC,OAAG,kXAAC,UAAU,aACb,UAAAE,MAACY,GAAM,uBAAW,QACjBc,GAAA,CACC,MAAOzK,EAASoC,YAChB,YAAenC,EAAY,CAAE,GAAGD,EAAUoC,YAAamH,EAAEC,OAAOpC,MAAO,EACvE,KAAM,EAAE,GAEZ,GACF,EACF,GACF,SAECsD,GAAA,CACC,UAAA3B,MAACU,EAAA,CAAO,QAAQ,UAAU,QAAS,IAAMvK,EAAa,EAAK,EAAG,oBAE9D,EACA6J,MAACU,GAAO,QAASpC,EAAc,SAAU9H,EACtCA,WAAU,cAAgB,cAC7B,GACF,GACF,EACF,CAEJ,CC5uBA,IAAIoL,GAAa,QACb,CAACC,GAAoBC,EAAgB,EAAIC,GAAmBH,EAAU,EACtE,CAACI,GAAeC,EAAe,EAAIJ,GAAmBD,EAAU,EAChEM,GAAQC,aACV,CAACC,EAAOC,IAAiB,CACvB,KAAM,CACJ,aAAAC,EACA,KAAA1G,EACA,QAAA2G,EAAU,GACV,SAAAC,EACA,SAAAC,EACA,MAAApE,EAAQ,KACR,QAAAqE,EACA,KAAAC,EACA,GAAGC,CACT,EAAQR,EACE,CAACS,EAAQC,CAAS,EAAIC,WAAe,IAAI,EACzCC,EAAeC,GAAgBZ,EAAea,GAASJ,EAAUI,CAAI,CAAC,EACtEC,EAAmCC,SAAa,EAAK,EACrDC,EAAgBR,EAASF,GAAQ,CAAC,CAACE,EAAO,QAAQ,MAAM,EAAI,GAClE,OAAuB/C,OAAKkC,GAAe,CAAE,MAAOM,EAAc,QAAAC,EAAS,SAAAE,EAAU,SAAU,CAC7EzC,MACdsD,GAAU,OACV,CACE,KAAM,SACN,KAAM,QACN,eAAgBf,EAChB,aAAcgB,GAAShB,CAAO,EAC9B,gBAAiBE,EAAW,GAAK,OACjC,SAAAA,EACA,MAAApE,EACA,GAAGuE,EACH,IAAKI,EACL,QAASQ,GAAqBpB,EAAM,QAAUqB,GAAU,CACjDlB,GAASG,GAAA,MAAAA,IACVW,IACFF,EAAiC,QAAUM,EAAM,qBAAoB,EAChEN,EAAiC,SAASM,EAAM,gBAAe,EAExE,CAAC,CACX,CACA,EACMJ,GAAiCrD,MAC/B0D,GACA,CACE,QAASb,EACT,QAAS,CAACM,EAAiC,QAC3C,KAAAvH,EACA,MAAAyC,EACA,QAAAkE,EACA,SAAAC,EACA,SAAAC,EACA,KAAAE,EACA,MAAO,CAAE,UAAW,mBAAmB,CACjD,CACA,CACA,EAAO,CACL,CACF,EACAT,GAAM,YAAcN,GACpB,IAAI+B,GAAiB,iBACjBC,GAAiBzB,aACnB,CAACC,EAAOC,IAAiB,CACvB,KAAM,CAAE,aAAAC,EAAc,WAAAuB,EAAY,GAAGC,CAAc,EAAK1B,EAClD2B,EAAU9B,GAAgB0B,GAAgBrB,CAAY,EAC5D,OAAuBtC,MAAIgE,GAAU,CAAE,QAASH,GAAcE,EAAQ,QAAS,SAA0B/D,MACvGsD,GAAU,KACV,CACE,aAAcC,GAASQ,EAAQ,OAAO,EACtC,gBAAiBA,EAAQ,SAAW,GAAK,OACzC,GAAGD,EACH,IAAKzB,CACb,CACA,EAAO,CACL,CACF,EACAuB,GAAe,YAAcD,GAC7B,IAAIM,GAAoB,mBACpBP,GAAmBvB,aACrB,CAAC,CACC,aAAAG,EACA,QAAA4B,EACA,QAAA3B,EACA,QAAA4B,EAAU,GACV,GAAG/B,CACP,EAAKC,IAAiB,CAClB,MAAM+B,EAAMhB,SAAa,IAAI,EACvBJ,EAAeC,GAAgBmB,EAAK/B,CAAY,EAChDgC,EAAcC,GAAY/B,CAAO,EACjCgC,EAAcC,GAAQN,CAAO,EACnCO,mBAAgB,IAAM,CACpB,MAAMC,EAAQN,EAAI,QAClB,GAAI,CAACM,EAAO,OACZ,MAAMC,EAAa,OAAO,iBAAiB,UAKrCC,EAJa,OAAO,yBACxBD,EACA,SACR,EACoC,IAC9B,GAAIN,IAAgB9B,GAAWqC,EAAY,CACzC,MAAMnB,EAAQ,IAAI,MAAM,QAAS,CAAE,QAAAU,CAAO,CAAE,EAC5CS,EAAW,KAAKF,EAAOnC,CAAO,EAC9BmC,EAAM,cAAcjB,CAAK,CAC3B,CACF,EAAG,CAACY,EAAa9B,EAAS4B,CAAO,CAAC,EACXnE,MACrBsD,GAAU,MACV,CACE,KAAM,QACN,cAAe,GACf,eAAgBf,EAChB,GAAGH,EACH,SAAU,GACV,IAAKY,EACL,MAAO,CACL,GAAGZ,EAAM,MACT,GAAGmC,EACH,SAAU,WACV,cAAe,OACf,QAAS,EACT,OAAQ,CAClB,CACA,CACA,CACE,CACF,EACAb,GAAiB,YAAcO,GAC/B,SAASV,GAAShB,EAAS,CACzB,OAAOA,EAAU,UAAY,WAC/B,CAIA,IAAIsC,GAAa,CAAC,UAAW,YAAa,YAAa,YAAY,EAC/DC,GAAmB,aACnB,CAACC,EAA8C,EAAIC,GAAoBF,GAAkB,CAC3FG,GACAnD,EACF,CAAC,EACGoD,GAA2BD,GAA2B,EACtDE,GAAgBrD,GAAgB,EAChC,CAACsD,GAAoBC,EAAoB,EAAIN,GAAwBD,EAAgB,EACrFQ,GAAaC,aACf,CAACnD,EAAOC,IAAiB,CACvB,KAAM,CACJ,kBAAAmD,EACA,KAAA5J,EACA,aAAA6J,EACA,MAAOC,EACP,SAAAlD,EAAW,GACX,SAAAC,EAAW,GACX,YAAAkD,EACA,IAAAhJ,EACA,KAAAiJ,EAAO,GACP,cAAAC,EACA,GAAGC,CACT,EAAQ1D,EACE2D,EAAwBb,GAAyBM,CAAiB,EAClEQ,EAAYC,GAAatJ,CAAG,EAC5B,CAAC0B,EAAO6H,CAAQ,EAAIC,GAAqB,CAC7C,KAAMT,EACN,YAAaD,GAAgB,KAC7B,SAAUI,EACV,OAAQf,EACd,CAAK,EACD,OAAuBsB,MACrBhB,GACA,CACE,MAAOI,EACP,KAAA5J,EACA,SAAA4G,EACA,SAAAC,EACA,MAAApE,EACA,cAAe6H,EACf,SAA0BE,MACxBC,GACA,CACE,QAAS,GACT,GAAGN,EACH,YAAAJ,EACA,IAAKK,EACL,KAAAJ,EACA,SAA0BQ,MACxBE,GAAW,IACX,CACE,KAAM,aACN,gBAAiB9D,EACjB,mBAAoBmD,EACpB,gBAAiBlD,EAAW,GAAK,OACjC,IAAKuD,EACL,GAAGF,EACH,IAAKzD,CACrB,CACA,CACA,CACA,CACA,CACA,CACE,CACF,EACAiD,GAAW,YAAcR,GACzB,IAAIyB,GAAY,iBACZC,GAAiBjB,aACnB,CAACnD,EAAOC,IAAiB,CACvB,KAAM,CAAE,kBAAAmD,EAAmB,SAAA/C,EAAU,GAAGgE,CAAS,EAAKrE,EAChD2B,EAAUsB,GAAqBkB,GAAWf,CAAiB,EAC3DkB,EAAa3C,EAAQ,UAAYtB,EACjCsD,EAAwBb,GAAyBM,CAAiB,EAClEmB,EAAaxB,GAAcK,CAAiB,EAC5CpB,EAAMwC,SAAc,IAAI,EACxB5D,EAAe6D,GAAiBxE,EAAc+B,CAAG,EACjD7B,EAAUwB,EAAQ,QAAU0C,EAAU,MACtCK,EAAuBF,SAAc,EAAK,EAChDG,mBAAiB,IAAM,CACrB,MAAMC,EAAiBvD,GAAU,CAC3BoB,GAAW,SAASpB,EAAM,GAAG,IAC/BqD,EAAqB,QAAU,GAEnC,EACMG,EAAc,IAAMH,EAAqB,QAAU,GACzD,gBAAS,iBAAiB,UAAWE,CAAa,EAClD,SAAS,iBAAiB,QAASC,CAAW,EACvC,IAAM,CACX,SAAS,oBAAoB,UAAWD,CAAa,EACrD,SAAS,oBAAoB,QAASC,CAAW,CACnD,CACF,EAAG,EAAE,EACkBb,MACrBc,GACA,CACE,QAAS,GACT,GAAGnB,EACH,UAAW,CAACW,EACZ,OAAQnE,EACR,SAA0B6D,MACxBlE,GACA,CACE,SAAUwE,EACV,SAAU3C,EAAQ,SAClB,QAAAxB,EACA,GAAGoE,EACH,GAAGF,EACH,KAAM1C,EAAQ,KACd,IAAKf,EACL,QAAS,IAAMe,EAAQ,cAAc0C,EAAU,KAAK,EACpD,UAAWU,GAAuB1D,GAAU,CACtCA,EAAM,MAAQ,SAASA,EAAM,eAAc,CACjD,CAAC,EACD,QAAS0D,GAAsBV,EAAU,QAAS,IAAM,OAClDK,EAAqB,WAASM,EAAAhD,EAAI,UAAJ,MAAAgD,EAAa,QACjD,CAAC,CACb,CACA,CACA,CACA,CACE,CACF,EACAZ,GAAe,YAAcD,GAC7B,IAAIc,GAAkB,sBAClBC,GAAsB/B,aACxB,CAACnD,EAAOC,IAAiB,CACvB,KAAM,CAAE,kBAAAmD,EAAmB,GAAG1B,CAAc,EAAK1B,EAC3CuE,EAAaxB,GAAcK,CAAiB,EAClD,OAAuBY,MAAKxC,GAAgB,CAAE,GAAG+C,EAAY,GAAG7C,EAAgB,IAAKzB,EAAc,CACrG,CACF,EACAiF,GAAoB,YAAcD,GAClC,IAAIE,GAAQjC,GACRkC,GAAQhB,GACRiB,GAAYH,GC9RhB,MAAMhC,GAAaoC,aAGjB,CAAC,CAAEC,YAAW,GAAGvF,CAAM,EAAGgC,IACnBpE,MAAC4H,GAAA,CAAyB,UAAWC,GAAG,aAAcF,CAAS,EAAG,GAAIvF,EAAO,IAAAgC,EAAS,CAC9F,EACDkB,GAAWwC,YAAcC,GAAyBD,YAElD,MAAMtB,GAAiBkB,aAGrB,CAAC,CAAEC,YAAW,GAAGvF,CAAM,EAAGgC,IAExBpE,MAACgI,GAAA,CACC,IAAA5D,EACA,UAAWyD,GACT,2OACAF,CACF,EACA,GAAIvF,EAEJ,SAAApC,MAACiI,GAAA,CAA8B,UAAU,mCACvC,eAACC,GAAA,CAAO,UAAU,wCAAuC,EAC3D,EACF,CAEH,EACD1B,GAAesB,YAAcC,GAAyBD,YCjB/C,SAASK,GAAgB,CAAEjS,OAAMC,eAAcE,WAAgC,EAAG,CACvF,KAAM,CAAC+R,EAAMC,CAAO,EAAI3R,WAA8B,SAAS,EACzD,CAAC4R,EAAaC,CAAc,EAAI7R,WAAS,EAAE,EAC3C,CAAC8R,EAAWC,CAAY,EAAI/R,WAAS,EAAE,EACvC,CAACgS,EAAaC,CAAc,EAAIjS,WAAS,EAAE,EAC3C,CAACF,EAASC,CAAU,EAAIC,WAAS,EAAK,EAEtCkS,EAAe,SAAY,CAC/BnS,EAAW,EAAI,EACf,GAAI,CACF,MAAM0G,EAAY,CAAEiL,QAEpB,GAAIA,IAAS,UAAW,CACtB,GAAI,CAACE,GAAe,CAACE,EAAW,CAC9B/M,EAAMV,MAAM,mCAAmC,EAC/C,MACF,CACAoC,EAAKmL,YAAcA,EACnBnL,EAAKqL,UAAYA,CACnB,KAAO,CACL,GAAI,CAACE,EAAa,CAChBjN,EAAMV,MAAM,mCAAmC,EAC/C,MACF,CACAoC,EAAKuL,YAAcA,EAAYG,QAAQ,MAAO,EAAE,CAClD,CAEA,KAAM,CAAE/N,OAAMC,SAAU,MAAMC,EAASiC,UAAUC,OAAO,uBAAwB,CAC9EC,OACD,EAED,GAAIpC,EAAO,MAAMA,EAEbD,EAAKwC,QAAUxC,EAAKwC,OAAOP,OAAS,EACtCtB,EAAMgC,QAAQ3C,EAAKsD,QAAS,CAC1B0K,YAAa,GAAGhO,EAAKwC,OAAOP,MAAM,yBACnC,EAEDtB,EAAMsC,QAAQjD,EAAKsD,OAAO,EAG5B/H,IACAF,EAAa,EAAK,EAGlBoS,EAAe,EAAE,EACjBE,EAAa,EAAE,EACfE,EAAe,EAAE,CAEnB,OAAS5N,EAAO,CACdwC,QAAQxC,MAAM,yBAA0BA,CAAK,EAC7CU,EAAMV,MAAM,oCAAoC,CAClD,SACEtE,EAAW,EAAK,CAClB,CACF,EAEA,aACGoJ,EAAA,CAAO,KAAA3J,EAAY,aAAAC,EAClB,SAAA2J,OAACC,EAAA,CAAc,UAAU,cACvB,UAAAC,MAACC,EAAA,CACC,SAAAD,MAACE,GAAA,CAAY,sCAA0B,EACzC,EAEAJ,OAAC,OAAG,sXAAC,UAAU,iBACb,UAAAA,OAACwF,IAAW,MAAO8C,EAAM,cAAgB/J,GAAUgK,EAAQhK,CAA4B,EACrF,UAAAyB,OAAC,OAAG,sXAAC,UAAU,8BACb,UAAAE,MAACwG,GAAA,CAAe,MAAM,UAAU,GAAG,UAAS,EAC5C1G,OAACc,EAAA,CAAM,QAAQ,UAAU,UAAU,yCACjC,UAAAZ,MAAC+I,GAAA,CAAS,UAAU,UAAS,EAAG,wBAElC,GACF,EACAjJ,OAAC,OAAG,sXAAC,UAAU,8BACb,UAAAE,MAACwG,GAAA,CAAe,MAAM,QAAQ,GAAG,QAAO,EACxC1G,OAACc,EAAA,CAAM,QAAQ,QAAQ,UAAU,yCAC/B,UAAAZ,MAACgJ,GAAA,CAAI,UAAU,UAAS,EAAG,gCAE7B,GACF,GACF,EAECZ,IAAS,UACRtI,OAAC,OAAG,wXAAC,UAAU,YACb,UAAAA,OAAC,OAAG,wXAAC,UAAU,YACb,UAAAE,MAACY,EAAA,CAAM,QAAQ,cAAc,wBAAY,EACzCZ,MAACa,EAAA,CACC,GAAG,cACH,KAAK,OACL,MAAOyH,EACP,SAAW9H,GAAM+H,EAAe/H,EAAEC,OAAOpC,KAAK,EAAE,GAEpD,EACAyB,OAAC,OAAG,wXAAC,UAAU,YACb,UAAAE,MAACY,EAAA,CAAM,QAAQ,YAAY,sBAAU,EACrCZ,MAACa,EAAA,CACC,GAAG,YACH,KAAK,OACL,MAAO2H,EACP,SAAWhI,GAAMiI,EAAajI,EAAEC,OAAOpC,KAAK,EAAE,GAElD,GACF,EAEAyB,OAAC,OAAG,wXAAC,UAAU,YACb,UAAAE,MAACY,EAAA,CAAM,QAAQ,cAAc,2BAAe,QAC3CC,EAAA,CACC,GAAG,cACH,YAAY,+BACZ,MAAO6H,EACP,SAAWlI,GAAMmI,EAAenI,EAAEC,OAAOpC,KAAK,EAC9C,UAAW,GAAG,QAEf,KAAC,slBAAC,UAAU,gCAAgC,gDAE7C,GACF,EAGFyB,OAAC,OAAG,wXAAC,UAAU,kBACb,UAAAE,MAACU,EAAA,CACC,QAAQ,UACR,UAAU,SACV,QAAS,IAAMvK,EAAa,EAAK,EACjC,SAAUK,EACX,oBAED,EACAwJ,MAACU,GACC,UAAU,SACV,QAASkI,EACT,SAAUpS,EAETA,WACCsJ,OAAAmJ,WAAA,CACE,UAAAjJ,MAACkJ,GAAA,CAAQ,UAAU,4BAA2B,EAAG,iBAEnD,EAEA,WAEJ,GACF,GACF,GACF,EACF,CAEJ,CClJA,SAAwBC,GAAgB,CAAEjT,OAAMC,eAAcE,WAAgC,EAAG,CAC/F,KAAM,CAAEoF,SAAU2N,KACZ,CAAC5S,EAASC,CAAU,EAAIC,WAAS,EAAK,EACtC,CAACO,EAAUC,CAAW,EAAIR,WAAS,CACvC2S,OAAQ,GACRjS,MAAO,IACPkS,aAAc,IAEdhR,aAAc,GACdiR,cAAe,GACfC,iBAAkB,GAClBC,kBAAmB,GACnBC,WAAY,GACZC,YAAa,GAEblS,eAAgB,GAChBmS,gBAAiB,GACjBlS,mBAAoB,GACpBmS,oBAAqB,GACrBjS,aAAc,GACdC,cAAe,GAEfE,kBAAmB,GACnB+R,mBAAoB,GACpB9R,sBAAuB,GACvB+R,uBAAwB,GACxB7R,gBAAiB,GACjBC,iBAAkB,GAElBI,qBAAsB,oBACtBG,mBAAoB,IACpBF,WAAY,GACZwR,YAAa,GACbjR,YAAa,GAEbE,cAAe,GACfE,WAAY,KAEZ8Q,iBAAkB,GAClBC,UAAW,GACXC,kBAAmB,GACnBC,WAAY,GACb,EAEK9L,EAAe,MAAOkC,GAAuB,CACjDA,EAAE6J,iBACF5T,EAAW,EAAI,EAEf,GAAI,CACF,KAAM,CAAEqE,OAAMC,SAAU,MAAMC,EAASiC,UAAUC,OAAO,aAAc,CACpEC,KAAM,CACJ,GAAGlG,EACHyB,mBAAoBmG,SAAS5H,EAASyB,kBAAkB,EACxDF,WAAYwB,WAAW/C,EAASuB,UAAU,EAC1CwR,YAAahQ,WAAW/C,EAAS+S,WAAW,EAC5CjR,YAAaiB,WAAW/C,EAAS8B,WAAW,EAC9C,CACD,EAED,GAAIgC,EAAO,MAAMA,EAEjB,GAAID,EAAKiD,QACPtC,EAAM,CACJ6O,MAAO,4BACPxB,YAAa,WAAWhO,EAAKuO,MAAM,aAAavO,EAAKyP,KAAK,GAC3D,EACDlU,IACAF,EAAa,EAAK,MAElB,OAAM,IAAIqU,MAAM1P,EAAKC,OAAS,qBAAqB,CAEvD,OAASA,EAAY,CACnBwC,QAAQxC,MAAM,QAASA,CAAK,EAC5BU,EAAM,CACJ6O,MAAO,sBACPxB,YAAa/N,EAAMqD,QACnBqM,QAAS,cACV,CACH,SACEhU,EAAW,EAAK,CAClB,CACF,EAEA,aACGoJ,EAAA,CAAO,KAAA3J,EAAY,aAAAC,EAClB,SAAA2J,OAACC,EAAA,CAAc,UAAU,yCACvB,UAAAC,MAACC,EAAA,CACC,SAAAD,MAACE,GAAA,CAAY,uBAAW,EAC1B,SAEC,QAAI,uXAAC,SAAU5B,EAAc,UAAU,YAEtC,UAAAwB,OAAC,OAAG,wXAAC,UAAU,YACb,UAAAE,MAAC,MAAE,qiBAAC,UAAU,gBAAgB,yBAAa,EAC3CF,OAAC,OAAG,wXAAC,UAAU,yBACb,UAAAA,OAAC,OAAG,wXACF,UAAAE,MAACY,GAAM,kBAAM,EACbZ,MAACa,GACC,SAAQ,GACR,MAAO5J,EAASoS,OAChB,SAAW7I,GAAMtJ,EAAY,CAAE,GAAGD,EAAUoS,OAAQ7I,EAAEC,OAAOpC,MAAO,EACpE,YAAY,SAAQ,GAExB,EACAyB,OAAC,OAAG,wXACF,UAAAE,MAACY,GAAM,iBAAK,QACXC,EAAA,CACC,MAAO5J,EAASG,MAChB,YAAiBF,EAAY,CAAE,GAAGD,EAAUG,MAAOoJ,EAAEC,OAAOpC,MAAO,EACnE,YAAY,IAAG,GAEnB,GACF,GACF,EAGAyB,OAAC,OAAG,wXAAC,UAAU,YACb,UAAAE,MAAC,MAAE,+iBAAC,UAAU,gBAAgB,8BAAkB,EAChDF,OAAC,OAAG,wXACF,UAAAE,MAACY,GAAM,2BAAe,SACrBE,EAAA,CACC,MAAO7J,EAASqS,aAChB,iBAA0BpS,EAAY,CAAE,GAAGD,EAAUqS,aAAcjL,EAAO,EAE1E,UAAA2B,MAACe,EAAA,CACC,SAAAf,MAACgB,EAAA,EAAW,EACd,SACCC,EAAA,CACC,UAAAjB,MAACmB,EAAA,CAAW,MAAM,IAAI,qBAAS,EAC/BnB,MAACmB,EAAA,CAAW,MAAM,IAAI,qBAAS,EAC/BnB,MAACmB,EAAA,CAAW,MAAM,IAAI,qBAAS,EAC/BnB,MAACmB,EAAA,CAAW,MAAM,IAAI,wBAAY,GACpC,GACF,GACF,EACArB,OAAC,OAAG,wXAAC,UAAU,yBACb,UAAAA,OAAC,OAAG,wXACF,UAAAE,MAACY,GAAM,gBAAI,EACXZ,MAACa,GACC,SAAQ,GACR,MAAO5J,EAASqB,aAChB,SAAWkI,GAAMtJ,EAAY,CAAE,GAAGD,EAAUqB,aAAckI,EAAEC,OAAOpC,MAAO,EAC1E,YAAY,qBAAoB,GAEpC,EACAyB,OAAC,OAAG,wXACF,UAAAE,MAACY,GAAM,wBAAY,EACnBZ,MAACa,GACC,SAAQ,GACR,MAAO5J,EAASsS,cAChB,SAAW/I,GAAMtJ,EAAY,CAAE,GAAGD,EAAUsS,cAAe/I,EAAEC,OAAOpC,MAAO,EAAE,GAEjF,GACF,EACAyB,OAAC,OAAG,wXAAC,UAAU,yBACb,UAAAA,OAAC,OAAG,wXAAC,UAAU,aACb,UAAAE,MAACY,GAAM,oBAAQ,EACfZ,MAACa,GACC,SAAQ,GACR,MAAO5J,EAASuS,iBAChB,SAAWhJ,GAAMtJ,EAAY,CAAE,GAAGD,EAAUuS,iBAAkBhJ,EAAEC,OAAOpC,MAAO,EAAE,GAEpF,EACAyB,OAAC,OAAG,wXACF,UAAAE,MAACY,GAAM,eAAG,EACVZ,MAACa,GACC,SAAQ,GACR,MAAO5J,EAAS0S,YAChB,SAAWnJ,GAAMtJ,EAAY,CAAE,GAAGD,EAAU0S,YAAanJ,EAAEC,OAAOpC,MAAO,EACzE,YAAY,YAAW,GAE3B,GACF,EACAyB,OAAC,OAAG,wXAAC,UAAU,yBACb,UAAAA,OAAC,OAAG,wXACF,UAAAE,MAACY,GAAM,qBAAS,EAChBZ,MAACa,GACC,SAAQ,GACR,MAAO5J,EAASwS,kBAChB,SAAWjJ,GAAMtJ,EAAY,CAAE,GAAGD,EAAUwS,kBAAmBjJ,EAAEC,OAAOpC,MAAO,EAAE,GAErF,EACAyB,OAAC,OAAG,wXACF,UAAAE,MAACY,GAAM,cAAE,EACTZ,MAACa,EAAA,CACC,SAAQ,GACR,UAAW,EACX,MAAO5J,EAASyS,WAChB,SAAWlJ,GAAMtJ,EAAY,CAAE,GAAGD,EAAUyS,WAAYlJ,EAAEC,OAAOpC,MAAMI,aAAY,CAAG,EACtF,YAAY,KAAI,GAEpB,GACF,GACF,EAGAqB,OAAC,OAAG,wXAAC,UAAU,YACb,UAAAE,MAAC,MAAE,6hBAAC,UAAU,gBAAgB,qBAAS,EACvCF,OAAC,OAAG,wXAAC,UAAU,yBACb,UAAAA,OAAC,OAAG,wXACF,UAAAE,MAACY,GAAM,gBAAI,EACXZ,MAACa,GACC,SAAQ,GACR,MAAO5J,EAASQ,eAChB,SAAW+I,GAAMtJ,EAAY,CAAE,GAAGD,EAAUQ,eAAgB+I,EAAEC,OAAOpC,MAAO,EAAE,GAElF,EACAyB,OAAC,OAAG,wXACF,UAAAE,MAACY,GAAM,wBAAY,EACnBZ,MAACa,GACC,SAAQ,GACR,MAAO5J,EAAS2S,gBAChB,SAAWpJ,GAAMtJ,EAAY,CAAE,GAAGD,EAAU2S,gBAAiBpJ,EAAEC,OAAOpC,MAAO,EAAE,GAEnF,GACF,EACAyB,OAAC,OAAG,wXAAC,UAAU,yBACb,UAAAA,OAAC,OAAG,wXACF,UAAAE,MAACY,GAAM,qBAAS,EAChBZ,MAACa,GACC,SAAQ,GACR,MAAO5J,EAAS4S,oBAChB,SAAWrJ,GACTtJ,EAAY,CAAE,GAAGD,EAAU4S,oBAAqBrJ,EAAEC,OAAOpC,MAAO4L,iBAAkBzJ,EAAEC,OAAOpC,MAAO,EACnG,GAEL,EACAyB,OAAC,OAAG,wXACF,UAAAE,MAACY,GAAM,cAAE,EACTZ,MAACa,EAAA,CACC,SAAQ,GACR,UAAW,EACX,MAAO5J,EAASW,aAChB,SAAW4I,GACTtJ,EAAY,CACV,GAAGD,EACHW,aAAc4I,EAAEC,OAAOpC,MAAMI,cAC7ByL,UAAW1J,EAAEC,OAAOpC,MAAMI,aAAY,CACvC,EACF,GAEL,GACF,GACF,EAGAqB,OAAC,OAAG,wXAAC,UAAU,YACb,UAAAE,MAAC,MAAE,qiBAAC,UAAU,gBAAgB,wBAAY,EAC1CF,OAAC,OAAG,wXAAC,UAAU,yBACb,UAAAA,OAAC,OAAG,wXACF,UAAAE,MAACY,GAAM,gBAAI,EACXZ,MAACa,GACC,SAAQ,GACR,MAAO5J,EAASc,kBAChB,SAAWyI,GAAMtJ,EAAY,CAAE,GAAGD,EAAUc,kBAAmByI,EAAEC,OAAOpC,MAAO,EAAE,GAErF,EACAyB,OAAC,OAAG,wXACF,UAAAE,MAACY,GAAM,wBAAY,EACnBZ,MAACa,GACC,SAAQ,GACR,MAAO5J,EAAS6S,mBAChB,SAAWtJ,GAAMtJ,EAAY,CAAE,GAAGD,EAAU6S,mBAAoBtJ,EAAEC,OAAOpC,MAAO,EAAE,GAEtF,GACF,EACAyB,OAAC,OAAG,wXAAC,UAAU,yBACb,UAAAA,OAAC,OAAG,wXACF,UAAAE,MAACY,GAAM,qBAAS,EAChBZ,MAACa,GACC,SAAQ,GACR,MAAO5J,EAAS8S,uBAChB,SAAWvJ,GACTtJ,EAAY,CACV,GAAGD,EACH8S,uBAAwBvJ,EAAEC,OAAOpC,MACjC8L,kBAAmB3J,EAAEC,OAAOpC,MAC7B,EACF,GAEL,EACAyB,OAAC,OAAG,wXACF,UAAAE,MAACY,GAAM,cAAE,EACTZ,MAACa,EAAA,CACC,SAAQ,GACR,UAAW,EACX,MAAO5J,EAASiB,gBAChB,SAAWsI,GACTtJ,EAAY,CACV,GAAGD,EACHiB,gBAAiBsI,EAAEC,OAAOpC,MAAMI,cAChC2L,WAAY5J,EAAEC,OAAOpC,MAAMI,aAAY,CACxC,EACF,GAEL,GACF,GACF,EAGAqB,OAAC,OAAG,wXAAC,UAAU,YACb,UAAAE,MAAC,MAAE,uiBAAC,UAAU,gBAAgB,2BAAe,EAC7CF,OAAC,OAAG,wXAAC,UAAU,yBACb,UAAAA,OAAC,OAAG,wXACF,UAAAE,MAACY,GAAM,mBAAO,QACbC,EAAA,CACC,MAAO5J,EAASsB,qBAChB,YAAiBrB,EAAY,CAAE,GAAGD,EAAUsB,qBAAsBiI,EAAEC,OAAOpC,MAAO,EAAE,GAExF,EACAyB,OAAC,OAAG,wXACF,UAAAE,MAACY,GAAM,mBAAO,EACdZ,MAACa,EAAA,CACC,KAAK,SACL,SAAQ,GACR,MAAO5J,EAASyB,mBAChB,SAAW8H,GAAMtJ,EAAY,CAAE,GAAGD,EAAUyB,mBAAoB8H,EAAEC,OAAOpC,MAAO,EAAE,GAEtF,EACAyB,OAAC,OAAG,wXACF,UAAAE,MAACY,GAAM,2BAAe,EACtBZ,MAACa,EAAA,CACC,KAAK,SACL,KAAK,OACL,SAAQ,GACR,MAAO5J,EAASuB,WAChB,YAAiBtB,EAAY,CAAE,GAAGD,EAAUuB,WAAYgI,EAAEC,OAAOpC,MAAO,EAAE,GAE9E,GACF,EACAyB,OAAC,OAAG,wXAAC,UAAU,yBACb,UAAAA,OAAC,OAAG,wXACF,UAAAE,MAACY,GAAM,+BAAmB,EAC1BZ,MAACa,EAAA,CACC,KAAK,SACL,KAAK,OACL,SAAQ,GACR,MAAO5J,EAAS+S,YAChB,YAAiB9S,EAAY,CAAE,GAAGD,EAAU+S,YAAaxJ,EAAEC,OAAOpC,MAAO,EAAE,GAE/E,EACAyB,OAAC,OAAG,wXACF,UAAAE,MAACY,GAAM,+BAAmB,EAC1BZ,MAACa,EAAA,CACC,KAAK,SACL,KAAK,OACL,SAAQ,GACR,MAAO5J,EAAS8B,YAChB,YAAiB7B,EAAY,CAAE,GAAGD,EAAU8B,YAAayH,EAAEC,OAAOpC,MAAO,EAAE,GAE/E,GACF,GACF,EAGAyB,OAAC,OAAG,wXAAC,UAAU,YACb,UAAAE,MAAC,MAAE,giBAAC,UAAU,gBAAgB,mBAAO,EACrCF,OAAC,OAAG,wXAAC,UAAU,yBACb,UAAAA,OAAC,OAAG,wXACF,UAAAE,MAACY,GAAM,iBAAK,QACXW,EAAA,CACC,MAAOtK,EAASgC,cAChB,YAAqB/B,EAAY,CAAE,GAAGD,EAAUgC,cAAeoF,EAAO,EAAE,GAE5E,EACAyB,OAAC,OAAG,wXACF,UAAAE,MAACY,GAAM,cAAE,EACTZ,MAACa,EAAA,CACC,SAAQ,GACR,UAAW,EACX,MAAO5J,EAASkC,WAChB,SAAWqH,GAAMtJ,EAAY,CAAE,GAAGD,EAAUkC,WAAYqH,EAAEC,OAAOpC,MAAMI,aAAY,CAAG,EAAE,GAE5F,GACF,GACF,EAEAqB,OAAC,OAAG,wXAAC,UAAU,yBACb,UAAAE,MAACU,EAAA,CAAO,KAAK,SAAS,QAAQ,UAAU,QAAS,IAAMvK,EAAa,EAAK,EAAG,oBAE5E,EACA2J,OAACY,EAAA,CAAO,KAAK,SAAS,SAAUlK,EAC7BA,aAAWwJ,MAACkJ,GAAA,CAAQ,UAAU,4BAA2B,EAAI,eAEhE,GACF,GACF,GACF,EACF,CAEJ,CC9XO,SAASwB,IAAgB,CAC9B,KAAM,CAACC,EAAMC,CAAO,EAAIlU,WAAgB,EAAE,EACpC,CAACF,EAASC,CAAU,EAAIC,WAAS,EAAK,EACtC,CAACmU,EAAYC,CAAa,EAAIpU,WAAS,EAAK,EAC5C,CAACqU,EAAkBC,CAAmB,EAAItU,WAAS,EAAK,EACxD,CAACuU,EAAkBC,CAAmB,EAAIxU,WAAS,EAAK,EACxD,CAACyU,EAAYC,CAAa,EAAI1U,WAAS,EAAE,EAE/C4C,YAAU,IAAM,CACd+R,GACF,EAAG,EAAE,EAEL,MAAMA,EAAW,SAAY,CAC3B5U,EAAW,EAAI,EACf,GAAI,CACF,KAAM,CAAEqE,OAAMC,SAAU,MAAMC,EAC3BC,KAAK,KAAK,EACVC,OAAO,GAAG,EACVE,MAAM,aAAc,CAAEC,UAAW,GAAO,EAE3C,GAAIN,EAAO,MAAMA,EACjB6P,EAAQ9P,GAAQ,EAAE,CACpB,OAASC,EAAO,CACdwC,QAAQxC,MAAM,yBAA0BA,CAAK,EAC7CU,EAAMV,MAAM,uBAAuB,CACrC,SACEtE,EAAW,EAAK,CAClB,CACF,EAEM6U,EAAkBvM,GAAmB,CACzC,MAAMwM,EAA4D,CAChEC,SAAU,CAAEf,QAAS,UAAWgB,MAAO,YACvCC,QAAS,CAAEjB,QAAS,UAAWgB,MAAO,WACtCE,WAAY,CAAElB,QAAS,YAAagB,MAAO,cAC3CG,UAAW,CAAEnB,QAAS,cAAegB,MAAO,aAC5CI,UAAW,CAAEpB,QAAS,cAAegB,MAAO,YAAY,EAGpDK,EAASP,EAASxM,CAAM,GAAKwM,EAASC,SAC5C,aAAQO,EAAA,CAAM,QAASD,EAAOrB,QAAUqB,WAAOL,MAAM,CACvD,EAEMO,EAAerB,EAAKsB,OAAOC,GAC/BA,EAAI/U,WAAW0E,cAAcsQ,SAAShB,EAAWtP,aAAa,GAC9DqQ,EAAIjT,cAAc4C,cAAcsQ,SAAShB,EAAWtP,aAAa,GACjEqQ,EAAI1U,eAAeqE,cAAcsQ,SAAShB,EAAWtP,aAAa,CACpE,EAEA,OACEiE,OAAAmJ,WAAA,CACE,UAAAnJ,OAACsM,EAAA,CACC,UAAApM,MAACqM,IACC,SAAAvM,OAAC,OAAG,qXAAC,UAAU,oCACb,UAAAA,OAACwM,GAAA,CAAU,UAAU,0BACnB,UAAAtM,MAACuM,GAAA,CAAS,UAAU,UAAS,EAAG,kBAElC,EACAzM,OAAC,OAAG,qXAAC,UAAU,aACb,UAAAA,OAAC,OAAG,oXAAC,UAAU,WACb,UAAAE,MAACwM,GAAA,CAAO,UAAU,wDAAuD,EACzExM,MAACa,EAAA,CACC,YAAY,iBACZ,UAAU,YACV,MAAOsK,EACP,SAAU3K,GAAK4K,EAAc5K,EAAEC,OAAOpC,KAAK,EAAE,GAEjD,EACAyB,OAACY,GAAO,QAAQ,UAAU,QAAS,IAAMsK,EAAoB,EAAI,EAC/D,UAAAhL,MAACyM,GAAA,CAAS,UAAU,eAAc,EAAG,yBAEvC,SACC/L,EAAA,CAAO,QAAS,IAAMwK,EAAoB,EAAI,EAC7C,UAAAlL,MAAC0M,GAAA,CAAK,UAAU,eAAc,EAAG,eAEnC,GACF,GACF,EACF,QACCC,EAAA,CACEnW,WACCwJ,MAAC,OAAG,+hBAAC,UAAU,mBAAmB,yBAAa,EAC7CgM,EAAajP,SAAW,SACzB,OAAG,sXAAC,UAAU,yCACb,UAAAiD,MAACuM,GAAA,CAAS,UAAU,oCAAmC,EACvDvM,MAAC,KAAC,4iBAAC,kCAAsB,GAC3B,SAEC4M,GAAA,CACC,UAAA5M,MAAC6M,GAAA,CACC,gBAACC,EAAA,CACC,UAAA9M,MAAC+M,GAAU,kBAAM,EACjB/M,MAAC+M,GAAU,wBAAY,EACvB/M,MAAC+M,GAAU,qBAAS,EACpB/M,MAAC+M,GAAU,wBAAY,EACvB/M,MAAC+M,GAAU,iBAAK,EAChB/M,MAAC+M,GAAU,uBAAW,EACtB/M,MAAC+M,GAAU,kBAAM,EACjB/M,MAAC+M,GAAU,iBAAK,GAClB,EACF,QACCC,GAAA,CACEhB,WAAa9K,IAAIgL,UACfY,EAAA,CACC,UAAA9M,MAACiN,EAAA,CAAU,UAAU,YAAaf,WAAI/U,WAAW,EACjD6I,MAACiN,GACEC,YAAO,IAAI7S,KAAK6R,EAAIiB,YAAY,EAAG,kBAAkB,EACxD,EACAnN,MAACiN,EAAA,CAAWf,WAAI1U,eAAe,EAC/BwI,MAACiN,EAAA,CAAWf,WAAIpU,kBAAkB,EAClCkI,MAACiN,EAAA,CAAU,UAAU,YAAaf,WAAIjT,cAAc,EACpD6G,OAACmN,EAAA,CAAU,UAAU,+BAA+B,gBAC9Cf,EAAInT,YAAYqU,eAAe,QAAS,CAAEC,sBAAuB,EAAG,GAC1E,EACArN,MAACiN,EAAA,CAAW3B,WAAeY,EAAInN,MAAM,EAAE,EACvCiB,MAACiN,EAAA,CACC,SAAAjN,MAACU,EAAA,CAAO,QAAQ,QAAQ,KAAK,KAC3B,SAAAV,MAACsN,GAAA,CAAI,UAAU,UAAS,EAC1B,EACF,IAhBapB,EAAItS,EAiBnB,CACD,EACH,GACF,EAEJ,GACF,QAEC3D,GAAA,CACC,KAAM4U,EACN,aAAcC,EACd,UAAWO,EAAS,QAGrBlD,GAAA,CACC,KAAM4C,EACN,aAAcC,EACd,UAAWK,EAAS,QAGrBlC,GAAA,CACC,KAAM8B,EACN,aAAcC,EACd,UAAWG,EAAS,GAExB,CAEJ,CCjJA,SAAwBkC,GAAiB,CAAErX,OAAMC,eAAcE,WAAiC,EAAG,CACjG,KAAM,CAAEoF,SAAU2N,KACZ,CAAC5S,EAASC,CAAU,EAAIC,WAAS,EAAK,EACtC,CAACiU,EAAM6C,CAAO,EAAI9W,WAAgB,EAAE,EACpC,CAAC+W,EAAcC,CAAe,EAAIhX,WAAmB,EAAE,EACvD,CAACO,EAAUC,CAAW,EAAIR,WAAS,CACvC2S,OAAQ,GACRjS,MAAO,IACPuW,UAAW,KACXC,OAAQ,GACRC,aAAc,GACdC,aAAc,GACdC,UAAW,KACXC,cAAe,GACfC,eAAgB,GACjB,EAED3U,YAAU,IAAM,CACVpD,GACFgY,GAEJ,EAAG,CAAChY,CAAI,CAAC,EAET,MAAMgY,EAAW,SAAY,CAC3B,KAAM,CAAEpT,OAAMC,SAAU,MAAMC,EAC3BC,KAAK,KAAK,EACVC,OAAO,8FAA8F,EACrGsD,GAAG,SAAU,YAAY,EACzB2P,GAAG,UAAW,IAAI,EAClB/S,MAAM,aAAc,CAAEC,UAAW,GAAO,EACxC+S,MAAM,EAAE,EAEX,GAAIrT,EAAO,CACTwC,QAAQxC,MAAM,0BAA2BA,CAAK,EAC9C,MACF,CAEAyS,EAAQ1S,GAAQ,EAAE,CACpB,EAEMwD,EAAe,MAAOkC,GAAuB,CAGjD,GAFAA,EAAE6J,iBAEEoD,EAAa1Q,SAAW,EAAG,CAC7BtB,EAAM,CACJ6O,MAAO,+BACPG,QAAS,cACV,EACD,MACF,CAEAhU,EAAW,EAAI,EAEf,GAAI,CACF,MAAM4X,EAAmB1D,EAAKsB,OAAQC,GAAQuB,EAAatB,SAASD,EAAItS,EAAE,CAAC,EACrE0U,EAAYD,EAAiBE,OAAO,CAACC,EAAKtC,IAAQsC,EAAMtC,EAAI1T,WAAY,CAAC,EACzEiW,EAAaJ,EAAiBE,OAAO,CAACC,EAAKtC,IAAQsC,EAAMtC,EAAInT,YAAa,CAAC,EAE3E,CAAE+B,OAAMC,SAAU,MAAMC,EAASiC,UAAUC,OAAO,cAAe,CACrEC,KAAM,CACJ,GAAGlG,EACHyX,gBAAiBjB,EAAa1Q,OAC9BvE,WAAY8V,EACZtE,YAAayE,EACb9D,KAAM0D,EAAiBnN,IAAKgL,IAAS,CACnC3B,MAAO2B,EAAIyC,cACX,EACFd,aAAc5W,EAAS4W,aACpBlO,MAAM,GAAG,EACTuB,IAAK0N,GAAOA,EAAGC,OAAOpQ,aAAa,EACnCwN,UAAe2C,CAAE,EACpBE,WAAY,CACV,CACEC,IAAK9X,EAAS+W,cACdgB,KAAM/X,EAASgX,eAChB,EAEL,CACD,EAED,GAAIlT,EAAO,MAAMA,EAEjB,GAAID,EAAKiD,QACPtC,EAAM,CACJ6O,MAAO,6BACPxB,YAAa,WAAWhO,EAAKuO,MAAM,aAAavO,EAAKyP,KAAK,GAC3D,EACDlU,IACAF,EAAa,EAAK,MAElB,OAAM,IAAIqU,MAAM1P,EAAKC,OAAS,sBAAsB,CAExD,OAASA,EAAY,CACnBwC,QAAQxC,MAAM,QAASA,CAAK,EAC5BU,EAAM,CACJ6O,MAAO,uBACPxB,YAAa/N,EAAMqD,QACnBqM,QAAS,cACV,CACH,SACEhU,EAAW,EAAK,CAClB,CACF,EAEMwY,EAAaC,GAAkB,CACnCxB,EAAiB7T,GAAUA,EAAKsS,SAAS+C,CAAK,EAAIrV,EAAKoS,OAAQrS,GAAOA,IAAOsV,CAAK,EAAI,CAAC,GAAGrV,EAAMqV,CAAK,CAAE,CACzG,EAEA,aACGrP,EAAA,CAAO,KAAA3J,EAAY,aAAAC,EAClB,SAAA2J,OAACC,EAAA,CAAc,UAAU,yCACvB,UAAAC,MAACC,EAAA,CACC,SAAAD,MAACE,GAAA,CAAY,wBAAY,EAC3B,SAEC,QAAI,wXAAC,SAAU5B,EAAc,UAAU,YAEtC,UAAAwB,OAAC,OAAG,yXAAC,UAAU,YACb,UAAAE,MAAC,MAAE,uiBAAC,UAAU,gBAAgB,0BAAc,EAC5CF,OAAC,OAAG,yXAAC,UAAU,yBACb,UAAAA,OAAC,OAAG,yXACF,UAAAE,MAACY,GAAM,kBAAM,EACbZ,MAACa,GACC,SAAQ,GACR,MAAO5J,EAASoS,OAChB,SAAW7I,GAAMtJ,EAAY,CAAE,GAAGD,EAAUoS,OAAQ7I,EAAEC,OAAOpC,MAAO,EACpE,YAAY,SAAQ,GAExB,EACAyB,OAAC,OAAG,yXACF,UAAAE,MAACY,GAAM,iBAAK,QACXC,EAAA,CACC,MAAO5J,EAASG,MAChB,YAAiBF,EAAY,CAAE,GAAGD,EAAUG,MAAOoJ,EAAEC,OAAOpC,MAAO,EACnE,YAAY,IAAG,GAEnB,GACF,GACF,EAGAyB,OAAC,OAAG,yXAAC,UAAU,YACb,UAAAE,MAAC,MAAE,6hBAAC,UAAU,gBAAgB,oBAAQ,EACtCF,OAAC,OAAG,yXAAC,UAAU,yBACb,UAAAA,OAAC,OAAG,yXACF,UAAAE,MAACY,GAAM,qBAAS,EAChBZ,MAACa,EAAA,CACC,SAAQ,GACR,UAAW,EACX,MAAO5J,EAAS0W,UAChB,SAAWnN,GAAMtJ,EAAY,CAAE,GAAGD,EAAU0W,UAAWnN,EAAEC,OAAOpC,MAAMI,aAAY,CAAG,EACrF,YAAY,KAAI,GAEpB,EACAqB,OAAC,OAAG,yXACF,UAAAE,MAACY,GAAM,kBAAM,EACbZ,MAACa,EAAA,CACC,SAAQ,GACR,UAAW,EACX,MAAO5J,EAAS2W,OAChB,SAAWpN,GAAMtJ,EAAY,CAAE,GAAGD,EAAU2W,OAAQpN,EAAEC,OAAOpC,MAAMI,aAAY,CAAG,EAClF,YAAY,KAAI,GAEpB,GACF,EACAqB,OAAC,OAAG,yXACF,UAAAE,MAACY,GAAM,mDAAuC,QAC7CC,EAAA,CACC,MAAO5J,EAAS4W,aAChB,YAAiB3W,EAAY,CAAE,GAAGD,EAAU4W,aAAcrN,EAAEC,OAAOpC,MAAO,EAC1E,YAAY,oBAAmB,GAEnC,GACF,EAGAyB,OAAC,OAAG,yXAAC,UAAU,YACb,UAAAE,MAAC,MAAE,yjBAAC,UAAU,gBAAgB,6BAAiB,EAC/CF,OAAC,OAAG,yXAAC,UAAU,yBACb,UAAAA,OAAC,OAAG,yXACF,UAAAE,MAACY,GAAM,iBAAK,QACXW,EAAA,CACC,MAAOtK,EAAS6W,aAChB,YAAqB5W,EAAY,CAAE,GAAGD,EAAU6W,aAAczP,EAAO,EAAE,GAE3E,EACAyB,OAAC,OAAG,yXACF,UAAAE,MAACY,GAAM,cAAE,EACTZ,MAACa,EAAA,CACC,SAAQ,GACR,UAAW,EACX,MAAO5J,EAAS8W,UAChB,SAAWvN,GAAMtJ,EAAY,CAAE,GAAGD,EAAU8W,UAAWvN,EAAEC,OAAOpC,MAAMI,aAAY,CAAG,EACrF,YAAY,KAAI,GAEpB,GACF,GACF,EAGAqB,OAAC,OAAG,yXAAC,UAAU,YACb,UAAAE,MAAC,MAAE,6hBAAC,UAAU,gBAAgB,oBAAQ,EACtCF,OAAC,OAAG,yXAAC,UAAU,yBACb,UAAAA,OAAC,OAAG,yXACF,UAAAE,MAACY,GAAM,eAAG,EACVZ,MAACa,GACC,SAAQ,GACR,MAAO5J,EAAS+W,cAChB,SAAWxN,GAAMtJ,EAAY,CAAE,GAAGD,EAAU+W,cAAexN,EAAEC,OAAOpC,MAAO,EAC3E,YAAY,iBAAgB,GAEhC,EACAyB,OAAC,OAAG,yXACF,UAAAE,MAACY,GAAM,gBAAI,EACXZ,MAACa,GACC,SAAQ,GACR,MAAO5J,EAASgX,eAChB,SAAWzN,GAAMtJ,EAAY,CAAE,GAAGD,EAAUgX,eAAgBzN,EAAEC,OAAOpC,MAAO,EAAE,GAElF,GACF,GACF,EAGAyB,OAAC,OAAG,yXAAC,UAAU,YACb,UAAAA,OAAC,MAAE,0XAAC,UAAU,gBAAgB,kCAAsB2N,EAAa1Q,OAAO,kBAAc,EACtFiD,MAAC,OAAG,yXAAC,UAAU,2DACZ2K,WAAK5N,SAAW,EACfiD,MAAC,KAAC,ikBAAC,UAAU,gCAAgC,6CAAiC,EAE9E2K,EAAKzJ,IAAKgL,GACRpM,OAAC,gYAAiB,UAAU,0DAC1B,UAAAE,MAACmP,GAAA,CAAS,QAAS1B,EAAatB,SAASD,EAAItS,EAAE,EAAG,gBAAiB,IAAMqV,EAAU/C,EAAItS,EAAE,EAAE,EAC3FkG,OAAC,OAAG,yXAAC,UAAU,iBACb,UAAAA,OAAC,OAAG,yXAAC,UAAU,cAAc,kBAAMoM,EAAI/U,YAAW,EAClD2I,OAAC,OAAG,yXAAC,UAAU,wBACZoM,YAAIvU,iBAAiB,MAAIuU,EAAIjU,oBAAoB,MAAIiU,EAAI1T,WAAW,UAAQ,IAC5E0T,EAAInT,YAAYoB,QAAQ,CAAC,GAC5B,GACF,IARQ+R,EAAItS,EASd,CACD,EAEL,GACF,EAEAkG,OAAC,OAAG,yXAAC,UAAU,yBACb,UAAAE,MAACU,EAAA,CAAO,KAAK,SAAS,QAAQ,UAAU,QAAS,IAAMvK,EAAa,EAAK,EAAG,oBAE5E,EACA2J,OAACY,GAAO,KAAK,SAAS,SAAUlK,GAAWiX,EAAa1Q,SAAW,EAChEvG,aAAWwJ,MAACkJ,GAAA,CAAQ,UAAU,4BAA2B,EAAI,gBAEhE,GACF,GACF,GACF,EACF,CAEJ,CCrQA,SAAwBkG,IAAiB,CACvC,KAAM,CAAE3T,SAAU2N,KACZ,CAACiG,EAAOC,CAAQ,EAAI5Y,WAAiB,EAAE,EACvC,CAACF,EAASC,CAAU,EAAIC,WAAS,EAAI,EACrC,CAACuU,EAAkBC,CAAmB,EAAIxU,WAAS,EAAK,EAE9D4C,YAAU,IAAM,CACdiW,GACF,EAAG,EAAE,EAEL,MAAMA,EAAY,SAAY,CAC5B9Y,EAAW,EAAI,EACf,KAAM,CAAEqE,OAAMC,SAAU,MAAMC,EAASC,KAAK,MAAM,EAAEC,OAAO,GAAG,EAAEE,MAAM,aAAc,CAAEC,UAAW,GAAO,EAEpGN,GACFwC,QAAQxC,MAAM,2BAA4BA,CAAK,EAC/CU,EAAM,CACJ6O,MAAO,0BACPxB,YAAa/N,EAAMqD,QACnBqM,QAAS,cACV,GAED6E,EAASxU,GAAQ,EAAE,EAErBrE,EAAW,EAAK,CAClB,EAEM+Y,EAAiB,MAAOC,GAAe,CAC3C,GAAI,CAACC,QAAQ,oCAAoCD,EAAKE,WAAW,GAAG,EAAG,OAEvE,MAAMC,EAAYC,OAAO,4BAA4B,EACrD,GAAKD,EAEL,GAAI,CACF,KAAM,CAAE9U,OAAMC,SAAU,MAAMC,EAASiC,UAAUC,OAAO,gBAAiB,CACvEC,KAAM,CACJ2S,QAASL,EAAK7V,GACd+U,aAAcc,EAAKd,aACnBoB,gBAAiBN,EAAK7B,OACtBoC,uBAAwBJ,EAC1B,CACD,EAED,GAAI7U,EAAO,MAAMA,EAEjB,GAAID,EAAKiD,QACPtC,EAAM,CACJ6O,MAAO,+BACR,EACDiF,QAEA,OAAM,IAAI/E,MAAM1P,EAAKC,KAAK,CAE9B,OAASA,EAAY,CACnBU,EAAM,CACJ6O,MAAO,yBACPxB,YAAa/N,EAAMqD,QACnBqM,QAAS,cACV,CACH,CACF,EAEMa,EAAkBvM,GAAmB,CACzC,MAAMwM,EAAgF,CACpFI,WAAY,UACZsE,YAAa,YACbC,UAAW,UACXtE,UAAW,eAGb,OAAO5L,MAAC+L,GAAM,QAASR,EAASxM,CAAM,GAAK,UAAYA,WAAON,aAAY,CAAE,CAC9E,EAEA,OACEqB,OAAC,OAAG,sXAAC,UAAU,YACb,UAAAA,OAAC,OAAG,sXAAC,UAAU,oCACb,UAAAE,MAAC,MAAE,yjBAAC,UAAU,qBAAqB,wCAA4B,SAC9DU,EAAA,CAAO,QAAS,IAAMwK,EAAoB,EAAI,EAC7C,UAAAlL,MAAC0M,GAAA,CAAK,UAAU,eAAc,EAAG,gBAEnC,GACF,SAECN,EAAA,CACC,UAAApM,MAACqM,GAAA,CACC,SAAArM,MAACsM,GAAA,CAAU,2BAAe,EAC5B,QACCK,EAAA,CACEnW,iBACE,KAAC,giBAAC,yBAAa,EACd6Y,EAAMtS,SAAW,QAClB,KAAC,2iBAAC,UAAU,wBAAwB,gCAAoB,SAExD6P,GAAA,CACC,UAAA5M,MAAC6M,GAAA,CACC,gBAACC,EAAA,CACC,UAAA9M,MAAC+M,GAAU,kBAAM,EACjB/M,MAAC+M,GAAU,kBAAM,EACjB/M,MAAC+M,GAAU,oBAAQ,EACnB/M,MAAC+M,GAAU,mBAAO,EAClB/M,MAAC+M,GAAU,iBAAK,EAChB/M,MAAC+M,GAAU,gBAAI,EACf/M,MAAC+M,GAAU,iBAAK,EAChB/M,MAAC+M,GAAU,iBAAK,GAClB,EACF,QACCC,GAAA,CACEqC,WAAMnO,IAAKuO,UACT3C,EAAA,CACC,UAAA9M,MAACiN,EAAA,CACC,SAAAnN,OAAC,OAAG,uXACF,UAAAA,OAAC,OAAG,uXAAC,UAAU,cACZ2P,YAAKE,YAAY,IAAEF,EAAKrY,OAC3B,EACA4I,MAAC,OAAG,uXAAC,UAAU,gCACZ,aAAI3F,KAAKoV,EAAKtC,YAAY,EAAEgD,oBAAmB,CAClD,GACF,EACF,EACAnQ,MAACiN,EAAA,CAAW3B,WAAemE,EAAK1Q,MAAM,EAAE,SACvCkO,EAAA,CACEwC,YAAK9B,UAAU,MAAI8B,EAAK7B,QAC3B,EACA5N,MAACiN,EAAA,CAAWwC,WAAKW,qBAAqB,EACtCpQ,MAACiN,EAAA,CAAU,UAAU,cAAewC,WAAKf,gBAAgB,SACxDzB,EAAA,CAAWwC,YAAKY,cAAclW,QAAQ,CAAC,EAAE,OAAG,SAC5C8S,EAAA,CAAU,gBAAIwC,EAAKa,kBAAkBnW,QAAQ,CAAC,GAAE,QAChD8S,EAAA,CACC,SAAAnN,OAAC,OAAG,uXAAC,UAAU,aACZ2P,YAAK1Q,SAAW,cACfe,OAACY,EAAA,CAAO,KAAK,KAAK,QAAQ,UAAU,QAAS,IAAM8O,EAAeC,CAAI,EACpE,UAAAzP,MAACuQ,GAAA,CAAY,UAAU,eAAc,EAAG,YAE1C,EAEDd,EAAKd,cACJ3O,MAACU,EAAA,CACC,KAAK,KACL,QAAQ,QACR,QAAS,IAAM,CACb8P,UAAUC,UAAUC,UAAUjB,EAAKd,YAAa,EAChDlT,EAAM,CAAE6O,MAAO,iBAAkB,CACnC,EAEA,SAAAtK,MAACuM,GAAA,CAAS,UAAU,UAAS,EAC/B,GAEJ,EACF,IAxCakD,EAAK7V,EAyCpB,CACD,EACH,GACF,EAEJ,GACF,QAEC2T,GAAA,CAAiB,KAAMtC,EAAkB,aAAcC,EAAqB,UAAWqE,EAAU,GACpG,CAEJ,CC9JO,MAAMoB,GAAqBA,CAAC,CAAEza,OAAMC,eAAc+V,MAAK0E,eAAuC,IAAM,CACzG,KAAM,CAACpa,EAASC,CAAU,EAAIC,WAAS,EAAK,EACtC,CAACma,EAASC,CAAU,EAAIpa,WAAmB,EAAE,EAC7C,CAACqa,EAAgBC,CAAiB,EAAIta,WAAS,EAAE,EACjD,CAACua,EAAiBC,CAAkB,EAAIxa,WAAS,EAAE,EACnD,CAACya,EAAiBC,CAAkB,EAAI1a,WAAS,EAAE,EACnD,CAAC2a,EAAoBC,CAAqB,EAAI5a,WAAS,EAAE,EACzD,CAAC6a,EAAkBC,CAAmB,EAAI9a,WAAS,EAAE,EACrD,CAAC+a,EAAOC,CAAQ,EAAIhb,WAAS,EAAE,EAErC4C,YAAU,IAAM,CACd,GAAIpD,EAAM,CACRyb,IAEIzF,WAAKjT,eACPiY,EAAmBhF,EAAIjT,aAAa,EAGtC,MAAM2Y,MAAevX,KACrBuX,EAAS1S,QAAQ0S,EAASzS,UAAY,CAAC,EACvCyS,EAASC,SAAS,EAAG,EAAG,EAAG,CAAC,EAC5BP,EAAsBM,EAASlS,cAAc7E,MAAM,EAAG,EAAE,CAAC,EAEzD,MAAMiX,EAAU,IAAIzX,KAAKuX,CAAQ,EACjCE,EAAQ5S,QAAQ4S,EAAQ3S,UAAY,CAAC,EACrCqS,EAAoBM,EAAQpS,cAAc7E,MAAM,EAAG,EAAE,CAAC,CACxD,CACF,EAAG,CAAC3E,EAAMgW,CAAG,CAAC,EAEd,MAAMyF,EAAc,SAAY,CAE9B,KAAM,CAAE7W,KAAMiX,GAAgB,MAAM/W,EACjCC,KAAK,UAAU,EACfC,OAAO,sBAAsB,EAC7BE,MAAM,WAAW,EAGd,CAAEN,KAAMkX,GAAgB,MAAMhX,EACjCC,KAAK,YAAY,EACjBC,OAAO,SAAS,EAChBsD,GAAG,OAAQ,QAAQ,EAEhByT,GAAYD,iBAAa9Q,OAASgR,EAAEC,WAAY,GAChDC,GAAoBL,GAAe,IACtC9F,OAAOoG,GAAKJ,EAAU9F,SAASkG,EAAEzY,EAAE,CAAC,EACpCsH,IAAImR,IAAM,CACTzY,GAAIyY,EAAEzY,GACN0Y,UAAWD,EAAEC,UACbC,MAAOF,EAAEE,MACTC,UAAW,IACX,EAEJ1B,EAAWsB,CAAgB,CAC7B,EAEM9T,EAAe,MAAOkC,GAAuB,CAGjD,GAFAA,EAAE6J,iBAEE,CAAC0G,GAAkB,CAACM,GAAsB,CAACE,EAAkB,CAC/D9V,EAAMV,MAAM,2DAA2D,EACvE,MACF,CAEA,GAAI,CAACkW,EAAiB,CACpBxV,EAAMV,MAAM,wCAAwC,EACpD,MACF,CAEAtE,EAAW,EAAI,EAEf,GAAI,CAEF,MAAMgc,EAAqB5B,EAAQnX,KAAK2Y,IAAKA,GAAEzY,KAAOmX,CAAc,EAG9D,CAAEjW,KAAMsG,EAAMrG,MAAO2X,GAAc,MAAM1X,EAC5CC,KAAK,OAAO,EACZ2D,OAAO,CACNyC,OAAQ,GAAG6K,EAAIvU,gBAAgB,IAAIuU,EAAItU,YAAY,GACnD0J,YAAa,GAAG4K,EAAIjU,mBAAmB,IAAIiU,EAAIhU,eAAe,GAC9Dya,UAAW5B,EACX6B,aAAaH,iBAAoBH,YAAa,YAC9CxY,cAAemX,GAAmB/E,EAAIjT,eAAiB,YACvD8F,OAAQ,WACR8T,oBAAqBxB,EACrByB,kBAAmBvB,EACnBE,MAAOA,GAAS,KACjB,EACAvW,SACA8D,SAEH,GAAI0T,EAAW,MAAMA,EAGrB,KAAM,CAAE3X,MAAOgY,GAAa,MAAM/X,EAC/BC,KAAK,KAAK,EACV+X,OAAO,CAAEzb,QAAS6J,EAAKxH,GAAI,EAC3B4E,GAAG,KAAM0N,EAAItS,EAAE,EAElB,GAAImZ,EAAU,MAAMA,EAGpB,MAAM/X,EACHC,KAAK,sBAAsB,EAC3B2D,OAAO,CACN+T,UAAW5B,EACXjX,cAAemX,EACf1Z,QAAS6J,EAAKxH,GACdqZ,YAAa5B,EACbtS,OAAQ,YACRmU,eAAgB,QACjB,EAGH,MAAMlY,EACHC,KAAK,eAAe,EACpB2D,OAAO,CACNuT,QAASpB,EACTzG,MAAO,4BACPlM,QAAS,WAAW8N,EAAIvU,gBAAgB,IAAIuU,EAAItU,YAAY,MAAMsU,EAAIjU,mBAAmB,IAAIiU,EAAIhU,eAAe;AAAA,WAC3F+Y,CAAe,GAAGE,GAAmBA,IAAoB,OAAS,cAAcA,CAAe,GAAK,EAAE;AAAA,WACtG,IAAI9W,KAAKgX,CAAkB,EAAEjE,eAAe,OAAO,CAAC;AAAA,QACvDlB,EAAI/U,UAAU,MAAM+U,EAAI3T,oBAAoB,GAC9DkJ,KAAM,OACN0R,OAAQ,MACRC,KAAM,GACP,EAEH3X,EAAMsC,QAAQ,6BAA8B,CAC1C+K,YAAa,iEACd,EAED8H,GACF,OAAS7V,EAAY,CACnBwC,QAAQxC,MAAM,wBAAyBA,CAAK,EAC5CU,EAAMV,MAAM,uBAAwB,CAClC+N,YAAa/N,EAAMqD,QACpB,CACH,SACE3H,EAAW,EAAK,CAClB,CACF,EAEA,OAAKyV,QAGFrM,EAAA,CAAO,KAAA3J,EAAY,aAAAC,EAClB,SAAA2J,OAACC,EAAA,CAAc,UAAU,yCACvB,UAAAD,OAACG,EAAA,CACC,UAAAH,OAACI,GAAA,CAAY,UAAU,mCACrB,UAAAF,MAACqT,GAAA,CAAS,UAAU,uBAAsB,uBAE5C,SACCC,GAAA,CAAiB,yDAC6BpH,EAAI/U,YACnD,GACF,SAEC,QAAI,0XAAC,SAAUmH,EAAc,UAAU,YAEtC,UAAAwB,OAAC,OAAG,2XAAC,UAAU,uDACb,UAAAA,OAAC,MAAE,2XAAC,UAAU,6CACZ,UAAAE,MAACuT,GAAA,CAAO,UAAU,UAAS,kBAE7B,EACAzT,OAAC,OAAG,2XAAC,UAAU,iCACb,UAAAA,OAAC,OAAG,2XACF,UAAAE,MAAC,KAAC,6hBAAC,UAAU,wBAAwB,kBAAM,EAC3CF,OAAC,KAAC,2XAAC,UAAU,gBAAiBoM,YAAIvU,iBAAiB,IAAEuU,EAAItU,cAAa,GACxE,EACAkI,OAAC,OAAG,2XACF,UAAAE,MAAC,KAAC,8hBAAC,UAAU,wBAAwB,mBAAO,EAC5CF,OAAC,KAAC,2XAAC,UAAU,gBAAiBoM,YAAIjU,oBAAoB,IAAEiU,EAAIhU,iBAAgB,GAC9E,EACA4H,OAAC,OAAG,2XACF,UAAAE,MAAC,KAAC,8hBAAC,UAAU,wBAAwB,mBAAO,QAC3C,KAAC,2XAAC,UAAU,gBAAiBkM,WAAI3T,qBAAqB,GACzD,EACAuH,OAAC,OAAG,2XACF,UAAAE,MAAC,KAAC,4hBAAC,UAAU,wBAAwB,iBAAK,EAC1CF,OAAC,KAAC,2XAAC,UAAU,+BAA8B,gBACrCoM,EAAInT,YAAYqU,eAAe,QAAS,CAAEC,sBAAuB,EAAG,GAC1E,GACF,GACF,GACF,EAGAvN,OAAC,OAAG,2XAAC,UAAU,YACb,UAAAA,OAACc,EAAA,CAAM,QAAQ,SAAS,UAAU,0BAChC,UAAAZ,MAACwT,GAAA,CAAK,UAAU,UAAS,iBAE3B,SACC1S,EAAA,CAAO,MAAOiQ,EAAgB,cAAeC,EAAmB,SAAQ,GACvE,UAAAhR,MAACe,GAAc,GAAG,SAChB,eAACC,EAAA,CAAY,YAAY,yBAAwB,EACnD,EACAhB,MAACiB,GACE4P,WAAQ9T,SAAW,EAClB+C,OAAC,OAAG,2XAAC,UAAU,gDACb,UAAAE,MAACyT,GAAA,CAAY,UAAU,kCAAiC,iCAE1D,EAEA5C,EAAQ3P,IAAKwS,GACX1T,MAACmB,GAA2B,MAAOuS,EAAO9Z,GACxC,SAAAkG,OAAC,OAAG,2XAAC,UAAU,2CACb,UAAAE,MAAC,QAAI,2XAAE0T,WAAOpB,UAAU,EACvBoB,EAAOlB,WACNxS,MAAC+L,EAAA,CAAM,QAAQ,UAAU,UAAU,sCAAqC,sBAExE,GAEJ,GARe2H,EAAO9Z,EASxB,CACD,EAEL,GACF,GACF,EAGAkG,OAAC,OAAG,2XAAC,UAAU,YACb,UAAAA,OAACc,EAAA,CAAM,QAAQ,UAAU,UAAU,0BACjC,UAAAZ,MAAC2T,EAAA,CAAM,UAAU,UAAS,iCAE5B,QACCpS,EAAA,CACC,MAAO0P,EACP,SAAUC,EACV,YAAY,+BACZ,mBAAe1P,YAAEC,OAAFD,cAAQ3F,iBAAkB,YAAY2F,IAAEC,OAAFD,cAAQ3F,iBAAkB,YAAW,GAE9F,EAGAiE,OAAC,OAAG,2XAAC,UAAU,YACb,UAAAA,OAACc,EAAA,CAAM,QAAQ,UAAU,UAAU,0BACjC,UAAAZ,MAAC2T,EAAA,CAAM,UAAU,UAAS,wBAE5B,QACCpS,EAAA,CACC,MAAO4P,EACP,SAAUC,EACV,YAAY,uCACZ,mBAAe5P,YAAEC,OAAFD,cAAQ3F,iBAAkB,aAAa2F,IAAEC,OAAFD,cAAQ3F,iBAAkB,WAAU,GAE9F,EAGAiE,OAAC,OAAG,2XAAC,UAAU,yBACb,UAAAA,OAAC,OAAG,2XAAC,UAAU,YACb,UAAAA,OAACc,EAAA,CAAM,QAAQ,YAAY,UAAU,0BACnC,UAAAZ,MAAC+I,GAAA,CAAS,UAAU,UAAS,wBAE/B,QACClI,EAAA,CACC,GAAG,YACH,KAAK,iBACL,MAAOwQ,EACP,SAAW7Q,GAAM8Q,EAAsB9Q,EAAEC,OAAOpC,KAAK,EACrD,SAAQ,MAEZ,EACAyB,OAAC,OAAG,2XAAC,UAAU,YACb,UAAAA,OAACc,EAAA,CAAM,QAAQ,UAAU,UAAU,0BACjC,UAAAZ,MAAC+I,GAAA,CAAS,UAAU,UAAS,wBAE/B,QACClI,EAAA,CACC,GAAG,UACH,KAAK,iBACL,MAAO0Q,EACP,SAAW/Q,GAAMgR,EAAoBhR,EAAEC,OAAOpC,KAAK,EACnD,SAAQ,MAEZ,GACF,EAGAyB,OAAC,OAAG,2XAAC,UAAU,YACb,UAAAE,MAACY,EAAA,CAAM,QAAQ,QAAQ,uBAAW,QACjCc,GAAA,CACC,GAAG,QACH,MAAO+P,EACP,SAAWjR,GAAMkR,EAASlR,EAAEC,OAAOpC,KAAK,EACxC,YAAY,gDACZ,KAAM,EAAE,GAEZ,EAGAyB,OAAC,OAAG,2XAAC,UAAU,uCACb,UAAAE,MAACU,EAAA,CACC,KAAK,SACL,QAAQ,UACR,QAAS,IAAMvK,EAAa,EAAK,EACjC,SAAUK,EAAQ,oBAGpB,EACAwJ,MAACU,EAAA,CACC,KAAK,SACL,SAAUlK,EACV,UAAU,8CAETA,WAAU,aAAe,eAC5B,GACF,GACF,GACF,EACF,EAxKe,IA0KnB,ECvSaod,GAAiBA,IAAM,CAClC,KAAM,CAACC,EAAeC,CAAgB,EAAIpd,WAAoB,EAAE,EAC1D,CAACqd,EAAaC,CAAc,EAAItd,WAAqB,EAAE,EACvD,CAACF,EAASC,CAAU,EAAIC,WAAS,EAAI,EACrC,CAACud,EAAaC,CAAc,EAAIxd,WAAyB,IAAI,EAC7D,CAACyd,EAAgBC,CAAiB,EAAI1d,WAAS,EAAK,EAE1D4C,YAAU,IAAM,CACd+a,GACF,EAAG,EAAE,EAEL,MAAMA,EAAW,SAAY,CAC3B5d,EAAW,EAAI,EACf,MAAM6d,QAAQC,IAAI,CAACC,IAAqBC,GAAiB,CAAC,EAC1Dhe,EAAW,EAAK,CAClB,EAEM+d,EAAoB,SAAY,CACpC,KAAM,CAAE1Z,OAAMC,SAAU,MAAMC,EAC3BC,KAAK,KAAK,EACVC,OAAO,GAAG,EACViT,GAAG,UAAW,IAAI,EAClBhT,GAAG,SAAU,CAAC,UAAW,YAAY,CAAC,EACtCC,MAAM,eAAgB,CAAEC,UAAW,GAAO,EAE7C,GAAIN,EAAO,CACTU,EAAMV,MAAM,oCAAoC,EAChD,MACF,CAEA+Y,EAAiBhZ,GAAQ,EAAE,CAC7B,EAEM2Z,EAAkB,SAAY,CAClC,KAAM,CAAE3Z,KAAMjE,EAAOkE,SAAU,MAAMC,EAClCC,KAAK,OAAO,EACZC,OAAO;AAAA;AAAA;AAAA,OAGP,EACAC,GAAG,SAAU,CAAC,WAAY,eAAgB,WAAW,CAAC,EACtDC,MAAM,aAAc,CAAEC,UAAW,GAAO,EAE3C,GAAIN,EAAO,CACTU,EAAMV,MAAM,0BAA0B,EACtC,MACF,CAGA,MAAM2Z,EAAgB,MAAMJ,QAAQC,KACjC1d,GAAS,IAAIqK,IAAI,MAAOE,GAAS,CAChC,KAAM,CAAEtG,KAAM6P,GAAS,MAAM3P,EAC1BC,KAAK,KAAK,EACVC,OAAO,GAAG,EACVsD,GAAG,UAAW4C,EAAKxH,EAAE,EAExB,MAAO,CACL,GAAGwH,EACHsS,OAAQiB,MAAMC,QAAQxT,EAAKyT,QAAQ,EAAIzT,EAAKyT,SAAS,CAAC,EAAIzT,EAAKyT,SAC/DlK,KAAMA,GAAQ,GAElB,CAAC,CACH,EAEAqJ,EAAeU,CAAa,CAC9B,EAEMI,EAAoB5I,GAAiB,CACzCgI,EAAehI,CAAG,EAClBkI,EAAkB,EAAI,CACxB,EAEMW,EAAoBA,IAAM,CAC9BX,EAAkB,EAAK,EACvBF,EAAe,IAAI,EACnBG,IACA5Y,EAAMsC,QAAQ,uDAAuD,CACvE,EAEMiX,EAAkBjW,IACP,CACbkW,UAAW,kDACXC,SAAU,qDACVC,aAAc,wDACdC,UAAW,oDAECrW,CAA6B,GAAK,+BAG5CsW,EAAoBA,CAAChU,EAAgBC,IAElC9G,KAAKC,MAAMD,KAAKD,SAAW,GAAG,EAAI,IAG3C,OACEuF,OAAAmJ,WAAA,CACE,UAAAnJ,OAACK,GAAA,CAAK,aAAa,YAAY,UAAU,SACvC,UAAAL,OAACM,GAAA,CAAS,UAAU,0BAClB,UAAAN,OAACO,EAAA,CAAY,MAAM,YAAY,UAAU,QACvC,UAAAL,MAACsV,GAAA,CAAQ,UAAU,UAAS,EAAG,oBAE9BzB,EAAc9W,OAAS,GACtBiD,MAAC+L,EAAA,CAAM,QAAQ,YAAY,UAAU,OAAQ8H,WAAc9W,OAAO,GAEtE,EACA+C,OAACO,EAAA,CAAY,MAAM,SAAS,UAAU,QACpC,UAAAL,MAAC2T,EAAA,CAAM,UAAU,UAAS,EAAG,iBAE5BI,EAAYhX,OAAS,GACpBiD,MAAC+L,EAAA,CAAM,QAAQ,YAAY,UAAU,OAAQgI,WAAYhX,OAAO,GAEpE,GACF,EAEA+C,OAACQ,EAAA,CAAY,MAAM,YAAY,UAAU,iBACvC,UAAAN,MAAC,OAAG,uXAAC,UAAU,yCACb,SAAAF,OAAC,OAAG,uXACF,UAAAE,MAAC,MAAE,0jBAAC,UAAU,wBAAwB,qCAAyB,QAC9D,KAAC,skBAAC,UAAU,gCAAgC,mDAE7C,GACF,EACF,EAECxJ,EACCwJ,MAAC,OAAG,wiBAAC,UAAU,0CAA0C,+BAEzD,EACE6T,EAAc9W,SAAW,EAC3BiD,MAACoM,EAAA,CAAK,UAAU,gBACd,SAAAtM,OAAC6M,EAAA,CAAY,UAAU,8DACrB,UAAA3M,MAACsV,GAAA,CAAQ,UAAU,kDAAiD,QACnE,MAAE,kjBAAC,UAAU,6BAA6B,kCAAsB,QAChE,KAAC,+oBAAC,UAAU,yCAAyC,+FAEtD,GACF,EACF,EAEAtV,MAAC,OAAG,uXAAC,UAAU,wCACZ6T,WAAc3S,IAAKgL,GAClBpM,OAACsM,EAAA,CAAkB,UAAU,+EAC3B,UAAApM,MAACqM,IAAW,UAAU,OACpB,gBAAC,OAAG,uXAAC,UAAU,mCACb,UAAAvM,OAAC,OAAG,uXAAC,UAAU,YACb,UAAAA,OAACwM,GAAA,CAAU,UAAU,kCACnB,UAAAtM,MAACsV,GAAA,CAAQ,UAAU,uBAAsB,EAAG,QACtCpJ,EAAI/U,YACZ,EACA6I,MAAC+L,EAAA,CAAM,QAAQ,UAAU,UAAU,kDAChCG,WAAInN,SAAW,UAAY,UAAY,aAC1C,GACF,EACAe,OAACY,GACC,QAAS,IAAMoU,EAAiB5I,CAAG,EACnC,UAAU,8CAEV,UAAAlM,MAAC2T,EAAA,CAAM,UAAU,eAAc,EAAG,gBAEpC,GACF,EACF,EACA7T,OAAC6M,EAAA,CAAY,UAAU,YAErB,UAAA7M,OAAC,OAAG,uXAAC,UAAU,uCACb,UAAAA,OAAC,OAAG,uXAAC,UAAU,yBACb,UAAAE,MAACuT,GAAA,CAAO,UAAU,8CAA6C,EAC/DzT,OAAC,OAAG,uXAAC,UAAU,iBACb,UAAAE,MAAC,KAAC,uXAAC,UAAU,iCAAkCkM,WAAI1U,eAAe,EAClEsI,OAAC,KAAC,uXAAC,UAAU,gCACVoM,YAAIvU,iBAAiB,IAAEuU,EAAItU,cAC9B,GACF,GACF,EAEAkI,OAAC,OAAG,uXAAC,UAAU,+BACb,UAAAE,MAAC,OAAG,uXAAC,UAAU,sDAAqD,EACpEF,OAAC,QAAI,uXAAC,UAAU,gCAAgC,cAC5CuV,EAAkBnJ,EAAIvU,iBAAkBuU,EAAIjU,mBAAmB,EAAE,OACrE,GACF,EAEA6H,OAAC,OAAG,uXAAC,UAAU,yBACb,UAAAE,MAACuT,GAAA,CAAO,UAAU,4CAA2C,EAC7DzT,OAAC,OAAG,uXAAC,UAAU,iBACb,UAAAE,MAAC,KAAC,uXAAC,UAAU,iCAAkCkM,WAAIpU,kBAAkB,EACrEgI,OAAC,KAAC,uXAAC,UAAU,gCACVoM,YAAIjU,oBAAoB,IAAEiU,EAAIhU,iBACjC,GACF,GACF,GACF,EAGA4H,OAAC,OAAG,uXAAC,UAAU,yBACb,UAAAA,OAAC,OAAG,uXAAC,UAAU,8BACb,UAAAE,MAAC,KAAC,0hBAAC,UAAU,gCAAgC,mBAAO,QACnD,KAAC,wXAAC,UAAU,iCAAkCkM,WAAI3T,qBAAqB,GAC1E,EACAuH,OAAC,OAAG,uXAAC,UAAU,8BACb,UAAAE,MAAC,KAAC,0iBAAC,UAAU,gCAAgC,4BAAgB,QAC5D,KAAC,uXAAC,UAAU,kCAAmCkM,WAAIjT,cAAc,GACpE,EACA6G,OAAC,OAAG,uXAAC,UAAU,8BACb,UAAAE,MAAC,KAAC,uhBAAC,UAAU,gCAAgC,gBAAI,EACjDF,OAAC,KAAC,wXAAC,UAAU,wBAAyBoM,YAAI1T,WAAW4U,eAAe,OAAO,EAAE,OAAG,GAClF,EACAtN,OAAC,OAAG,uXAAC,UAAU,iCACb,UAAAE,MAAC,KAAC,whBAAC,UAAU,gCAAgC,iBAAK,EAClDF,OAAC,KAAC,uXAAC,UAAU,uCAAuC,gBAC9CoM,EAAInT,YAAYqU,eAAe,QAAS,CAAEC,sBAAuB,EAAG,GAC1E,GACF,GACF,GACF,IAzESnB,EAAItS,EA0Ef,CACD,EACH,GAEJ,EAEAkG,OAACQ,EAAA,CAAY,MAAM,SAAS,UAAU,iBACpC,UAAAN,MAAC,OAAG,uXAAC,UAAU,yCACb,SAAAF,OAAC,OAAG,uXACF,UAAAE,MAAC,MAAE,ojBAAC,UAAU,wBAAwB,+BAAmB,QACxD,KAAC,qlBAAC,UAAU,gCAAgC,gEAE7C,GACF,EACF,EAECxJ,EACCwJ,MAAC,OAAG,0iBAAC,UAAU,0CAA0C,iCAEzD,EACE+T,EAAYhX,SAAW,EACzBiD,MAACoM,EAAA,CAAK,UAAU,gBACd,SAAAtM,OAAC6M,EAAA,CAAY,UAAU,8DACrB,UAAA3M,MAAC2T,EAAA,CAAM,UAAU,kDAAiD,QACjE,MAAE,2iBAAC,UAAU,6BAA6B,gCAAoB,QAC9D,KAAC,2nBAAC,UAAU,yCAAyC,sFAEtD,GACF,EACF,EAEA3T,MAAC,OAAG,uXAAC,UAAU,YACZ+T,WAAY7S,IAAKE,GAChBtB,OAACsM,EAAA,CAAmB,UAAU,8CAC5B,UAAApM,MAACqM,GAAA,CAAW,UAAU,OACpB,SAAArM,MAAC,OAAG,uXAAC,UAAU,mCACb,SAAAF,OAAC,OAAG,uXAAC,UAAU,YACb,UAAAA,OAAC,OAAG,uXAAC,UAAU,0BACb,UAAAA,OAACwM,GAAA,CAAU,UAAU,kCACnB,UAAAtM,MAAC2T,EAAA,CAAM,UAAU,uBAAsB,EACtCvS,EAAKC,OAAO,MAAID,EAAKE,aACxB,QACCyK,EAAA,CAAM,UAAWiJ,EAAe5T,EAAKrC,MAAM,EACzCqC,WAAKrC,SAAW,YAAc,YAC9BqC,EAAKrC,SAAW,WAAa,WAC7BqC,EAAKrC,SAAW,eAAiB,eAAiB,YACrD,GACF,EACAe,OAAC,OAAG,uXAAC,UAAU,wDACb,UAAAA,OAAC,QAAI,uXAAC,UAAU,0BACd,UAAAE,MAAC2T,EAAA,CAAM,UAAU,UAAS,EACzBvS,EAAKtH,eACR,EACCsH,EAAKsS,QACJ5T,OAAC,QAAI,uXAAC,UAAU,0BAA0B,gBACpCsB,EAAKsS,OAAOpB,WAClB,GAEJ,GACF,EACF,EACF,EACAxS,OAAC6M,EAAA,CAAY,UAAU,YAErB,UAAA7M,OAAC,OAAG,uXAAC,UAAU,oDACb,UAAAA,OAAC,OAAG,uXACF,UAAAE,MAAC,KAAC,qiBAAC,UAAU,qCAAqC,4BAAgB,EAClEF,OAAC,KAAC,uXAAC,UAAU,gDACX,UAAAE,MAACuV,GAAA,CAAM,UAAU,UAAS,EACzB,IAAIlb,KAAK+G,EAAKyR,mBAAmB,EAAEzF,eAAe,OAAO,GAC5D,GACF,EACAtN,OAAC,OAAG,uXACF,UAAAE,MAAC,KAAC,qiBAAC,UAAU,qCAAqC,4BAAgB,EAClEF,OAAC,KAAC,uXAAC,UAAU,gDACX,UAAAE,MAACuV,GAAA,CAAM,UAAU,UAAS,EACzB,IAAIlb,KAAK+G,EAAK0R,iBAAiB,EAAE1F,eAAe,OAAO,GAC1D,GACF,GACF,EAGChM,EAAKuJ,MAAQvJ,EAAKuJ,KAAK5N,OAAS,UAC9B,OAAG,uXACF,UAAA+C,OAAC,KAAC,uXAAC,UAAU,qDACX,UAAAE,MAACsV,GAAA,CAAQ,UAAU,UAAS,EAAG,qBACZlU,EAAKuJ,KAAK5N,OAAO,KACtC,EACAiD,MAAC,OAAG,uXAAC,UAAU,wCACZoB,WAAKuJ,KAAKzJ,OACTpB,OAAC,8XAAiB,UAAU,oDAC1B,UAAAA,OAAC,OAAG,uXAAC,UAAU,oCACb,UAAAE,MAAC,QAAI,wXAAC,UAAU,kCAAmCkM,WAAI/U,WAAW,EAClE2I,OAACiM,EAAA,CAAM,QAAQ,UAAU,UAAU,UAAU,gBACvCG,EAAInT,YAAYqU,eAAe,QAAS,CAAEC,sBAAuB,EAAG,GAC1E,GACF,QACC,KAAC,uXAAC,UAAU,8CACVnB,WAAI3T,qBACP,IATQ2T,EAAItS,EAUd,CACD,EACH,GACF,EAGDwH,EAAKqQ,OACJ3R,OAAC,OAAG,uXAAC,UAAU,sDACb,UAAAE,MAAC,KAAC,wiBAAC,UAAU,gCAAgC,uBAAW,QACvD,KAAC,uXAAC,UAAU,UAAWoB,WAAKqQ,MAAM,GACrC,EAIF3R,OAAC,OAAG,uXAAC,UAAU,aACb,UAAAA,OAACY,GAAO,QAAQ,UAAU,UAAU,SAAS,KAAK,KAChD,UAAAV,MAACwV,GAAA,CAAW,UAAU,eAAc,EAAG,oBAEzC,EACCpU,EAAKrC,SAAW,aACfe,OAACY,EAAA,CACC,UAAU,yCACV,KAAK,KACL,QAAS,SAAY,CACnB,MAAM1F,EACHC,KAAK,OAAO,EACZ+X,OAAO,CAAEjU,OAAQ,WAAY,EAC7BP,GAAG,KAAM4C,EAAKxH,EAAE,EACnBya,IACA5Y,EAAMsC,QAAQ,kBAAkB,CAClC,EAEA,UAAAiC,MAACuQ,GAAA,CAAY,UAAU,eAAc,EAAG,WAE1C,GAEJ,GACF,IAxGSnP,EAAKxH,EAyGhB,CACD,EACH,GAEJ,GACF,EAEAoG,MAAC2Q,IACC,KAAMwD,EACN,aAAcC,EACd,IAAKH,EACL,cAAec,EAAkB,GAErC,CAEJ,EC1YO,SAASU,GAAkB,CAAEvf,OAAMC,eAAcuf,QAAOrf,WAAkC,EAAG,CAClG,KAAM,CAACG,EAASC,CAAU,EAAIC,WAAS,EAAK,EACtC,CAACO,EAAUC,CAAW,EAAIR,WAAS,CACvCif,aAAc,GACdC,gBAAiB,GACjBC,kBAAmB,GACnBC,cAAe,GACfC,aAAc,GACdC,aAAc,GACdC,eAAgB,GAChBC,mBAAoB,GACpBpI,aAAc,GACd5U,cAAe,GACfid,mBAAoB,GACpBC,QAAS,GACTC,aAAc,GACf,EAED/c,YAAU,IAAM,CACVpD,IACEwf,EACFxe,EAAY,CACVye,aAAcD,EAAMC,cAAgB,GACpCC,gBAAiBF,EAAME,iBAAmB,GAC1CC,kBAAmBH,EAAMG,mBAAqB,GAC9CC,cAAeJ,EAAMI,eAAiB,GACtCC,aAAcL,EAAMK,cAAgB,GACpCC,aAAcN,EAAMM,cAAgB,GACpCC,eAAgBP,EAAMO,gBAAkB,GACxCC,mBAAoBR,EAAMQ,oBAAsB,GAChDpI,aAAc4H,EAAM5H,cAAgB,GACpC5U,cAAewc,EAAMxc,eAAiB,GACtCid,mBAAoBT,EAAMS,oBAAsB,GAChDC,QAASV,EAAMU,SAAW,GAC1BC,aAAcX,EAAMW,cAAgB,GACrC,EAEDC,IAGN,EAAG,CAACpgB,EAAMwf,CAAK,CAAC,EAEhB,MAAMY,EAAsBA,IAAM,CAChC,MAAMhc,MAAUD,KACVgP,EAAS,MAAM/O,EAAIic,aAAa,GAAGC,OAAOlc,EAAImc,WAAa,CAAC,EAAE9b,SAAS,EAAG,GAAG,CAAC,GAAG6b,OAAOlc,EAAI6E,SAAS,EAAExE,SAAS,EAAG,GAAG,CAAC,IAAIH,KAAKC,MAAMD,KAAKD,SAAW,GAAK,EAAEG,WAAWC,SAAS,EAAG,GAAG,CAAC,GAC9LzD,EAAY2C,IAAS,CAAE,GAAGA,EAAM8b,aAActM,GAAS,CACzD,EAEM/K,EAAe,MAAOkC,GAAuB,CACjDA,EAAE6J,iBACF5T,EAAW,EAAI,EAEf,GAAI,CACF,KAAM,CAAEqE,KAAM,CAAExE,OAAK,EAAM,MAAM0E,EAAS0b,KAAKC,UAE/C,GAAIjB,EAAO,CACT,KAAM,CAAE3a,SAAU,MAAMC,EACrBC,KAAK,cAAc,EACnB+X,OAAO/b,CAAQ,EACfuH,GAAG,KAAMkX,EAAM9b,EAAE,EAEpB,GAAImB,EAAO,MAAMA,EACjBU,EAAMsC,QAAQ,6BAA6B,CAC7C,KAAO,CACL,KAAM,CAAEhD,SAAU,MAAMC,EACrBC,KAAK,cAAc,EACnB2D,OAAO,CAAE,GAAG3H,EAAU6H,WAAYxI,iBAAMsD,GAAI,EAE/C,GAAImB,EAAO,MAAMA,EACjBU,EAAMsC,QAAQ,yBAAyB,CACzC,CAEA1H,aACAF,EAAa,EAAK,CACpB,OAAS4E,EAAY,CACnBwC,QAAQxC,MAAM,QAASA,CAAK,EAC5BU,EAAMV,MAAMA,EAAMqD,SAAW,gCAAgC,CAC/D,SACE3H,EAAW,EAAK,CAClB,CACF,EAEA,aACGoJ,EAAA,CAAO,KAAA3J,EAAY,aAAAC,EAClB,SAAA2J,OAACC,EAAA,CAAc,UAAU,yCACvB,UAAAC,MAACC,EAAA,CACC,gBAACC,GAAA,CAAawV,YAAQ,SAAW,OAAO,oBAAgB,EAC1D,SAEC,QAAI,yXAAC,SAAUpX,EAAc,UAAU,YACtC,UAAA0B,MAAC,OAAG,0XAAC,UAAU,yBACb,SAAAF,OAAC,OAAG,0XACF,UAAAE,MAACY,GAAM,2BAAe,QACrBC,EAAA,CAAM,MAAO5J,EAAS0e,aAAc,YAAeze,EAAY,CAAC,GAAGD,EAAU0e,aAAcnV,EAAEC,OAAOpC,MAAM,EAAG,SAAQ,MACxH,EACF,EAEAyB,OAAC,OAAG,0XAAC,UAAU,YACb,UAAAE,MAAC,MAAE,giBAAC,UAAU,gBAAgB,sBAAU,EACxCF,OAAC,OAAG,0XAAC,UAAU,yBACb,UAAAA,OAAC,OAAG,0XAAC,UAAU,aACb,UAAAE,MAACY,GAAM,gBAAI,QACVC,EAAA,CAAM,MAAO5J,EAAS2e,gBAAiB,YAAe1e,EAAY,CAAC,GAAGD,EAAU2e,gBAAiBpV,EAAEC,OAAOpC,MAAM,EAAG,SAAQ,MAC9H,EACAyB,OAAC,OAAG,0XACF,UAAAE,MAACY,GAAM,kBAAM,QACZC,EAAA,CAAM,MAAO5J,EAAS4e,kBAAmB,YAAe3e,EAAY,CAAC,GAAGD,EAAU4e,kBAAmBrV,EAAEC,OAAOpC,MAAM,EAAE,GACzH,EACAyB,OAAC,OAAG,0XACF,UAAAE,MAACY,GAAM,cAAE,QACRC,EAAA,CAAM,MAAO5J,EAAS6e,cAAe,YAAe5e,EAAY,CAAC,GAAGD,EAAU6e,cAAetV,EAAEC,OAAOpC,MAAM,EAAG,UAAW,EAAE,GAC/H,GACF,GACF,EAEAyB,OAAC,OAAG,0XAAC,UAAU,YACb,UAAAE,MAAC,MAAE,6iBAAC,UAAU,gBAAgB,6BAAiB,EAC/CF,OAAC,OAAG,0XAAC,UAAU,yBACb,UAAAA,OAAC,OAAG,0XACF,UAAAE,MAACY,GAAM,gBAAI,QACVC,EAAA,CAAM,MAAO5J,EAAS8e,aAAc,YAAe7e,EAAY,CAAC,GAAGD,EAAU8e,aAAcvV,EAAEC,OAAOpC,MAAM,EAAG,SAAQ,MACxH,EACAyB,OAAC,OAAG,0XACF,UAAAE,MAACY,GAAM,gBAAI,QACVC,EAAA,CAAM,MAAO5J,EAAS+e,aAAc,YAAe9e,EAAY,CAAC,GAAGD,EAAU+e,aAAcxV,EAAEC,OAAOpC,MAAM,EAAG,SAAQ,MACxH,GACF,GACF,EAEAyB,OAAC,OAAG,0XAAC,UAAU,YACb,UAAAE,MAAC,MAAE,+hBAAC,UAAU,gBAAgB,qBAAS,EACvCF,OAAC,OAAG,0XAAC,UAAU,yBACb,UAAAA,OAAC,OAAG,0XACF,UAAAE,MAACY,GAAM,gBAAI,QACVC,EAAA,CAAM,MAAO5J,EAASgf,eAAgB,YAAe/e,EAAY,CAAC,GAAGD,EAAUgf,eAAgBzV,EAAEC,OAAOpC,MAAM,EAAG,SAAQ,MAC5H,EACAyB,OAAC,OAAG,0XACF,UAAAE,MAACY,GAAM,oBAAQ,QACdC,EAAA,CAAM,MAAO5J,EAASif,mBAAoB,YAAehf,EAAY,CAAC,GAAGD,EAAUif,mBAAoB1V,EAAEC,OAAOpC,MAAM,EAAE,GAC3H,GACF,GACF,EAEAyB,OAAC,OAAG,0XAAC,UAAU,YACb,UAAAE,MAAC,MAAE,miBAAC,UAAU,gBAAgB,oBAAQ,EACtCF,OAAC,OAAG,0XAAC,UAAU,yBACb,UAAAA,OAAC,OAAG,0XACF,UAAAE,MAACY,GAAM,wBAAY,QAClBW,EAAA,CACC,MAAOtK,EAAS6W,aAChB,YAAe5W,EAAY,CAAC,GAAGD,EAAU6W,aAActM,EAAE,EACzD,OAAQA,GAAKA,EAAEC,OAAS,YAAcD,EAAEC,OAAS,SACjD,YAAY,YAAW,GAE3B,EACA3B,OAAC,OAAG,0XACF,UAAAE,MAACY,GAAM,yBAAa,QACnBW,EAAA,CACC,MAAOtK,EAASiC,cAChB,YAAehC,EAAY,CAAC,GAAGD,EAAUiC,cAAesI,EAAE,EAC1D,OAAQA,GAAKA,EAAEC,OAAS,WAAaD,EAAEC,OAAS,UAChD,YAAY,YAAW,GAE3B,EACA3B,OAAC,OAAG,0XACF,UAAAE,MAACY,GAAM,sBAAU,QAChBC,EAAA,CAAM,MAAO5J,EAASkf,mBAAoB,YAAejf,EAAY,CAAC,GAAGD,EAAUkf,mBAAoB3V,EAAEC,OAAOpC,MAAM,EAAG,YAAY,yBAAwB,GAChK,GACF,GACF,EAEAyB,OAAC,OAAG,0XAAC,UAAU,yBACb,UAAAA,OAAC,OAAG,0XACF,UAAAE,MAACY,GAAM,mBAAO,QACbC,EAAA,CAAM,MAAO5J,EAASmf,QAAS,YAAelf,EAAY,CAAC,GAAGD,EAAUmf,QAAS5V,EAAEC,OAAOpC,MAAM,EAAG,SAAQ,MAC9G,EACAyB,OAAC,OAAG,0XACF,UAAAE,MAACY,GAAM,2BAAe,QACrBC,EAAA,CAAM,MAAO5J,EAASof,aAAc,YAAenf,EAAY,CAAC,GAAGD,EAAUof,aAAc7V,EAAEC,OAAOpC,MAAM,EAAE,GAC/G,GACF,EAEAyB,OAAC,OAAG,0XAAC,UAAU,yBACb,UAAAE,MAACU,EAAA,CAAO,KAAK,SAAS,QAAQ,UAAU,QAAS,IAAMvK,EAAa,EAAK,EAAG,oBAAQ,EACpF2J,OAACY,EAAA,CAAO,KAAK,SAAS,SAAUlK,EAC7BA,aAAWwJ,MAACkJ,GAAA,CAAQ,UAAU,4BAA2B,EACzDwM,EAAQ,YAAc,SACzB,GACF,GACF,GACF,EACF,CAEJ,CCxMO,SAASkB,IAAwB,CACtC,KAAM,CAACC,EAAQC,CAAS,EAAIpgB,WAAgB,EAAE,EACxC,CAACF,EAASC,CAAU,EAAIC,WAAS,EAAI,EACrC,CAACyU,EAAYC,CAAa,EAAI1U,WAAS,EAAE,EACzC,CAACmU,EAAYC,CAAa,EAAIpU,WAAS,EAAK,EAC5C,CAACqgB,EAAeC,CAAgB,EAAItgB,WAAc,IAAI,EAE5D4C,YAAU,IAAM,CACd2d,GACF,EAAG,EAAE,EAEL,MAAMA,EAAa,SAAY,CAC7BxgB,EAAW,EAAI,EACf,GAAI,CACF,KAAM,CAAEqE,OAAMC,SAAU,MAAMC,EAC3BC,KAAK,cAAc,EACnBC,OAAO,GAAG,EACVE,MAAM,eAAgB,CAAEC,UAAW,GAAO,EAE7C,GAAIN,EAAO,MAAMA,EACjB+b,EAAUhc,GAAQ,EAAE,CACtB,OAASC,EAAY,CACnBU,EAAMV,MAAM,mCAAmC,EAC/CwC,QAAQxC,MAAMA,CAAK,CACrB,SACEtE,EAAW,EAAK,CAClB,CACF,EAEMygB,EAAoB,MAAOxB,GAAe,CAC9C,GAAI,CACFja,EAAMuB,KAAK,gBAAgB,EAE3B,KAAM,CAAElC,OAAMC,SAAU,MAAMC,EAASiC,UAAUC,OAAO,4BAA6B,CACnFC,KAAM,CAAEga,SAAUzB,EAAM9b,GAAG,CAC5B,EAED,GAAImB,EAAO,MAAMA,EAGjB,MAAMqc,EAAcC,OAAOnhB,KAAK,GAAI,QAAQ,EACxCkhB,IACFA,EAAYE,SAASC,MAAMzc,EAAK0c,IAAI,EACpCJ,EAAYE,SAASG,QACrBL,EAAYM,QAGZC,WAAW,IAAM,CACfP,EAAYQ,OACd,EAAG,GAAG,GAGRnc,EAAMsC,QAAQ,yBAAyB,CACzC,OAAShD,EAAY,CACnBwC,QAAQxC,MAAM,qBAAsBA,CAAK,EACzCU,EAAMV,MAAM,mBAAmB,CACjC,CACF,EAEM8c,EAAiBhB,EAAO5K,OAAOyJ,cACnCA,YAAMC,eAAND,cAAoB7Z,cAAcsQ,SAAShB,EAAWtP,mBACtD6Z,IAAMK,eAANL,cAAoB7Z,cAAcsQ,SAAShB,EAAWtP,mBACtD6Z,IAAMO,iBAANP,cAAsB7Z,cAAcsQ,SAAShB,EAAWtP,gBAC1D,EAEMyP,EAAkBvM,GAAmB,CACzC,MAAMwM,EAAgF,CACpFuM,SAAU,YACVC,SAAU,UACVnM,UAAW,eAEb,aAAQG,EAAA,CAAM,QAASR,EAASxM,CAAM,GAAK,UAAYA,WAAO,CAChE,EAEA,OACEe,OAAC,OAAG,4XAAC,UAAU,YACb,UAAAA,OAAC,OAAG,2XAAC,UAAU,oCACb,UAAAE,MAAC,MAAE,yiBAAC,UAAU,qBAAqB,4BAAgB,EACnDF,OAACY,EAAA,CAAO,QAAS,IAAM,CAAEsW,EAAiB,IAAI,EAAGlM,EAAc,EAAI,CAAG,EACpE,UAAA9K,MAAC0M,GAAA,CAAK,UAAU,eAAc,EAAG,cAEnC,GACF,EAEA5M,OAACsM,EAAA,CAAK,UAAU,MACd,UAAAtM,OAAC,OAAG,4XAAC,UAAU,+BACb,UAAAE,MAACwM,GAAA,CAAO,UAAU,gCAA+B,EACjDxM,MAACa,EAAA,CACC,YAAY,6CACZ,MAAOsK,EACP,SAAW3K,GAAM4K,EAAc5K,EAAEC,OAAOpC,KAAK,EAC7C,UAAU,WAAU,GAExB,EAEC7H,EACCwJ,MAAC,OAAG,uiBAAC,UAAU,yCAAyC,yBAAa,EACnE6X,EAAe9a,SAAW,EAC5B+C,OAAC,OAAG,8XAAC,UAAU,yCACb,UAAAE,MAACuM,GAAA,CAAS,UAAU,oCAAmC,EACvDvM,MAAC,KAAC,okBAAC,8CAAkC,GACvC,SAEC4M,GAAA,CACC,UAAA5M,MAAC6M,GAAA,CACC,gBAACC,EAAA,CACC,UAAA9M,MAAC+M,GAAU,kBAAM,EACjB/M,MAAC+M,GAAU,gBAAI,EACf/M,MAAC+M,GAAU,mBAAO,EAClB/M,MAAC+M,GAAU,qBAAS,EACpB/M,MAAC+M,GAAU,kBAAM,EACjB/M,MAAC+M,GAAU,mBAAO,EAClB/M,MAAC+M,GAAU,kBAAM,EACjB/M,MAAC+M,GAAU,iBAAK,GAClB,EACF,QACCC,GAAA,CACE6K,WAAe3W,IAAKwU,UAClB5I,EAAA,CACC,UAAA9M,MAACiN,EAAA,CAAU,UAAU,cAAeyI,WAAMC,aAAa,EACvD3V,MAACiN,GAAWC,YAAO,IAAI7S,KAAKqb,EAAMvI,YAAY,EAAG,YAAY,EAAE,EAC/DnN,MAACiN,EAAA,CAAWyI,WAAMK,aAAa,EAC/B/V,MAACiN,EAAA,CAAWyI,WAAMO,eAAe,QAChChJ,EAAA,CACC,SAAAnN,OAAC,OAAG,8XAAC,UAAU,UACZ4V,YAAM5H,aACN4H,EAAMxc,eAAiB,MAAMwc,EAAMxc,aAAa,IACnD,EACF,EACA8G,MAACiN,EAAA,CAAWyI,WAAMU,QAAQ,EAC1BpW,MAACiN,EAAA,CAAW3B,WAAeoK,EAAM3W,MAAM,EAAE,QACxCkO,EAAA,CACC,SAAAnN,OAAC,OAAG,8XAAC,UAAU,aACb,UAAAE,MAACU,EAAA,CACC,KAAK,KACL,QAAQ,UACR,QAAS,IAAMwW,EAAkBxB,CAAK,EAEtC,SAAA1V,MAACyM,GAAA,CAAS,UAAU,UAAS,EAC/B,QACC/L,EAAA,CACC,KAAK,KACL,QAAQ,QACR,QAAS,IAAM,CAAEsW,EAAiBtB,CAAK,EAAG5K,EAAc,EAAI,CAAG,EAChE,kBAED,GACF,EACF,IA9Ba4K,EAAM9b,EA+BrB,CACD,EACH,GACF,GAEJ,EAEAoG,MAACyV,IACC,KAAM5K,EACN,aAAcC,EACd,MAAOiM,EACP,UAAWE,EAAW,GAE1B,CAEJ,CC7KO,SAASe,IAAc,CAC5B,KAAM,CAACC,EAAUC,CAAW,EAAIxhB,WAAS,EAAE,EACrC,CAACF,EAASC,CAAU,EAAIC,WAAS,EAAI,EAwB3C,OAtBA4C,YAAU,IAAM,CACd,eAAe6e,GAAe,CAC5B1hB,EAAW,EAAI,EAEf,KAAM,CAAEqE,OAAMC,SAAU,MAAMC,EAC3BC,KAAK,UAAU,EACfC,OAAO,GAAG,EACVE,MAAM,QAAS,CAAEC,UAAW,GAAM,EAErC,GAAIN,EAAO,CACTwC,QAAQxC,MAAM,6BAA8BA,CAAK,EACjDtE,EAAW,EAAK,EAChB,MACF,CAEAyhB,EAAYpd,GAAQ,EAAE,EACtBrE,EAAW,EAAK,CAClB,CAEA0hB,GACF,EAAG,EAAE,EAED3hB,EACKwJ,MAAC,KAAC,yiBAAC,kCAAsB,EAIhCF,OAAC,OAAG,iXAAC,MAAO,CAAEsY,QAAS,QACrB,UAAApY,MAAC,MAAE,qiBAAC,MAAO,CAAEqY,SAAU,OAAQC,aAAc,QAAU,6BAAiB,EAEvEL,EAASlb,SAAW,GAAKiD,MAAC,KAAC,+iBAAC,sCAA0B,EAEvDA,MAAC,MAAE,iXAAC,MAAO,CAAEuY,UAAW,OAAQH,QAAS,GACtCH,WAAS/W,OACRpB,OAAC,MAAE,kXAED,MAAO,CACLsY,QAAS,OACTE,aAAc,OACdE,WAAY,UACZC,aAAc,OAGhB,UAAAzY,MAAC,UAAM,ohBAAC,kBAAM,EAAS,IAAEwB,EAAEkX,MAAM,IAAC1Y,MAAC,MAAE,oXACrCA,MAAC,UAAM,mhBAAC,iBAAK,EAAS,IAAEwB,EAAE4G,KAAK,IAACpI,MAAC,MAAE,oXACnCA,MAAC,UAAM,qhBAAC,mBAAO,EAAS,IAAEwB,EAAEmX,OAAO,IAAC3Y,MAAC,MAAE,oXACvCA,MAAC,UAAM,giBAAC,yBAAa,EAAS,IAAEwB,EAAEoX,cAAgB,MAX7CpX,EAAE5H,EAYT,CACD,EACH,GACF,CAEJ,CC3DO,SAASif,GAAkBC,EAA6J,CAC7L,MAAMC,EAAave,KAAKwe,IAAI,EAAGF,EAAOC,YAAc,CAAC,EAC/CE,EAAOze,KAAKwe,IAAI,GAAKF,EAAOI,0BAA4B,CAAC,EACzDC,EAAY3e,KAAKwe,IAAI,EAAGF,EAAOM,mBAAqB,CAAC,EACrDC,EAAQ7e,KAAKwe,IAAI,EAAGF,EAAOO,OAAS,CAAC,EACrCC,EAAW9e,KAAKwe,IAAI,EAAGF,EAAOS,mBAAqB,EAAG,EACtDC,EAAYhf,KAAKwe,IAAI,EAAGF,EAAOU,WAAa,CAAC,EAC7CC,EAASV,EAAaE,EACtBS,EAAWD,EAASN,EACpBQ,EAAeL,EAAWP,EAEhC,MAAO,CAAE7e,MADKsf,EAAYE,EAAWL,EAAQM,EAC7BD,WAAUL,QAAOM,eAAcF,SACjD,CCNO,SAASG,IAAgB,CAC9B,KAAM,CAACjX,EAAMkX,CAAO,EAAInjB,WAAS,CAAEqiB,WAAY,GAAIG,yBAA0B,MAAOE,kBAAmB,OAAQC,MAAO,IAAKE,kBAAmB,OAAQC,UAAW,IAAK,EAChKM,EAAOjB,GAAkB,CAC7BE,WAAY/e,WAAW2I,EAAKoW,YAAc,GAAG,EAC7CG,yBAA0Blf,WAAW2I,EAAKuW,0BAA4B,GAAG,EACzEE,kBAAmBpf,WAAW2I,EAAKyW,mBAAqB,GAAG,EAC3DC,MAAOrf,WAAW2I,EAAK0W,OAAS,GAAG,EACnCE,kBAAmBvf,WAAW2I,EAAK4W,mBAAqB,GAAG,EAC3DC,UAAWxf,WAAW2I,EAAK6W,WAAa,GAAG,EAC5C,EAED,OACE1Z,OAACsM,EAAA,CAAK,UAAU,gBACd,UAAApM,MAAC,OAAG,gjBAAC,UAAU,gBAAgB,uCAA2B,EAC1DF,OAAC,OAAG,mXAAC,UAAU,wCACb,UAAAE,MAACa,EAAA,CAAM,YAAY,iBAAiB,MAAO8B,EAAKoW,WAAY,YAAec,EAAQ,CAAC,GAAGlX,EAAMoW,WAAYvY,EAAEC,OAAOpC,MAAM,EAAE,EAC1H2B,MAACa,GAAM,YAAY,OAAO,MAAO8B,EAAKuW,yBAA0B,SAAW1Y,GAAIqZ,EAAQ,CAAC,GAAGlX,EAAMuW,yBAA0B1Y,EAAEC,OAAOpC,MAAM,EAAE,EAC5I2B,MAACa,GAAM,YAAY,eAAe,MAAO8B,EAAKyW,kBAAmB,SAAW5Y,GAAIqZ,EAAQ,CAAC,GAAGlX,EAAMyW,kBAAmB5Y,EAAEC,OAAOpC,MAAM,EAAE,EACtI2B,MAACa,GAAM,YAAY,gBAAgB,MAAO8B,EAAK0W,MAAO,SAAW7Y,GAAIqZ,EAAQ,CAAC,GAAGlX,EAAM0W,MAAO7Y,EAAEC,OAAOpC,MAAM,EAAE,EAC/G2B,MAACa,GAAM,YAAY,YAAY,MAAO8B,EAAK4W,kBAAmB,SAAW/Y,GAAIqZ,EAAQ,CAAC,GAAGlX,EAAM4W,kBAAmB/Y,EAAEC,OAAOpC,MAAM,EAAE,EACnI2B,MAACa,GAAM,YAAY,YAAY,MAAO8B,EAAK6W,UAAW,SAAWhZ,GAAIqZ,EAAQ,CAAC,GAAGlX,EAAM6W,UAAWhZ,EAAEC,OAAOpC,MAAM,EAAE,GACrH,EACAyB,OAAC,OAAG,mXAAC,UAAU,gDACb,UAAAA,OAAC,OAAG,mXAAC,6BAAiBga,EAAKJ,SAASvf,QAAQ,CAAC,EAAE,MAAI2f,EAAKL,OAAOtf,QAAQ,CAAC,EAAE,MAAE,EAC5E2F,OAAC,OAAG,mXAAC,0BAAcga,EAAKT,MAAMlf,QAAQ,CAAC,GAAE,EACzC2F,OAAC,OAAG,mXAAC,0BAAcga,EAAKH,aAAaxf,QAAQ,CAAC,GAAE,EAChD2F,OAAC,OAAG,mXAAC,UAAU,YAAY,uBAAWga,EAAK5f,MAAMC,QAAQ,CAAC,GAAE,GAC9D,EACA6F,MAAC,OAAG,mXAAC,UAAU,mBACb,eAACU,EAAA,CAAO,QAAQ,SAAS,6BAAiB,EAC5C,GACF,CAEJ,CCpBA,MAAMqZ,GAAMA,UAEPC,GAAA,CACC,SAAAla,OAAC,OAAG,8VAAC,UAAU,YACb,UAAAA,OAAC,OAAG,6VAAC,UAAU,YACb,UAAAE,MAAC,MAAE,0hBAAC,UAAU,oDAAoD,sCAA0B,QAC3F,KAAC,0jBAAC,UAAU,kCAAkC,wDAE/C,GACF,EAGAF,OAAC,OAAG,6VAAC,UAAU,uDACb,UAAAE,MAACia,IACC,MAAM,iBACN,MAAM,KACN,KAAMtG,EACN,MAAO,CAAEtV,MAAO,UAAW6b,SAAU,IAAO,EAE9Cla,MAACia,IACC,MAAM,gBACN,MAAM,MACN,KAAM3E,GACN,MAAO,CAAEjX,MAAO,eAAgB6b,SAAU,IAAO,QAElDD,GAAA,CACC,MAAM,oBACN,MAAM,QACN,KAAM1E,GAAM,EAEdvV,MAACia,IACC,MAAM,cACN,MAAM,UACN,KAAME,GACN,MAAO,CAAE9b,MAAO,OAAQ6b,SAAU,GAAK,CAAE,GAE7C,EAGApa,OAACK,GAAA,CAAK,aAAa,QAAQ,UAAU,SACnC,UAAAL,OAACM,GAAA,CAAS,UAAU,8DAClB,UAAAJ,MAACK,EAAA,CAAY,MAAM,QAAQ,UAAU,qBAAqB,mBAAO,QAChEA,EAAA,CAAY,MAAM,QAAQ,UAAU,qBAAqB,iBAAK,QAC9DA,EAAA,CAAY,MAAM,eAAe,UAAU,qBAAqB,wBAAY,QAC5EA,EAAA,CAAY,MAAM,WAAW,UAAU,qBAAqB,mBAAO,QACnEA,EAAA,CAAY,MAAM,MAAM,UAAU,qBAAqB,gBAAI,QAC3DA,EAAA,CAAY,MAAM,OAAO,UAAU,qBAAqB,iBAAK,QAC7DA,EAAA,CAAY,MAAM,UAAU,UAAU,qBAAqB,mBAAO,GACrE,QAGCC,EAAA,CAAY,MAAM,QACjB,SAAAN,MAAC4T,KAAc,EACjB,QAGCtT,EAAA,CAAY,MAAM,QACjB,SAAAN,MAACoa,KAAc,EACjB,QAGC9Z,EAAA,CAAY,MAAM,eACjB,SAAAN,MAAC4W,KAAqB,EACxB,EAGA5W,MAACM,EAAA,CAAY,MAAM,WACjB,gBAAC8L,EAAA,CACC,UAAApM,MAACqM,GAAA,CACC,SAAAvM,OAACwM,GAAA,CAAU,UAAU,0BACnB,UAAAtM,MAAC2T,EAAA,CAAM,UAAU,UAAS,EAAG,8BAE/B,EACF,EACA3T,MAAC2M,EAAA,CACC,SAAA3M,MAACgY,GAAA,EAAW,EACd,GACF,EACF,QAGC1X,EAAA,CAAY,MAAM,MACjB,SAAAR,OAAC,OAAG,gWAAC,UAAU,aACb,UAAAE,MAAC4Z,GAAA,EAAa,QACblP,GAAA,EAAa,GAChB,EACF,QAGCpK,EAAA,CAAY,MAAM,OACjB,SAAAN,MAACoP,KAAc,EACjB,QAGC9O,EAAA,CAAY,MAAM,UACjB,SAAAN,MAACqa,KAAe,EAClB,GACF,GACF,EACF","names":["CTEDialog","open","onOpenChange","tripId","onSuccess","user","useAuth","loading","setLoading","useState","importing","setImporting","trips","setTrips","fileInputRef","useRef","formData","setFormData","numero_cte","serie","tipo_cte","tipo_servico","trip_id","remetente_nome","remetente_cnpj","remetente_endereco","remetente_cidade","remetente_uf","remetente_cep","destinatario_nome","destinatario_cnpj","destinatario_endereco","destinatario_cidade","destinatario_uf","destinatario_cep","tomador_tipo","tomador_nome","tomador_cnpj","produto_predominante","peso_bruto","peso_cubado","quantidade_volumes","valor_mercadoria","modal","valor_frete","valor_pedagio","valor_total","tipo_frete","placa_veiculo","placa_carreta","uf_veiculo","rntrc","observacoes","useEffect","loadApprovedTrips","generateCTENumber","selectedTrip","find","t","id","prev","vehicle_plate","frete","parseFloat","pedagio","total","toFixed","timestamp","Date","now","random","Math","floor","toString","padStart","cteNumber","slice","data","error","supabase","from","select","in","order","ascending","handleImportXML","current","files","toast","file","fileName","name","toLowerCase","endsWith","JSZip","__vitePreload","__vite_default__","n","default","zipContent","loadAsync","xmlFiles","filename","fileData","Object","entries","dir","content","async","push","length","info","functions","invoke","body","xml_files","results","errors","console","warn","warning","ctes_created","duration","messages","clients_created","vehicles_created","success","join","xmlContent","text","xml_content","message","value","handleSubmit","vehicleExists","eq","toUpperCase","maybeSingle","cteData","insert","parseInt","created_by","status","single","vencimento","setDate","getDate","clienteNome","financeError","descricao","cliente","valor","data_vencimento","toISOString","split","err","Dialog","jsxs","DialogContent","jsx","DialogHeader","DialogTitle","Tabs","TabsList","TabsTrigger","TabsContent","Upload","e","target","Button","click","Label","Input","Select","SelectTrigger","SelectValue","SelectContent","map","SelectItem","trip","origin","destination","VehicleSelect","v","type","Textarea","DialogFooter","RADIO_NAME","createRadioContext","createRadioScope","createContextScope","RadioProvider","useRadioContext","Radio","React.forwardRef","props","forwardedRef","__scopeRadio","checked","required","disabled","onCheck","form","radioProps","button","setButton","React.useState","composedRefs","useComposedRefs","node","hasConsumerStoppedPropagationRef","React.useRef","isFormControl","Primitive","getState","composeEventHandlers","event","RadioBubbleInput","INDICATOR_NAME","RadioIndicator","forceMount","indicatorProps","context","Presence","BUBBLE_INPUT_NAME","control","bubbles","ref","prevChecked","usePrevious","controlSize","useSize","React.useEffect","input","inputProto","setChecked","ARROW_KEYS","RADIO_GROUP_NAME","createRadioGroupContext","createContextScope2","createRovingFocusGroupScope","useRovingFocusGroupScope","useRadioScope","RadioGroupProvider","useRadioGroupContext","RadioGroup","React2.forwardRef","__scopeRadioGroup","defaultValue","valueProp","orientation","loop","onValueChange","groupProps","rovingFocusGroupScope","direction","useDirection","setValue","useControllableState","jsx2","RovingFocusGroup.Root","Primitive2","ITEM_NAME","RadioGroupItem","itemProps","isDisabled","radioScope","React2.useRef","useComposedRefs2","isArrowKeyPressedRef","React2.useEffect","handleKeyDown","handleKeyUp","RovingFocusGroup.Item","composeEventHandlers2","_a","INDICATOR_NAME2","RadioGroupIndicator","Root2","Item2","Indicator","React","className","RadioGroupPrimitive.Root","cn","displayName","RadioGroupPrimitive","RadioGroupPrimitive.Item","RadioGroupPrimitive.Indicator","Circle","ImportCTEDialog","tipo","setTipo","dataInicial","setDataInicial","dataFinal","setDataFinal","chaveAcesso","setChaveAcesso","handleImport","replace","description","Calendar","Key","Fragment","Loader2","EmitirCTEDialog","useToast","numero","tipo_tomador","tomador_razao","tomador_endereco","tomador_municipio","tomador_uf","tomador_cep","remetente_razao","remetente_municipio","destinatario_razao","destinatario_municipio","valor_carga","municipio_origem","uf_origem","municipio_destino","uf_destino","preventDefault","title","chave","Error","variant","CTEManagement","ctes","setCTEs","dialogOpen","setDialogOpen","importDialogOpen","setImportDialogOpen","emitirDialogOpen","setEmitirDialogOpen","searchTerm","setSearchTerm","loadCTEs","getStatusBadge","variants","rascunho","label","emitido","autorizado","cancelado","rejeitado","config","Badge","filteredCTEs","filter","cte","includes","Card","CardHeader","CardTitle","FileText","Search","Download","Plus","CardContent","Table","TableHeader","TableRow","TableHead","TableBody","TableCell","format","data_emissao","toLocaleString","minimumFractionDigits","Eye","EmitirMDFEDialog","setCtes","selectedCtes","setSelectedCtes","uf_inicio","uf_fim","ufs_percurso","placa_cavalo","uf_cavalo","cpf_motorista","nome_motorista","loadCTes","is","limit","selectedCtesData","pesoTotal","reduce","sum","valorTotal","quantidade_ctes","chave_acesso","uf","trim","condutores","cpf","nome","toggleCte","cteId","Checkbox","MDFEManagement","mdfes","setMdfes","loadMdfes","handleEncerrar","mdfe","confirm","numero_mdfe","municipio","prompt","mdfe_id","uf_encerramento","municipio_encerramento","processando","encerrado","toLocaleDateString","veiculo_tracao_placa","peso_total_kg","valor_total_carga","CheckCircle","navigator","clipboard","writeText","TripCreationDialog","onTripCreated","drivers","setDrivers","selectedDriver","setSelectedDriver","selectedVehicle","setSelectedVehicle","selectedCarreta","setSelectedCarreta","estimatedDeparture","setEstimatedDeparture","estimatedArrival","setEstimatedArrival","notes","setNotes","loadDrivers","tomorrow","setHours","arrival","driversData","driverRoles","driverIds","r","user_id","availableDrivers","d","full_name","email","available","selectedDriverData","tripError","driver_id","driver_name","estimated_departure","estimated_arrival","cteError","update","data_inicio","tipo_motorista","module","read","Sparkles","DialogDescription","MapPin","User","AlertCircle","driver","Truck","TripManagement","availableCTEs","setAvailableCTEs","activeTrips","setActiveTrips","selectedCTE","setSelectedCTE","showTripDialog","setShowTripDialog","loadData","Promise","all","loadAvailableCTEs","loadActiveTrips","tripsWithCTEs","Array","isArray","profiles","handleCreateTrip","handleTripCreated","getStatusColor","planejada","aprovada","em_andamento","concluida","calculateDistance","Package","Clock","Navigation","OrdemColetaDialog","ordem","numero_ordem","fornecedor_nome","fornecedor_cidade","fornecedor_uf","cliente_nome","cliente_cnpj","motorista_nome","motorista_telefone","capacidade_carreta","produto","pedido_venda","generateNumeroOrdem","getFullYear","String","getMonth","auth","getUser","OrdemColetaManagement","ordens","setOrdens","selectedOrdem","setSelectedOrdem","loadOrdens","handleGeneratePDF","ordem_id","printWindow","window","document","write","html","close","focus","setTimeout","print","filteredOrdens","pendente","coletado","VehicleList","vehicles","setVehicles","loadVehicles","padding","fontSize","marginBottom","listStyle","background","borderRadius","placa","modelo","proprietario","estimateRouteCost","params","distanceKm","max","kmpl","avgConsumptionKmPerLiter","fuelPrice","fuelPricePerLiter","tolls","varPerKm","variableCostPerKm","fixedCost","liters","fuelCost","variableCost","CostEstimator","setForm","calc","TMS","Layout","StatCard","positive","DollarSign","RouteOptimizer","RevenueAnalysis"],"ignoreList":[1],"sources":["../../src/components/tms/CTEDialog.tsx","../../node_modules/@radix-ui/react-radio-group/dist/index.mjs","../../src/components/ui/radio-group.tsx","../../src/components/tms/ImportCTEDialog.tsx","../../src/components/tms/EmitirCTEDialog.tsx","../../src/components/tms/CTEManagement.tsx","../../src/components/tms/EmitirMDFEDialog.tsx","../../src/components/tms/MDFEManagement.tsx","../../src/components/tms/TripCreationDialog.tsx","../../src/components/tms/TripManagement.tsx","../../src/components/tms/OrdemColetaDialog.tsx","../../src/components/tms/OrdemColetaManagement.tsx","../../src/components/tms/VehicleList.tsx","../../src/utils/costEstimator.ts","../../src/components/tms/CostEstimator.tsx","../../src/pages/TMS.tsx"],"sourcesContent":["import { useState, useRef, useEffect } from 'react';\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogFooter } from '@/components/ui/dialog';\r\nimport { VehicleSelect } from '@/components/VehicleSelect';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\r\nimport { Textarea } from '@/components/ui/textarea';\r\nimport { supabase } from '@/integrations/supabase/client';\r\nimport { useAuth } from '@/contexts/AuthContext';\r\nimport { toast } from 'sonner';\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\r\nimport { Upload } from 'lucide-react';\r\n\r\ninterface CTEDialogProps {\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n  tripId?: string;\r\n  onSuccess?: () => void;\r\n}\r\n\r\nexport function CTEDialog({ open, onOpenChange, tripId, onSuccess }: CTEDialogProps) {\r\n  const { user } = useAuth();\r\n  const [loading, setLoading] = useState(false);\r\n  const [importing, setImporting] = useState(false);\r\n  const [trips, setTrips] = useState<any[]>([]);\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n  \r\n  const [formData, setFormData] = useState({\r\n    numero_cte: '',\r\n    serie: '1',\r\n    tipo_cte: 'normal',\r\n    tipo_servico: 'normal',\r\n    trip_id: tripId || '',\r\n    \r\n    // Remetente\r\n    remetente_nome: '',\r\n    remetente_cnpj: '',\r\n    remetente_endereco: '',\r\n    remetente_cidade: '',\r\n    remetente_uf: '',\r\n    remetente_cep: '',\r\n    \r\n    // Destinatrio\r\n    destinatario_nome: '',\r\n    destinatario_cnpj: '',\r\n    destinatario_endereco: '',\r\n    destinatario_cidade: '',\r\n    destinatario_uf: '',\r\n    destinatario_cep: '',\r\n    \r\n    // Tomador\r\n    tomador_tipo: 'remetente' as const,\r\n    tomador_nome: '',\r\n    tomador_cnpj: '',\r\n    \r\n    // Carga\r\n    produto_predominante: '',\r\n    peso_bruto: '',\r\n    peso_cubado: '',\r\n    quantidade_volumes: '',\r\n    valor_mercadoria: '',\r\n    \r\n    // Frete\r\n    modal: 'rodoviario',\r\n    valor_frete: '',\r\n    valor_pedagio: '',\r\n    valor_total: '',\r\n    tipo_frete: 'cif',\r\n    \r\n    // Transporte\r\n    placa_veiculo: '',\r\n    placa_carreta: '',\r\n    uf_veiculo: '',\r\n    rntrc: '',\r\n    \r\n    observacoes: ''\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (open) {\r\n      loadApprovedTrips();\r\n      // Gerar nmero CTe automaticamente\r\n      generateCTENumber();\r\n    }\r\n  }, [open]);\r\n\r\n  useEffect(() => {\r\n    // Auto-preencher placa do veculo da viagem selecionada\r\n    if (formData.trip_id) {\r\n      const selectedTrip = trips.find(t => t.id === formData.trip_id);\r\n      if (selectedTrip) {\r\n        setFormData(prev => ({\r\n          ...prev,\r\n          placa_veiculo: selectedTrip.vehicle_plate || ''\r\n        }));\r\n      }\r\n    }\r\n  }, [formData.trip_id, trips]);\r\n\r\n  useEffect(() => {\r\n    // Calcular valor total\r\n    const frete = parseFloat(formData.valor_frete) || 0;\r\n    const pedagio = parseFloat(formData.valor_pedagio) || 0;\r\n    const total = frete + pedagio;\r\n    \r\n    if (total > 0 && formData.valor_total !== total.toFixed(2)) {\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        valor_total: total.toFixed(2)\r\n      }));\r\n    }\r\n  }, [formData.valor_frete, formData.valor_pedagio]);\r\n\r\n  const generateCTENumber = () => {\r\n    const timestamp = Date.now();\r\n    const random = Math.floor(Math.random() * 1000).toString().padStart(3, '0');\r\n    const cteNumber = `${timestamp}${random}`.slice(-9);\r\n    setFormData(prev => ({ ...prev, numero_cte: cteNumber }));\r\n  };\r\n\r\n  const loadApprovedTrips = async () => {\r\n    const { data, error } = await supabase\r\n      .from('trips')\r\n      .select('*')\r\n      .in('status', ['aprovada', 'em_andamento'])\r\n      .order('created_at', { ascending: false });\r\n    \r\n    if (data) {\r\n      setTrips(data);\r\n    }\r\n  };\r\n\r\n  const handleImportXML = async () => {\r\n    if (!fileInputRef.current?.files?.[0]) {\r\n      toast.error('Selecione um arquivo');\r\n      return;\r\n    }\r\n\r\n    const file = fileInputRef.current.files[0];\r\n    const fileName = file.name.toLowerCase();\r\n    \r\n    if (!fileName.endsWith('.xml') && !fileName.endsWith('.zip')) {\r\n      toast.error('Por favor, selecione um arquivo XML ou ZIP');\r\n      return;\r\n    }\r\n\r\n    setImporting(true);\r\n\r\n    try {\r\n      if (fileName.endsWith('.zip')) {\r\n        // Importao em lote de ZIP\r\n        const JSZip = (await import('jszip')).default;\r\n        const zip = new JSZip();\r\n        const zipContent = await zip.loadAsync(file);\r\n        \r\n        const xmlFiles: string[] = [];\r\n        \r\n        // Extrair todos os XMLs do ZIP\r\n        for (const [filename, fileData] of Object.entries(zipContent.files)) {\r\n          if (!fileData.dir && filename.toLowerCase().endsWith('.xml')) {\r\n            const content = await fileData.async('text');\r\n            xmlFiles.push(content);\r\n          }\r\n        }\r\n\r\n        if (xmlFiles.length === 0) {\r\n          toast.error('Nenhum arquivo XML encontrado no ZIP');\r\n          return;\r\n        }\r\n\r\n        toast.info(`Processando ${xmlFiles.length} CT-es...`);\r\n\r\n        const { data, error } = await supabase.functions.invoke('import-cte-batch', {\r\n          body: { xml_files: xmlFiles }\r\n        });\r\n\r\n        if (error) throw error;\r\n\r\n        const results = data as {\r\n          success: string[];\r\n          errors: Array<{ numero_cte: string; error: string }>;\r\n          clients_created: number;\r\n          vehicles_created: number;\r\n          ctes_created: number;\r\n        };\r\n\r\n        if (results.errors.length > 0) {\r\n          console.warn('Erros na importao:', results.errors);\r\n          toast.warning(\r\n            `${results.ctes_created} CT-es importados com sucesso. ${results.errors.length} falharam.`,\r\n            { duration: 5000 }\r\n          );\r\n        } else {\r\n          const messages = [\r\n            ` ${results.ctes_created} CT-es importados`,\r\n            ` ${results.clients_created} novos clientes cadastrados`,\r\n          ];\r\n          \r\n          if (results.vehicles_created > 0) {\r\n            messages.push(` ${results.vehicles_created} veculos auto-cadastrados`);\r\n          }\r\n          \r\n          messages.push(' Contas a receber criadas', ' Indicadores atualizados');\r\n          \r\n          toast.success(\r\n            messages.join('\\n'),\r\n            { duration: 6000 }\r\n          );\r\n        }\r\n\r\n      } else {\r\n        // Importao individual de XML\r\n        const xmlContent = await file.text();\r\n        \r\n        const { data, error } = await supabase.functions.invoke('import-cte-xml', {\r\n          body: { xml_content: xmlContent }\r\n        });\r\n\r\n        if (error) throw error;\r\n\r\n        toast.success('CT-e importado com sucesso!');\r\n      }\r\n\r\n      onSuccess?.();\r\n      onOpenChange(false);\r\n    } catch (error: any) {\r\n      console.error('Erro ao importar:', error);\r\n      toast.error(error.message || 'Erro ao importar CT-e');\r\n    } finally {\r\n      setImporting(false);\r\n      if (fileInputRef.current) {\r\n        fileInputRef.current.value = '';\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async () => {\r\n    if (!formData.trip_id || !formData.remetente_nome || !formData.destinatario_nome) {\r\n      toast.error('Preencha todos os campos obrigatrios');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n\r\n    try {\r\n      // Validar se a placa existe na tabela vehicles\r\n      const { data: vehicleExists } = await supabase\r\n        .from('vehicles')\r\n        .select('placa')\r\n        .eq('placa', formData.placa_veiculo.toUpperCase())\r\n        .maybeSingle();\r\n\r\n      if (!vehicleExists) {\r\n        toast.error(`Placa ${formData.placa_veiculo} no encontrada. Importe os veculos primeiro.`);\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      const { data: cteData, error } = await supabase\r\n        .from('cte')\r\n        .insert({\r\n          ...formData,\r\n          placa_veiculo: formData.placa_veiculo.toUpperCase(),\r\n          peso_bruto: parseFloat(formData.peso_bruto),\r\n          peso_cubado: formData.peso_cubado ? parseFloat(formData.peso_cubado) : null,\r\n          quantidade_volumes: parseInt(formData.quantidade_volumes),\r\n          valor_mercadoria: parseFloat(formData.valor_mercadoria),\r\n          valor_frete: parseFloat(formData.valor_frete),\r\n          valor_pedagio: parseFloat(formData.valor_pedagio),\r\n          valor_total: parseFloat(formData.valor_total),\r\n          created_by: user?.id,\r\n          status: 'emitido'\r\n        })\r\n        .select()\r\n        .single();\r\n\r\n      if (error) throw error;\r\n\r\n      // Criar conta a receber automaticamente\r\n      try {\r\n        const vencimento = new Date();\r\n        vencimento.setDate(vencimento.getDate() + 30); // Vencimento padro em 30 dias\r\n\r\n        const clienteNome = formData.tomador_nome || \r\n          (formData.tipo_frete === 'cif' ? formData.remetente_nome : formData.destinatario_nome);\r\n\r\n        const { error: financeError } = await supabase\r\n          .from('contas_receber')\r\n          .insert({\r\n            descricao: `CT-e ${formData.numero_cte} - ${formData.produto_predominante}`,\r\n            cliente: clienteNome,\r\n            valor: parseFloat(formData.valor_total),\r\n            data_vencimento: vencimento.toISOString().split('T')[0],\r\n            status: 'pendente',\r\n            observacoes: `Gerado automaticamente via emisso de CT-e.\\nOrigem: ${formData.remetente_cidade}/${formData.remetente_uf}\\nDestino: ${formData.destinatario_cidade}/${formData.destinatario_uf}`,\r\n            // cte_id: cteData.id // Se houver coluna de relacionamento\r\n          });\r\n\r\n        if (financeError) {\r\n          console.error('Erro ao criar conta a receber:', financeError);\r\n          toast.error('CT-e emitido, mas houve erro ao gerar o financeiro.');\r\n        } else {\r\n          toast.success('Conta a receber gerada com sucesso!');\r\n        }\r\n      } catch (err) {\r\n        console.error('Erro ao processar financeiro:', err);\r\n      }\r\n\r\n      toast.success('CT-e criado com sucesso! Disponvel no app do motorista.');\r\n      onSuccess?.();\r\n      onOpenChange(false);\r\n      \r\n      // Reset form\r\n      setFormData({\r\n        numero_cte: '',\r\n        serie: '1',\r\n        tipo_cte: 'normal',\r\n        tipo_servico: 'normal',\r\n        trip_id: '',\r\n        remetente_nome: '',\r\n        remetente_cnpj: '',\r\n        remetente_endereco: '',\r\n        remetente_cidade: '',\r\n        remetente_uf: '',\r\n        remetente_cep: '',\r\n        destinatario_nome: '',\r\n        destinatario_cnpj: '',\r\n        destinatario_endereco: '',\r\n        destinatario_cidade: '',\r\n        destinatario_uf: '',\r\n        destinatario_cep: '',\r\n        tomador_tipo: 'remetente',\r\n        tomador_nome: '',\r\n        tomador_cnpj: '',\r\n        produto_predominante: '',\r\n        peso_bruto: '',\r\n        peso_cubado: '',\r\n        quantidade_volumes: '',\r\n        valor_mercadoria: '',\r\n        modal: 'rodoviario',\r\n        valor_frete: '',\r\n        valor_pedagio: '',\r\n        valor_total: '',\r\n        tipo_frete: 'cif',\r\n        placa_veiculo: '',\r\n        placa_carreta: '',\r\n        uf_veiculo: '',\r\n        rntrc: '',\r\n        observacoes: ''\r\n      });\r\n    } catch (error) {\r\n      console.error('Erro ao criar CT-e:', error);\r\n      toast.error('Erro ao criar CT-e');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={onOpenChange}>\r\n      <DialogContent className=\"max-w-4xl max-h-[90vh] overflow-y-auto\">\r\n        <DialogHeader>\r\n          <DialogTitle>Emitir CT-e (Conhecimento de Transporte Eletrnico)</DialogTitle>\r\n        </DialogHeader>\r\n\r\n        <Tabs defaultValue=\"basicos\" className=\"w-full\">\r\n          <TabsList className=\"grid w-full grid-cols-6\">\r\n            <TabsTrigger value=\"xml\">Importar XML</TabsTrigger>\r\n            <TabsTrigger value=\"basicos\">Bsicos</TabsTrigger>\r\n            <TabsTrigger value=\"remetente\">Remetente</TabsTrigger>\r\n            <TabsTrigger value=\"destinatario\">Destinatrio</TabsTrigger>\r\n            <TabsTrigger value=\"carga\">Carga</TabsTrigger>\r\n            <TabsTrigger value=\"transporte\">Transporte</TabsTrigger>\r\n          </TabsList>\r\n\r\n          <TabsContent value=\"xml\" className=\"space-y-4\">\r\n            <div className=\"border-2 border-dashed border-border rounded-lg p-8 text-center\">\r\n              <Upload className=\"mx-auto h-12 w-12 text-muted-foreground mb-4\" />\r\n              <h3 className=\"text-lg font-semibold mb-2\">Importar CT-e via XML ou ZIP</h3>\r\n              <p className=\"text-sm text-muted-foreground mb-4\">\r\n                Faa upload de um XML individual ou um arquivo ZIP contendo mltiplos XMLs\r\n              </p>\r\n              \r\n              <input\r\n                ref={fileInputRef}\r\n                type=\"file\"\r\n                accept=\".xml,.zip\"\r\n                className=\"hidden\"\r\n                onChange={(e) => {\r\n                  if (e.target.files?.[0]) {\r\n                    toast.info('Arquivo selecionado: ' + e.target.files[0].name);\r\n                  }\r\n                }}\r\n              />\r\n              \r\n              <div className=\"flex gap-2 justify-center\">\r\n                <Button\r\n                  type=\"button\"\r\n                  variant=\"outline\"\r\n                  onClick={() => fileInputRef.current?.click()}\r\n                >\r\n                  Selecionar XML ou ZIP\r\n                </Button>\r\n                \r\n                <Button\r\n                  type=\"button\"\r\n                  onClick={handleImportXML}\r\n                  disabled={importing}\r\n                >\r\n                  {importing ? 'Importando...' : 'Importar'}\r\n                </Button>\r\n              </div>\r\n              \r\n              <div className=\"mt-6 space-y-2 text-left max-w-md mx-auto\">\r\n                <p className=\"text-xs text-muted-foreground font-semibold\">\r\n                   Importao sem placa:\r\n                </p>\r\n                <p className=\"text-xs text-muted-foreground ml-4\">\r\n                   Se o XML no trouxer placa vlida, ser usado 'SEM-PLACA' e voc define a placa no Manifesto depois\r\n                </p>\r\n                \r\n                <p className=\"text-xs text-success font-semibold mt-4\">\r\n                   O sistema far automaticamente:\r\n                </p>\r\n                <p className=\"text-xs text-success ml-4\">\r\n                   Cadastro de clientes (se no existirem)\r\n                </p>\r\n                <p className=\"text-xs text-success ml-4\">\r\n                   Criao de contas a receber\r\n                </p>\r\n                <p className=\"text-xs text-success ml-4\">\r\n                   Criao automtica do veculo \"SEM-PLACA\" quando necessrio\r\n                </p>\r\n                <p className=\"text-xs text-success ml-4\">\r\n                   Atualizao de indicadores financeiros\r\n                </p>\r\n                <p className=\"text-xs text-success ml-4\">\r\n                   Clculo de anlises por cliente\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </TabsContent>\r\n\r\n          <TabsContent value=\"basicos\" className=\"space-y-4\">\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div>\r\n                <Label>Nmero CT-e *</Label>\r\n                <Input\r\n                  value={formData.numero_cte}\r\n                  onChange={e => setFormData({ ...formData, numero_cte: e.target.value })}\r\n                  placeholder=\"Auto-gerado\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>Srie</Label>\r\n                <Input\r\n                  value={formData.serie}\r\n                  onChange={e => setFormData({ ...formData, serie: e.target.value })}\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>Viagem *</Label>\r\n                <Select value={formData.trip_id} onValueChange={value => setFormData({ ...formData, trip_id: value })}>\r\n                  <SelectTrigger>\r\n                    <SelectValue placeholder=\"Selecione a viagem\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    {trips.map(trip => (\r\n                      <SelectItem key={trip.id} value={trip.id}>\r\n                        {trip.origin}  {trip.destination} ({trip.vehicle_plate})\r\n                      </SelectItem>\r\n                    ))}\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n              <div>\r\n                <Label>Tipo CT-e</Label>\r\n                <Select value={formData.tipo_cte} onValueChange={value => setFormData({ ...formData, tipo_cte: value })}>\r\n                  <SelectTrigger>\r\n                    <SelectValue />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    <SelectItem value=\"normal\">Normal</SelectItem>\r\n                    <SelectItem value=\"complementar\">Complementar</SelectItem>\r\n                    <SelectItem value=\"anulacao\">Anulao</SelectItem>\r\n                    <SelectItem value=\"substituto\">Substituto</SelectItem>\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n              <div>\r\n                <Label>Tipo Servio</Label>\r\n                <Select value={formData.tipo_servico} onValueChange={value => setFormData({ ...formData, tipo_servico: value })}>\r\n                  <SelectTrigger>\r\n                    <SelectValue />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    <SelectItem value=\"normal\">Normal</SelectItem>\r\n                    <SelectItem value=\"subcontratacao\">Subcontratao</SelectItem>\r\n                    <SelectItem value=\"redespacho\">Redespacho</SelectItem>\r\n                    <SelectItem value=\"intermediario\">Intermedirio</SelectItem>\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n              <div>\r\n                <Label>Tipo Frete</Label>\r\n                <Select value={formData.tipo_frete} onValueChange={value => setFormData({ ...formData, tipo_frete: value })}>\r\n                  <SelectTrigger>\r\n                    <SelectValue />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    <SelectItem value=\"cif\">CIF (Pago pelo Remetente)</SelectItem>\r\n                    <SelectItem value=\"fob\">FOB (Pago pelo Destinatrio)</SelectItem>\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n            </div>\r\n          </TabsContent>\r\n\r\n          <TabsContent value=\"remetente\" className=\"space-y-4\">\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div className=\"col-span-2\">\r\n                <Label>Nome/Razo Social *</Label>\r\n                <Input\r\n                  value={formData.remetente_nome}\r\n                  onChange={e => setFormData({ ...formData, remetente_nome: e.target.value })}\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>CNPJ *</Label>\r\n                <Input\r\n                  value={formData.remetente_cnpj}\r\n                  onChange={e => setFormData({ ...formData, remetente_cnpj: e.target.value })}\r\n                  placeholder=\"00.000.000/0000-00\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>CEP *</Label>\r\n                <Input\r\n                  value={formData.remetente_cep}\r\n                  onChange={e => setFormData({ ...formData, remetente_cep: e.target.value })}\r\n                  placeholder=\"00000-000\"\r\n                />\r\n              </div>\r\n              <div className=\"col-span-2\">\r\n                <Label>Endereo *</Label>\r\n                <Input\r\n                  value={formData.remetente_endereco}\r\n                  onChange={e => setFormData({ ...formData, remetente_endereco: e.target.value })}\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>Cidade *</Label>\r\n                <Input\r\n                  value={formData.remetente_cidade}\r\n                  onChange={e => setFormData({ ...formData, remetente_cidade: e.target.value })}\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>UF *</Label>\r\n                <Input\r\n                  value={formData.remetente_uf}\r\n                  onChange={e => setFormData({ ...formData, remetente_uf: e.target.value })}\r\n                  maxLength={2}\r\n                  placeholder=\"SP\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </TabsContent>\r\n\r\n          <TabsContent value=\"destinatario\" className=\"space-y-4\">\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div className=\"col-span-2\">\r\n                <Label>Nome/Razo Social *</Label>\r\n                <Input\r\n                  value={formData.destinatario_nome}\r\n                  onChange={e => setFormData({ ...formData, destinatario_nome: e.target.value })}\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>CNPJ *</Label>\r\n                <Input\r\n                  value={formData.destinatario_cnpj}\r\n                  onChange={e => setFormData({ ...formData, destinatario_cnpj: e.target.value })}\r\n                  placeholder=\"00.000.000/0000-00\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>CEP *</Label>\r\n                <Input\r\n                  value={formData.destinatario_cep}\r\n                  onChange={e => setFormData({ ...formData, destinatario_cep: e.target.value })}\r\n                  placeholder=\"00000-000\"\r\n                />\r\n              </div>\r\n              <div className=\"col-span-2\">\r\n                <Label>Endereo *</Label>\r\n                <Input\r\n                  value={formData.destinatario_endereco}\r\n                  onChange={e => setFormData({ ...formData, destinatario_endereco: e.target.value })}\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>Cidade *</Label>\r\n                <Input\r\n                  value={formData.destinatario_cidade}\r\n                  onChange={e => setFormData({ ...formData, destinatario_cidade: e.target.value })}\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>UF *</Label>\r\n                <Input\r\n                  value={formData.destinatario_uf}\r\n                  onChange={e => setFormData({ ...formData, destinatario_uf: e.target.value })}\r\n                  maxLength={2}\r\n                  placeholder=\"RJ\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </TabsContent>\r\n\r\n          <TabsContent value=\"carga\" className=\"space-y-4\">\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div className=\"col-span-2\">\r\n                <Label>Produto Predominante *</Label>\r\n                <Input\r\n                  value={formData.produto_predominante}\r\n                  onChange={e => setFormData({ ...formData, produto_predominante: e.target.value })}\r\n                  placeholder=\"Ex: Produtos Diversos\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>Peso Bruto (kg) *</Label>\r\n                <Input\r\n                  type=\"number\"\r\n                  step=\"0.01\"\r\n                  value={formData.peso_bruto}\r\n                  onChange={e => setFormData({ ...formData, peso_bruto: e.target.value })}\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>Peso Cubado (kg)</Label>\r\n                <Input\r\n                  type=\"number\"\r\n                  step=\"0.01\"\r\n                  value={formData.peso_cubado}\r\n                  onChange={e => setFormData({ ...formData, peso_cubado: e.target.value })}\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>Quantidade Volumes *</Label>\r\n                <Input\r\n                  type=\"number\"\r\n                  value={formData.quantidade_volumes}\r\n                  onChange={e => setFormData({ ...formData, quantidade_volumes: e.target.value })}\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>Valor Mercadoria (R$) *</Label>\r\n                <Input\r\n                  type=\"number\"\r\n                  step=\"0.01\"\r\n                  value={formData.valor_mercadoria}\r\n                  onChange={e => setFormData({ ...formData, valor_mercadoria: e.target.value })}\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>Valor Frete (R$) *</Label>\r\n                <Input\r\n                  type=\"number\"\r\n                  step=\"0.01\"\r\n                  value={formData.valor_frete}\r\n                  onChange={e => setFormData({ ...formData, valor_frete: e.target.value })}\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>Valor Pedgio (R$)</Label>\r\n                <Input\r\n                  type=\"number\"\r\n                  step=\"0.01\"\r\n                  value={formData.valor_pedagio}\r\n                  onChange={e => setFormData({ ...formData, valor_pedagio: e.target.value })}\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>Valor Total (R$) *</Label>\r\n                <Input\r\n                  type=\"number\"\r\n                  step=\"0.01\"\r\n                  value={formData.valor_total}\r\n                  readOnly\r\n                  className=\"bg-muted\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </TabsContent>\r\n\r\n          <TabsContent value=\"transporte\" className=\"space-y-4\">\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div>\r\n                <Label>Modal</Label>\r\n                <Select value={formData.modal} onValueChange={value => setFormData({ ...formData, modal: value })}>\r\n                  <SelectTrigger>\r\n                    <SelectValue />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    <SelectItem value=\"rodoviario\">Rodovirio</SelectItem>\r\n                    <SelectItem value=\"aereo\">Areo</SelectItem>\r\n                    <SelectItem value=\"aquaviario\">Aquavirio</SelectItem>\r\n                    <SelectItem value=\"ferroviario\">Ferrovirio</SelectItem>\r\n                    <SelectItem value=\"dutoviario\">Dutovirio</SelectItem>\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n              <div>\r\n                <Label>UF Veculo *</Label>\r\n                <Input\r\n                  value={formData.uf_veiculo}\r\n                  onChange={e => setFormData({ ...formData, uf_veiculo: e.target.value })}\r\n                  maxLength={2}\r\n                  placeholder=\"SP\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>Placa Veculo *</Label>\r\n                <VehicleSelect\r\n                  value={formData.placa_veiculo}\r\n                  onChange={value => setFormData({ ...formData, placa_veiculo: value })}\r\n                  filter={v => v.type === 'caminhao' || v.type === 'cavalo'}\r\n                  placeholder=\"Selecione\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>Placa Carreta</Label>\r\n                <VehicleSelect\r\n                  value={formData.placa_carreta}\r\n                  onChange={value => setFormData({ ...formData, placa_carreta: value })}\r\n                  filter={v => v.type === 'carreta' || v.type === 'reboque'}\r\n                  placeholder=\"Selecione (Opcional)\"\r\n                />\r\n              </div>\r\n              <div className=\"col-span-2\">\r\n                <Label>RNTRC (Transportador Autnomo)</Label>\r\n                <Input\r\n                  value={formData.rntrc}\r\n                  onChange={e => setFormData({ ...formData, rntrc: e.target.value })}\r\n                />\r\n              </div>\r\n              <div className=\"col-span-2\">\r\n                <Label>Observaes</Label>\r\n                <Textarea\r\n                  value={formData.observacoes}\r\n                  onChange={e => setFormData({ ...formData, observacoes: e.target.value })}\r\n                  rows={3}\r\n                />\r\n              </div>\r\n            </div>\r\n          </TabsContent>\r\n        </Tabs>\r\n\r\n        <DialogFooter>\r\n          <Button variant=\"outline\" onClick={() => onOpenChange(false)}>\r\n            Cancelar\r\n          </Button>\r\n          <Button onClick={handleSubmit} disabled={loading}>\r\n            {loading ? 'Emitindo...' : 'Emitir CT-e'}\r\n          </Button>\r\n        </DialogFooter>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n","\"use client\";\n\n// src/radio-group.tsx\nimport * as React2 from \"react\";\nimport { composeEventHandlers as composeEventHandlers2 } from \"@radix-ui/primitive\";\nimport { useComposedRefs as useComposedRefs2 } from \"@radix-ui/react-compose-refs\";\nimport { createContextScope as createContextScope2 } from \"@radix-ui/react-context\";\nimport { Primitive as Primitive2 } from \"@radix-ui/react-primitive\";\nimport * as RovingFocusGroup from \"@radix-ui/react-roving-focus\";\nimport { createRovingFocusGroupScope } from \"@radix-ui/react-roving-focus\";\nimport { useControllableState } from \"@radix-ui/react-use-controllable-state\";\nimport { useDirection } from \"@radix-ui/react-direction\";\n\n// src/radio.tsx\nimport * as React from \"react\";\nimport { composeEventHandlers } from \"@radix-ui/primitive\";\nimport { useComposedRefs } from \"@radix-ui/react-compose-refs\";\nimport { createContextScope } from \"@radix-ui/react-context\";\nimport { useSize } from \"@radix-ui/react-use-size\";\nimport { usePrevious } from \"@radix-ui/react-use-previous\";\nimport { Presence } from \"@radix-ui/react-presence\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { jsx, jsxs } from \"react/jsx-runtime\";\nvar RADIO_NAME = \"Radio\";\nvar [createRadioContext, createRadioScope] = createContextScope(RADIO_NAME);\nvar [RadioProvider, useRadioContext] = createRadioContext(RADIO_NAME);\nvar Radio = React.forwardRef(\n  (props, forwardedRef) => {\n    const {\n      __scopeRadio,\n      name,\n      checked = false,\n      required,\n      disabled,\n      value = \"on\",\n      onCheck,\n      form,\n      ...radioProps\n    } = props;\n    const [button, setButton] = React.useState(null);\n    const composedRefs = useComposedRefs(forwardedRef, (node) => setButton(node));\n    const hasConsumerStoppedPropagationRef = React.useRef(false);\n    const isFormControl = button ? form || !!button.closest(\"form\") : true;\n    return /* @__PURE__ */ jsxs(RadioProvider, { scope: __scopeRadio, checked, disabled, children: [\n      /* @__PURE__ */ jsx(\n        Primitive.button,\n        {\n          type: \"button\",\n          role: \"radio\",\n          \"aria-checked\": checked,\n          \"data-state\": getState(checked),\n          \"data-disabled\": disabled ? \"\" : void 0,\n          disabled,\n          value,\n          ...radioProps,\n          ref: composedRefs,\n          onClick: composeEventHandlers(props.onClick, (event) => {\n            if (!checked) onCheck?.();\n            if (isFormControl) {\n              hasConsumerStoppedPropagationRef.current = event.isPropagationStopped();\n              if (!hasConsumerStoppedPropagationRef.current) event.stopPropagation();\n            }\n          })\n        }\n      ),\n      isFormControl && /* @__PURE__ */ jsx(\n        RadioBubbleInput,\n        {\n          control: button,\n          bubbles: !hasConsumerStoppedPropagationRef.current,\n          name,\n          value,\n          checked,\n          required,\n          disabled,\n          form,\n          style: { transform: \"translateX(-100%)\" }\n        }\n      )\n    ] });\n  }\n);\nRadio.displayName = RADIO_NAME;\nvar INDICATOR_NAME = \"RadioIndicator\";\nvar RadioIndicator = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeRadio, forceMount, ...indicatorProps } = props;\n    const context = useRadioContext(INDICATOR_NAME, __scopeRadio);\n    return /* @__PURE__ */ jsx(Presence, { present: forceMount || context.checked, children: /* @__PURE__ */ jsx(\n      Primitive.span,\n      {\n        \"data-state\": getState(context.checked),\n        \"data-disabled\": context.disabled ? \"\" : void 0,\n        ...indicatorProps,\n        ref: forwardedRef\n      }\n    ) });\n  }\n);\nRadioIndicator.displayName = INDICATOR_NAME;\nvar BUBBLE_INPUT_NAME = \"RadioBubbleInput\";\nvar RadioBubbleInput = React.forwardRef(\n  ({\n    __scopeRadio,\n    control,\n    checked,\n    bubbles = true,\n    ...props\n  }, forwardedRef) => {\n    const ref = React.useRef(null);\n    const composedRefs = useComposedRefs(ref, forwardedRef);\n    const prevChecked = usePrevious(checked);\n    const controlSize = useSize(control);\n    React.useEffect(() => {\n      const input = ref.current;\n      if (!input) return;\n      const inputProto = window.HTMLInputElement.prototype;\n      const descriptor = Object.getOwnPropertyDescriptor(\n        inputProto,\n        \"checked\"\n      );\n      const setChecked = descriptor.set;\n      if (prevChecked !== checked && setChecked) {\n        const event = new Event(\"click\", { bubbles });\n        setChecked.call(input, checked);\n        input.dispatchEvent(event);\n      }\n    }, [prevChecked, checked, bubbles]);\n    return /* @__PURE__ */ jsx(\n      Primitive.input,\n      {\n        type: \"radio\",\n        \"aria-hidden\": true,\n        defaultChecked: checked,\n        ...props,\n        tabIndex: -1,\n        ref: composedRefs,\n        style: {\n          ...props.style,\n          ...controlSize,\n          position: \"absolute\",\n          pointerEvents: \"none\",\n          opacity: 0,\n          margin: 0\n        }\n      }\n    );\n  }\n);\nRadioBubbleInput.displayName = BUBBLE_INPUT_NAME;\nfunction getState(checked) {\n  return checked ? \"checked\" : \"unchecked\";\n}\n\n// src/radio-group.tsx\nimport { jsx as jsx2 } from \"react/jsx-runtime\";\nvar ARROW_KEYS = [\"ArrowUp\", \"ArrowDown\", \"ArrowLeft\", \"ArrowRight\"];\nvar RADIO_GROUP_NAME = \"RadioGroup\";\nvar [createRadioGroupContext, createRadioGroupScope] = createContextScope2(RADIO_GROUP_NAME, [\n  createRovingFocusGroupScope,\n  createRadioScope\n]);\nvar useRovingFocusGroupScope = createRovingFocusGroupScope();\nvar useRadioScope = createRadioScope();\nvar [RadioGroupProvider, useRadioGroupContext] = createRadioGroupContext(RADIO_GROUP_NAME);\nvar RadioGroup = React2.forwardRef(\n  (props, forwardedRef) => {\n    const {\n      __scopeRadioGroup,\n      name,\n      defaultValue,\n      value: valueProp,\n      required = false,\n      disabled = false,\n      orientation,\n      dir,\n      loop = true,\n      onValueChange,\n      ...groupProps\n    } = props;\n    const rovingFocusGroupScope = useRovingFocusGroupScope(__scopeRadioGroup);\n    const direction = useDirection(dir);\n    const [value, setValue] = useControllableState({\n      prop: valueProp,\n      defaultProp: defaultValue ?? null,\n      onChange: onValueChange,\n      caller: RADIO_GROUP_NAME\n    });\n    return /* @__PURE__ */ jsx2(\n      RadioGroupProvider,\n      {\n        scope: __scopeRadioGroup,\n        name,\n        required,\n        disabled,\n        value,\n        onValueChange: setValue,\n        children: /* @__PURE__ */ jsx2(\n          RovingFocusGroup.Root,\n          {\n            asChild: true,\n            ...rovingFocusGroupScope,\n            orientation,\n            dir: direction,\n            loop,\n            children: /* @__PURE__ */ jsx2(\n              Primitive2.div,\n              {\n                role: \"radiogroup\",\n                \"aria-required\": required,\n                \"aria-orientation\": orientation,\n                \"data-disabled\": disabled ? \"\" : void 0,\n                dir: direction,\n                ...groupProps,\n                ref: forwardedRef\n              }\n            )\n          }\n        )\n      }\n    );\n  }\n);\nRadioGroup.displayName = RADIO_GROUP_NAME;\nvar ITEM_NAME = \"RadioGroupItem\";\nvar RadioGroupItem = React2.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeRadioGroup, disabled, ...itemProps } = props;\n    const context = useRadioGroupContext(ITEM_NAME, __scopeRadioGroup);\n    const isDisabled = context.disabled || disabled;\n    const rovingFocusGroupScope = useRovingFocusGroupScope(__scopeRadioGroup);\n    const radioScope = useRadioScope(__scopeRadioGroup);\n    const ref = React2.useRef(null);\n    const composedRefs = useComposedRefs2(forwardedRef, ref);\n    const checked = context.value === itemProps.value;\n    const isArrowKeyPressedRef = React2.useRef(false);\n    React2.useEffect(() => {\n      const handleKeyDown = (event) => {\n        if (ARROW_KEYS.includes(event.key)) {\n          isArrowKeyPressedRef.current = true;\n        }\n      };\n      const handleKeyUp = () => isArrowKeyPressedRef.current = false;\n      document.addEventListener(\"keydown\", handleKeyDown);\n      document.addEventListener(\"keyup\", handleKeyUp);\n      return () => {\n        document.removeEventListener(\"keydown\", handleKeyDown);\n        document.removeEventListener(\"keyup\", handleKeyUp);\n      };\n    }, []);\n    return /* @__PURE__ */ jsx2(\n      RovingFocusGroup.Item,\n      {\n        asChild: true,\n        ...rovingFocusGroupScope,\n        focusable: !isDisabled,\n        active: checked,\n        children: /* @__PURE__ */ jsx2(\n          Radio,\n          {\n            disabled: isDisabled,\n            required: context.required,\n            checked,\n            ...radioScope,\n            ...itemProps,\n            name: context.name,\n            ref: composedRefs,\n            onCheck: () => context.onValueChange(itemProps.value),\n            onKeyDown: composeEventHandlers2((event) => {\n              if (event.key === \"Enter\") event.preventDefault();\n            }),\n            onFocus: composeEventHandlers2(itemProps.onFocus, () => {\n              if (isArrowKeyPressedRef.current) ref.current?.click();\n            })\n          }\n        )\n      }\n    );\n  }\n);\nRadioGroupItem.displayName = ITEM_NAME;\nvar INDICATOR_NAME2 = \"RadioGroupIndicator\";\nvar RadioGroupIndicator = React2.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeRadioGroup, ...indicatorProps } = props;\n    const radioScope = useRadioScope(__scopeRadioGroup);\n    return /* @__PURE__ */ jsx2(RadioIndicator, { ...radioScope, ...indicatorProps, ref: forwardedRef });\n  }\n);\nRadioGroupIndicator.displayName = INDICATOR_NAME2;\nvar Root2 = RadioGroup;\nvar Item2 = RadioGroupItem;\nvar Indicator = RadioGroupIndicator;\nexport {\n  Indicator,\n  Item2 as Item,\n  RadioGroup,\n  RadioGroupIndicator,\n  RadioGroupItem,\n  Root2 as Root,\n  createRadioGroupScope\n};\n//# sourceMappingURL=index.mjs.map\n","import * as React from \"react\";\r\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\";\r\nimport { Circle } from \"lucide-react\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst RadioGroup = React.forwardRef<\r\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\r\n>(({ className, ...props }, ref) => {\r\n  return <RadioGroupPrimitive.Root className={cn(\"grid gap-2\", className)} {...props} ref={ref} />;\r\n});\r\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName;\r\n\r\nconst RadioGroupItem = React.forwardRef<\r\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\r\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\r\n>(({ className, ...props }, ref) => {\r\n  return (\r\n    <RadioGroupPrimitive.Item\r\n      ref={ref}\r\n      className={cn(\r\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\r\n        className,\r\n      )}\r\n      {...props}\r\n    >\r\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\r\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\r\n      </RadioGroupPrimitive.Indicator>\r\n    </RadioGroupPrimitive.Item>\r\n  );\r\n});\r\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName;\r\n\r\nexport { RadioGroup, RadioGroupItem };\r\n","import { useState } from 'react';\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { RadioGroup, RadioGroupItem } from '@/components/ui/radio-group';\r\nimport { Calendar, Key, Loader2 } from 'lucide-react';\r\nimport { supabase } from '@/integrations/supabase/client';\r\nimport { toast } from 'sonner';\r\n\r\ninterface ImportCTEDialogProps {\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n  onSuccess: () => void;\r\n}\r\n\r\nexport function ImportCTEDialog({ open, onOpenChange, onSuccess }: ImportCTEDialogProps) {\r\n  const [tipo, setTipo] = useState<'periodo' | 'chave'>('periodo');\r\n  const [dataInicial, setDataInicial] = useState('');\r\n  const [dataFinal, setDataFinal] = useState('');\r\n  const [chaveAcesso, setChaveAcesso] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleImport = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const body: any = { tipo };\r\n\r\n      if (tipo === 'periodo') {\r\n        if (!dataInicial || !dataFinal) {\r\n          toast.error('Preencha as datas inicial e final');\r\n          return;\r\n        }\r\n        body.dataInicial = dataInicial;\r\n        body.dataFinal = dataFinal;\r\n      } else {\r\n        if (!chaveAcesso) {\r\n          toast.error('Informe a chave de acesso do CT-e');\r\n          return;\r\n        }\r\n        body.chaveAcesso = chaveAcesso.replace(/\\s/g, '');\r\n      }\r\n\r\n      const { data, error } = await supabase.functions.invoke('import-cte-brasilnfe', {\r\n        body\r\n      });\r\n\r\n      if (error) throw error;\r\n\r\n      if (data.errors && data.errors.length > 0) {\r\n        toast.warning(data.message, {\r\n          description: `${data.errors.length} erro(s) encontrado(s)`\r\n        });\r\n      } else {\r\n        toast.success(data.message);\r\n      }\r\n\r\n      onSuccess();\r\n      onOpenChange(false);\r\n      \r\n      // Limpar campos\r\n      setDataInicial('');\r\n      setDataFinal('');\r\n      setChaveAcesso('');\r\n      \r\n    } catch (error) {\r\n      console.error('Erro ao importar CT-e:', error);\r\n      toast.error('Erro ao importar CT-e da BrasilNFe');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={onOpenChange}>\r\n      <DialogContent className=\"sm:max-w-md\">\r\n        <DialogHeader>\r\n          <DialogTitle>Importar CT-e da BrasilNFe</DialogTitle>\r\n        </DialogHeader>\r\n\r\n        <div className=\"space-y-6 pt-4\">\r\n          <RadioGroup value={tipo} onValueChange={(value) => setTipo(value as 'periodo' | 'chave')}>\r\n            <div className=\"flex items-center space-x-2\">\r\n              <RadioGroupItem value=\"periodo\" id=\"periodo\" />\r\n              <Label htmlFor=\"periodo\" className=\"flex items-center gap-2 cursor-pointer\">\r\n                <Calendar className=\"h-4 w-4\" />\r\n                Importar por perodo\r\n              </Label>\r\n            </div>\r\n            <div className=\"flex items-center space-x-2\">\r\n              <RadioGroupItem value=\"chave\" id=\"chave\" />\r\n              <Label htmlFor=\"chave\" className=\"flex items-center gap-2 cursor-pointer\">\r\n                <Key className=\"h-4 w-4\" />\r\n                Importar por chave de acesso\r\n              </Label>\r\n            </div>\r\n          </RadioGroup>\r\n\r\n          {tipo === 'periodo' ? (\r\n            <div className=\"space-y-4\">\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"dataInicial\">Data Inicial</Label>\r\n                <Input\r\n                  id=\"dataInicial\"\r\n                  type=\"date\"\r\n                  value={dataInicial}\r\n                  onChange={(e) => setDataInicial(e.target.value)}\r\n                />\r\n              </div>\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"dataFinal\">Data Final</Label>\r\n                <Input\r\n                  id=\"dataFinal\"\r\n                  type=\"date\"\r\n                  value={dataFinal}\r\n                  onChange={(e) => setDataFinal(e.target.value)}\r\n                />\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"chaveAcesso\">Chave de Acesso</Label>\r\n              <Input\r\n                id=\"chaveAcesso\"\r\n                placeholder=\"Digite a chave de 44 dgitos\"\r\n                value={chaveAcesso}\r\n                onChange={(e) => setChaveAcesso(e.target.value)}\r\n                maxLength={44}\r\n              />\r\n              <p className=\"text-xs text-muted-foreground\">\r\n                44 dgitos sem espaos ou formatao\r\n              </p>\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"flex gap-2 pt-4\">\r\n            <Button\r\n              variant=\"outline\"\r\n              className=\"flex-1\"\r\n              onClick={() => onOpenChange(false)}\r\n              disabled={loading}\r\n            >\r\n              Cancelar\r\n            </Button>\r\n            <Button\r\n              className=\"flex-1\"\r\n              onClick={handleImport}\r\n              disabled={loading}\r\n            >\r\n              {loading ? (\r\n                <>\r\n                  <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\r\n                  Importando...\r\n                </>\r\n              ) : (\r\n                'Importar'\r\n              )}\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n","import { VehicleSelect } from \"@/components/VehicleSelect\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport { Loader2 } from \"lucide-react\";\r\n\r\ninterface EmitirCTEDialogProps {\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n  onSuccess: () => void;\r\n}\r\n\r\nexport default function EmitirCTEDialog({ open, onOpenChange, onSuccess }: EmitirCTEDialogProps) {\r\n  const { toast } = useToast();\r\n  const [loading, setLoading] = useState(false);\r\n  const [formData, setFormData] = useState({\r\n    numero: \"\",\r\n    serie: \"1\",\r\n    tipo_tomador: \"0\",\r\n    // Tomador\r\n    tomador_cnpj: \"\",\r\n    tomador_razao: \"\",\r\n    tomador_endereco: \"\",\r\n    tomador_municipio: \"\",\r\n    tomador_uf: \"\",\r\n    tomador_cep: \"\",\r\n    // Remetente\r\n    remetente_cnpj: \"\",\r\n    remetente_razao: \"\",\r\n    remetente_endereco: \"\",\r\n    remetente_municipio: \"\",\r\n    remetente_uf: \"\",\r\n    remetente_cep: \"\",\r\n    // Destinatrio\r\n    destinatario_cnpj: \"\",\r\n    destinatario_razao: \"\",\r\n    destinatario_endereco: \"\",\r\n    destinatario_municipio: \"\",\r\n    destinatario_uf: \"\",\r\n    destinatario_cep: \"\",\r\n    // Carga\r\n    produto_predominante: \"PRODUTOS QUIMICOS\",\r\n    quantidade_volumes: \"1\",\r\n    peso_bruto: \"\",\r\n    valor_carga: \"\",\r\n    valor_total: \"\",\r\n    // Veculo\r\n    placa_veiculo: \"\",\r\n    uf_veiculo: \"PE\",\r\n    // Origem/Destino\r\n    municipio_origem: \"\",\r\n    uf_origem: \"\",\r\n    municipio_destino: \"\",\r\n    uf_destino: \"\",\r\n  });\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n\r\n    try {\r\n      const { data, error } = await supabase.functions.invoke(\"emitir-cte\", {\r\n        body: {\r\n          ...formData,\r\n          quantidade_volumes: parseInt(formData.quantidade_volumes),\r\n          peso_bruto: parseFloat(formData.peso_bruto),\r\n          valor_carga: parseFloat(formData.valor_carga),\r\n          valor_total: parseFloat(formData.valor_total),\r\n        },\r\n      });\r\n\r\n      if (error) throw error;\r\n\r\n      if (data.success) {\r\n        toast({\r\n          title: \"CT-e emitido com sucesso!\",\r\n          description: `Nmero: ${data.numero} | Chave: ${data.chave}`,\r\n        });\r\n        onSuccess();\r\n        onOpenChange(false);\r\n      } else {\r\n        throw new Error(data.error || \"Erro ao emitir CT-e\");\r\n      }\r\n    } catch (error: any) {\r\n      console.error(\"Erro:\", error);\r\n      toast({\r\n        title: \"Erro ao emitir CT-e\",\r\n        description: error.message,\r\n        variant: \"destructive\",\r\n      });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={onOpenChange}>\r\n      <DialogContent className=\"max-w-4xl max-h-[90vh] overflow-y-auto\">\r\n        <DialogHeader>\r\n          <DialogTitle>Emitir CT-e</DialogTitle>\r\n        </DialogHeader>\r\n\r\n        <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n          {/* Dados Bsicos */}\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"font-semibold\">Dados do CT-e</h3>\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div>\r\n                <Label>Nmero</Label>\r\n                <Input\r\n                  required\r\n                  value={formData.numero}\r\n                  onChange={(e) => setFormData({ ...formData, numero: e.target.value })}\r\n                  placeholder=\"000001\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>Srie</Label>\r\n                <Input\r\n                  value={formData.serie}\r\n                  onChange={(e) => setFormData({ ...formData, serie: e.target.value })}\r\n                  placeholder=\"1\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Tomador */}\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"font-semibold\">Tomador do Servio</h3>\r\n            <div>\r\n              <Label>Tipo de Tomador</Label>\r\n              <Select\r\n                value={formData.tipo_tomador}\r\n                onValueChange={(value) => setFormData({ ...formData, tipo_tomador: value })}\r\n              >\r\n                <SelectTrigger>\r\n                  <SelectValue />\r\n                </SelectTrigger>\r\n                <SelectContent>\r\n                  <SelectItem value=\"0\">Remetente</SelectItem>\r\n                  <SelectItem value=\"1\">Expedidor</SelectItem>\r\n                  <SelectItem value=\"2\">Recebedor</SelectItem>\r\n                  <SelectItem value=\"3\">Destinatrio</SelectItem>\r\n                </SelectContent>\r\n              </Select>\r\n            </div>\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div>\r\n                <Label>CNPJ</Label>\r\n                <Input\r\n                  required\r\n                  value={formData.tomador_cnpj}\r\n                  onChange={(e) => setFormData({ ...formData, tomador_cnpj: e.target.value })}\r\n                  placeholder=\"00.000.000/0000-00\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>Razo Social</Label>\r\n                <Input\r\n                  required\r\n                  value={formData.tomador_razao}\r\n                  onChange={(e) => setFormData({ ...formData, tomador_razao: e.target.value })}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"grid grid-cols-3 gap-4\">\r\n              <div className=\"col-span-2\">\r\n                <Label>Endereo</Label>\r\n                <Input\r\n                  required\r\n                  value={formData.tomador_endereco}\r\n                  onChange={(e) => setFormData({ ...formData, tomador_endereco: e.target.value })}\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>CEP</Label>\r\n                <Input\r\n                  required\r\n                  value={formData.tomador_cep}\r\n                  onChange={(e) => setFormData({ ...formData, tomador_cep: e.target.value })}\r\n                  placeholder=\"00000-000\"\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div>\r\n                <Label>Municpio</Label>\r\n                <Input\r\n                  required\r\n                  value={formData.tomador_municipio}\r\n                  onChange={(e) => setFormData({ ...formData, tomador_municipio: e.target.value })}\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>UF</Label>\r\n                <Input\r\n                  required\r\n                  maxLength={2}\r\n                  value={formData.tomador_uf}\r\n                  onChange={(e) => setFormData({ ...formData, tomador_uf: e.target.value.toUpperCase() })}\r\n                  placeholder=\"PE\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Remetente */}\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"font-semibold\">Remetente</h3>\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div>\r\n                <Label>CNPJ</Label>\r\n                <Input\r\n                  required\r\n                  value={formData.remetente_cnpj}\r\n                  onChange={(e) => setFormData({ ...formData, remetente_cnpj: e.target.value })}\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>Razo Social</Label>\r\n                <Input\r\n                  required\r\n                  value={formData.remetente_razao}\r\n                  onChange={(e) => setFormData({ ...formData, remetente_razao: e.target.value })}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div>\r\n                <Label>Municpio</Label>\r\n                <Input\r\n                  required\r\n                  value={formData.remetente_municipio}\r\n                  onChange={(e) =>\r\n                    setFormData({ ...formData, remetente_municipio: e.target.value, municipio_origem: e.target.value })\r\n                  }\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>UF</Label>\r\n                <Input\r\n                  required\r\n                  maxLength={2}\r\n                  value={formData.remetente_uf}\r\n                  onChange={(e) =>\r\n                    setFormData({\r\n                      ...formData,\r\n                      remetente_uf: e.target.value.toUpperCase(),\r\n                      uf_origem: e.target.value.toUpperCase(),\r\n                    })\r\n                  }\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Destinatrio */}\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"font-semibold\">Destinatrio</h3>\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div>\r\n                <Label>CNPJ</Label>\r\n                <Input\r\n                  required\r\n                  value={formData.destinatario_cnpj}\r\n                  onChange={(e) => setFormData({ ...formData, destinatario_cnpj: e.target.value })}\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>Razo Social</Label>\r\n                <Input\r\n                  required\r\n                  value={formData.destinatario_razao}\r\n                  onChange={(e) => setFormData({ ...formData, destinatario_razao: e.target.value })}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div>\r\n                <Label>Municpio</Label>\r\n                <Input\r\n                  required\r\n                  value={formData.destinatario_municipio}\r\n                  onChange={(e) =>\r\n                    setFormData({\r\n                      ...formData,\r\n                      destinatario_municipio: e.target.value,\r\n                      municipio_destino: e.target.value,\r\n                    })\r\n                  }\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>UF</Label>\r\n                <Input\r\n                  required\r\n                  maxLength={2}\r\n                  value={formData.destinatario_uf}\r\n                  onChange={(e) =>\r\n                    setFormData({\r\n                      ...formData,\r\n                      destinatario_uf: e.target.value.toUpperCase(),\r\n                      uf_destino: e.target.value.toUpperCase(),\r\n                    })\r\n                  }\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Carga e Valores */}\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"font-semibold\">Carga e Valores</h3>\r\n            <div className=\"grid grid-cols-3 gap-4\">\r\n              <div>\r\n                <Label>Produto</Label>\r\n                <Input\r\n                  value={formData.produto_predominante}\r\n                  onChange={(e) => setFormData({ ...formData, produto_predominante: e.target.value })}\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>Volumes</Label>\r\n                <Input\r\n                  type=\"number\"\r\n                  required\r\n                  value={formData.quantidade_volumes}\r\n                  onChange={(e) => setFormData({ ...formData, quantidade_volumes: e.target.value })}\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>Peso Bruto (kg)</Label>\r\n                <Input\r\n                  type=\"number\"\r\n                  step=\"0.01\"\r\n                  required\r\n                  value={formData.peso_bruto}\r\n                  onChange={(e) => setFormData({ ...formData, peso_bruto: e.target.value })}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div>\r\n                <Label>Valor da Carga (R$)</Label>\r\n                <Input\r\n                  type=\"number\"\r\n                  step=\"0.01\"\r\n                  required\r\n                  value={formData.valor_carga}\r\n                  onChange={(e) => setFormData({ ...formData, valor_carga: e.target.value })}\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>Valor do Frete (R$)</Label>\r\n                <Input\r\n                  type=\"number\"\r\n                  step=\"0.01\"\r\n                  required\r\n                  value={formData.valor_total}\r\n                  onChange={(e) => setFormData({ ...formData, valor_total: e.target.value })}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Veculo */}\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"font-semibold\">Veculo</h3>\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div>\r\n                <Label>Placa</Label>\r\n                <VehicleSelect\r\n                  value={formData.placa_veiculo}\r\n                  onChange={(value) => setFormData({ ...formData, placa_veiculo: value })}\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>UF</Label>\r\n                <Input\r\n                  required\r\n                  maxLength={2}\r\n                  value={formData.uf_veiculo}\r\n                  onChange={(e) => setFormData({ ...formData, uf_veiculo: e.target.value.toUpperCase() })}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex justify-end gap-2\">\r\n            <Button type=\"button\" variant=\"outline\" onClick={() => onOpenChange(false)}>\r\n              Cancelar\r\n            </Button>\r\n            <Button type=\"submit\" disabled={loading}>\r\n              {loading && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\r\n              Emitir CT-e\r\n            </Button>\r\n          </div>\r\n        </form>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n","import { useState, useEffect } from 'react';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table';\r\nimport { Plus, Search, FileText, Eye, Download } from 'lucide-react';\r\nimport { supabase } from '@/integrations/supabase/client';\r\nimport { toast } from 'sonner';\r\nimport { CTEDialog } from './CTEDialog';\r\nimport { ImportCTEDialog } from './ImportCTEDialog';\r\nimport EmitirCTEDialog from './EmitirCTEDialog';\r\nimport { format } from 'date-fns';\r\n\r\ninterface CTE {\r\n  id: string;\r\n  numero_cte: string;\r\n  status: string;\r\n  remetente_nome: string;\r\n  destinatario_nome: string;\r\n  valor_total: number;\r\n  placa_veiculo: string;\r\n  data_emissao: string;\r\n}\r\n\r\nexport function CTEManagement() {\r\n  const [ctes, setCTEs] = useState<CTE[]>([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [dialogOpen, setDialogOpen] = useState(false);\r\n  const [importDialogOpen, setImportDialogOpen] = useState(false);\r\n  const [emitirDialogOpen, setEmitirDialogOpen] = useState(false);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n\r\n  useEffect(() => {\r\n    loadCTEs();\r\n  }, []);\r\n\r\n  const loadCTEs = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from('cte')\r\n        .select('*')\r\n        .order('created_at', { ascending: false });\r\n\r\n      if (error) throw error;\r\n      setCTEs(data || []);\r\n    } catch (error) {\r\n      console.error('Erro ao carregar CT-e:', error);\r\n      toast.error('Erro ao carregar CT-e');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const getStatusBadge = (status: string) => {\r\n    const variants: Record<string, { variant: any; label: string }> = {\r\n      rascunho: { variant: 'outline', label: 'Rascunho' },\r\n      emitido: { variant: 'default', label: 'Emitido' },\r\n      autorizado: { variant: 'secondary', label: 'Autorizado' },\r\n      cancelado: { variant: 'destructive', label: 'Cancelado' },\r\n      rejeitado: { variant: 'destructive', label: 'Rejeitado' }\r\n    };\r\n\r\n    const config = variants[status] || variants.rascunho;\r\n    return <Badge variant={config.variant}>{config.label}</Badge>;\r\n  };\r\n\r\n  const filteredCTEs = ctes.filter(cte =>\r\n    cte.numero_cte.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n    cte.placa_veiculo.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n    cte.remetente_nome.toLowerCase().includes(searchTerm.toLowerCase())\r\n  );\r\n\r\n  return (\r\n    <>\r\n      <Card>\r\n        <CardHeader>\r\n          <div className=\"flex justify-between items-center\">\r\n            <CardTitle className=\"flex items-center gap-2\">\r\n              <FileText className=\"h-5 w-5\" />\r\n              Gesto de CT-e\r\n            </CardTitle>\r\n            <div className=\"flex gap-2\">\r\n              <div className=\"relative\">\r\n                <Search className=\"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground\" />\r\n                <Input\r\n                  placeholder=\"Buscar CT-e...\"\r\n                  className=\"pl-8 w-64\"\r\n                  value={searchTerm}\r\n                  onChange={e => setSearchTerm(e.target.value)}\r\n                />\r\n              </div>\r\n              <Button variant=\"outline\" onClick={() => setImportDialogOpen(true)}>\r\n                <Download className=\"mr-2 h-4 w-4\" />\r\n                Importar da BrasilNFe\r\n              </Button>\r\n              <Button onClick={() => setEmitirDialogOpen(true)}>\r\n                <Plus className=\"mr-2 h-4 w-4\" />\r\n                Emitir CT-e\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </CardHeader>\r\n        <CardContent>\r\n          {loading ? (\r\n            <div className=\"text-center py-8\">Carregando...</div>\r\n          ) : filteredCTEs.length === 0 ? (\r\n            <div className=\"text-center py-8 text-muted-foreground\">\r\n              <FileText className=\"h-12 w-12 mx-auto mb-2 opacity-50\" />\r\n              <p>Nenhum CT-e encontrado</p>\r\n            </div>\r\n          ) : (\r\n            <Table>\r\n              <TableHeader>\r\n                <TableRow>\r\n                  <TableHead>Nmero</TableHead>\r\n                  <TableHead>Data Emisso</TableHead>\r\n                  <TableHead>Remetente</TableHead>\r\n                  <TableHead>Destinatrio</TableHead>\r\n                  <TableHead>Placa</TableHead>\r\n                  <TableHead>Valor Total</TableHead>\r\n                  <TableHead>Status</TableHead>\r\n                  <TableHead>Aes</TableHead>\r\n                </TableRow>\r\n              </TableHeader>\r\n              <TableBody>\r\n                {filteredCTEs.map(cte => (\r\n                  <TableRow key={cte.id}>\r\n                    <TableCell className=\"font-mono\">{cte.numero_cte}</TableCell>\r\n                    <TableCell>\r\n                      {format(new Date(cte.data_emissao), 'dd/MM/yyyy HH:mm')}\r\n                    </TableCell>\r\n                    <TableCell>{cte.remetente_nome}</TableCell>\r\n                    <TableCell>{cte.destinatario_nome}</TableCell>\r\n                    <TableCell className=\"font-mono\">{cte.placa_veiculo}</TableCell>\r\n                    <TableCell className=\"font-semibold text-green-600\">\r\n                      R$ {cte.valor_total.toLocaleString('pt-BR', { minimumFractionDigits: 2 })}\r\n                    </TableCell>\r\n                    <TableCell>{getStatusBadge(cte.status)}</TableCell>\r\n                    <TableCell>\r\n                      <Button variant=\"ghost\" size=\"sm\">\r\n                        <Eye className=\"h-4 w-4\" />\r\n                      </Button>\r\n                    </TableCell>\r\n                  </TableRow>\r\n                ))}\r\n              </TableBody>\r\n            </Table>\r\n          )}\r\n        </CardContent>\r\n      </Card>\r\n\r\n      <CTEDialog\r\n        open={dialogOpen}\r\n        onOpenChange={setDialogOpen}\r\n        onSuccess={loadCTEs}\r\n      />\r\n\r\n      <ImportCTEDialog\r\n        open={importDialogOpen}\r\n        onOpenChange={setImportDialogOpen}\r\n        onSuccess={loadCTEs}\r\n      />\r\n\r\n      <EmitirCTEDialog\r\n        open={emitirDialogOpen}\r\n        onOpenChange={setEmitirDialogOpen}\r\n        onSuccess={loadCTEs}\r\n      />\r\n    </>\r\n  );\r\n}\r\n","import { VehicleSelect } from \"@/components/VehicleSelect\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Checkbox } from \"@/components/ui/checkbox\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport { Loader2 } from \"lucide-react\";\r\n\r\ninterface EmitirMDFEDialogProps {\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n  onSuccess: () => void;\r\n}\r\n\r\ninterface CTe {\r\n  id: string;\r\n  numero_cte: string;\r\n  chave_acesso: string;\r\n  remetente_cidade: string;\r\n  destinatario_cidade: string;\r\n  valor_total: number;\r\n  peso_bruto: number;\r\n}\r\n\r\nexport default function EmitirMDFEDialog({ open, onOpenChange, onSuccess }: EmitirMDFEDialogProps) {\r\n  const { toast } = useToast();\r\n  const [loading, setLoading] = useState(false);\r\n  const [ctes, setCtes] = useState<CTe[]>([]);\r\n  const [selectedCtes, setSelectedCtes] = useState<string[]>([]);\r\n  const [formData, setFormData] = useState({\r\n    numero: \"\",\r\n    serie: \"1\",\r\n    uf_inicio: \"PE\",\r\n    uf_fim: \"\",\r\n    ufs_percurso: \"\",\r\n    placa_cavalo: \"\",\r\n    uf_cavalo: \"PE\",\r\n    cpf_motorista: \"\",\r\n    nome_motorista: \"\",\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (open) {\r\n      loadCTes();\r\n    }\r\n  }, [open]);\r\n\r\n  const loadCTes = async () => {\r\n    const { data, error } = await supabase\r\n      .from(\"cte\")\r\n      .select(\"id, numero_cte, chave_acesso, remetente_cidade, destinatario_cidade, valor_total, peso_bruto\")\r\n      .eq(\"status\", \"autorizado\")\r\n      .is(\"trip_id\", null)\r\n      .order(\"created_at\", { ascending: false })\r\n      .limit(50);\r\n\r\n    if (error) {\r\n      console.error(\"Erro ao carregar CT-es:\", error);\r\n      return;\r\n    }\r\n\r\n    setCtes(data || []);\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n\r\n    if (selectedCtes.length === 0) {\r\n      toast({\r\n        title: \"Selecione pelo menos um CT-e\",\r\n        variant: \"destructive\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n\r\n    try {\r\n      const selectedCtesData = ctes.filter((cte) => selectedCtes.includes(cte.id));\r\n      const pesoTotal = selectedCtesData.reduce((sum, cte) => sum + cte.peso_bruto, 0);\r\n      const valorTotal = selectedCtesData.reduce((sum, cte) => sum + cte.valor_total, 0);\r\n\r\n      const { data, error } = await supabase.functions.invoke(\"emitir-mdfe\", {\r\n        body: {\r\n          ...formData,\r\n          quantidade_ctes: selectedCtes.length,\r\n          peso_bruto: pesoTotal,\r\n          valor_carga: valorTotal,\r\n          ctes: selectedCtesData.map((cte) => ({\r\n            chave: cte.chave_acesso,\r\n          })),\r\n          ufs_percurso: formData.ufs_percurso\r\n            .split(\",\")\r\n            .map((uf) => uf.trim().toUpperCase())\r\n            .filter((uf) => uf),\r\n          condutores: [\r\n            {\r\n              cpf: formData.cpf_motorista,\r\n              nome: formData.nome_motorista,\r\n            },\r\n          ],\r\n        },\r\n      });\r\n\r\n      if (error) throw error;\r\n\r\n      if (data.success) {\r\n        toast({\r\n          title: \"MDF-e emitido com sucesso!\",\r\n          description: `Nmero: ${data.numero} | Chave: ${data.chave}`,\r\n        });\r\n        onSuccess();\r\n        onOpenChange(false);\r\n      } else {\r\n        throw new Error(data.error || \"Erro ao emitir MDF-e\");\r\n      }\r\n    } catch (error: any) {\r\n      console.error(\"Erro:\", error);\r\n      toast({\r\n        title: \"Erro ao emitir MDF-e\",\r\n        description: error.message,\r\n        variant: \"destructive\",\r\n      });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const toggleCte = (cteId: string) => {\r\n    setSelectedCtes((prev) => (prev.includes(cteId) ? prev.filter((id) => id !== cteId) : [...prev, cteId]));\r\n  };\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={onOpenChange}>\r\n      <DialogContent className=\"max-w-4xl max-h-[90vh] overflow-y-auto\">\r\n        <DialogHeader>\r\n          <DialogTitle>Emitir MDF-e</DialogTitle>\r\n        </DialogHeader>\r\n\r\n        <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n          {/* Dados Bsicos */}\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"font-semibold\">Dados do MDF-e</h3>\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div>\r\n                <Label>Nmero</Label>\r\n                <Input\r\n                  required\r\n                  value={formData.numero}\r\n                  onChange={(e) => setFormData({ ...formData, numero: e.target.value })}\r\n                  placeholder=\"000001\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>Srie</Label>\r\n                <Input\r\n                  value={formData.serie}\r\n                  onChange={(e) => setFormData({ ...formData, serie: e.target.value })}\r\n                  placeholder=\"1\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Percurso */}\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"font-semibold\">Percurso</h3>\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div>\r\n                <Label>UF Incio</Label>\r\n                <Input\r\n                  required\r\n                  maxLength={2}\r\n                  value={formData.uf_inicio}\r\n                  onChange={(e) => setFormData({ ...formData, uf_inicio: e.target.value.toUpperCase() })}\r\n                  placeholder=\"PE\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>UF Fim</Label>\r\n                <Input\r\n                  required\r\n                  maxLength={2}\r\n                  value={formData.uf_fim}\r\n                  onChange={(e) => setFormData({ ...formData, uf_fim: e.target.value.toUpperCase() })}\r\n                  placeholder=\"SP\"\r\n                />\r\n              </div>\r\n            </div>\r\n            <div>\r\n              <Label>UFs do Percurso (separadas por vrgula)</Label>\r\n              <Input\r\n                value={formData.ufs_percurso}\r\n                onChange={(e) => setFormData({ ...formData, ufs_percurso: e.target.value })}\r\n                placeholder=\"PE,AL,SE,BA,MG,SP\"\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {/* Veculo */}\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"font-semibold\">Veculo de Trao</h3>\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div>\r\n                <Label>Placa</Label>\r\n                <VehicleSelect\r\n                  value={formData.placa_cavalo}\r\n                  onChange={(value) => setFormData({ ...formData, placa_cavalo: value })}\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>UF</Label>\r\n                <Input\r\n                  required\r\n                  maxLength={2}\r\n                  value={formData.uf_cavalo}\r\n                  onChange={(e) => setFormData({ ...formData, uf_cavalo: e.target.value.toUpperCase() })}\r\n                  placeholder=\"PE\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Motorista */}\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"font-semibold\">Condutor</h3>\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div>\r\n                <Label>CPF</Label>\r\n                <Input\r\n                  required\r\n                  value={formData.cpf_motorista}\r\n                  onChange={(e) => setFormData({ ...formData, cpf_motorista: e.target.value })}\r\n                  placeholder=\"000.000.000-00\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>Nome</Label>\r\n                <Input\r\n                  required\r\n                  value={formData.nome_motorista}\r\n                  onChange={(e) => setFormData({ ...formData, nome_motorista: e.target.value })}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* CT-es Disponveis */}\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"font-semibold\">CT-es para Vincular ({selectedCtes.length} selecionados)</h3>\r\n            <div className=\"border rounded-md p-4 max-h-60 overflow-y-auto space-y-2\">\r\n              {ctes.length === 0 ? (\r\n                <p className=\"text-sm text-muted-foreground\">Nenhum CT-e autorizado disponvel</p>\r\n              ) : (\r\n                ctes.map((cte) => (\r\n                  <div key={cte.id} className=\"flex items-center space-x-2 p-2 hover:bg-accent rounded\">\r\n                    <Checkbox checked={selectedCtes.includes(cte.id)} onCheckedChange={() => toggleCte(cte.id)} />\r\n                    <div className=\"flex-1 text-sm\">\r\n                      <div className=\"font-medium\">CT-e {cte.numero_cte}</div>\r\n                      <div className=\"text-muted-foreground\">\r\n                        {cte.remetente_cidade}  {cte.destinatario_cidade} | {cte.peso_bruto}kg | R${\" \"}\r\n                        {cte.valor_total.toFixed(2)}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                ))\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex justify-end gap-2\">\r\n            <Button type=\"button\" variant=\"outline\" onClick={() => onOpenChange(false)}>\r\n              Cancelar\r\n            </Button>\r\n            <Button type=\"submit\" disabled={loading || selectedCtes.length === 0}>\r\n              {loading && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\r\n              Emitir MDF-e\r\n            </Button>\r\n          </div>\r\n        </form>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n","import { useState, useEffect } from \"react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Plus, FileText, CheckCircle, XCircle } from \"lucide-react\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport EmitirMDFEDialog from \"./EmitirMDFEDialog\";\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\r\n\r\ninterface MDFE {\r\n  id: string;\r\n  numero_mdfe: string;\r\n  serie: string;\r\n  chave_acesso: string | null;\r\n  status: string;\r\n  data_emissao: string;\r\n  uf_inicio: string;\r\n  uf_fim: string;\r\n  veiculo_tracao_placa: string;\r\n  quantidade_ctes: number;\r\n  peso_total_kg: number;\r\n  valor_total_carga: number;\r\n}\r\n\r\nexport default function MDFEManagement() {\r\n  const { toast } = useToast();\r\n  const [mdfes, setMdfes] = useState<MDFE[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [emitirDialogOpen, setEmitirDialogOpen] = useState(false);\r\n\r\n  useEffect(() => {\r\n    loadMdfes();\r\n  }, []);\r\n\r\n  const loadMdfes = async () => {\r\n    setLoading(true);\r\n    const { data, error } = await supabase.from(\"mdfe\").select(\"*\").order(\"created_at\", { ascending: false });\r\n\r\n    if (error) {\r\n      console.error(\"Erro ao carregar MDF-es:\", error);\r\n      toast({\r\n        title: \"Erro ao carregar MDF-es\",\r\n        description: error.message,\r\n        variant: \"destructive\",\r\n      });\r\n    } else {\r\n      setMdfes(data || []);\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  const handleEncerrar = async (mdfe: MDFE) => {\r\n    if (!confirm(`Confirma o encerramento do MDF-e ${mdfe.numero_mdfe}?`)) return;\r\n\r\n    const municipio = prompt(\"Municpio de encerramento:\");\r\n    if (!municipio) return;\r\n\r\n    try {\r\n      const { data, error } = await supabase.functions.invoke(\"encerrar-mdfe\", {\r\n        body: {\r\n          mdfe_id: mdfe.id,\r\n          chave_acesso: mdfe.chave_acesso,\r\n          uf_encerramento: mdfe.uf_fim,\r\n          municipio_encerramento: municipio,\r\n        },\r\n      });\r\n\r\n      if (error) throw error;\r\n\r\n      if (data.success) {\r\n        toast({\r\n          title: \"MDF-e encerrado com sucesso!\",\r\n        });\r\n        loadMdfes();\r\n      } else {\r\n        throw new Error(data.error);\r\n      }\r\n    } catch (error: any) {\r\n      toast({\r\n        title: \"Erro ao encerrar MDF-e\",\r\n        description: error.message,\r\n        variant: \"destructive\",\r\n      });\r\n    }\r\n  };\r\n\r\n  const getStatusBadge = (status: string) => {\r\n    const variants: Record<string, \"default\" | \"secondary\" | \"outline\" | \"destructive\"> = {\r\n      autorizado: \"default\",\r\n      processando: \"secondary\",\r\n      encerrado: \"outline\",\r\n      cancelado: \"destructive\",\r\n    };\r\n\r\n    return <Badge variant={variants[status] || \"default\"}>{status.toUpperCase()}</Badge>;\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      <div className=\"flex justify-between items-center\">\r\n        <h2 className=\"text-2xl font-bold\">MDF-e - Manifesto Eletrnico</h2>\r\n        <Button onClick={() => setEmitirDialogOpen(true)}>\r\n          <Plus className=\"mr-2 h-4 w-4\" />\r\n          Emitir MDF-e\r\n        </Button>\r\n      </div>\r\n\r\n      <Card>\r\n        <CardHeader>\r\n          <CardTitle>MDF-es Emitidos</CardTitle>\r\n        </CardHeader>\r\n        <CardContent>\r\n          {loading ? (\r\n            <p>Carregando...</p>\r\n          ) : mdfes.length === 0 ? (\r\n            <p className=\"text-muted-foreground\">Nenhum MDF-e emitido</p>\r\n          ) : (\r\n            <Table>\r\n              <TableHeader>\r\n                <TableRow>\r\n                  <TableHead>Nmero</TableHead>\r\n                  <TableHead>Status</TableHead>\r\n                  <TableHead>Percurso</TableHead>\r\n                  <TableHead>Veculo</TableHead>\r\n                  <TableHead>CT-es</TableHead>\r\n                  <TableHead>Peso</TableHead>\r\n                  <TableHead>Valor</TableHead>\r\n                  <TableHead>Aes</TableHead>\r\n                </TableRow>\r\n              </TableHeader>\r\n              <TableBody>\r\n                {mdfes.map((mdfe) => (\r\n                  <TableRow key={mdfe.id}>\r\n                    <TableCell>\r\n                      <div>\r\n                        <div className=\"font-medium\">\r\n                          {mdfe.numero_mdfe}/{mdfe.serie}\r\n                        </div>\r\n                        <div className=\"text-xs text-muted-foreground\">\r\n                          {new Date(mdfe.data_emissao).toLocaleDateString()}\r\n                        </div>\r\n                      </div>\r\n                    </TableCell>\r\n                    <TableCell>{getStatusBadge(mdfe.status)}</TableCell>\r\n                    <TableCell>\r\n                      {mdfe.uf_inicio}  {mdfe.uf_fim}\r\n                    </TableCell>\r\n                    <TableCell>{mdfe.veiculo_tracao_placa}</TableCell>\r\n                    <TableCell className=\"text-center\">{mdfe.quantidade_ctes}</TableCell>\r\n                    <TableCell>{mdfe.peso_total_kg.toFixed(0)} kg</TableCell>\r\n                    <TableCell>R$ {mdfe.valor_total_carga.toFixed(2)}</TableCell>\r\n                    <TableCell>\r\n                      <div className=\"flex gap-2\">\r\n                        {mdfe.status === \"autorizado\" && (\r\n                          <Button size=\"sm\" variant=\"outline\" onClick={() => handleEncerrar(mdfe)}>\r\n                            <CheckCircle className=\"h-4 w-4 mr-1\" />\r\n                            Encerrar\r\n                          </Button>\r\n                        )}\r\n                        {mdfe.chave_acesso && (\r\n                          <Button\r\n                            size=\"sm\"\r\n                            variant=\"ghost\"\r\n                            onClick={() => {\r\n                              navigator.clipboard.writeText(mdfe.chave_acesso!);\r\n                              toast({ title: \"Chave copiada!\" });\r\n                            }}\r\n                          >\r\n                            <FileText className=\"h-4 w-4\" />\r\n                          </Button>\r\n                        )}\r\n                      </div>\r\n                    </TableCell>\r\n                  </TableRow>\r\n                ))}\r\n              </TableBody>\r\n            </Table>\r\n          )}\r\n        </CardContent>\r\n      </Card>\r\n\r\n      <EmitirMDFEDialog open={emitirDialogOpen} onOpenChange={setEmitirDialogOpen} onSuccess={loadMdfes} />\r\n    </div>\r\n  );\r\n}\r\n","import { useState, useEffect } from \"react\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogDescription } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { supabase } from \"@/integrations/supabase/client\";\nimport { toast } from \"sonner\";\nimport { Truck, User, Calendar, MapPin, AlertCircle, Sparkles } from \"lucide-react\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { VehicleSelect } from \"@/components/VehicleSelect\";\n\ninterface TripCreationDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  cte: any;\n  onTripCreated: () => void;\n}\n\ninterface Driver {\n  id: string;\n  full_name: string;\n  email: string;\n  available: boolean;\n}\n\nexport const TripCreationDialog = ({ open, onOpenChange, cte, onTripCreated }: TripCreationDialogProps) => {\n  const [loading, setLoading] = useState(false);\n  const [drivers, setDrivers] = useState<Driver[]>([]);\n  const [selectedDriver, setSelectedDriver] = useState(\"\");\n  const [selectedVehicle, setSelectedVehicle] = useState(\"\");\n  const [selectedCarreta, setSelectedCarreta] = useState(\"\");\n  const [estimatedDeparture, setEstimatedDeparture] = useState(\"\");\n  const [estimatedArrival, setEstimatedArrival] = useState(\"\");\n  const [notes, setNotes] = useState(\"\");\n\n  useEffect(() => {\n    if (open) {\n      loadDrivers();\n      // Pre-selecionar veculo sugerido no CT-e\n      if (cte?.placa_veiculo) {\n        setSelectedVehicle(cte.placa_veiculo);\n      }\n      // Sugerir datas\n      const tomorrow = new Date();\n      tomorrow.setDate(tomorrow.getDate() + 1);\n      tomorrow.setHours(8, 0, 0, 0);\n      setEstimatedDeparture(tomorrow.toISOString().slice(0, 16));\n      \n      const arrival = new Date(tomorrow);\n      arrival.setDate(arrival.getDate() + 2);\n      setEstimatedArrival(arrival.toISOString().slice(0, 16));\n    }\n  }, [open, cte]);\n\n  const loadDrivers = async () => {\n    // Buscar motoristas\n    const { data: driversData } = await supabase\n      .from('profiles')\n      .select('id, full_name, email')\n      .order('full_name');\n\n    // Buscar motoristas com role 'driver'\n    const { data: driverRoles } = await supabase\n      .from('user_roles')\n      .select('user_id')\n      .eq('role', 'driver');\n\n    const driverIds = driverRoles?.map(r => r.user_id) || [];\n    const availableDrivers = (driversData || [])\n      .filter(d => driverIds.includes(d.id))\n      .map(d => ({\n        id: d.id,\n        full_name: d.full_name,\n        email: d.email,\n        available: true // Pode verificar viagens ativas\n      }));\n\n    setDrivers(availableDrivers);\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!selectedDriver || !estimatedDeparture || !estimatedArrival) {\n      toast.error('Preencha todos os campos obrigatrios (Motorista e Datas)');\n      return;\n    }\n\n    if (!selectedVehicle) {\n      toast.error('Selecione um veculo (Cavalo Mecnico)');\n      return;\n    }\n\n    setLoading(true);\n\n    try {\n      // Buscar nome do motorista\n      const selectedDriverData = drivers.find(d => d.id === selectedDriver);\n      \n      // Criar viagem\n      const { data: trip, error: tripError } = await supabase\n        .from('trips')\n        .insert({\n          origin: `${cte.remetente_cidade}/${cte.remetente_uf}`,\n          destination: `${cte.destinatario_cidade}/${cte.destinatario_uf}`,\n          driver_id: selectedDriver,\n          driver_name: selectedDriverData?.full_name || 'Motorista',\n          vehicle_plate: selectedVehicle || cte.placa_veiculo || 'SEM-PLACA',\n          status: 'aprovada',\n          estimated_departure: estimatedDeparture,\n          estimated_arrival: estimatedArrival,\n          notes: notes || null,\n        })\n        .select()\n        .single();\n\n      if (tripError) throw tripError;\n\n      // Vincular CT-e  viagem\n      const { error: cteError } = await supabase\n        .from('cte')\n        .update({ trip_id: trip.id })\n        .eq('id', cte.id);\n\n      if (cteError) throw cteError;\n\n      // Criar sesso de trabalho para o motorista\n      await supabase\n        .from('driver_work_sessions')\n        .insert({\n          driver_id: selectedDriver,\n          vehicle_plate: selectedVehicle,\n          trip_id: trip.id,\n          data_inicio: estimatedDeparture,\n          status: 'planejada',\n          tipo_motorista: 'carga'\n        });\n\n      // Criar notificao para o motorista\n      await supabase\n        .from('notifications')\n        .insert({\n          user_id: selectedDriver,\n          title: ' Nova Viagem Atribuda!',\n          message: `Viagem: ${cte.remetente_cidade}/${cte.remetente_uf}  ${cte.destinatario_cidade}/${cte.destinatario_uf}\\n` +\n                   `Veculo: ${selectedVehicle}${selectedCarreta && selectedCarreta !== 'none' ? ` + Carreta ${selectedCarreta}` : ''}\\n` +\n                   `Partida: ${new Date(estimatedDeparture).toLocaleString('pt-BR')}\\n` +\n                   `CT-e: ${cte.numero_cte} - ${cte.produto_predominante}`,\n          type: 'info',\n          module: 'tms',\n          read: false\n        });\n\n      toast.success('Viagem criada com sucesso!', {\n        description: 'O motorista recebeu uma notificao com os detalhes da viagem.'\n      });\n\n      onTripCreated();\n    } catch (error: any) {\n      console.error('Erro ao criar viagem:', error);\n      toast.error('Erro ao criar viagem', {\n        description: error.message\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (!cte) return null;\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle className=\"text-2xl flex items-center gap-2\">\n            <Sparkles className=\"h-6 w-6 text-primary\" />\n            Criar Nova Viagem\n          </DialogTitle>\n          <DialogDescription>\n            Configure os detalhes da viagem para o CT-e {cte.numero_cte}\n          </DialogDescription>\n        </DialogHeader>\n\n        <form onSubmit={handleSubmit} className=\"space-y-6\">\n          {/* Informaes do CT-e */}\n          <div className=\"p-4 bg-primary/5 rounded-lg border border-primary/20\">\n            <h3 className=\"font-semibold mb-3 flex items-center gap-2\">\n              <MapPin className=\"h-4 w-4\" />\n              Rota do CT-e\n            </h3>\n            <div className=\"grid grid-cols-2 gap-4 text-sm\">\n              <div>\n                <p className=\"text-muted-foreground\">Origem</p>\n                <p className=\"font-semibold\">{cte.remetente_cidade}/{cte.remetente_uf}</p>\n              </div>\n              <div>\n                <p className=\"text-muted-foreground\">Destino</p>\n                <p className=\"font-semibold\">{cte.destinatario_cidade}/{cte.destinatario_uf}</p>\n              </div>\n              <div>\n                <p className=\"text-muted-foreground\">Produto</p>\n                <p className=\"font-semibold\">{cte.produto_predominante}</p>\n              </div>\n              <div>\n                <p className=\"text-muted-foreground\">Valor</p>\n                <p className=\"font-semibold text-green-600\">\n                  R$ {cte.valor_total.toLocaleString('pt-BR', { minimumFractionDigits: 2 })}\n                </p>\n              </div>\n            </div>\n          </div>\n\n          {/* Seleo de Motorista */}\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"driver\" className=\"flex items-center gap-2\">\n              <User className=\"h-4 w-4\" />\n              Motorista *\n            </Label>\n            <Select value={selectedDriver} onValueChange={setSelectedDriver} required>\n              <SelectTrigger id=\"driver\">\n                <SelectValue placeholder=\"Selecione um motorista\" />\n              </SelectTrigger>\n              <SelectContent>\n                {drivers.length === 0 ? (\n                  <div className=\"p-4 text-center text-sm text-muted-foreground\">\n                    <AlertCircle className=\"h-8 w-8 mx-auto mb-2 opacity-50\" />\n                    Nenhum motorista cadastrado\n                  </div>\n                ) : (\n                  drivers.map((driver) => (\n                    <SelectItem key={driver.id} value={driver.id}>\n                      <div className=\"flex items-center justify-between w-full\">\n                        <span>{driver.full_name}</span>\n                        {driver.available && (\n                          <Badge variant=\"outline\" className=\"ml-2 bg-green-500/10 text-green-600\">\n                            Disponvel\n                          </Badge>\n                        )}\n                      </div>\n                    </SelectItem>\n                  ))\n                )}\n              </SelectContent>\n            </Select>\n          </div>\n\n          {/* Seleo de Veculo (Cavalo) */}\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"vehicle\" className=\"flex items-center gap-2\">\n              <Truck className=\"h-4 w-4\" />\n              Veculo (Cavalo Mecnico) *\n            </Label>\n            <VehicleSelect \n              value={selectedVehicle} \n              onChange={setSelectedVehicle}\n              placeholder=\"Selecione um cavalo mecnico\"\n              filter={(v) => v.type?.toLowerCase() === 'cavalo' || v.type?.toLowerCase() === 'caminho'}\n            />\n          </div>\n\n          {/* Seleo de Carreta */}\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"carreta\" className=\"flex items-center gap-2\">\n              <Truck className=\"h-4 w-4\" />\n              Carreta (Opcional)\n            </Label>\n            <VehicleSelect \n              value={selectedCarreta} \n              onChange={setSelectedCarreta}\n              placeholder=\"Selecione uma carreta (se aplicvel)\"\n              filter={(v) => v.type?.toLowerCase() === 'carreta' || v.type?.toLowerCase() === 'reboque'}\n            />\n          </div>\n\n          {/* Datas */}\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"departure\" className=\"flex items-center gap-2\">\n                <Calendar className=\"h-4 w-4\" />\n                Partida Prevista *\n              </Label>\n              <Input\n                id=\"departure\"\n                type=\"datetime-local\"\n                value={estimatedDeparture}\n                onChange={(e) => setEstimatedDeparture(e.target.value)}\n                required\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"arrival\" className=\"flex items-center gap-2\">\n                <Calendar className=\"h-4 w-4\" />\n                Chegada Prevista *\n              </Label>\n              <Input\n                id=\"arrival\"\n                type=\"datetime-local\"\n                value={estimatedArrival}\n                onChange={(e) => setEstimatedArrival(e.target.value)}\n                required\n              />\n            </div>\n          </div>\n\n          {/* Observaes */}\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"notes\">Observaes</Label>\n            <Textarea\n              id=\"notes\"\n              value={notes}\n              onChange={(e) => setNotes(e.target.value)}\n              placeholder=\"Instrues especiais, pontos de ateno, etc.\"\n              rows={3}\n            />\n          </div>\n\n          {/* Botes */}\n          <div className=\"flex gap-2 justify-end pt-4 border-t\">\n            <Button\n              type=\"button\"\n              variant=\"outline\"\n              onClick={() => onOpenChange(false)}\n              disabled={loading}\n            >\n              Cancelar\n            </Button>\n            <Button\n              type=\"submit\"\n              disabled={loading}\n              className=\"bg-gradient-to-r from-primary to-primary/80\"\n            >\n              {loading ? 'Criando...' : 'Criar Viagem'}\n            </Button>\n          </div>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n};\n","import { useState, useEffect } from \"react\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport { Package, Truck, MapPin, Clock, CheckCircle, AlertCircle, Navigation } from \"lucide-react\";\r\nimport { TripCreationDialog } from \"./TripCreationDialog\";\r\nimport { toast } from \"sonner\";\r\n\r\ninterface CTEData {\r\n  id: string;\r\n  numero_cte: string;\r\n  remetente_nome: string;\r\n  remetente_cidade: string;\r\n  remetente_uf: string;\r\n  destinatario_nome: string;\r\n  destinatario_cidade: string;\r\n  destinatario_uf: string;\r\n  produto_predominante: string;\r\n  peso_bruto: number;\r\n  valor_total: number;\r\n  placa_veiculo: string;\r\n  status: string;\r\n  trip_id: string | null;\r\n}\r\n\r\ninterface TripData {\r\n  id: string;\r\n  origin: string;\r\n  destination: string;\r\n  driver_id: string;\r\n  vehicle_plate: string;\r\n  status: string;\r\n  estimated_departure: string;\r\n  estimated_arrival: string;\r\n  notes: string | null;\r\n  created_at: string;\r\n  driver?: {\r\n    full_name: string;\r\n    email: string;\r\n  };\r\n  ctes?: CTEData[];\r\n}\r\n\r\nexport const TripManagement = () => {\r\n  const [availableCTEs, setAvailableCTEs] = useState<CTEData[]>([]);\r\n  const [activeTrips, setActiveTrips] = useState<TripData[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [selectedCTE, setSelectedCTE] = useState<CTEData | null>(null);\r\n  const [showTripDialog, setShowTripDialog] = useState(false);\r\n\r\n  useEffect(() => {\r\n    loadData();\r\n  }, []);\r\n\r\n  const loadData = async () => {\r\n    setLoading(true);\r\n    await Promise.all([loadAvailableCTEs(), loadActiveTrips()]);\r\n    setLoading(false);\r\n  };\r\n\r\n  const loadAvailableCTEs = async () => {\r\n    const { data, error } = await supabase\r\n      .from('cte')\r\n      .select('*')\r\n      .is('trip_id', null)\r\n      .in('status', ['emitido', 'autorizado'])\r\n      .order('data_emissao', { ascending: false });\r\n\r\n    if (error) {\r\n      toast.error('Erro ao carregar CT-es disponveis');\r\n      return;\r\n    }\r\n\r\n    setAvailableCTEs(data || []);\r\n  };\r\n\r\n  const loadActiveTrips = async () => {\r\n    const { data: trips, error } = await supabase\r\n      .from('trips')\r\n      .select(`\r\n        *,\r\n        profiles:driver_id (full_name, email)\r\n      `)\r\n      .in('status', ['aprovada', 'em_andamento', 'planejada'])\r\n      .order('created_at', { ascending: false });\r\n\r\n    if (error) {\r\n      toast.error('Erro ao carregar viagens');\r\n      return;\r\n    }\r\n\r\n    // Carregar CT-es de cada viagem\r\n    const tripsWithCTEs = await Promise.all(\r\n      (trips || []).map(async (trip) => {\r\n        const { data: ctes } = await supabase\r\n          .from('cte')\r\n          .select('*')\r\n          .eq('trip_id', trip.id);\r\n\r\n        return {\r\n          ...trip,\r\n          driver: Array.isArray(trip.profiles) ? trip.profiles[0] : trip.profiles,\r\n          ctes: ctes || []\r\n        };\r\n      })\r\n    );\r\n\r\n    setActiveTrips(tripsWithCTEs);\r\n  };\r\n\r\n  const handleCreateTrip = (cte: CTEData) => {\r\n    setSelectedCTE(cte);\r\n    setShowTripDialog(true);\r\n  };\r\n\r\n  const handleTripCreated = () => {\r\n    setShowTripDialog(false);\r\n    setSelectedCTE(null);\r\n    loadData();\r\n    toast.success('Viagem criada! O motorista j pode visualizar no app.');\r\n  };\r\n\r\n  const getStatusColor = (status: string) => {\r\n    const colors = {\r\n      planejada: 'bg-blue-500/20 text-blue-600 border-blue-500/30',\r\n      aprovada: 'bg-green-500/20 text-green-600 border-green-500/30',\r\n      em_andamento: 'bg-purple-500/20 text-purple-600 border-purple-500/30',\r\n      concluida: 'bg-gray-500/20 text-gray-600 border-gray-500/30',\r\n    };\r\n    return colors[status as keyof typeof colors] || 'bg-gray-500/20 text-gray-600';\r\n  };\r\n\r\n  const calculateDistance = (origin: string, destination: string) => {\r\n    // Simulao - em produo usar API de mapas\r\n    return Math.floor(Math.random() * 800) + 200;\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Tabs defaultValue=\"available\" className=\"w-full\">\r\n        <TabsList className=\"grid w-full grid-cols-2\">\r\n          <TabsTrigger value=\"available\" className=\"gap-2\">\r\n            <Package className=\"h-4 w-4\" />\r\n            CT-es Disponveis\r\n            {availableCTEs.length > 0 && (\r\n              <Badge variant=\"secondary\" className=\"ml-2\">{availableCTEs.length}</Badge>\r\n            )}\r\n          </TabsTrigger>\r\n          <TabsTrigger value=\"active\" className=\"gap-2\">\r\n            <Truck className=\"h-4 w-4\" />\r\n            Viagens Ativas\r\n            {activeTrips.length > 0 && (\r\n              <Badge variant=\"secondary\" className=\"ml-2\">{activeTrips.length}</Badge>\r\n            )}\r\n          </TabsTrigger>\r\n        </TabsList>\r\n\r\n        <TabsContent value=\"available\" className=\"space-y-4 mt-6\">\r\n          <div className=\"flex items-center justify-between mb-4\">\r\n            <div>\r\n              <h3 className=\"text-lg font-semibold\">CT-es Aguardando Alocao</h3>\r\n              <p className=\"text-sm text-muted-foreground\">\r\n                Selecione um CT-e para criar uma viagem\r\n              </p>\r\n            </div>\r\n          </div>\r\n\r\n          {loading ? (\r\n            <div className=\"text-center py-12 text-muted-foreground\">\r\n              Carregando CT-es...\r\n            </div>\r\n          ) : availableCTEs.length === 0 ? (\r\n            <Card className=\"border-dashed\">\r\n              <CardContent className=\"flex flex-col items-center justify-center py-12 text-center\">\r\n                <Package className=\"h-12 w-12 text-muted-foreground mb-4 opacity-50\" />\r\n                <h3 className=\"font-semibold text-lg mb-2\">Nenhum CT-e disponvel</h3>\r\n                <p className=\"text-sm text-muted-foreground max-w-sm\">\r\n                  Todos os CT-es emitidos j foram alocados para viagens ou no h CT-es cadastrados.\r\n                </p>\r\n              </CardContent>\r\n            </Card>\r\n          ) : (\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4\">\r\n              {availableCTEs.map((cte) => (\r\n                <Card key={cte.id} className=\"hover:shadow-lg transition-all duration-300 border-2 hover:border-primary/50\">\r\n                  <CardHeader className=\"pb-3\">\r\n                    <div className=\"flex items-start justify-between\">\r\n                      <div className=\"space-y-1\">\r\n                        <CardTitle className=\"text-lg flex items-center gap-2\">\r\n                          <Package className=\"h-5 w-5 text-primary\" />\r\n                          CT-e {cte.numero_cte}\r\n                        </CardTitle>\r\n                        <Badge variant=\"outline\" className=\"bg-blue-500/10 text-blue-600 border-blue-500/30\">\r\n                          {cte.status === 'emitido' ? 'Emitido' : 'Autorizado'}\r\n                        </Badge>\r\n                      </div>\r\n                      <Button \r\n                        onClick={() => handleCreateTrip(cte)}\r\n                        className=\"bg-gradient-to-r from-primary to-primary/80\"\r\n                      >\r\n                        <Truck className=\"mr-2 h-4 w-4\" />\r\n                        Criar Viagem\r\n                      </Button>\r\n                    </div>\r\n                  </CardHeader>\r\n                  <CardContent className=\"space-y-4\">\r\n                    {/* Rota */}\r\n                    <div className=\"space-y-2 p-3 bg-muted/30 rounded-lg\">\r\n                      <div className=\"flex items-start gap-2\">\r\n                        <MapPin className=\"h-5 w-5 text-green-600 mt-0.5 flex-shrink-0\" />\r\n                        <div className=\"flex-1 min-w-0\">\r\n                          <p className=\"font-semibold text-sm truncate\">{cte.remetente_nome}</p>\r\n                          <p className=\"text-xs text-muted-foreground\">\r\n                            {cte.remetente_cidade}/{cte.remetente_uf}\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n                      \r\n                      <div className=\"flex items-center gap-2 pl-2\">\r\n                        <div className=\"h-8 w-px bg-gradient-to-b from-green-600 to-red-600\" />\r\n                        <span className=\"text-xs text-muted-foreground\">\r\n                          ~{calculateDistance(cte.remetente_cidade, cte.destinatario_cidade)} km\r\n                        </span>\r\n                      </div>\r\n\r\n                      <div className=\"flex items-start gap-2\">\r\n                        <MapPin className=\"h-5 w-5 text-red-600 mt-0.5 flex-shrink-0\" />\r\n                        <div className=\"flex-1 min-w-0\">\r\n                          <p className=\"font-semibold text-sm truncate\">{cte.destinatario_nome}</p>\r\n                          <p className=\"text-xs text-muted-foreground\">\r\n                            {cte.destinatario_cidade}/{cte.destinatario_uf}\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* Detalhes da Carga */}\r\n                    <div className=\"grid grid-cols-2 gap-3\">\r\n                      <div className=\"p-2 bg-primary/5 rounded-lg\">\r\n                        <p className=\"text-xs text-muted-foreground\">Produto</p>\r\n                        <p className=\"font-semibold text-sm truncate\">{cte.produto_predominante}</p>\r\n                      </div>\r\n                      <div className=\"p-2 bg-primary/5 rounded-lg\">\r\n                        <p className=\"text-xs text-muted-foreground\">Veculo Sugerido</p>\r\n                        <p className=\"font-semibold text-sm font-mono\">{cte.placa_veiculo}</p>\r\n                      </div>\r\n                      <div className=\"p-2 bg-primary/5 rounded-lg\">\r\n                        <p className=\"text-xs text-muted-foreground\">Peso</p>\r\n                        <p className=\"font-semibold text-sm\">{cte.peso_bruto.toLocaleString('pt-BR')} kg</p>\r\n                      </div>\r\n                      <div className=\"p-2 bg-green-500/10 rounded-lg\">\r\n                        <p className=\"text-xs text-muted-foreground\">Valor</p>\r\n                        <p className=\"font-semibold text-sm text-green-600\">\r\n                          R$ {cte.valor_total.toLocaleString('pt-BR', { minimumFractionDigits: 2 })}\r\n                        </p>\r\n                      </div>\r\n                    </div>\r\n                  </CardContent>\r\n                </Card>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </TabsContent>\r\n\r\n        <TabsContent value=\"active\" className=\"space-y-4 mt-6\">\r\n          <div className=\"flex items-center justify-between mb-4\">\r\n            <div>\r\n              <h3 className=\"text-lg font-semibold\">Viagens em Operao</h3>\r\n              <p className=\"text-sm text-muted-foreground\">\r\n                Acompanhe todas as viagens planejadas e em andamento\r\n              </p>\r\n            </div>\r\n          </div>\r\n\r\n          {loading ? (\r\n            <div className=\"text-center py-12 text-muted-foreground\">\r\n              Carregando viagens...\r\n            </div>\r\n          ) : activeTrips.length === 0 ? (\r\n            <Card className=\"border-dashed\">\r\n              <CardContent className=\"flex flex-col items-center justify-center py-12 text-center\">\r\n                <Truck className=\"h-12 w-12 text-muted-foreground mb-4 opacity-50\" />\r\n                <h3 className=\"font-semibold text-lg mb-2\">Nenhuma viagem ativa</h3>\r\n                <p className=\"text-sm text-muted-foreground max-w-sm\">\r\n                  Crie viagens a partir dos CT-es disponveis para comear o acompanhamento.\r\n                </p>\r\n              </CardContent>\r\n            </Card>\r\n          ) : (\r\n            <div className=\"space-y-4\">\r\n              {activeTrips.map((trip) => (\r\n                <Card key={trip.id} className=\"hover:shadow-lg transition-all duration-300\">\r\n                  <CardHeader className=\"pb-3\">\r\n                    <div className=\"flex items-start justify-between\">\r\n                      <div className=\"space-y-2\">\r\n                        <div className=\"flex items-center gap-3\">\r\n                          <CardTitle className=\"text-lg flex items-center gap-2\">\r\n                            <Truck className=\"h-5 w-5 text-primary\" />\r\n                            {trip.origin}  {trip.destination}\r\n                          </CardTitle>\r\n                          <Badge className={getStatusColor(trip.status)}>\r\n                            {trip.status === 'planejada' ? 'Planejada' :\r\n                             trip.status === 'aprovada' ? 'Aprovada' :\r\n                             trip.status === 'em_andamento' ? 'Em Andamento' : 'Concluda'}\r\n                          </Badge>\r\n                        </div>\r\n                        <div className=\"flex items-center gap-4 text-sm text-muted-foreground\">\r\n                          <span className=\"flex items-center gap-1\">\r\n                            <Truck className=\"h-4 w-4\" />\r\n                            {trip.vehicle_plate}\r\n                          </span>\r\n                          {trip.driver && (\r\n                            <span className=\"flex items-center gap-1\">\r\n                               {trip.driver.full_name}\r\n                            </span>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </CardHeader>\r\n                  <CardContent className=\"space-y-4\">\r\n                    {/* Timeline */}\r\n                    <div className=\"grid grid-cols-2 gap-4 p-3 bg-muted/30 rounded-lg\">\r\n                      <div>\r\n                        <p className=\"text-xs text-muted-foreground mb-1\">Partida Prevista</p>\r\n                        <p className=\"font-semibold text-sm flex items-center gap-1\">\r\n                          <Clock className=\"h-4 w-4\" />\r\n                          {new Date(trip.estimated_departure).toLocaleString('pt-BR')}\r\n                        </p>\r\n                      </div>\r\n                      <div>\r\n                        <p className=\"text-xs text-muted-foreground mb-1\">Chegada Prevista</p>\r\n                        <p className=\"font-semibold text-sm flex items-center gap-1\">\r\n                          <Clock className=\"h-4 w-4\" />\r\n                          {new Date(trip.estimated_arrival).toLocaleString('pt-BR')}\r\n                        </p>\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* CT-es Vinculados */}\r\n                    {trip.ctes && trip.ctes.length > 0 && (\r\n                      <div>\r\n                        <p className=\"text-sm font-semibold mb-2 flex items-center gap-2\">\r\n                          <Package className=\"h-4 w-4\" />\r\n                          CT-es Vinculados ({trip.ctes.length})\r\n                        </p>\r\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-2\">\r\n                          {trip.ctes.map((cte) => (\r\n                            <div key={cte.id} className=\"p-2 bg-primary/5 rounded border border-primary/20\">\r\n                              <div className=\"flex items-center justify-between\">\r\n                                <span className=\"text-xs font-mono font-semibold\">{cte.numero_cte}</span>\r\n                                <Badge variant=\"outline\" className=\"text-xs\">\r\n                                  R$ {cte.valor_total.toLocaleString('pt-BR', { minimumFractionDigits: 2 })}\r\n                                </Badge>\r\n                              </div>\r\n                              <p className=\"text-xs text-muted-foreground mt-1 truncate\">\r\n                                {cte.produto_predominante}\r\n                              </p>\r\n                            </div>\r\n                          ))}\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n\r\n                    {trip.notes && (\r\n                      <div className=\"p-2 bg-blue-500/5 rounded border border-blue-500/20\">\r\n                        <p className=\"text-xs text-muted-foreground\">Observaes</p>\r\n                        <p className=\"text-sm\">{trip.notes}</p>\r\n                      </div>\r\n                    )}\r\n\r\n                    {/* Aes */}\r\n                    <div className=\"flex gap-2\">\r\n                      <Button variant=\"outline\" className=\"flex-1\" size=\"sm\">\r\n                        <Navigation className=\"mr-2 h-4 w-4\" />\r\n                        Ver Rastreamento\r\n                      </Button>\r\n                      {trip.status === 'planejada' && (\r\n                        <Button \r\n                          className=\"flex-1 bg-green-600 hover:bg-green-700\" \r\n                          size=\"sm\"\r\n                          onClick={async () => {\r\n                            await supabase\r\n                              .from('trips')\r\n                              .update({ status: 'aprovada' })\r\n                              .eq('id', trip.id);\r\n                            loadData();\r\n                            toast.success('Viagem aprovada!');\r\n                          }}\r\n                        >\r\n                          <CheckCircle className=\"mr-2 h-4 w-4\" />\r\n                          Aprovar\r\n                        </Button>\r\n                      )}\r\n                    </div>\r\n                  </CardContent>\r\n                </Card>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </TabsContent>\r\n      </Tabs>\r\n\r\n      <TripCreationDialog\r\n        open={showTripDialog}\r\n        onOpenChange={setShowTripDialog}\r\n        cte={selectedCTE}\r\n        onTripCreated={handleTripCreated}\r\n      />\r\n    </>\r\n  );\r\n};\r\n","import { useState, useEffect } from \"react\";\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { VehicleSelect } from \"@/components/VehicleSelect\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport { toast } from \"sonner\";\r\nimport { Loader2 } from \"lucide-react\";\r\n\r\ninterface OrdemColetaDialogProps {\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n  ordem?: any;\r\n  onSuccess?: () => void;\r\n}\r\n\r\nexport function OrdemColetaDialog({ open, onOpenChange, ordem, onSuccess }: OrdemColetaDialogProps) {\r\n  const [loading, setLoading] = useState(false);\r\n  const [formData, setFormData] = useState({\r\n    numero_ordem: '',\r\n    fornecedor_nome: '',\r\n    fornecedor_cidade: '',\r\n    fornecedor_uf: '',\r\n    cliente_nome: '',\r\n    cliente_cnpj: '',\r\n    motorista_nome: '',\r\n    motorista_telefone: '',\r\n    placa_cavalo: '',\r\n    placa_carreta: '',\r\n    capacidade_carreta: '',\r\n    produto: '',\r\n    pedido_venda: ''\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (open) {\r\n      if (ordem) {\r\n        setFormData({\r\n          numero_ordem: ordem.numero_ordem || '',\r\n          fornecedor_nome: ordem.fornecedor_nome || '',\r\n          fornecedor_cidade: ordem.fornecedor_cidade || '',\r\n          fornecedor_uf: ordem.fornecedor_uf || '',\r\n          cliente_nome: ordem.cliente_nome || '',\r\n          cliente_cnpj: ordem.cliente_cnpj || '',\r\n          motorista_nome: ordem.motorista_nome || '',\r\n          motorista_telefone: ordem.motorista_telefone || '',\r\n          placa_cavalo: ordem.placa_cavalo || '',\r\n          placa_carreta: ordem.placa_carreta || '',\r\n          capacidade_carreta: ordem.capacidade_carreta || '',\r\n          produto: ordem.produto || '',\r\n          pedido_venda: ordem.pedido_venda || ''\r\n        });\r\n      } else {\r\n        generateNumeroOrdem();\r\n      }\r\n    }\r\n  }, [open, ordem]);\r\n\r\n  const generateNumeroOrdem = () => {\r\n    const now = new Date();\r\n    const numero = `OC-${now.getFullYear()}${String(now.getMonth() + 1).padStart(2, '0')}${String(now.getDate()).padStart(2, '0')}-${Math.floor(Math.random() * 10000).toString().padStart(4, '0')}`;\r\n    setFormData(prev => ({ ...prev, numero_ordem: numero }));\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n\r\n    try {\r\n      const { data: { user } } = await supabase.auth.getUser();\r\n      \r\n      if (ordem) {\r\n        const { error } = await supabase\r\n          .from('ordem_coleta')\r\n          .update(formData)\r\n          .eq('id', ordem.id);\r\n        \r\n        if (error) throw error;\r\n        toast.success('Ordem de coleta atualizada!');\r\n      } else {\r\n        const { error } = await supabase\r\n          .from('ordem_coleta')\r\n          .insert({ ...formData, created_by: user?.id });\r\n        \r\n        if (error) throw error;\r\n        toast.success('Ordem de coleta criada!');\r\n      }\r\n\r\n      onSuccess?.();\r\n      onOpenChange(false);\r\n    } catch (error: any) {\r\n      console.error('Erro:', error);\r\n      toast.error(error.message || 'Erro ao salvar ordem de coleta');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={onOpenChange}>\r\n      <DialogContent className=\"max-w-3xl max-h-[90vh] overflow-y-auto\">\r\n        <DialogHeader>\r\n          <DialogTitle>{ordem ? 'Editar' : 'Nova'} Ordem de Coleta</DialogTitle>\r\n        </DialogHeader>\r\n        \r\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n          <div className=\"grid grid-cols-2 gap-4\">\r\n            <div>\r\n              <Label>Nmero da Ordem</Label>\r\n              <Input value={formData.numero_ordem} onChange={e => setFormData({...formData, numero_ordem: e.target.value})} required />\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"space-y-2\">\r\n            <h3 className=\"font-semibold\">Fornecedor</h3>\r\n            <div className=\"grid grid-cols-3 gap-4\">\r\n              <div className=\"col-span-2\">\r\n                <Label>Nome</Label>\r\n                <Input value={formData.fornecedor_nome} onChange={e => setFormData({...formData, fornecedor_nome: e.target.value})} required />\r\n              </div>\r\n              <div>\r\n                <Label>Cidade</Label>\r\n                <Input value={formData.fornecedor_cidade} onChange={e => setFormData({...formData, fornecedor_cidade: e.target.value})} />\r\n              </div>\r\n              <div>\r\n                <Label>UF</Label>\r\n                <Input value={formData.fornecedor_uf} onChange={e => setFormData({...formData, fornecedor_uf: e.target.value})} maxLength={2} />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"space-y-2\">\r\n            <h3 className=\"font-semibold\">Destino / Cliente</h3>\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div>\r\n                <Label>Nome</Label>\r\n                <Input value={formData.cliente_nome} onChange={e => setFormData({...formData, cliente_nome: e.target.value})} required />\r\n              </div>\r\n              <div>\r\n                <Label>CNPJ</Label>\r\n                <Input value={formData.cliente_cnpj} onChange={e => setFormData({...formData, cliente_cnpj: e.target.value})} required />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"space-y-2\">\r\n            <h3 className=\"font-semibold\">Motorista</h3>\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div>\r\n                <Label>Nome</Label>\r\n                <Input value={formData.motorista_nome} onChange={e => setFormData({...formData, motorista_nome: e.target.value})} required />\r\n              </div>\r\n              <div>\r\n                <Label>Telefone</Label>\r\n                <Input value={formData.motorista_telefone} onChange={e => setFormData({...formData, motorista_telefone: e.target.value})} />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"space-y-2\">\r\n            <h3 className=\"font-semibold\">Veculos</h3>\r\n            <div className=\"grid grid-cols-3 gap-4\">\r\n              <div>\r\n                <Label>Placa Cavalo</Label>\r\n                <VehicleSelect \r\n                  value={formData.placa_cavalo} \r\n                  onChange={v => setFormData({...formData, placa_cavalo: v})}\r\n                  filter={v => v.type === 'caminhao' || v.type === 'cavalo'}\r\n                  placeholder=\"Selecione\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>Placa Carreta</Label>\r\n                <VehicleSelect \r\n                  value={formData.placa_carreta} \r\n                  onChange={v => setFormData({...formData, placa_carreta: v})}\r\n                  filter={v => v.type === 'carreta' || v.type === 'reboque'}\r\n                  placeholder=\"Selecione\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>Capacidade</Label>\r\n                <Input value={formData.capacidade_carreta} onChange={e => setFormData({...formData, capacidade_carreta: e.target.value})} placeholder=\"Ex: 24.000 LT - 36 TON\" />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"grid grid-cols-2 gap-4\">\r\n            <div>\r\n              <Label>Produto</Label>\r\n              <Input value={formData.produto} onChange={e => setFormData({...formData, produto: e.target.value})} required />\r\n            </div>\r\n            <div>\r\n              <Label>Pedido de Venda</Label>\r\n              <Input value={formData.pedido_venda} onChange={e => setFormData({...formData, pedido_venda: e.target.value})} />\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex justify-end gap-2\">\r\n            <Button type=\"button\" variant=\"outline\" onClick={() => onOpenChange(false)}>Cancelar</Button>\r\n            <Button type=\"submit\" disabled={loading}>\r\n              {loading && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\r\n              {ordem ? 'Atualizar' : 'Criar'}\r\n            </Button>\r\n          </div>\r\n        </form>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}","import { useState, useEffect } from \"react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Card } from \"@/components/ui/card\";\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport { toast } from \"sonner\";\r\nimport { Plus, Search, FileText, Download } from \"lucide-react\";\r\nimport { OrdemColetaDialog } from \"./OrdemColetaDialog\";\r\nimport { format } from \"date-fns\";\r\n\r\nexport function OrdemColetaManagement() {\r\n  const [ordens, setOrdens] = useState<any[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [searchTerm, setSearchTerm] = useState(\"\");\r\n  const [dialogOpen, setDialogOpen] = useState(false);\r\n  const [selectedOrdem, setSelectedOrdem] = useState<any>(null);\r\n\r\n  useEffect(() => {\r\n    loadOrdens();\r\n  }, []);\r\n\r\n  const loadOrdens = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from('ordem_coleta')\r\n        .select('*')\r\n        .order('data_emissao', { ascending: false });\r\n\r\n      if (error) throw error;\r\n      setOrdens(data || []);\r\n    } catch (error: any) {\r\n      toast.error('Erro ao carregar ordens de coleta');\r\n      console.error(error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleGeneratePDF = async (ordem: any) => {\r\n    try {\r\n      toast.info('Gerando PDF...');\r\n      \r\n      const { data, error } = await supabase.functions.invoke('generate-ordem-coleta-pdf', {\r\n        body: { ordem_id: ordem.id }\r\n      });\r\n\r\n      if (error) throw error;\r\n\r\n      // Criar um elemento temporrio para renderizar o HTML\r\n      const printWindow = window.open('', '_blank');\r\n      if (printWindow) {\r\n        printWindow.document.write(data.html);\r\n        printWindow.document.close();\r\n        printWindow.focus();\r\n        \r\n        // Aguardar um pouco para garantir que o contedo foi carregado\r\n        setTimeout(() => {\r\n          printWindow.print();\r\n        }, 250);\r\n      }\r\n      \r\n      toast.success('PDF gerado com sucesso!');\r\n    } catch (error: any) {\r\n      console.error('Erro ao gerar PDF:', error);\r\n      toast.error('Erro ao gerar PDF');\r\n    }\r\n  };\r\n\r\n  const filteredOrdens = ordens.filter(ordem =>\r\n    ordem.numero_ordem?.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n    ordem.cliente_nome?.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n    ordem.motorista_nome?.toLowerCase().includes(searchTerm.toLowerCase())\r\n  );\r\n\r\n  const getStatusBadge = (status: string) => {\r\n    const variants: Record<string, \"default\" | \"secondary\" | \"destructive\" | \"outline\"> = {\r\n      pendente: \"secondary\",\r\n      coletado: \"default\",\r\n      cancelado: \"destructive\"\r\n    };\r\n    return <Badge variant={variants[status] || \"outline\"}>{status}</Badge>;\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <h2 className=\"text-2xl font-bold\">Ordens de Coleta</h2>\r\n        <Button onClick={() => { setSelectedOrdem(null); setDialogOpen(true); }}>\r\n          <Plus className=\"mr-2 h-4 w-4\" />\r\n          Nova Ordem\r\n        </Button>\r\n      </div>\r\n\r\n      <Card className=\"p-4\">\r\n        <div className=\"flex items-center gap-2 mb-4\">\r\n          <Search className=\"h-4 w-4 text-muted-foreground\" />\r\n          <Input\r\n            placeholder=\"Buscar por nmero, cliente ou motorista...\"\r\n            value={searchTerm}\r\n            onChange={(e) => setSearchTerm(e.target.value)}\r\n            className=\"max-w-sm\"\r\n          />\r\n        </div>\r\n\r\n        {loading ? (\r\n          <div className=\"text-center py-8 text-muted-foreground\">Carregando...</div>\r\n        ) : filteredOrdens.length === 0 ? (\r\n          <div className=\"text-center py-8 text-muted-foreground\">\r\n            <FileText className=\"h-12 w-12 mx-auto mb-2 opacity-50\" />\r\n            <p>Nenhuma ordem de coleta encontrada</p>\r\n          </div>\r\n        ) : (\r\n          <Table>\r\n            <TableHeader>\r\n              <TableRow>\r\n                <TableHead>Nmero</TableHead>\r\n                <TableHead>Data</TableHead>\r\n                <TableHead>Cliente</TableHead>\r\n                <TableHead>Motorista</TableHead>\r\n                <TableHead>Placas</TableHead>\r\n                <TableHead>Produto</TableHead>\r\n                <TableHead>Status</TableHead>\r\n                <TableHead>Aes</TableHead>\r\n              </TableRow>\r\n            </TableHeader>\r\n            <TableBody>\r\n              {filteredOrdens.map((ordem) => (\r\n                <TableRow key={ordem.id}>\r\n                  <TableCell className=\"font-medium\">{ordem.numero_ordem}</TableCell>\r\n                  <TableCell>{format(new Date(ordem.data_emissao), 'dd/MM/yyyy')}</TableCell>\r\n                  <TableCell>{ordem.cliente_nome}</TableCell>\r\n                  <TableCell>{ordem.motorista_nome}</TableCell>\r\n                  <TableCell>\r\n                    <div className=\"text-sm\">\r\n                      {ordem.placa_cavalo}\r\n                      {ordem.placa_carreta && ` / ${ordem.placa_carreta}`}\r\n                    </div>\r\n                  </TableCell>\r\n                  <TableCell>{ordem.produto}</TableCell>\r\n                  <TableCell>{getStatusBadge(ordem.status)}</TableCell>\r\n                  <TableCell>\r\n                    <div className=\"flex gap-2\">\r\n                      <Button\r\n                        size=\"sm\"\r\n                        variant=\"outline\"\r\n                        onClick={() => handleGeneratePDF(ordem)}\r\n                      >\r\n                        <Download className=\"h-4 w-4\" />\r\n                      </Button>\r\n                      <Button\r\n                        size=\"sm\"\r\n                        variant=\"ghost\"\r\n                        onClick={() => { setSelectedOrdem(ordem); setDialogOpen(true); }}\r\n                      >\r\n                        Editar\r\n                      </Button>\r\n                    </div>\r\n                  </TableCell>\r\n                </TableRow>\r\n              ))}\r\n            </TableBody>\r\n          </Table>\r\n        )}\r\n      </Card>\r\n\r\n      <OrdemColetaDialog\r\n        open={dialogOpen}\r\n        onOpenChange={setDialogOpen}\r\n        ordem={selectedOrdem}\r\n        onSuccess={loadOrdens}\r\n      />\r\n    </div>\r\n  );\r\n}","import { useEffect, useState } from \"react\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\n\r\nexport function VehicleList() {\r\n  const [vehicles, setVehicles] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    async function loadVehicles() {\r\n      setLoading(true);\r\n\r\n      const { data, error } = await supabase\r\n        .from(\"vehicles\")\r\n        .select(\"*\") //  FIX AQUI  removeu o filtro errado\r\n        .order(\"placa\", { ascending: true });\r\n\r\n      if (error) {\r\n        console.error(\"Erro ao carregar veculos:\", error);\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      setVehicles(data || []);\r\n      setLoading(false);\r\n    }\r\n\r\n    loadVehicles();\r\n  }, []);\r\n\r\n  if (loading) {\r\n    return <p>Carregando veculos...</p>;\r\n  }\r\n\r\n  return (\r\n    <div style={{ padding: \"16px\" }}>\r\n      <h2 style={{ fontSize: \"20px\", marginBottom: \"12px\" }}>Lista de Veculos</h2>\r\n\r\n      {vehicles.length === 0 && <p>Nenhum veculo encontrado.</p>}\r\n\r\n      <ul style={{ listStyle: \"none\", padding: 0 }}>\r\n        {vehicles.map((v) => (\r\n          <li\r\n            key={v.id}\r\n            style={{\r\n              padding: \"12px\",\r\n              marginBottom: \"10px\",\r\n              background: \"#f5f5f5\",\r\n              borderRadius: \"6px\",\r\n            }}\r\n          >\r\n            <strong>Placa:</strong> {v.placa} <br />\r\n            <strong>Tipo:</strong> {v.tipo} <br />\r\n            <strong>Modelo:</strong> {v.modelo} <br />\r\n            <strong>Proprietrio:</strong> {v.proprietario || \"\"}\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n","export function estimateRouteCost(params: { distanceKm: number; avgConsumptionKmPerLiter: number; fuelPricePerLiter: number; tolls?: number; variableCostPerKm?: number; fixedCost?: number }) {\n  const distanceKm = Math.max(0, params.distanceKm || 0);\n  const kmpl = Math.max(0.1, params.avgConsumptionKmPerLiter || 3);\n  const fuelPrice = Math.max(0, params.fuelPricePerLiter || 5);\n  const tolls = Math.max(0, params.tolls || 0);\n  const varPerKm = Math.max(0, params.variableCostPerKm || 0.5);\n  const fixedCost = Math.max(0, params.fixedCost || 0);\n  const liters = distanceKm / kmpl;\n  const fuelCost = liters * fuelPrice;\n  const variableCost = varPerKm * distanceKm;\n  const total = fixedCost + fuelCost + tolls + variableCost;\n  return { total, fuelCost, tolls, variableCost, liters };\n}\n\n","import { useState } from \"react\";\nimport { Card } from \"@/components/ui/card\";\nimport { Input } from \"@/components/ui/input\";\nimport { Button } from \"@/components/ui/button\";\nimport { estimateRouteCost } from \"@/utils/costEstimator\";\n\nexport function CostEstimator() {\n  const [form, setForm] = useState({ distanceKm: \"\", avgConsumptionKmPerLiter: \"3.5\", fuelPricePerLiter: \"6.00\", tolls: \"0\", variableCostPerKm: \"0.50\", fixedCost: \"0\" });\n  const calc = estimateRouteCost({\n    distanceKm: parseFloat(form.distanceKm || \"0\"),\n    avgConsumptionKmPerLiter: parseFloat(form.avgConsumptionKmPerLiter || \"0\"),\n    fuelPricePerLiter: parseFloat(form.fuelPricePerLiter || \"0\"),\n    tolls: parseFloat(form.tolls || \"0\"),\n    variableCostPerKm: parseFloat(form.variableCostPerKm || \"0\"),\n    fixedCost: parseFloat(form.fixedCost || \"0\"),\n  });\n\n  return (\n    <Card className=\"p-4 space-y-3\">\n      <div className=\"font-semibold\">Estimativa de Custo da Rota</div>\n      <div className=\"grid grid-cols-2 md:grid-cols-3 gap-2\">\n        <Input placeholder=\"Distncia (km)\" value={form.distanceKm} onChange={(e)=>setForm({...form, distanceKm: e.target.value})} />\n        <Input placeholder=\"KM/L\" value={form.avgConsumptionKmPerLiter} onChange={(e)=>setForm({...form, avgConsumptionKmPerLiter: e.target.value})} />\n        <Input placeholder=\"Preo/L (R$)\" value={form.fuelPricePerLiter} onChange={(e)=>setForm({...form, fuelPricePerLiter: e.target.value})} />\n        <Input placeholder=\"Pedgios (R$)\" value={form.tolls} onChange={(e)=>setForm({...form, tolls: e.target.value})} />\n        <Input placeholder=\"Var R$/km\" value={form.variableCostPerKm} onChange={(e)=>setForm({...form, variableCostPerKm: e.target.value})} />\n        <Input placeholder=\"Fixo (R$)\" value={form.fixedCost} onChange={(e)=>setForm({...form, fixedCost: e.target.value})} />\n      </div>\n      <div className=\"grid grid-cols-2 md:grid-cols-3 gap-2 text-sm\">\n        <div>Combustvel: R$ {calc.fuelCost.toFixed(2)}  {calc.liters.toFixed(1)} L</div>\n        <div>Pedgios: R$ {calc.tolls.toFixed(2)}</div>\n        <div>Varivel: R$ {calc.variableCost.toFixed(2)}</div>\n        <div className=\"font-bold\">Total: R$ {calc.total.toFixed(2)}</div>\n      </div>\n      <div className=\"flex justify-end\">\n        <Button variant=\"modern\">Aplicar na Viagem</Button>\n      </div>\n    </Card>\n  );\n}\n\n","import { Layout } from \"@/components/Layout\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\r\nimport { \r\n  Truck, \r\n  Clock,\r\n  DollarSign,\r\n  Package,\r\n} from \"lucide-react\";\r\nimport { StatCard } from \"@/components/StatCard\";\r\nimport { CTEManagement } from \"@/components/tms/CTEManagement\";\r\nimport MDFEManagement from \"@/components/tms/MDFEManagement\";\nimport { RevenueAnalysis } from \"@/components/revenue/RevenueAnalysis\";\r\nimport { TripManagement } from \"@/components/tms/TripManagement\";\nimport { OrdemColetaManagement } from \"@/components/tms/OrdemColetaManagement\";\nimport { RouteOptimizer } from \"@/components/tms/RouteOptimizer\";\nimport { VehicleList } from \"@/components/tms/VehicleList\";\nimport { CostEstimator } from \"@/components/tms/CostEstimator\";\n\r\nconst TMS = () => {\r\n  return (\r\n    <Layout>\r\n      <div className=\"space-y-8\">\r\n        <div className=\"space-y-1\">\r\n          <h1 className=\"text-4xl font-bold tracking-tight text-foreground\">TMS - Transport Management</h1>\r\n          <p className=\"text-base text-muted-foreground\">\r\n            Sistema de Gesto de Transportes e Logstica\r\n          </p>\r\n        </div>\r\n\r\n        {/* KPIs */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n          <StatCard \r\n            title=\"Viagens Ativas\" \r\n            value=\"38\" \r\n            icon={Truck}\r\n            trend={{ value: \"+5 hoje\", positive: true }}\r\n          />\r\n          <StatCard \r\n            title=\"Taxa Ocupao\" \r\n            value=\"87%\" \r\n            icon={Package}\r\n            trend={{ value: \"+3% vs ontem\", positive: true }}\r\n          />\r\n          <StatCard \r\n            title=\"Entregas no Prazo\" \r\n            value=\"94.2%\" \r\n            icon={Clock}\r\n          />\r\n          <StatCard \r\n            title=\"Receita Ms\" \r\n            value=\"R$ 485k\" \r\n            icon={DollarSign}\r\n            trend={{ value: \"+12%\", positive: true }}\r\n          />\r\n        </div>\r\n\r\n        {/* Tabs */}\r\n        <Tabs defaultValue=\"trips\" className=\"w-full\">\r\n          <TabsList className=\"grid w-full grid-cols-2 sm:grid-cols-3 lg:grid-cols-7 gap-1\">\r\n            <TabsTrigger value=\"trips\" className=\"text-xs sm:text-sm\">Viagens</TabsTrigger>\r\n            <TabsTrigger value=\"rotas\" className=\"text-xs sm:text-sm\">Rotas</TabsTrigger>\r\n            <TabsTrigger value=\"ordem-coleta\" className=\"text-xs sm:text-sm\">Ordem Coleta</TabsTrigger>\r\n            <TabsTrigger value=\"veiculos\" className=\"text-xs sm:text-sm\">Cavalos</TabsTrigger>\r\n            <TabsTrigger value=\"cte\" className=\"text-xs sm:text-sm\">CT-e</TabsTrigger>\r\n            <TabsTrigger value=\"mdfe\" className=\"text-xs sm:text-sm\">MDF-e</TabsTrigger>\r\n            <TabsTrigger value=\"receita\" className=\"text-xs sm:text-sm\">Receita</TabsTrigger>\r\n          </TabsList>\r\n\r\n          {/* Gesto de Viagens */}\r\n          <TabsContent value=\"trips\">\r\n            <TripManagement />\r\n          </TabsContent>\r\n\r\n          {/* Planejamento de Rotas */}\r\n          <TabsContent value=\"rotas\">\r\n            <RouteOptimizer />\r\n          </TabsContent>\r\n\r\n          {/* Ordem de Coleta */}\r\n          <TabsContent value=\"ordem-coleta\">\r\n            <OrdemColetaManagement />\r\n          </TabsContent>\r\n\r\n          {/* Veculos */}\r\n          <TabsContent value=\"veiculos\">\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle className=\"flex items-center gap-2\">\r\n                  <Truck className=\"h-5 w-5\" />\r\n                  Lista de Cavalos Mecnicos\r\n                </CardTitle>\r\n              </CardHeader>\r\n              <CardContent>\r\n                <VehicleList />\r\n              </CardContent>\r\n            </Card>\r\n          </TabsContent>\r\n\r\n          {/* CT-e */}\n          <TabsContent value=\"cte\">\n            <div className=\"grid gap-4\">\n              <CostEstimator />\n              <CTEManagement />\n            </div>\n          </TabsContent>\n\r\n          {/* MDF-e */}\r\n          <TabsContent value=\"mdfe\">\r\n            <MDFEManagement />\r\n          </TabsContent>\r\n\r\n          {/* Receita */}\r\n          <TabsContent value=\"receita\">\r\n            <RevenueAnalysis />\r\n          </TabsContent>\r\n        </Tabs>\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default TMS;\r\n"],"file":"assets/TMS-CVtrsK1H.js"}