import{a as B,r as o,j as e,aV as U,L as S,b as M,U as O}from"./index-C8gJK6VO.js";import{C as d,a as g,b as h,c as E,d as u}from"./card-XpOOVLWI.js";import{B as x}from"./badge-CRfFogl7.js";import{K as k}from"./key-u4fCcJLw.js";import{C as _}from"./circle-check-big-CG-bN1l7.js";import{C as R}from"./circle-x-CIilYkTJ.js";const c={driver:["dashboard","fleet","tms","driver"],finance:["dashboard","erp","reports","approvals","control-tower","finance","documents"],operations:["dashboard","operations","tms","fleet","approvals","control-tower","documents"],admin:["dashboard","wms","tms","oms","scm","crm","erp","fleet","mechanic","driver","reports","settings","users","approvals","control-tower","inventory","finance","documents","developer","innovation"],commercial:["dashboard","tms","crm"],fleet_maintenance:["dashboard","fleet","mechanic","inventory","documents","approvals"],maintenance_assistant:["dashboard","mechanic","inventory"],logistics_manager:["dashboard","tms","fleet","driver","approvals","reports","control-tower","finance","documents"],maintenance_manager:["dashboard","fleet","mechanic","approvals","reports","control-tower","inventory","documents"]},l={dashboard:{name:"Dashboard",icon:"üìä",category:"Core"},wms:{name:"WMS",icon:"üì¶",category:"Opera√ß√µes"},tms:{name:"TMS",icon:"üöõ",category:"Opera√ß√µes"},oms:{name:"OMS",icon:"üìã",category:"Opera√ß√µes"},scm:{name:"SCM",icon:"‚õìÔ∏è",category:"Opera√ß√µes"},crm:{name:"CRM",icon:"üë•",category:"Comercial"},erp:{name:"ERP",icon:"üíº",category:"Financeiro"},fleet:{name:"Frota",icon:"üöó",category:"Opera√ß√µes"},mechanic:{name:"Mec√¢nica",icon:"üîß",category:"Manuten√ß√£o"},driver:{name:"Motorista",icon:"üë®‚Äç‚úàÔ∏è",category:"Opera√ß√µes"},reports:{name:"Relat√≥rios",icon:"üìà",category:"An√°lise"},settings:{name:"Configura√ß√µes",icon:"‚öôÔ∏è",category:"Sistema"},users:{name:"Usu√°rios",icon:"üë§",category:"Sistema"},approvals:{name:"Aprova√ß√µes",icon:"‚úÖ",category:"Gest√£o"},"control-tower":{name:"Torre de Controle",icon:"üóº",category:"Opera√ß√µes"},inventory:{name:"Estoque",icon:"üìä",category:"Manuten√ß√£o"},finance:{name:"Financeiro",icon:"üí∞",category:"Financeiro"},documents:{name:"Documentos",icon:"üìÑ",category:"Gest√£o"},developer:{name:"Developer",icon:"üíª",category:"Sistema"},innovation:{name:"Inova√ß√£o",icon:"üöÄ",category:"Sistema"},operations:{name:"Opera√ß√µes",icon:"‚ö°",category:"Opera√ß√µes"}},a={admin:{name:"Administrador",color:"bg-red-500",description:"Acesso total ao sistema"},driver:{name:"Motorista",color:"bg-blue-500",description:"Acesso a viagens e rotas"},finance:{name:"Financeiro",color:"bg-green-500",description:"Gest√£o financeira e cont√°bil"},operations:{name:"Opera√ß√µes",color:"bg-purple-500",description:"Gest√£o operacional"},commercial:{name:"Comercial",color:"bg-cyan-500",description:"Vendas e relacionamento"},fleet_maintenance:{name:"Manuten√ß√£o de Frota",color:"bg-orange-500",description:"Manuten√ß√£o e mec√¢nica"},maintenance_assistant:{name:"Assistente de Manuten√ß√£o",color:"bg-yellow-500",description:"Suporte √† manuten√ß√£o"},logistics_manager:{name:"Gestor Log√≠stico",color:"bg-indigo-500",description:"Gest√£o de log√≠stica"},maintenance_manager:{name:"Gerente de Manuten√ß√£o",color:"bg-pink-500",description:"Gest√£o de manuten√ß√£o"}};function F(n){if(!(n.headers.get("content-type")||"").includes("application/json"))throw new Error("Resposta n√£o JSON");return n.json()}const J=()=>{const{hasRole:n,roles:w}=B(),[p,A]=o.useState([]),[b,D]=o.useState([]),[j,y]=o.useState({});if(o.useEffect(()=>{(async()=>{try{const s=await fetch("/api/permissions-matrix"),r=await F(s);A((r.profiles||[]).map(i=>({key:i.key,name:i.name}))),D((r.modules||[]).map(i=>({key:i.key,name:i.name,description:i.description}))),y(r.matrix||{})}catch{}})()},[]),!n("admin"))return e.jsx(U,{to:"/dashboard",replace:!0});const m=p.length>0?p.map(t=>t.key):Object.keys(c),N=b.length>0?b.map(t=>t.key):Array.from(new Set(Object.values(c).flat())),L=Array.from(new Set(Object.values(l).map(t=>t.category)).add("Outros"));return e.jsx(S,{children:e.jsxs("div",{"trae-inspector-start-line":"98","trae-inspector-start-column":"6","trae-inspector-end-line":"214","trae-inspector-end-column":"12","trae-inspector-file-path":"src\\\\pages\\\\Permissions.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"space-y-6",children:[e.jsxs("div",{"trae-inspector-start-line":"99","trae-inspector-start-column":"8","trae-inspector-end-line":"107","trae-inspector-end-column":"14","trae-inspector-file-path":"src\\\\pages\\\\Permissions.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",children:[e.jsxs("h1",{"trae-inspector-start-line":"100","trae-inspector-start-column":"10","trae-inspector-end-line":"103","trae-inspector-end-column":"15","trae-inspector-file-path":"src\\\\pages\\\\Permissions.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(M,{className:"w-8 h-8 text-primary"}),"Matriz de Permiss√µes"]}),e.jsx("p",{"trae-inspector-start-line":"104","trae-inspector-start-column":"10","trae-inspector-end-line":"106","trae-inspector-end-column":"14","trae-inspector-file-path":"src\\\\pages\\\\Permissions.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Visualiza%C3%A7%C3%A3o%20completa%20de%20acessos%20e%20permiss%C3%B5es%20por%20perfil%22%2C%22textStartLine%22%3A%22104%22%2C%22textStartColumn%22%3A%2252%22%2C%22textEndLine%22%3A%22106%22%2C%22textEndColumn%22%3A%2210%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-muted-foreground mt-2",children:"Visualiza√ß√£o completa de acessos e permiss√µes por perfil"})]}),e.jsxs(d,{children:[e.jsxs(g,{children:[e.jsxs(h,{className:"flex items-center gap-2",children:[e.jsx(k,{className:"w-5 h-5"}),"Suas Permiss√µes"]}),e.jsx(E,{children:"Voc√™ est√° logado com os seguintes perfis"})]}),e.jsx(u,{children:e.jsx("div",{"trae-inspector-start-line":"119","trae-inspector-start-column":"12","trae-inspector-end-line":"125","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\pages\\\\Permissions.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex flex-wrap gap-2",children:w.map(t=>e.jsx(x,{className:`${a[t].color} text-white`,children:a[t].name},t))})})]}),L.map(t=>e.jsxs(d,{children:[e.jsx(g,{children:e.jsx(h,{children:t})}),e.jsx(u,{children:e.jsx("div",{"trae-inspector-start-line":"136","trae-inspector-start-column":"14","trae-inspector-end-line":"181","trae-inspector-end-column":"20","trae-inspector-file-path":"src\\\\pages\\\\Permissions.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"overflow-x-auto",children:e.jsxs("table",{"trae-inspector-start-line":"137","trae-inspector-start-column":"16","trae-inspector-end-line":"180","trae-inspector-end-column":"24","trae-inspector-file-path":"src\\\\pages\\\\Permissions.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"w-full border-collapse",children:[e.jsx("thead",{"trae-inspector-start-line":"138","trae-inspector-start-column":"18","trae-inspector-end-line":"153","trae-inspector-end-column":"26","trae-inspector-file-path":"src\\\\pages\\\\Permissions.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",children:e.jsxs("tr",{"trae-inspector-start-line":"139","trae-inspector-start-column":"20","trae-inspector-end-line":"152","trae-inspector-end-column":"25","trae-inspector-file-path":"src\\\\pages\\\\Permissions.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"border-b",children:[e.jsx("th",{"trae-inspector-start-line":"140","trae-inspector-start-column":"22","trae-inspector-end-line":"142","trae-inspector-end-column":"27","trae-inspector-file-path":"src\\\\pages\\\\Permissions.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22M%C3%B3dulo%22%2C%22textStartLine%22%3A%22140%22%2C%22textStartColumn%22%3A%2293%22%2C%22textEndLine%22%3A%22142%22%2C%22textEndColumn%22%3A%2222%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-left p-3 font-semibold sticky left-0 bg-card z-10",children:"M√≥dulo"}),m.map(s=>{var r,i;return e.jsx("th",{"trae-inspector-start-line":"144","trae-inspector-start-column":"28","trae-inspector-end-line":"150","trae-inspector-end-column":"29","trae-inspector-file-path":"src\\\\pages\\\\Permissions.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"p-3 text-center",children:e.jsx("div",{"trae-inspector-start-line":"145","trae-inspector-start-column":"30","trae-inspector-end-line":"149","trae-inspector-end-column":"32","trae-inspector-file-path":"src\\\\pages\\\\Permissions.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex flex-col items-center gap-1",children:e.jsx(x,{className:`${((r=a[s])==null?void 0:r.color)||"bg-gray-500"} text-white text-xs`,children:((i=a[s])==null?void 0:i.name)||s})})},s)})]})}),e.jsx("tbody",{"trae-inspector-start-line":"154","trae-inspector-start-column":"18","trae-inspector-end-line":"179","trae-inspector-end-column":"26","trae-inspector-file-path":"src\\\\pages\\\\Permissions.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",children:N.filter(s=>{var r;return(((r=l[s])==null?void 0:r.category)||"Outros")===t}).map(s=>{var r,i;return e.jsxs("tr",{"trae-inspector-start-line":"158","trae-inspector-start-column":"24","trae-inspector-end-line":"177","trae-inspector-end-column":"29","trae-inspector-file-path":"src\\\\pages\\\\Permissions.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"border-b hover:bg-muted/50",children:[e.jsx("td",{"trae-inspector-start-line":"159","trae-inspector-start-column":"26","trae-inspector-end-line":"164","trae-inspector-end-column":"31","trae-inspector-file-path":"src\\\\pages\\\\Permissions.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"p-3 font-medium sticky left-0 bg-card",children:e.jsxs("div",{"trae-inspector-start-line":"160","trae-inspector-start-column":"28","trae-inspector-end-line":"163","trae-inspector-end-column":"34","trae-inspector-file-path":"src\\\\pages\\\\Permissions.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex items-center gap-2",children:[e.jsx("span",{"trae-inspector-start-line":"161","trae-inspector-start-column":"30","trae-inspector-end-line":"161","trae-inspector-end-column":"92","trae-inspector-file-path":"src\\\\pages\\\\Permissions.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-2xl",children:(r=l[s])==null?void 0:r.icon}),e.jsx("span",{"trae-inspector-start-line":"162","trae-inspector-start-column":"30","trae-inspector-end-line":"162","trae-inspector-end-column":"81","trae-inspector-file-path":"src\\\\pages\\\\Permissions.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",children:((i=l[s])==null?void 0:i.name)||s})]})}),m.map(C=>{var v,f;const P=p.length>0?!!((v=j[s])!=null&&v[C]):(f=c[C])==null?void 0:f.includes(s);return e.jsx("td",{"trae-inspector-start-line":"168","trae-inspector-start-column":"30","trae-inspector-end-line":"174","trae-inspector-end-column":"35","trae-inspector-file-path":"src\\\\pages\\\\Permissions.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"p-3 text-center",children:P?e.jsx(_,{className:"w-5 h-5 text-green-500 mx-auto"}):e.jsx(R,{className:"w-5 h-5 text-red-500/30 mx-auto"})},C)})]},s)})})]})})})]},t)),e.jsxs(d,{children:[e.jsx(g,{children:e.jsxs(h,{className:"flex items-center gap-2",children:[e.jsx(O,{className:"w-5 h-5"}),"Perfis do Sistema"]})}),e.jsx(u,{children:e.jsx("div",{"trae-inspector-start-line":"195","trae-inspector-start-column":"12","trae-inspector-end-line":"211","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\pages\\\\Permissions.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:m.map(t=>e.jsxs("div",{"trae-inspector-start-line":"197","trae-inspector-start-column":"16","trae-inspector-end-line":"209","trae-inspector-end-column":"22","trae-inspector-file-path":"src\\\\pages\\\\Permissions.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex items-start gap-3 p-3 rounded-lg border",children:[e.jsx(x,{className:`${a[t].color} text-white shrink-0`,children:a[t].name}),e.jsxs("div",{"trae-inspector-start-line":"201","trae-inspector-start-column":"18","trae-inspector-end-line":"208","trae-inspector-end-column":"24","trae-inspector-file-path":"src\\\\pages\\\\Permissions.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex-1",children:[e.jsx("p",{"trae-inspector-start-line":"202","trae-inspector-start-column":"20","trae-inspector-end-line":"204","trae-inspector-end-column":"24","trae-inspector-file-path":"src\\\\pages\\\\Permissions.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-sm text-muted-foreground",children:a[t].description}),e.jsxs("p",{"trae-inspector-start-line":"205","trae-inspector-start-column":"20","trae-inspector-end-line":"207","trae-inspector-end-column":"24","trae-inspector-file-path":"src\\\\pages\\\\Permissions.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-xs text-muted-foreground mt-1",children:[c[t].length," m√≥dulos"]})]})]},t))})})]})]})})};export{J as default};
