import{c as z,r as C,j as e,T as U,B as d,d as o,s as l,a as $}from"./index-C8gJK6VO.js";import{C as F}from"./card-XpOOVLWI.js";import{B as M}from"./badge-CRfFogl7.js";import{T as I}from"./textarea-Oo1gIRGr.js";import{D as R,a as H,b as Z,c as G,e as K}from"./dialog-KfbCdWZy.js";import{L as k}from"./label-C3geKGxC.js";import{V as P}from"./VehicleSelect-OQhGO8Zg.js";import{C as Q}from"./circle-alert-CNjLJXF5.js";import{P as W}from"./play-C5X1PCKG.js";import{C as X}from"./coffee-CiPrrFBd.js";import{C as Y}from"./clock-Cc7nNxD7.js";import{C as ee}from"./circle-check-big-CG-bN1l7.js";import{T as te}from"./triangle-alert-Bog7h-1T.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],T=z("square",re);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]],ae=z("utensils",ie),se=({open:m,onOpenChange:r,currentSessionId:h,currentVehicle:a,onVehicleChanged:g})=>{const[v,f]=C.useState(!1),[c,p]=C.useState(a),[D,j]=C.useState(""),[x,N]=C.useState(""),S=async n=>{var w;if(n.preventDefault(),!c){o.error("Selecione o novo cavalo mecânico");return}if(!x){o.error("Informe o motivo da troca");return}f(!0);try{const{error:b}=await l.from("driver_work_sessions").update({vehicle_plate:c,updated_at:new Date().toISOString()}).eq("id",h);if(b)throw b;const{error:L}=await l.from("driver_work_events").insert({session_id:h,driver_id:(w=(await l.auth.getUser()).data.user)==null?void 0:w.id,tipo_atividade:"trabalho",data_hora_inicio:new Date().toISOString(),observacoes:`Troca de veículo: ${a} → ${c}${D?` + Carreta ${D}`:""}
Motivo: ${x}`,automatico:!1});if(L)throw L;o.success("Veículo atualizado com sucesso!"),g(),r(!1)}catch(b){console.error("Erro ao trocar veículo:",b),o.error("Erro ao trocar veículo")}finally{f(!1)}};return e.jsx(R,{open:m,onOpenChange:r,children:e.jsxs(H,{className:"sm:max-w-[500px]",children:[e.jsxs(Z,{children:[e.jsxs(G,{className:"flex items-center gap-2",children:[e.jsx(U,{className:"h-5 w-5"}),"Trocar Veículo"]}),e.jsx(K,{children:"Registre a troca de cavalo mecânico e/ou carreta durante a viagem"})]}),e.jsxs("form",{"trae-inspector-start-line":"104","trae-inspector-start-column":"8","trae-inspector-end-line":"170","trae-inspector-end-column":"15","trae-inspector-file-path":"src\\\\components\\\\driver\\\\VehicleChangeDialog.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",onSubmit:S,className:"space-y-4 pt-4",children:[e.jsxs("div",{"trae-inspector-start-line":"105","trae-inspector-start-column":"10","trae-inspector-end-line":"112","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\components\\\\driver\\\\VehicleChangeDialog.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"space-y-2",children:[e.jsx(k,{children:"Veículo Atual"}),e.jsx("div",{"trae-inspector-start-line":"107","trae-inspector-start-column":"12","trae-inspector-end-line":"111","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\components\\\\driver\\\\VehicleChangeDialog.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"p-3 bg-muted rounded-lg",children:e.jsx(M,{variant:"outline",className:"font-mono",children:a})})]}),e.jsxs("div",{"trae-inspector-start-line":"114","trae-inspector-start-column":"10","trae-inspector-end-line":"122","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\components\\\\driver\\\\VehicleChangeDialog.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"space-y-2",children:[e.jsx(k,{htmlFor:"vehicle",children:"Novo Cavalo Mecânico *"}),e.jsx(P,{value:c,onChange:p,filter:n=>n.type==="cavalo"||n.type==="caminhao",placeholder:"Selecione o cavalo"})]}),e.jsxs("div",{"trae-inspector-start-line":"124","trae-inspector-start-column":"10","trae-inspector-end-line":"132","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\components\\\\driver\\\\VehicleChangeDialog.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"space-y-2",children:[e.jsx(k,{htmlFor:"carreta",children:"Carreta (Opcional)"}),e.jsx(P,{value:D,onChange:j,filter:n=>n.type==="carreta"||n.type==="reboque",placeholder:"Selecione a carreta (se aplicável)"})]}),e.jsxs("div",{"trae-inspector-start-line":"134","trae-inspector-start-column":"10","trae-inspector-end-line":"143","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\components\\\\driver\\\\VehicleChangeDialog.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"space-y-2",children:[e.jsx(k,{htmlFor:"motivo",children:"Motivo da Troca *"}),e.jsx(I,{id:"motivo",placeholder:"Ex: Manutenção preventiva, troca de rota, problema mecânico...",value:x,onChange:n=>N(n.target.value),rows:3})]}),e.jsxs("div",{"trae-inspector-start-line":"145","trae-inspector-start-column":"10","trae-inspector-end-line":"150","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\components\\\\driver\\\\VehicleChangeDialog.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex items-start gap-2 p-3 bg-amber-50 dark:bg-amber-950/20 rounded-lg border border-amber-200 dark:border-amber-900",children:[e.jsx(Q,{className:"h-4 w-4 text-amber-600 dark:text-amber-400 mt-0.5"}),e.jsx("p",{"trae-inspector-start-line":"147","trae-inspector-start-column":"12","trae-inspector-end-line":"149","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\components\\\\driver\\\\VehicleChangeDialog.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22A%20troca%20ser%C3%A1%20registrada%20no%20sistema%20e%20refletir%C3%A1%20nos%20c%C3%A1lculos%20de%20gratifica%C3%A7%C3%A3o%22%2C%22textStartLine%22%3A%22147%22%2C%22textStartColumn%22%3A%2270%22%2C%22textEndLine%22%3A%22149%22%2C%22textEndColumn%22%3A%2212%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-sm text-amber-800 dark:text-amber-200",children:"A troca será registrada no sistema e refletirá nos cálculos de gratificação"})]}),e.jsxs("div",{"trae-inspector-start-line":"152","trae-inspector-start-column":"10","trae-inspector-end-line":"169","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\components\\\\driver\\\\VehicleChangeDialog.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex gap-3 pt-4",children:[e.jsx(d,{type:"button",variant:"outline",className:"flex-1",onClick:()=>r(!1),disabled:v,children:"Cancelar"}),e.jsx(d,{type:"submit",className:"flex-1",disabled:v,children:v?"Registrando...":"Confirmar Troca"})]})]})]})})},E=[{id:"direcao",label:"Direção",icon:W,color:"bg-blue-500"},{id:"descanso",label:"Descanso",icon:X,color:"bg-green-500"},{id:"refeicao",label:"Refeição",icon:ae,color:"bg-orange-500"},{id:"espera",label:"Espera",icon:Y,color:"bg-yellow-500"},{id:"trabalho",label:"Trabalho",icon:ee,color:"bg-purple-500"}];function we(){var V;const{user:m}=$(),[r,h]=C.useState(null),[a,g]=C.useState(null),[v,f]=C.useState(""),[c,p]=C.useState(!1),[D,j]=C.useState(!1);C.useEffect(()=>{x()},[m]);const x=async()=>{if(!m)return;const{data:t}=await l.from("driver_work_sessions").select("*").eq("driver_id",m.id).eq("status","em_andamento").order("data_inicio",{ascending:!1}).limit(1).maybeSingle();if(h(t),t){const{data:s}=await l.from("driver_work_events").select("*").eq("session_id",t.id).is("data_hora_fim",null).order("data_hora_inicio",{ascending:!1}).limit(1).maybeSingle();g(s)}},[N,S]=C.useState(!1),[n,w]=C.useState(""),b=()=>{S(!0)},L=async()=>{if(m){p(!0);try{const{data:t}=await l.from("trips").select("id, vehicle_plate").eq("driver_id",m.id).eq("status","em_andamento").order("created_at",{ascending:!1}).limit(1).maybeSingle();if(!t){o.error("Nenhuma viagem ativa encontrada"),p(!1);return}const{data:s,error:i}=await l.from("driver_work_sessions").insert({driver_id:m.id,vehicle_plate:t.vehicle_plate,trip_id:t.id,data_inicio:new Date().toISOString(),status:"em_andamento"}).select().single();if(i)throw i;h(s),o.success("Jornada iniciada com viagem vinculada!")}catch(t){console.error("Erro ao iniciar jornada:",t),o.error("Erro ao iniciar jornada")}finally{p(!1)}}},O=async()=>{if(!m||!n){o.error("Selecione um veículo");return}p(!0);try{const{data:t,error:s}=await l.from("driver_work_sessions").insert({driver_id:m.id,vehicle_plate:n,trip_id:null,data_inicio:new Date().toISOString(),status:"em_andamento"}).select().single();if(s)throw s;h(t),S(!1),w(""),o.success("Jornada iniciada sem viagem (manobra/oficina)!")}catch(t){console.error("Erro ao iniciar jornada:",t),o.error("Erro ao iniciar jornada")}finally{p(!1)}},q=async()=>{if(r){p(!0);try{a&&await y();const{error:t}=await l.from("driver_work_sessions").update({status:"concluida",data_fim:new Date().toISOString()}).eq("id",r.id);if(t)throw t;await l.functions.invoke("analyze-driver-journey",{body:{sessionId:r.id}}),h(null),g(null),o.success("Jornada finalizada e analisada!")}catch(t){console.error("Erro ao finalizar jornada:",t),o.error("Erro ao finalizar jornada")}finally{p(!1)}}},J=async t=>{var s;if(r){p(!0);try{a&&await y();const{data:i,error:_}=await l.from("driver_work_events").insert([{session_id:r.id,driver_id:m.id,tipo_atividade:t,data_hora_inicio:new Date().toISOString(),observacoes:v}]).select().single();if(_)throw _;g(i),f(""),o.success(`${(s=E.find(u=>u.id===t))==null?void 0:s.label} iniciada`)}catch(i){console.error("Erro ao iniciar atividade:",i),o.error("Erro ao iniciar atividade")}finally{p(!1)}}},y=async()=>{if(!a)return;const t=new Date,s=new Date(a.data_hora_inicio),i=Math.round((t.getTime()-s.getTime())/(1e3*60)),{error:_}=await l.from("driver_work_events").update({data_hora_fim:t.toISOString(),duracao_minutos:i}).eq("id",a.id);if(_)throw _;const u=a.tipo_atividade,A={};u==="direcao"?(A.total_direcao_minutos=((r==null?void 0:r.total_direcao_minutos)||0)+i,A.total_trabalho_minutos=((r==null?void 0:r.total_trabalho_minutos)||0)+i):u==="espera"||u==="trabalho"?(u==="espera"&&(A.total_espera_minutos=((r==null?void 0:r.total_espera_minutos)||0)+i),A.total_trabalho_minutos=((r==null?void 0:r.total_trabalho_minutos)||0)+i):u==="descanso"&&(A.total_descanso_minutos=((r==null?void 0:r.total_descanso_minutos)||0)+i),await l.from("driver_work_sessions").update(A).eq("id",r.id),g(null)},B=t=>{const s=Math.floor(t/60),i=t%60;return`${s}h${i.toString().padStart(2,"0")}min`};return e.jsxs(F,{className:"p-6",children:[e.jsx("h2",{"trae-inspector-start-line":"295","trae-inspector-start-column":"6","trae-inspector-end-line":"295","trae-inspector-end-column":"68","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Jornada%20Motorista%22%2C%22textStartLine%22%3A%22295%22%2C%22textStartColumn%22%3A%2246%22%2C%22textEndLine%22%3A%22295%22%2C%22textEndColumn%22%3A%2263%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-2xl font-bold mb-6",children:"Jornada Motorista"}),r?e.jsxs("div",{"trae-inspector-start-line":"351","trae-inspector-start-column":"8","trae-inspector-end-line":"483","trae-inspector-end-column":"14","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"space-y-6",children:[e.jsxs("div",{"trae-inspector-start-line":"353","trae-inspector-start-column":"10","trae-inspector-end-line":"364","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{"trae-inspector-start-line":"354","trae-inspector-start-column":"12","trae-inspector-end-line":"357","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"p-4 bg-primary/10 border border-primary/20 rounded-lg",children:[e.jsx("p",{"trae-inspector-start-line":"355","trae-inspector-start-column":"14","trae-inspector-end-line":"355","trae-inspector-end-column":"81","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Ve%C3%ADculo%20Atual%22%2C%22textStartLine%22%3A%22355%22%2C%22textStartColumn%22%3A%2264%22%2C%22textEndLine%22%3A%22355%22%2C%22textEndColumn%22%3A%2277%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-sm text-muted-foreground mb-1",children:"Veículo Atual"}),e.jsx("p",{"trae-inspector-start-line":"356","trae-inspector-start-column":"14","trae-inspector-end-line":"356","trae-inspector-end-column":"95","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-3xl font-bold text-primary",children:r.vehicle_plate})]}),e.jsxs("div",{"trae-inspector-start-line":"358","trae-inspector-start-column":"12","trae-inspector-end-line":"363","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",children:[e.jsx("p",{"trae-inspector-start-line":"359","trae-inspector-start-column":"14","trae-inspector-end-line":"359","trae-inspector-end-column":"79","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Tempo%20Trabalhado%22%2C%22textStartLine%22%3A%22359%22%2C%22textStartColumn%22%3A%2259%22%2C%22textEndLine%22%3A%22359%22%2C%22textEndColumn%22%3A%2275%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-sm text-muted-foreground",children:"Tempo Trabalhado"}),e.jsx("p",{"trae-inspector-start-line":"360","trae-inspector-start-column":"14","trae-inspector-end-line":"362","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-2xl font-bold",children:B(r.total_trabalho_minutos)})]})]}),e.jsxs("div",{"trae-inspector-start-line":"367","trae-inspector-start-column":"10","trae-inspector-end-line":"390","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{"trae-inspector-start-line":"368","trae-inspector-start-column":"12","trae-inspector-end-line":"373","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",children:[e.jsx("p",{"trae-inspector-start-line":"369","trae-inspector-start-column":"14","trae-inspector-end-line":"369","trae-inspector-end-column":"76","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Tempo%20Dire%C3%A7%C3%A3o%22%2C%22textStartLine%22%3A%22369%22%2C%22textStartColumn%22%3A%2259%22%2C%22textEndLine%22%3A%22369%22%2C%22textEndColumn%22%3A%2272%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-sm text-muted-foreground",children:"Tempo Direção"}),e.jsx("p",{"trae-inspector-start-line":"370","trae-inspector-start-column":"14","trae-inspector-end-line":"372","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-2xl font-bold",children:B(r.total_direcao_minutos)})]}),e.jsxs("div",{"trae-inspector-start-line":"374","trae-inspector-start-column":"12","trae-inspector-end-line":"379","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",children:[e.jsx("p",{"trae-inspector-start-line":"375","trae-inspector-start-column":"14","trae-inspector-end-line":"375","trae-inspector-end-column":"75","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Horas%20Extras%22%2C%22textStartLine%22%3A%22375%22%2C%22textStartColumn%22%3A%2259%22%2C%22textEndLine%22%3A%22375%22%2C%22textEndColumn%22%3A%2271%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-sm text-muted-foreground",children:"Horas Extras"}),e.jsx("p",{"trae-inspector-start-line":"376","trae-inspector-start-column":"14","trae-inspector-end-line":"378","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-2xl font-bold text-orange-500",children:B(r.horas_extras_minutos)})]}),e.jsxs("div",{"trae-inspector-start-line":"380","trae-inspector-start-column":"12","trae-inspector-end-line":"389","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",children:[e.jsx("p",{"trae-inspector-start-line":"381","trae-inspector-start-column":"14","trae-inspector-end-line":"381","trae-inspector-end-column":"76","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Limite%20Di%C3%A1rio%22%2C%22textStartLine%22%3A%22381%22%2C%22textStartColumn%22%3A%2259%22%2C%22textEndLine%22%3A%22381%22%2C%22textEndColumn%22%3A%2272%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-sm text-muted-foreground",children:"Limite Diário"}),e.jsx("p",{"trae-inspector-start-line":"382","trae-inspector-start-column":"14","trae-inspector-end-line":"388","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-2xl font-bold",children:r.total_trabalho_minutos>720?e.jsx("span",{"trae-inspector-start-line":"384","trae-inspector-start-column":"18","trae-inspector-end-line":"384","trae-inspector-end-column":"61","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22text%22%3A%2212h00%22%2C%22textStartLine%22%3A%22384%22%2C%22textStartColumn%22%3A%2249%22%2C%22textEndLine%22%3A%22384%22%2C%22textEndColumn%22%3A%2254%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-red-500",children:"12h00"}):"12h00"})]})]}),a&&e.jsx("div",{"trae-inspector-start-line":"394","trae-inspector-start-column":"12","trae-inspector-end-line":"414","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"bg-primary/10 p-4 rounded-lg",children:e.jsxs("div",{"trae-inspector-start-line":"395","trae-inspector-start-column":"14","trae-inspector-end-line":"413","trae-inspector-end-column":"20","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex items-center justify-between",children:[e.jsxs("div",{"trae-inspector-start-line":"396","trae-inspector-start-column":"16","trae-inspector-end-line":"403","trae-inspector-end-column":"22","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex items-center gap-2",children:[e.jsx(M,{variant:"outline",className:"animate-pulse",children:"EM ANDAMENTO"}),e.jsx("span",{"trae-inspector-start-line":"400","trae-inspector-start-column":"18","trae-inspector-end-line":"402","trae-inspector-end-column":"25","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"font-semibold",children:(V=E.find(t=>t.id===a.tipo_atividade))==null?void 0:V.label})]}),e.jsxs(d,{onClick:y,variant:"outline",size:"sm",disabled:c,children:[e.jsx(T,{className:"mr-2 h-4 w-4"}),"Finalizar"]})]})}),e.jsxs("div",{"trae-inspector-start-line":"418","trae-inspector-start-column":"10","trae-inspector-end-line":"428","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",children:[e.jsx("label",{"trae-inspector-start-line":"419","trae-inspector-start-column":"12","trae-inspector-end-line":"421","trae-inspector-end-column":"20","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Observa%C3%A7%C3%B5es%20(opcional)%22%2C%22textStartLine%22%3A%22419%22%2C%22textStartColumn%22%3A%2262%22%2C%22textEndLine%22%3A%22421%22%2C%22textEndColumn%22%3A%2212%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-sm font-medium mb-2 block",children:"Observações (opcional)"}),e.jsx(I,{value:v,onChange:t=>f(t.target.value),placeholder:"Ex: Carregamento atrasado, condições da estrada, etc.",rows:2})]}),e.jsx("div",{"trae-inspector-start-line":"431","trae-inspector-start-column":"10","trae-inspector-end-line":"449","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:E.map(t=>{const s=t.icon,i=(a==null?void 0:a.tipo_atividade)===t.id;return e.jsxs(d,{onClick:()=>J(t.id),disabled:c||i,variant:i?"default":"outline",className:"h-20 flex-col",children:[e.jsx(s,{className:"h-6 w-6 mb-2"}),t.label]},t.id)})}),r.total_trabalho_minutos>660&&e.jsxs("div",{"trae-inspector-start-line":"453","trae-inspector-start-column":"12","trae-inspector-end-line":"458","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"bg-orange-500/10 border border-orange-500 p-4 rounded-lg flex items-center gap-2",children:[e.jsx(te,{className:"h-5 w-5 text-orange-500"}),e.jsx("span",{"trae-inspector-start-line":"455","trae-inspector-start-column":"14","trae-inspector-end-line":"457","trae-inspector-end-column":"21","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Aten%C3%A7%C3%A3o%3A%20Voc%C3%AA%20est%C3%A1%20pr%C3%B3ximo%20do%20limite%20de%2012h%20di%C3%A1rias%22%2C%22textStartLine%22%3A%22455%22%2C%22textStartColumn%22%3A%2240%22%2C%22textEndLine%22%3A%22457%22%2C%22textEndColumn%22%3A%2214%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-sm",children:"Atenção: Você está próximo do limite de 12h diárias"})]}),e.jsxs("div",{"trae-inspector-start-line":"462","trae-inspector-start-column":"10","trae-inspector-end-line":"482","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex gap-2",children:[e.jsxs(d,{onClick:q,disabled:c,variant:"destructive",className:"flex-1",size:"lg",children:[e.jsx(T,{className:"mr-2 h-5 w-5"}),"Finalizar Jornada"]}),e.jsxs(d,{onClick:()=>j(!0),disabled:c,variant:"outline",size:"lg",children:[e.jsx(U,{className:"mr-2 h-5 w-5"}),"Trocar Veículo"]})]})]}):e.jsxs("div",{"trae-inspector-start-line":"298","trae-inspector-start-column":"8","trae-inspector-end-line":"349","trae-inspector-end-column":"14","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-center py-8 space-y-4",children:[e.jsx("p",{"trae-inspector-start-line":"299","trae-inspector-start-column":"10","trae-inspector-end-line":"301","trae-inspector-end-column":"14","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Nenhuma%20jornada%20em%20andamento%22%2C%22textStartLine%22%3A%22299%22%2C%22textStartColumn%22%3A%2252%22%2C%22textEndLine%22%3A%22301%22%2C%22textEndColumn%22%3A%2210%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-muted-foreground mb-4",children:"Nenhuma jornada em andamento"}),N?e.jsxs("div",{"trae-inspector-start-line":"315","trae-inspector-start-column":"12","trae-inspector-end-line":"347","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"max-w-md mx-auto space-y-4",children:[e.jsxs("div",{"trae-inspector-start-line":"316","trae-inspector-start-column":"14","trae-inspector-end-line":"324","trae-inspector-end-column":"20","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",children:[e.jsx("label",{"trae-inspector-start-line":"317","trae-inspector-start-column":"16","trae-inspector-end-line":"317","trae-inspector-end-column":"93","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Selecione%20o%20Ve%C3%ADculo%22%2C%22textStartLine%22%3A%22317%22%2C%22textStartColumn%22%3A%2266%22%2C%22textEndLine%22%3A%22317%22%2C%22textEndColumn%22%3A%2285%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-sm font-medium mb-2 block",children:"Selecione o Veículo"}),e.jsx(P,{value:n,onChange:w,filter:t=>t.type==="cavalo"||t.type==="caminhao",placeholder:"Escolha um cavalo mecânico"})]}),e.jsxs("div",{"trae-inspector-start-line":"325","trae-inspector-start-column":"14","trae-inspector-end-line":"346","trae-inspector-end-column":"20","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex gap-2",children:[e.jsxs(d,{onClick:O,disabled:c||!n,size:"lg",className:"flex-1",children:[e.jsx(W,{className:"mr-2 h-5 w-5"}),"Confirmar"]}),e.jsx(d,{onClick:()=>{S(!1),w("")},disabled:c,variant:"outline",size:"lg",children:"Cancelar"})]})]}):e.jsxs("div",{"trae-inspector-start-line":"304","trae-inspector-start-column":"12","trae-inspector-end-line":"313","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\components\\\\driver\\\\WorkSessionPanel.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex gap-3 justify-center",children:[e.jsxs(d,{onClick:L,disabled:c,size:"lg",children:[e.jsx(W,{className:"mr-2 h-5 w-5"}),"Com Viagem Ativa"]}),e.jsxs(d,{onClick:b,disabled:c,size:"lg",variant:"outline",children:[e.jsx(U,{className:"mr-2 h-5 w-5"}),"Sem Viagem (Manobra/Oficina)"]})]})]}),r&&e.jsx(se,{open:D,onOpenChange:j,currentSessionId:r.id,currentVehicle:r.vehicle_plate,onVehicleChanged:x})]})}export{we as W};
