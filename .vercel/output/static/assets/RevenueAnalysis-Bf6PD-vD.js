import{c as Pe,r as p,a as ye,a0 as ie,s as j,j as e,B as w,U as Me,P as Te,a1 as Ie}from"./index-C8gJK6VO.js";import{C as o,a as d,b as u,d as l}from"./card-XpOOVLWI.js";import{T as Ne,a as Le,b as F,c as E}from"./tabs-C5DHGacV.js";import{S as Q,a as X,b as Y,c as J,d as N}from"./select-CgN7rKuh.js";import{I as D}from"./input-D5Ccm-s1.js";import{L as f}from"./label-C3geKGxC.js";import{S as G}from"./switch-CM5BIiBp.js";import{P as Ce}from"./plus-C4B_3Olf.js";import{B as re}from"./bell-DklMG7XH.js";import{T as pe}from"./trash-2-DqbN6Ybf.js";import{T as Be}from"./triangle-alert-Bog7h-1T.js";import{B as z}from"./badge-CRfFogl7.js";import{R as me}from"./refresh-cw-BeAIEPlv.js";import{S as te}from"./sparkles-Blg3jjmz.js";import{D as Re}from"./download-DNHLnsL1.js";import{C as qe}from"./circle-check-BcP393cQ.js";import{a as ze,R as de,T as ue,L as he}from"./CategoricalChart-C2-bnGS6.js";import{C as Ke,a as ge,X as ve,Y as xe}from"./CartesianChart-sJGvtODh.js";import{L as W,a as Ve}from"./LineChart-Chu0Q6MQ.js";import{A as je}from"./Area-HuI9nLtC.js";import{C as $e}from"./circle-alert-CNjLJXF5.js";import{T as Ue}from"./trending-up-DWFUeL7W.js";import{T as Se}from"./trending-down-Bwvyf_cf.js";import{T as le}from"./target-C5FEJZH4.js";import{H as De}from"./history-BTM_SjEN.js";import{D as _e}from"./dollar-sign-C1fvDVSy.js";import{F as Oe}from"./file-text-B5kgXrlL.js";import{B as He,a as Ge}from"./BarChart-DLmN00sM.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M17 17H4a1 1 0 0 1-.74-1.673C4.59 13.956 6 12.499 6 8a6 6 0 0 1 .258-1.742",key:"178tsu"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8.668 3.01A6 6 0 0 1 18 8c0 2.687.77 4.653 1.707 6.05",key:"1hqiys"}]],se=Pe("bell-off",We);var Qe=["axis"],Xe=p.forwardRef((R,U)=>p.createElement(Ke,{chartName:"ComposedChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Qe,tooltipPayloadSearcher:ze,categoricalChartProps:R,ref:U}));function Ye(){const[R,U]=p.useState([]),[C,q]=p.useState(!0),[L,k]=p.useState(!1),{user:P}=ye(),{toast:A}=ie(),[n,v]=p.useState({alert_name:"",alert_type:"revenue_drop",threshold_value:"",threshold_percentage:"",comparison_period:"mes_anterior",email_recipients:"",whatsapp_enabled:!1,whatsapp_numbers:"",n8n_enabled:!1,n8n_webhook_url:""});p.useEffect(()=>{S()},[]);const S=async()=>{try{const{data:t,error:c}=await j.from("revenue_alerts").select("*").order("created_at",{ascending:!1});if(c)throw c;U(t||[])}catch(t){console.error("Erro ao carregar alertas:",t),A({title:"Erro ao carregar alertas",description:t.message,variant:"destructive"})}finally{q(!1)}},M=async t=>{if(t.preventDefault(),!!P)try{const c={user_id:P.id,alert_name:n.alert_name,alert_type:n.alert_type,comparison_period:n.comparison_period,is_active:!0,email_recipients:n.email_recipients.split(",").map(i=>i.trim()).filter(Boolean),whatsapp_enabled:n.whatsapp_enabled,whatsapp_numbers:n.whatsapp_enabled?n.whatsapp_numbers.split(",").map(i=>i.trim()).filter(Boolean):[],n8n_enabled:n.n8n_enabled,n8n_webhook_url:n.n8n_enabled?n.n8n_webhook_url:null};n.threshold_value&&(c.threshold_value=parseFloat(n.threshold_value)),n.threshold_percentage&&(c.threshold_percentage=parseFloat(n.threshold_percentage));const{error:s}=await j.from("revenue_alerts").insert([c]);if(s)throw s;A({title:"Alerta criado",description:"O alerta foi configurado com sucesso"}),k(!1),v({alert_name:"",alert_type:"revenue_drop",threshold_value:"",threshold_percentage:"",comparison_period:"mes_anterior",email_recipients:"",whatsapp_enabled:!1,whatsapp_numbers:"",n8n_enabled:!1,n8n_webhook_url:""}),S()}catch(c){console.error("Erro ao criar alerta:",c),A({title:"Erro ao criar alerta",description:c.message,variant:"destructive"})}},h=async(t,c)=>{try{const{error:s}=await j.from("revenue_alerts").update({is_active:!c}).eq("id",t);if(s)throw s;A({title:c?"Alerta desativado":"Alerta ativado",description:"Status do alerta atualizado com sucesso"}),S()}catch(s){console.error("Erro ao atualizar alerta:",s),A({title:"Erro ao atualizar alerta",description:s.message,variant:"destructive"})}},g=async t=>{if(confirm("Tem certeza que deseja excluir este alerta?"))try{const{error:c}=await j.from("revenue_alerts").delete().eq("id",t);if(c)throw c;A({title:"Alerta excluído",description:"O alerta foi removido com sucesso"}),S()}catch(c){console.error("Erro ao excluir alerta:",c),A({title:"Erro ao excluir alerta",description:c.message,variant:"destructive"})}};return C?e.jsx("div",{"trae-inspector-start-line":"185","trae-inspector-start-column":"11","trae-inspector-end-line":"185","trae-inspector-end-column":"79","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAlertsConfig.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Carregando%20alertas...%22%2C%22textStartLine%22%3A%22185%22%2C%22textStartColumn%22%3A%2252%22%2C%22textEndLine%22%3A%22185%22%2C%22textEndColumn%22%3A%2273%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex justify-center p-8",children:"Carregando alertas..."}):e.jsxs("div",{"trae-inspector-start-line":"189","trae-inspector-start-column":"4","trae-inspector-end-line":"389","trae-inspector-end-column":"10","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"space-y-6",children:[e.jsxs("div",{"trae-inspector-start-line":"190","trae-inspector-start-column":"6","trae-inspector-end-line":"199","trae-inspector-end-column":"12","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex justify-between items-center",children:[e.jsxs("div",{"trae-inspector-start-line":"191","trae-inspector-start-column":"8","trae-inspector-end-line":"194","trae-inspector-end-column":"14","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",children:[e.jsx("h3",{"trae-inspector-start-line":"192","trae-inspector-start-column":"10","trae-inspector-end-line":"192","trae-inspector-end-column":"71","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAlertsConfig.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Alertas%20de%20Receita%22%2C%22textStartLine%22%3A%22192%22%2C%22textStartColumn%22%3A%2248%22%2C%22textEndLine%22%3A%22192%22%2C%22textEndColumn%22%3A%2266%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-lg font-semibold",children:"Alertas de Receita"}),e.jsx("p",{"trae-inspector-start-line":"193","trae-inspector-start-column":"10","trae-inspector-end-line":"193","trae-inspector-end-column":"119","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAlertsConfig.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Configure%20notifica%C3%A7%C3%B5es%20autom%C3%A1ticas%20para%20varia%C3%A7%C3%B5es%20de%20receita%22%2C%22textStartLine%22%3A%22193%22%2C%22textStartColumn%22%3A%2255%22%2C%22textEndLine%22%3A%22193%22%2C%22textEndColumn%22%3A%22115%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-sm text-muted-foreground",children:"Configure notificações automáticas para variações de receita"})]}),e.jsxs(w,{onClick:()=>k(!L),children:[e.jsx(Ce,{className:"mr-2 h-4 w-4"}),"Novo Alerta"]})]}),L&&e.jsxs(o,{children:[e.jsx(d,{children:e.jsx(u,{children:"Configurar Novo Alerta"})}),e.jsx(l,{children:e.jsxs("form",{"trae-inspector-start-line":"207","trae-inspector-start-column":"12","trae-inspector-end-line":"325","trae-inspector-end-column":"19","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",onSubmit:M,className:"space-y-4",children:[e.jsxs("div",{"trae-inspector-start-line":"208","trae-inspector-start-column":"14","trae-inspector-end-line":"319","trae-inspector-end-column":"20","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{"trae-inspector-start-line":"209","trae-inspector-start-column":"16","trae-inspector-end-line":"218","trae-inspector-end-column":"22","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"space-y-2",children:[e.jsx(f,{htmlFor:"alert_name",children:"Nome do Alerta"}),e.jsx(D,{id:"alert_name",value:n.alert_name,onChange:t=>v({...n,alert_name:t.target.value}),placeholder:"Ex: Queda de Receita Mensal",required:!0})]}),e.jsxs("div",{"trae-inspector-start-line":"220","trae-inspector-start-column":"16","trae-inspector-end-line":"232","trae-inspector-end-column":"22","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"space-y-2",children:[e.jsx(f,{htmlFor:"alert_type",children:"Tipo de Alerta"}),e.jsxs(Q,{value:n.alert_type,onValueChange:t=>v({...n,alert_type:t}),children:[e.jsx(X,{children:e.jsx(Y,{})}),e.jsxs(J,{children:[e.jsx(N,{value:"revenue_drop",children:"Queda de Receita"}),e.jsx(N,{value:"revenue_target",children:"Meta de Receita"}),e.jsx(N,{value:"margin_alert",children:"Alerta de Margem"})]})]})]}),e.jsxs("div",{"trae-inspector-start-line":"234","trae-inspector-start-column":"16","trae-inspector-end-line":"244","trae-inspector-end-column":"22","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"space-y-2",children:[e.jsx(f,{htmlFor:"threshold_value",children:"Valor Limite (R$)"}),e.jsx(D,{id:"threshold_value",type:"number",step:"0.01",value:n.threshold_value,onChange:t=>v({...n,threshold_value:t.target.value}),placeholder:"Ex: 50000"})]}),e.jsxs("div",{"trae-inspector-start-line":"246","trae-inspector-start-column":"16","trae-inspector-end-line":"256","trae-inspector-end-column":"22","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"space-y-2",children:[e.jsx(f,{htmlFor:"threshold_percentage",children:"Variação (%)"}),e.jsx(D,{id:"threshold_percentage",type:"number",step:"0.1",value:n.threshold_percentage,onChange:t=>v({...n,threshold_percentage:t.target.value}),placeholder:"Ex: 10"})]}),e.jsxs("div",{"trae-inspector-start-line":"258","trae-inspector-start-column":"16","trae-inspector-end-line":"270","trae-inspector-end-column":"22","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"space-y-2 md:col-span-2",children:[e.jsx(f,{htmlFor:"comparison_period",children:"Período de Comparação"}),e.jsxs(Q,{value:n.comparison_period,onValueChange:t=>v({...n,comparison_period:t}),children:[e.jsx(X,{children:e.jsx(Y,{})}),e.jsxs(J,{children:[e.jsx(N,{value:"mes_anterior",children:"Mês Anterior"}),e.jsx(N,{value:"mesmo_mes_ano_anterior",children:"Mesmo Mês Ano Anterior"}),e.jsx(N,{value:"media_trimestral",children:"Média Trimestral"})]})]})]}),e.jsxs("div",{"trae-inspector-start-line":"272","trae-inspector-start-column":"16","trae-inspector-end-line":"280","trae-inspector-end-column":"22","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"space-y-2 md:col-span-2",children:[e.jsx(f,{htmlFor:"email_recipients",children:"E-mails (separados por vírgula)"}),e.jsx(D,{id:"email_recipients",value:n.email_recipients,onChange:t=>v({...n,email_recipients:t.target.value}),placeholder:"email1@example.com, email2@example.com"})]}),e.jsxs("div",{"trae-inspector-start-line":"282","trae-inspector-start-column":"16","trae-inspector-end-line":"299","trae-inspector-end-column":"22","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"space-y-2 md:col-span-2",children:[e.jsxs("div",{"trae-inspector-start-line":"283","trae-inspector-start-column":"18","trae-inspector-end-line":"290","trae-inspector-end-column":"24","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex items-center space-x-2",children:[e.jsx(G,{id:"whatsapp_enabled",checked:n.whatsapp_enabled,onCheckedChange:t=>v({...n,whatsapp_enabled:t})}),e.jsx(f,{htmlFor:"whatsapp_enabled",children:"Ativar alertas via WhatsApp"})]}),n.whatsapp_enabled&&e.jsx(D,{value:n.whatsapp_numbers,onChange:t=>v({...n,whatsapp_numbers:t.target.value}),placeholder:"+5511999999999, +5511888888888",className:"mt-2"})]}),e.jsxs("div",{"trae-inspector-start-line":"301","trae-inspector-start-column":"16","trae-inspector-end-line":"318","trae-inspector-end-column":"22","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"space-y-2 md:col-span-2",children:[e.jsxs("div",{"trae-inspector-start-line":"302","trae-inspector-start-column":"18","trae-inspector-end-line":"309","trae-inspector-end-column":"24","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex items-center space-x-2",children:[e.jsx(G,{id:"n8n_enabled",checked:n.n8n_enabled,onCheckedChange:t=>v({...n,n8n_enabled:t})}),e.jsx(f,{htmlFor:"n8n_enabled",children:"Ativar integração n8n"})]}),n.n8n_enabled&&e.jsx(D,{value:n.n8n_webhook_url,onChange:t=>v({...n,n8n_webhook_url:t.target.value}),placeholder:"https://sua-instancia-n8n.com/webhook/...",className:"mt-2"})]})]}),e.jsxs("div",{"trae-inspector-start-line":"321","trae-inspector-start-column":"14","trae-inspector-end-line":"324","trae-inspector-end-column":"20","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex gap-2",children:[e.jsx(w,{type:"submit",children:"Criar Alerta"}),e.jsx(w,{type:"button",variant:"outline",onClick:()=>k(!1),children:"Cancelar"})]})]})})]}),e.jsxs("div",{"trae-inspector-start-line":"330","trae-inspector-start-column":"6","trae-inspector-end-line":"388","trae-inspector-end-column":"12","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"grid gap-4",children:[R.map(t=>e.jsx(o,{children:e.jsx(l,{className:"pt-6",children:e.jsxs("div",{"trae-inspector-start-line":"334","trae-inspector-start-column":"14","trae-inspector-end-line":"372","trae-inspector-end-column":"20","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex items-center justify-between",children:[e.jsxs("div",{"trae-inspector-start-line":"335","trae-inspector-start-column":"16","trae-inspector-end-line":"354","trae-inspector-end-column":"22","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex items-center gap-4",children:[e.jsx("div",{"trae-inspector-start-line":"336","trae-inspector-start-column":"18","trae-inspector-end-line":"342","trae-inspector-end-column":"24","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:`p-2 rounded-lg ${t.is_active?"bg-green-500/10":"bg-gray-500/10"}`,children:t.is_active?e.jsx(re,{className:"h-5 w-5 text-green-600"}):e.jsx(se,{className:"h-5 w-5 text-gray-600"})}),e.jsxs("div",{"trae-inspector-start-line":"343","trae-inspector-start-column":"18","trae-inspector-end-line":"353","trae-inspector-end-column":"24","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",children:[e.jsx("h4",{"trae-inspector-start-line":"344","trae-inspector-start-column":"20","trae-inspector-end-line":"344","trae-inspector-end-column":"73","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"font-semibold",children:t.alert_name}),e.jsxs("div",{"trae-inspector-start-line":"345","trae-inspector-start-column":"20","trae-inspector-end-line":"352","trae-inspector-end-column":"26","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-sm text-muted-foreground space-y-1",children:[e.jsxs("p",{"trae-inspector-start-line":"346","trae-inspector-start-column":"22","trae-inspector-end-line":"346","trae-inspector-end-column":"53","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",children:["Tipo: ",t.alert_type]}),t.threshold_value&&e.jsxs("p",{"trae-inspector-start-line":"347","trae-inspector-start-column":"48","trae-inspector-end-line":"347","trae-inspector-end-column":"113","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",children:["Limite: R$ ",t.threshold_value.toLocaleString("pt-BR")]}),t.threshold_percentage&&e.jsxs("p",{"trae-inspector-start-line":"348","trae-inspector-start-column":"53","trae-inspector-end-line":"348","trae-inspector-end-column":"99","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",children:["Variação: ",t.threshold_percentage,"%"]}),e.jsxs("p",{"trae-inspector-start-line":"349","trae-inspector-start-column":"22","trae-inspector-end-line":"349","trae-inspector-end-column":"63","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",children:["Período: ",t.comparison_period]}),t.whatsapp_enabled&&e.jsxs("p",{"trae-inspector-start-line":"350","trae-inspector-start-column":"49","trae-inspector-end-line":"350","trae-inspector-end-column":"115","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",children:["WhatsApp: Ativado (",t.whatsapp_numbers.length," números)"]}),t.n8n_enabled&&e.jsx("p",{"trae-inspector-start-line":"351","trae-inspector-start-column":"44","trae-inspector-end-line":"351","trae-inspector-end-column":"63","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAlertsConfig.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22n8n%3A%20Ativado%22%2C%22textStartLine%22%3A%22351%22%2C%22textStartColumn%22%3A%2247%22%2C%22textEndLine%22%3A%22351%22%2C%22textEndColumn%22%3A%2259%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",children:"n8n: Ativado"})]})]})]}),e.jsxs("div",{"trae-inspector-start-line":"355","trae-inspector-start-column":"16","trae-inspector-end-line":"371","trae-inspector-end-column":"22","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex gap-2",children:[e.jsx(w,{variant:"outline",size:"icon",onClick:()=>h(t.id,t.is_active),children:t.is_active?e.jsx(se,{className:"h-4 w-4"}):e.jsx(re,{className:"h-4 w-4"})}),e.jsx(w,{variant:"outline",size:"icon",onClick:()=>g(t.id),className:"text-destructive hover:text-destructive",children:e.jsx(pe,{className:"h-4 w-4"})})]})]})})},t.id)),R.length===0&&e.jsx(o,{children:e.jsx(l,{className:"pt-6",children:e.jsxs("div",{"trae-inspector-start-line":"380","trae-inspector-start-column":"14","trae-inspector-end-line":"384","trae-inspector-end-column":"20","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-center py-8 text-muted-foreground",children:[e.jsx(Be,{className:"mx-auto h-12 w-12 mb-4"}),e.jsx("p",{"trae-inspector-start-line":"382","trae-inspector-start-column":"16","trae-inspector-end-line":"382","trae-inspector-end-column":"48","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAlertsConfig.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Nenhum%20alerta%20configurado%22%2C%22textStartLine%22%3A%22382%22%2C%22textStartColumn%22%3A%2219%22%2C%22textEndLine%22%3A%22382%22%2C%22textEndColumn%22%3A%2244%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",children:"Nenhum alerta configurado"}),e.jsx("p",{"trae-inspector-start-line":"383","trae-inspector-start-column":"16","trae-inspector-end-line":"383","trae-inspector-end-column":"79","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAlertsConfig.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Clique%20em%20%5C%22Novo%20Alerta%5C%22%20para%20come%C3%A7ar%22%2C%22textStartLine%22%3A%22383%22%2C%22textStartColumn%22%3A%2239%22%2C%22textEndLine%22%3A%22383%22%2C%22textEndColumn%22%3A%2275%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-sm",children:'Clique em "Novo Alerta" para começar'})]})})})]})]})}function Je(){var h,g;const[R,U]=p.useState(!1),[C,q]=p.useState(null),[L,k]=p.useState("3"),{toast:P}=ie();p.useEffect(()=>{A()},[]);const A=async()=>{try{U(!0);const{data:t,error:c}=await j.functions.invoke("predict-revenue",{body:{months_ahead:parseInt(L)}});if(c)throw c;if(t.error)throw new Error(t.error);q(t),P({title:"Previsão gerada",description:`Análise de ${t.metadata.months_analyzed} meses históricos completa`})}catch(t){console.error("Erro ao gerar previsão:",t),P({title:"Erro ao gerar previsão",description:t.message,variant:"destructive"})}finally{U(!1)}},n=()=>{if(!C)return[];const t=C.historical_data.map(s=>({mes:`${s.mes}/${s.ano}`,receita_real:s.receita,tipo:"Histórico"})),c=C.predictions.map(s=>({mes:new Date(s.mes+"-01").toLocaleDateString("pt-BR",{month:"short",year:"2-digit"}),receita_prevista:s.receita_prevista,receita_min:s.receita_min,receita_max:s.receita_max,tipo:"Previsão"}));return[...t.slice(-12),...c]},v=()=>C?C.insights.tendencia_geral==="crescimento"?e.jsx(Ue,{className:"h-5 w-5 text-green-600"}):e.jsx(Se,{className:"h-5 w-5 text-red-600"}):null,S=t=>t>=80?"bg-green-500":t>=60?"bg-yellow-500":"bg-red-500",M=()=>{if(!C)return;const t=[["Mês","Receita Prevista","Receita Mínima","Receita Máxima","Confiança (%)"],...C.predictions.map(m=>[m.mes,m.receita_prevista.toFixed(2),m.receita_min.toFixed(2),m.receita_max.toFixed(2),m.confianca.toString()])].map(m=>m.join(",")).join(`
`),c=new Blob([t],{type:"text/csv"}),s=window.URL.createObjectURL(c),i=document.createElement("a");i.href=s,i.download=`previsao-receita-${new Date().toISOString().split("T")[0]}.csv`,i.click()};return R?e.jsx(o,{children:e.jsx(l,{className:"pt-6",children:e.jsxs("div",{"trae-inspector-start-line":"167","trae-inspector-start-column":"10","trae-inspector-end-line":"171","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueForecast.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex flex-col items-center justify-center py-12 space-y-4",children:[e.jsx(me,{className:"h-12 w-12 animate-spin text-primary"}),e.jsx("p",{"trae-inspector-start-line":"169","trae-inspector-start-column":"12","trae-inspector-end-line":"169","trae-inspector-end-column":"81","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueForecast.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Analisando%20dados%20hist%C3%B3ricos...%22%2C%22textStartLine%22%3A%22169%22%2C%22textStartColumn%22%3A%2247%22%2C%22textEndLine%22%3A%22169%22%2C%22textEndColumn%22%3A%2277%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-lg font-medium",children:"Analisando dados históricos..."}),e.jsx("p",{"trae-inspector-start-line":"170","trae-inspector-start-column":"12","trae-inspector-end-line":"170","trae-inspector-end-column":"99","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueForecast.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Gerando%20previs%C3%B5es%20com%20Machine%20Learning%22%2C%22textStartLine%22%3A%22170%22%2C%22textStartColumn%22%3A%2257%22%2C%22textEndLine%22%3A%22170%22%2C%22textEndColumn%22%3A%2295%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-sm text-muted-foreground",children:"Gerando previsões com Machine Learning"})]})})}):C?e.jsxs("div",{"trae-inspector-start-line":"195","trae-inspector-start-column":"4","trae-inspector-end-line":"441","trae-inspector-end-column":"10","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueForecast.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"space-y-6",children:[e.jsxs("div",{"trae-inspector-start-line":"197","trae-inspector-start-column":"6","trae-inspector-end-line":"227","trae-inspector-end-column":"12","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueForecast.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex justify-between items-center",children:[e.jsxs("div",{"trae-inspector-start-line":"198","trae-inspector-start-column":"8","trae-inspector-end-line":"206","trae-inspector-end-column":"14","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueForecast.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",children:[e.jsxs("h3",{"trae-inspector-start-line":"199","trae-inspector-start-column":"10","trae-inspector-end-line":"202","trae-inspector-end-column":"15","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueForecast.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(te,{className:"h-6 w-6 text-primary"}),"Previsão de Receita"]}),e.jsxs("p",{"trae-inspector-start-line":"203","trae-inspector-start-column":"10","trae-inspector-end-line":"205","trae-inspector-end-column":"14","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueForecast.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-muted-foreground",children:["Análise preditiva baseada em ",C.metadata.months_analyzed," meses de histórico"]})]}),e.jsxs("div",{"trae-inspector-start-line":"207","trae-inspector-start-column":"8","trae-inspector-end-line":"226","trae-inspector-end-column":"14","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueForecast.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex gap-2",children:[e.jsxs(Q,{value:L,onValueChange:k,children:[e.jsx(X,{className:"w-40",children:e.jsx(Y,{})}),e.jsxs(J,{children:[e.jsx(N,{value:"3",children:"3 Meses"}),e.jsx(N,{value:"6",children:"6 Meses"}),e.jsx(N,{value:"12",children:"12 Meses"})]})]}),e.jsxs(w,{onClick:A,variant:"outline",children:[e.jsx(me,{className:"mr-2 h-4 w-4"}),"Atualizar"]}),e.jsxs(w,{onClick:M,variant:"outline",children:[e.jsx(Re,{className:"mr-2 h-4 w-4"}),"Exportar"]})]})]}),e.jsxs("div",{"trae-inspector-start-line":"230","trae-inspector-start-column":"6","trae-inspector-end-line":"281","trae-inspector-end-column":"12","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueForecast.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(o,{children:[e.jsxs(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(u,{className:"text-sm font-medium",children:"Tendência Geral"}),v()]}),e.jsxs(l,{children:[e.jsx("div",{"trae-inspector-start-line":"237","trae-inspector-start-column":"12","trae-inspector-end-line":"239","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueForecast.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-2xl font-bold capitalize",children:C.insights.tendencia_geral}),e.jsxs("p",{"trae-inspector-start-line":"240","trae-inspector-start-column":"12","trae-inspector-end-line":"243","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueForecast.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-xs text-muted-foreground mt-1",children:[C.insights.taxa_crescimento_mensal>0?"+":"",C.insights.taxa_crescimento_mensal.toFixed(1),"% ao mês"]})]})]}),e.jsxs(o,{children:[e.jsxs(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(u,{className:"text-sm font-medium",children:"Confiabilidade"}),e.jsx(qe,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(l,{children:[e.jsx("div",{"trae-inspector-start-line":"253","trae-inspector-start-column":"12","trae-inspector-end-line":"255","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueForecast.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-2xl font-bold capitalize",children:C.insights.confiabilidade}),e.jsx("p",{"trae-inspector-start-line":"256","trae-inspector-start-column":"12","trae-inspector-end-line":"258","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueForecast.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Baseado%20em%20an%C3%A1lise%20de%20padr%C3%B5es%22%2C%22textStartLine%22%3A%22256%22%2C%22textStartColumn%22%3A%2262%22%2C%22textEndLine%22%3A%22258%22%2C%22textEndColumn%22%3A%2212%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-xs text-muted-foreground mt-1",children:"Baseado em análise de padrões"})]})]}),e.jsxs(o,{children:[e.jsxs(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(u,{className:"text-sm font-medium",children:"Próximo Mês"}),e.jsx(te,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(l,{children:[e.jsx("div",{"trae-inspector-start-line":"268","trae-inspector-start-column":"12","trae-inspector-end-line":"275","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueForecast.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-2xl font-bold",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",notation:"compact",maximumFractionDigits:1}).format(((h=C.predictions[0])==null?void 0:h.receita_prevista)||0)}),e.jsxs("p",{"trae-inspector-start-line":"276","trae-inspector-start-column":"12","trae-inspector-end-line":"278","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueForecast.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-xs text-muted-foreground mt-1",children:["Confiança: ",(g=C.predictions[0])==null?void 0:g.confianca,"%"]})]})]})]}),e.jsxs(o,{children:[e.jsx(d,{children:e.jsx(u,{children:"Histórico e Previsão de Receita"})}),e.jsx(l,{children:e.jsx(de,{width:"100%",height:400,children:e.jsxs(Xe,{data:n(),children:[e.jsx(ge,{strokeDasharray:"3 3"}),e.jsx(ve,{dataKey:"mes"}),e.jsx(xe,{}),e.jsx(ue,{formatter:t=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t)}),e.jsx(he,{}),e.jsx(W,{type:"monotone",dataKey:"receita_real",stroke:"#10b981",name:"Receita Real",strokeWidth:2,dot:{fill:"#10b981"}}),e.jsx(W,{type:"monotone",dataKey:"receita_prevista",stroke:"#3b82f6",strokeDasharray:"5 5",name:"Previsão",strokeWidth:2,dot:{fill:"#3b82f6"}}),e.jsx(je,{type:"monotone",dataKey:"receita_max",stroke:"none",fill:"#3b82f6",fillOpacity:.1,name:"Intervalo de Confiança"}),e.jsx(je,{type:"monotone",dataKey:"receita_min",stroke:"none",fill:"#ffffff",fillOpacity:1})]})})})]}),e.jsxs(o,{children:[e.jsx(d,{children:e.jsx(u,{children:"Previsões Detalhadas"})}),e.jsx(l,{children:e.jsx("div",{"trae-inspector-start-line":"343","trae-inspector-start-column":"10","trae-inspector-end-line":"391","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueForecast.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"space-y-4",children:C.predictions.map((t,c)=>e.jsxs("div",{"trae-inspector-start-line":"345","trae-inspector-start-column":"14","trae-inspector-end-line":"389","trae-inspector-end-column":"20","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueForecast.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{"trae-inspector-start-line":"346","trae-inspector-start-column":"16","trae-inspector-end-line":"365","trae-inspector-end-column":"22","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueForecast.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex items-center gap-4",children:[e.jsxs("div",{"trae-inspector-start-line":"347","trae-inspector-start-column":"18","trae-inspector-end-line":"349","trae-inspector-end-column":"24","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueForecast.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center font-bold text-primary",children:["+",c+1]}),e.jsxs("div",{"trae-inspector-start-line":"350","trae-inspector-start-column":"18","trae-inspector-end-line":"364","trae-inspector-end-column":"24","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueForecast.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",children:[e.jsx("p",{"trae-inspector-start-line":"351","trae-inspector-start-column":"20","trae-inspector-end-line":"356","trae-inspector-end-column":"24","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueForecast.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"font-semibold",children:new Date(t.mes+"-01").toLocaleDateString("pt-BR",{month:"long",year:"numeric"})}),e.jsx("div",{"trae-inspector-start-line":"357","trae-inspector-start-column":"20","trae-inspector-end-line":"363","trae-inspector-end-column":"26","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueForecast.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex gap-2 mt-1",children:t.fatores.slice(0,2).map((s,i)=>e.jsx(z,{variant:"secondary",className:"text-xs",children:s},i))})]})]}),e.jsxs("div",{"trae-inspector-start-line":"366","trae-inspector-start-column":"16","trae-inspector-end-line":"388","trae-inspector-end-column":"22","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueForecast.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-right",children:[e.jsx("p",{"trae-inspector-start-line":"367","trae-inspector-start-column":"18","trae-inspector-end-line":"372","trae-inspector-end-column":"22","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueForecast.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-2xl font-bold",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t.receita_prevista)}),e.jsxs("p",{"trae-inspector-start-line":"373","trae-inspector-start-column":"18","trae-inspector-end-line":"383","trae-inspector-end-column":"22","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueForecast.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-sm text-muted-foreground",children:[new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",notation:"compact"}).format(t.receita_min)," - ",new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",notation:"compact"}).format(t.receita_max)]}),e.jsxs("div",{"trae-inspector-start-line":"384","trae-inspector-start-column":"18","trae-inspector-end-line":"387","trae-inspector-end-column":"24","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueForecast.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex items-center gap-2 mt-1 justify-end",children:[e.jsx("div",{"trae-inspector-start-line":"385","trae-inspector-start-column":"20","trae-inspector-end-line":"385","trae-inspector-end-column":"100","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueForecast.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:`w-2 h-2 rounded-full ${S(t.confianca)}`}),e.jsxs("span",{"trae-inspector-start-line":"386","trae-inspector-start-column":"20","trae-inspector-end-line":"386","trae-inspector-end-column":"102","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueForecast.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-xs text-muted-foreground",children:[t.confianca,"% confiança"]})]})]})]},t.mes))})})]}),e.jsxs("div",{"trae-inspector-start-line":"396","trae-inspector-start-column":"6","trae-inspector-end-line":"440","trae-inspector-end-column":"12","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueForecast.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(o,{children:[e.jsx(d,{children:e.jsx(u,{children:"Sazonalidade"})}),e.jsxs(l,{className:"space-y-4",children:[e.jsxs("div",{"trae-inspector-start-line":"402","trae-inspector-start-column":"12","trae-inspector-end-line":"411","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueForecast.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",children:[e.jsx("p",{"trae-inspector-start-line":"403","trae-inspector-start-column":"14","trae-inspector-end-line":"403","trae-inspector-end-column":"93","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueForecast.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Meses%20de%20Alta%22%2C%22textStartLine%22%3A%22403%22%2C%22textStartColumn%22%3A%2276%22%2C%22textEndLine%22%3A%22403%22%2C%22textEndColumn%22%3A%2289%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-sm font-medium text-muted-foreground mb-2",children:"Meses de Alta"}),e.jsx("div",{"trae-inspector-start-line":"404","trae-inspector-start-column":"14","trae-inspector-end-line":"410","trae-inspector-end-column":"20","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueForecast.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex gap-2",children:C.insights.sazonalidade.meses_altos.map(t=>e.jsx(z,{className:"bg-green-500",children:new Date(2025,t-1).toLocaleDateString("pt-BR",{month:"short"})},t))})]}),e.jsxs("div",{"trae-inspector-start-line":"412","trae-inspector-start-column":"12","trae-inspector-end-line":"421","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueForecast.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",children:[e.jsx("p",{"trae-inspector-start-line":"413","trae-inspector-start-column":"14","trae-inspector-end-line":"413","trae-inspector-end-column":"94","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueForecast.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Meses%20de%20Baixa%22%2C%22textStartLine%22%3A%22413%22%2C%22textStartColumn%22%3A%2276%22%2C%22textEndLine%22%3A%22413%22%2C%22textEndColumn%22%3A%2290%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-sm font-medium text-muted-foreground mb-2",children:"Meses de Baixa"}),e.jsx("div",{"trae-inspector-start-line":"414","trae-inspector-start-column":"14","trae-inspector-end-line":"420","trae-inspector-end-column":"20","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueForecast.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex gap-2",children:C.insights.sazonalidade.meses_baixos.map(t=>e.jsx(z,{variant:"secondary",children:new Date(2025,t-1).toLocaleDateString("pt-BR",{month:"short"})},t))})]})]})]}),e.jsxs(o,{children:[e.jsx(d,{children:e.jsx(u,{children:"Recomendações"})}),e.jsx(l,{children:e.jsx("ul",{"trae-inspector-start-line":"430","trae-inspector-start-column":"12","trae-inspector-end-line":"437","trae-inspector-end-column":"17","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueForecast.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"space-y-2",children:C.insights.recomendacoes.map((t,c)=>e.jsxs("li",{"trae-inspector-start-line":"432","trae-inspector-start-column":"16","trae-inspector-end-line":"435","trae-inspector-end-column":"21","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueForecast.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex items-start gap-2",children:[e.jsx($e,{className:"h-4 w-4 text-primary mt-0.5 flex-shrink-0"}),e.jsx("span",{"trae-inspector-start-line":"434","trae-inspector-start-column":"18","trae-inspector-end-line":"434","trae-inspector-end-column":"56","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueForecast.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-sm",children:t})]},c))})})]})]})]}):e.jsx(o,{children:e.jsx(l,{className:"pt-6",children:e.jsxs("div",{"trae-inspector-start-line":"181","trae-inspector-start-column":"10","trae-inspector-end-line":"188","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueForecast.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-center py-8 space-y-4",children:[e.jsx(te,{className:"mx-auto h-12 w-12 text-muted-foreground"}),e.jsx("p",{"trae-inspector-start-line":"183","trae-inspector-start-column":"12","trae-inspector-end-line":"183","trae-inspector-end-column":"83","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueForecast.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Gere%20uma%20previs%C3%A3o%20para%20come%C3%A7ar%22%2C%22textStartLine%22%3A%22183%22%2C%22textStartColumn%22%3A%2249%22%2C%22textEndLine%22%3A%22183%22%2C%22textEndColumn%22%3A%2279%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-muted-foreground",children:"Gere uma previsão para começar"}),e.jsxs(w,{onClick:A,children:[e.jsx(te,{className:"mr-2 h-4 w-4"}),"Gerar Previsão"]})]})})})}function Ze(){const[R,U]=p.useState([]),[C,q]=p.useState([]),[L,k]=p.useState([]),[P,A]=p.useState(!0),[n,v]=p.useState(!1),[S,M]=p.useState(!1),{user:h}=ye(),{toast:g}=ie(),[t,c]=p.useState({mes:"",ano:new Date().getFullYear().toString(),target_value:"",description:""}),[s,i]=p.useState({alert_name:"",alert_type:"revenue_drop",threshold_percentage:"",check_target_miss:!1,target_threshold_percentage:"",email_recipients:"",whatsapp_enabled:!1,whatsapp_numbers:"",n8n_enabled:!1,n8n_webhook_url:""});p.useEffect(()=>{m()},[]);const m=async()=>{try{A(!0);const{data:r,error:a}=await j.from("revenue_targets").select("*").order("ano",{ascending:!1}).order("mes",{ascending:!1});if(a)throw a;U(r||[]);const{data:y,error:T}=await j.from("predictive_alerts").select("*").order("created_at",{ascending:!1});if(T)throw T;q(y||[]);const{data:ne,error:Z}=await j.from("predictive_alert_history").select("*").order("created_at",{ascending:!1}).limit(20);if(Z)throw Z;k(ne||[])}catch(r){console.error("Erro ao carregar dados:",r),g({title:"Erro ao carregar dados",description:r.message,variant:"destructive"})}finally{A(!1)}},_=async r=>{if(r.preventDefault(),!!h)try{const{error:a}=await j.from("revenue_targets").insert([{mes:parseInt(t.mes),ano:parseInt(t.ano),target_value:parseFloat(t.target_value),description:t.description||null,created_by:h.id}]);if(a)throw a;g({title:"Meta criada",description:"Meta de receita configurada com sucesso"}),v(!1),c({mes:"",ano:new Date().getFullYear().toString(),target_value:"",description:""}),m()}catch(a){console.error("Erro ao criar meta:",a),g({title:"Erro ao criar meta",description:a.message,variant:"destructive"})}},I=async r=>{if(r.preventDefault(),!!h)try{const a={user_id:h.id,alert_name:s.alert_name,alert_type:s.alert_type,check_target_miss:s.check_target_miss,is_active:!0,email_recipients:s.email_recipients.split(",").map(T=>T.trim()).filter(Boolean),whatsapp_enabled:s.whatsapp_enabled,whatsapp_numbers:s.whatsapp_enabled?s.whatsapp_numbers.split(",").map(T=>T.trim()).filter(Boolean):[],n8n_enabled:s.n8n_enabled,n8n_webhook_url:s.n8n_enabled?s.n8n_webhook_url:null};s.threshold_percentage&&(a.threshold_percentage=parseFloat(s.threshold_percentage)),s.check_target_miss&&s.target_threshold_percentage&&(a.target_threshold_percentage=parseFloat(s.target_threshold_percentage));const{error:y}=await j.from("predictive_alerts").insert([a]);if(y)throw y;g({title:"Alerta criado",description:"Alerta preditivo configurado com sucesso"}),M(!1),i({alert_name:"",alert_type:"revenue_drop",threshold_percentage:"",check_target_miss:!1,target_threshold_percentage:"",email_recipients:"",whatsapp_enabled:!1,whatsapp_numbers:"",n8n_enabled:!1,n8n_webhook_url:""}),m()}catch(a){console.error("Erro ao criar alerta:",a),g({title:"Erro ao criar alerta",description:a.message,variant:"destructive"})}},B=async(r,a)=>{try{const{error:y}=await j.from("predictive_alerts").update({is_active:!a}).eq("id",r);if(y)throw y;g({title:a?"Alerta desativado":"Alerta ativado",description:"Status atualizado com sucesso"}),m()}catch(y){console.error("Erro ao atualizar alerta:",y),g({title:"Erro ao atualizar alerta",description:y.message,variant:"destructive"})}},$=async r=>{if(confirm("Tem certeza que deseja excluir esta meta?"))try{const{error:a}=await j.from("revenue_targets").delete().eq("id",r);if(a)throw a;g({title:"Meta excluída",description:"Meta removida com sucesso"}),m()}catch(a){console.error("Erro ao excluir meta:",a),g({title:"Erro ao excluir meta",description:a.message,variant:"destructive"})}},O=async r=>{if(confirm("Tem certeza que deseja excluir este alerta?"))try{const{error:a}=await j.from("predictive_alerts").delete().eq("id",r);if(a)throw a;g({title:"Alerta excluído",description:"Alerta removido com sucesso"}),m()}catch(a){console.error("Erro ao excluir alerta:",a),g({title:"Erro ao excluir alerta",description:a.message,variant:"destructive"})}},H=async()=>{try{A(!0);const{data:r,error:a}=await j.functions.invoke("check-predictive-alerts");if(a)throw a;g({title:"Verificação concluída",description:`${r.alerts_triggered} alerta(s) disparado(s)`}),m()}catch(r){console.error("Erro ao verificar alertas:",r),g({title:"Erro ao verificar alertas",description:r.message,variant:"destructive"})}finally{A(!1)}};return P?e.jsx("div",{"trae-inspector-start-line":"344","trae-inspector-start-column":"11","trae-inspector-end-line":"344","trae-inspector-end-column":"71","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\PredictiveAlertsConfig.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Carregando...%22%2C%22textStartLine%22%3A%22344%22%2C%22textStartColumn%22%3A%2252%22%2C%22textEndLine%22%3A%22344%22%2C%22textEndColumn%22%3A%2265%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex justify-center p-8",children:"Carregando..."}):e.jsx("div",{"trae-inspector-start-line":"348","trae-inspector-start-column":"4","trae-inspector-end-line":"733","trae-inspector-end-column":"10","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\PredictiveAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"space-y-6",children:e.jsxs(Ne,{defaultValue:"targets",className:"w-full",children:[e.jsxs(Le,{className:"grid w-full grid-cols-3",children:[e.jsx(F,{value:"targets",children:"Metas"}),e.jsx(F,{value:"alerts",children:"Alertas"}),e.jsx(F,{value:"history",children:"Histórico"})]}),e.jsxs(E,{value:"targets",className:"space-y-4",children:[e.jsxs("div",{"trae-inspector-start-line":"358","trae-inspector-start-column":"10","trae-inspector-end-line":"367","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\PredictiveAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex justify-between items-center",children:[e.jsxs("div",{"trae-inspector-start-line":"359","trae-inspector-start-column":"12","trae-inspector-end-line":"362","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\PredictiveAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",children:[e.jsx("h3",{"trae-inspector-start-line":"360","trae-inspector-start-column":"14","trae-inspector-end-line":"360","trae-inspector-end-column":"73","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\PredictiveAlertsConfig.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Metas%20de%20Receita%22%2C%22textStartLine%22%3A%22360%22%2C%22textStartColumn%22%3A%2252%22%2C%22textEndLine%22%3A%22360%22%2C%22textEndColumn%22%3A%2268%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-lg font-semibold",children:"Metas de Receita"}),e.jsx("p",{"trae-inspector-start-line":"361","trae-inspector-start-column":"14","trae-inspector-end-line":"361","trae-inspector-end-column":"114","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\PredictiveAlertsConfig.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Configure%20metas%20mensais%20para%20acompanhar%20performance%22%2C%22textStartLine%22%3A%22361%22%2C%22textStartColumn%22%3A%2259%22%2C%22textEndLine%22%3A%22361%22%2C%22textEndColumn%22%3A%22110%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-sm text-muted-foreground",children:"Configure metas mensais para acompanhar performance"})]}),e.jsxs(w,{onClick:()=>v(!n),children:[e.jsx(Ce,{className:"mr-2 h-4 w-4"}),"Nova Meta"]})]}),n&&e.jsxs(o,{children:[e.jsx(d,{children:e.jsx(u,{children:"Configurar Nova Meta"})}),e.jsx(l,{children:e.jsxs("form",{"trae-inspector-start-line":"375","trae-inspector-start-column":"16","trae-inspector-end-line":"432","trae-inspector-end-column":"23","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\PredictiveAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",onSubmit:_,className:"space-y-4",children:[e.jsxs("div",{"trae-inspector-start-line":"376","trae-inspector-start-column":"18","trae-inspector-end-line":"416","trae-inspector-end-column":"24","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\PredictiveAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{"trae-inspector-start-line":"377","trae-inspector-start-column":"20","trae-inspector-end-line":"391","trae-inspector-end-column":"26","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\PredictiveAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"space-y-2",children:[e.jsx(f,{htmlFor:"target_mes",children:"Mês"}),e.jsxs(Q,{value:t.mes,onValueChange:r=>c({...t,mes:r}),required:!0,children:[e.jsx(X,{children:e.jsx(Y,{placeholder:"Selecione"})}),e.jsx(J,{children:Array.from({length:12},(r,a)=>e.jsx(N,{value:(a+1).toString(),children:new Date(2025,a).toLocaleDateString("pt-BR",{month:"long"})},a+1))})]})]}),e.jsxs("div",{"trae-inspector-start-line":"393","trae-inspector-start-column":"20","trae-inspector-end-line":"402","trae-inspector-end-column":"26","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\PredictiveAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"space-y-2",children:[e.jsx(f,{htmlFor:"target_ano",children:"Ano"}),e.jsx(D,{id:"target_ano",type:"number",value:t.ano,onChange:r=>c({...t,ano:r.target.value}),required:!0})]}),e.jsxs("div",{"trae-inspector-start-line":"404","trae-inspector-start-column":"20","trae-inspector-end-line":"415","trae-inspector-end-column":"26","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\PredictiveAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"space-y-2",children:[e.jsx(f,{htmlFor:"target_value",children:"Valor da Meta (R$)"}),e.jsx(D,{id:"target_value",type:"number",step:"0.01",value:t.target_value,onChange:r=>c({...t,target_value:r.target.value}),placeholder:"Ex: 100000",required:!0})]})]}),e.jsxs("div",{"trae-inspector-start-line":"418","trae-inspector-start-column":"18","trae-inspector-end-line":"426","trae-inspector-end-column":"24","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\PredictiveAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"space-y-2",children:[e.jsx(f,{htmlFor:"target_description",children:"Descrição (opcional)"}),e.jsx(D,{id:"target_description",value:t.description,onChange:r=>c({...t,description:r.target.value}),placeholder:"Ex: Meta de expansão Q4"})]}),e.jsxs("div",{"trae-inspector-start-line":"428","trae-inspector-start-column":"18","trae-inspector-end-line":"431","trae-inspector-end-column":"24","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\PredictiveAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex gap-2",children:[e.jsx(w,{type:"submit",children:"Criar Meta"}),e.jsx(w,{type:"button",variant:"outline",onClick:()=>v(!1),children:"Cancelar"})]})]})})]}),e.jsxs("div",{"trae-inspector-start-line":"437","trae-inspector-start-column":"10","trae-inspector-end-line":"484","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\PredictiveAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"grid gap-4",children:[R.map(r=>e.jsx(o,{children:e.jsx(l,{className:"pt-6",children:e.jsxs("div",{"trae-inspector-start-line":"441","trae-inspector-start-column":"18","trae-inspector-end-line":"469","trae-inspector-end-column":"24","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\PredictiveAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex items-center justify-between",children:[e.jsxs("div",{"trae-inspector-start-line":"442","trae-inspector-start-column":"20","trae-inspector-end-line":"460","trae-inspector-end-column":"26","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\PredictiveAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex items-center gap-4",children:[e.jsx("div",{"trae-inspector-start-line":"443","trae-inspector-start-column":"22","trae-inspector-end-line":"445","trae-inspector-end-column":"28","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\PredictiveAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"p-2 rounded-lg bg-primary/10",children:e.jsx(le,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{"trae-inspector-start-line":"446","trae-inspector-start-column":"22","trae-inspector-end-line":"459","trae-inspector-end-column":"28","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\PredictiveAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",children:[e.jsx("h4",{"trae-inspector-start-line":"447","trae-inspector-start-column":"24","trae-inspector-end-line":"452","trae-inspector-end-column":"29","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\PredictiveAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"font-semibold",children:new Date(r.ano,r.mes-1).toLocaleDateString("pt-BR",{month:"long",year:"numeric"})}),e.jsx("p",{"trae-inspector-start-line":"453","trae-inspector-start-column":"24","trae-inspector-end-line":"455","trae-inspector-end-column":"28","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\PredictiveAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-2xl font-bold",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(r.target_value)}),r.description&&e.jsx("p",{"trae-inspector-start-line":"457","trae-inspector-start-column":"26","trae-inspector-end-line":"457","trae-inspector-end-column":"100","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\PredictiveAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-sm text-muted-foreground mt-1",children:r.description})]})]}),e.jsx(w,{variant:"outline",size:"icon",onClick:()=>$(r.id),className:"text-destructive hover:text-destructive",children:e.jsx(pe,{className:"h-4 w-4"})})]})})},r.id)),R.length===0&&e.jsx(o,{children:e.jsx(l,{className:"pt-6",children:e.jsxs("div",{"trae-inspector-start-line":"477","trae-inspector-start-column":"18","trae-inspector-end-line":"480","trae-inspector-end-column":"24","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\PredictiveAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-center py-8 text-muted-foreground",children:[e.jsx(le,{className:"mx-auto h-12 w-12 mb-4"}),e.jsx("p",{"trae-inspector-start-line":"479","trae-inspector-start-column":"20","trae-inspector-end-line":"479","trae-inspector-end-column":"51","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\PredictiveAlertsConfig.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Nenhuma%20meta%20configurada%22%2C%22textStartLine%22%3A%22479%22%2C%22textStartColumn%22%3A%2223%22%2C%22textEndLine%22%3A%22479%22%2C%22textEndColumn%22%3A%2247%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",children:"Nenhuma meta configurada"})]})})})]})]}),e.jsxs(E,{value:"alerts",className:"space-y-4",children:[e.jsxs("div",{"trae-inspector-start-line":"489","trae-inspector-start-column":"10","trae-inspector-end-line":"504","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\PredictiveAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex justify-between items-center",children:[e.jsxs("div",{"trae-inspector-start-line":"490","trae-inspector-start-column":"12","trae-inspector-end-line":"493","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\PredictiveAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",children:[e.jsx("h3",{"trae-inspector-start-line":"491","trae-inspector-start-column":"14","trae-inspector-end-line":"491","trae-inspector-end-column":"75","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\PredictiveAlertsConfig.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Alertas%20Preditivos%22%2C%22textStartLine%22%3A%22491%22%2C%22textStartColumn%22%3A%2252%22%2C%22textEndLine%22%3A%22491%22%2C%22textEndColumn%22%3A%2270%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-lg font-semibold",children:"Alertas Preditivos"}),e.jsx("p",{"trae-inspector-start-line":"492","trae-inspector-start-column":"14","trae-inspector-end-line":"492","trae-inspector-end-column":"108","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\PredictiveAlertsConfig.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Configure%20alertas%20baseados%20em%20previs%C3%B5es%20de%20ML%22%2C%22textStartLine%22%3A%22492%22%2C%22textStartColumn%22%3A%2259%22%2C%22textEndLine%22%3A%22492%22%2C%22textEndColumn%22%3A%22104%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-sm text-muted-foreground",children:"Configure alertas baseados em previsões de ML"})]}),e.jsxs("div",{"trae-inspector-start-line":"494","trae-inspector-start-column":"12","trae-inspector-end-line":"503","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\PredictiveAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex gap-2",children:[e.jsxs(w,{onClick:H,variant:"outline",children:[e.jsx(me,{className:"mr-2 h-4 w-4"}),"Verificar Agora"]}),e.jsxs(w,{onClick:()=>M(!S),children:[e.jsx(Ce,{className:"mr-2 h-4 w-4"}),"Novo Alerta"]})]})]}),S&&e.jsxs(o,{children:[e.jsx(d,{children:e.jsx(u,{children:"Configurar Novo Alerta"})}),e.jsx(l,{children:e.jsxs("form",{"trae-inspector-start-line":"512","trae-inspector-start-column":"16","trae-inspector-end-line":"611","trae-inspector-end-column":"23","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\PredictiveAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",onSubmit:I,className:"space-y-4",children:[e.jsxs("div",{"trae-inspector-start-line":"513","trae-inspector-start-column":"18","trae-inspector-end-line":"605","trae-inspector-end-column":"24","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\PredictiveAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{"trae-inspector-start-line":"514","trae-inspector-start-column":"20","trae-inspector-end-line":"523","trae-inspector-end-column":"26","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\PredictiveAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"space-y-2 md:col-span-2",children:[e.jsx(f,{htmlFor:"alert_name",children:"Nome do Alerta"}),e.jsx(D,{id:"alert_name",value:s.alert_name,onChange:r=>i({...s,alert_name:r.target.value}),placeholder:"Ex: Alerta de Queda de Receita",required:!0})]}),e.jsxs("div",{"trae-inspector-start-line":"525","trae-inspector-start-column":"20","trae-inspector-end-line":"536","trae-inspector-end-column":"26","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\PredictiveAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"space-y-2",children:[e.jsx(f,{htmlFor:"threshold_percentage",children:"Queda de Receita (%)"}),e.jsx(D,{id:"threshold_percentage",type:"number",step:"0.1",value:s.threshold_percentage,onChange:r=>i({...s,threshold_percentage:r.target.value}),placeholder:"Ex: 10"}),e.jsx("p",{"trae-inspector-start-line":"535","trae-inspector-start-column":"22","trae-inspector-end-line":"535","trae-inspector-end-column":"122","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\PredictiveAlertsConfig.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Alertar%20quando%20previs%C3%A3o%20indicar%20queda%20superior%20a%20X%25%22%2C%22textStartLine%22%3A%22535%22%2C%22textStartColumn%22%3A%2267%22%2C%22textEndLine%22%3A%22535%22%2C%22textEndColumn%22%3A%22118%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-xs text-muted-foreground",children:"Alertar quando previsão indicar queda superior a X%"})]}),e.jsxs("div",{"trae-inspector-start-line":"538","trae-inspector-start-column":"20","trae-inspector-end-line":"556","trae-inspector-end-column":"26","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\PredictiveAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"space-y-2",children:[e.jsxs("div",{"trae-inspector-start-line":"539","trae-inspector-start-column":"22","trae-inspector-end-line":"546","trae-inspector-end-column":"28","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\PredictiveAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex items-center space-x-2 mb-2",children:[e.jsx(G,{id:"check_target_miss",checked:s.check_target_miss,onCheckedChange:r=>i({...s,check_target_miss:r})}),e.jsx(f,{htmlFor:"check_target_miss",children:"Alertar Meta Não Atingida"})]}),s.check_target_miss&&e.jsx(D,{type:"number",step:"0.1",value:s.target_threshold_percentage,onChange:r=>i({...s,target_threshold_percentage:r.target.value}),placeholder:"Margem (%)"})]}),e.jsxs("div",{"trae-inspector-start-line":"558","trae-inspector-start-column":"20","trae-inspector-end-line":"566","trae-inspector-end-column":"26","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\PredictiveAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"space-y-2 md:col-span-2",children:[e.jsx(f,{htmlFor:"alert_email_recipients",children:"E-mails (separados por vírgula)"}),e.jsx(D,{id:"alert_email_recipients",value:s.email_recipients,onChange:r=>i({...s,email_recipients:r.target.value}),placeholder:"email1@example.com, email2@example.com"})]}),e.jsxs("div",{"trae-inspector-start-line":"568","trae-inspector-start-column":"20","trae-inspector-end-line":"585","trae-inspector-end-column":"26","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\PredictiveAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"space-y-2 md:col-span-2",children:[e.jsxs("div",{"trae-inspector-start-line":"569","trae-inspector-start-column":"22","trae-inspector-end-line":"576","trae-inspector-end-column":"28","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\PredictiveAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex items-center space-x-2",children:[e.jsx(G,{id:"alert_whatsapp_enabled",checked:s.whatsapp_enabled,onCheckedChange:r=>i({...s,whatsapp_enabled:r})}),e.jsx(f,{htmlFor:"alert_whatsapp_enabled",children:"Ativar WhatsApp"})]}),s.whatsapp_enabled&&e.jsx(D,{value:s.whatsapp_numbers,onChange:r=>i({...s,whatsapp_numbers:r.target.value}),placeholder:"+5511999999999, +5511888888888",className:"mt-2"})]}),e.jsxs("div",{"trae-inspector-start-line":"587","trae-inspector-start-column":"20","trae-inspector-end-line":"604","trae-inspector-end-column":"26","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\PredictiveAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"space-y-2 md:col-span-2",children:[e.jsxs("div",{"trae-inspector-start-line":"588","trae-inspector-start-column":"22","trae-inspector-end-line":"595","trae-inspector-end-column":"28","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\PredictiveAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex items-center space-x-2",children:[e.jsx(G,{id:"alert_n8n_enabled",checked:s.n8n_enabled,onCheckedChange:r=>i({...s,n8n_enabled:r})}),e.jsx(f,{htmlFor:"alert_n8n_enabled",children:"Ativar n8n"})]}),s.n8n_enabled&&e.jsx(D,{value:s.n8n_webhook_url,onChange:r=>i({...s,n8n_webhook_url:r.target.value}),placeholder:"https://sua-instancia-n8n.com/webhook/...",className:"mt-2"})]})]}),e.jsxs("div",{"trae-inspector-start-line":"607","trae-inspector-start-column":"18","trae-inspector-end-line":"610","trae-inspector-end-column":"24","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\PredictiveAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex gap-2",children:[e.jsx(w,{type:"submit",children:"Criar Alerta"}),e.jsx(w,{type:"button",variant:"outline",onClick:()=>M(!1),children:"Cancelar"})]})]})})]}),e.jsxs("div",{"trae-inspector-start-line":"616","trae-inspector-start-column":"10","trae-inspector-end-line":"684","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\PredictiveAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"grid gap-4",children:[C.map(r=>e.jsx(o,{children:e.jsx(l,{className:"pt-6",children:e.jsxs("div",{"trae-inspector-start-line":"620","trae-inspector-start-column":"18","trae-inspector-end-line":"669","trae-inspector-end-column":"24","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\PredictiveAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex items-center justify-between",children:[e.jsxs("div",{"trae-inspector-start-line":"621","trae-inspector-start-column":"20","trae-inspector-end-line":"651","trae-inspector-end-column":"26","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\PredictiveAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex items-center gap-4",children:[e.jsx("div",{"trae-inspector-start-line":"622","trae-inspector-start-column":"22","trae-inspector-end-line":"628","trae-inspector-end-column":"28","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\PredictiveAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:`p-2 rounded-lg ${r.is_active?"bg-green-500/10":"bg-gray-500/10"}`,children:r.is_active?e.jsx(re,{className:"h-5 w-5 text-green-600"}):e.jsx(se,{className:"h-5 w-5 text-gray-600"})}),e.jsxs("div",{"trae-inspector-start-line":"629","trae-inspector-start-column":"22","trae-inspector-end-line":"650","trae-inspector-end-column":"28","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\PredictiveAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex-1",children:[e.jsx("h4",{"trae-inspector-start-line":"630","trae-inspector-start-column":"24","trae-inspector-end-line":"630","trae-inspector-end-column":"77","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\PredictiveAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"font-semibold",children:r.alert_name}),e.jsxs("div",{"trae-inspector-start-line":"631","trae-inspector-start-column":"24","trae-inspector-end-line":"649","trae-inspector-end-column":"30","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\PredictiveAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex gap-2 mt-1 flex-wrap",children:[r.threshold_percentage&&e.jsxs(z,{variant:"outline",children:[e.jsx(Se,{className:"mr-1 h-3 w-3"}),"Queda: ",r.threshold_percentage,"%"]}),r.check_target_miss&&e.jsxs(z,{variant:"outline",children:[e.jsx(le,{className:"mr-1 h-3 w-3"}),"Meta: ",r.target_threshold_percentage,"%"]}),r.trigger_count>0&&e.jsxs(z,{variant:"secondary",children:[r.trigger_count," disparos"]})]})]})]}),e.jsxs("div",{"trae-inspector-start-line":"652","trae-inspector-start-column":"20","trae-inspector-end-line":"668","trae-inspector-end-column":"26","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\PredictiveAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex gap-2",children:[e.jsx(w,{variant:"outline",size:"icon",onClick:()=>B(r.id,r.is_active),children:r.is_active?e.jsx(se,{className:"h-4 w-4"}):e.jsx(re,{className:"h-4 w-4"})}),e.jsx(w,{variant:"outline",size:"icon",onClick:()=>O(r.id),className:"text-destructive hover:text-destructive",children:e.jsx(pe,{className:"h-4 w-4"})})]})]})})},r.id)),C.length===0&&e.jsx(o,{children:e.jsx(l,{className:"pt-6",children:e.jsxs("div",{"trae-inspector-start-line":"677","trae-inspector-start-column":"18","trae-inspector-end-line":"680","trae-inspector-end-column":"24","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\PredictiveAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-center py-8 text-muted-foreground",children:[e.jsx(Be,{className:"mx-auto h-12 w-12 mb-4"}),e.jsx("p",{"trae-inspector-start-line":"679","trae-inspector-start-column":"20","trae-inspector-end-line":"679","trae-inspector-end-column":"52","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\PredictiveAlertsConfig.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Nenhum%20alerta%20configurado%22%2C%22textStartLine%22%3A%22679%22%2C%22textStartColumn%22%3A%2223%22%2C%22textEndLine%22%3A%22679%22%2C%22textEndColumn%22%3A%2248%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",children:"Nenhum alerta configurado"})]})})})]})]}),e.jsxs(E,{value:"history",className:"space-y-4",children:[e.jsxs("div",{"trae-inspector-start-line":"689","trae-inspector-start-column":"10","trae-inspector-end-line":"692","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\PredictiveAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",children:[e.jsx("h3",{"trae-inspector-start-line":"690","trae-inspector-start-column":"12","trae-inspector-end-line":"690","trae-inspector-end-column":"75","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\PredictiveAlertsConfig.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Hist%C3%B3rico%20de%20Alertas%22%2C%22textStartLine%22%3A%22690%22%2C%22textStartColumn%22%3A%2250%22%2C%22textEndLine%22%3A%22690%22%2C%22textEndColumn%22%3A%2270%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-lg font-semibold",children:"Histórico de Alertas"}),e.jsx("p",{"trae-inspector-start-line":"691","trae-inspector-start-column":"12","trae-inspector-end-line":"691","trae-inspector-end-column":"92","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\PredictiveAlertsConfig.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Alertas%20disparados%20recentemente%22%2C%22textStartLine%22%3A%22691%22%2C%22textStartColumn%22%3A%2257%22%2C%22textEndLine%22%3A%22691%22%2C%22textEndColumn%22%3A%2288%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-sm text-muted-foreground",children:"Alertas disparados recentemente"})]}),e.jsxs("div",{"trae-inspector-start-line":"694","trae-inspector-start-column":"10","trae-inspector-end-line":"730","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\PredictiveAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"space-y-4",children:[L.map(r=>e.jsx(o,{children:e.jsx(l,{className:"pt-6",children:e.jsxs("div",{"trae-inspector-start-line":"698","trae-inspector-start-column":"18","trae-inspector-end-line":"715","trae-inspector-end-column":"24","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\PredictiveAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex items-start gap-4",children:[e.jsx("div",{"trae-inspector-start-line":"699","trae-inspector-start-column":"20","trae-inspector-end-line":"701","trae-inspector-end-column":"26","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\PredictiveAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"p-2 rounded-lg bg-orange-500/10",children:e.jsx(De,{className:"h-5 w-5 text-orange-600"})}),e.jsx("div",{"trae-inspector-start-line":"702","trae-inspector-start-column":"20","trae-inspector-end-line":"714","trae-inspector-end-column":"26","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\PredictiveAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex-1",children:e.jsxs("div",{"trae-inspector-start-line":"703","trae-inspector-start-column":"22","trae-inspector-end-line":"713","trae-inspector-end-column":"28","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\PredictiveAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex justify-between items-start",children:[e.jsxs("div",{"trae-inspector-start-line":"704","trae-inspector-start-column":"24","trae-inspector-end-line":"709","trae-inspector-end-column":"30","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\PredictiveAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",children:[e.jsx("p",{"trae-inspector-start-line":"705","trae-inspector-start-column":"26","trae-inspector-end-line":"705","trae-inspector-end-column":"76","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\PredictiveAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"font-medium",children:r.alert_reason}),e.jsx("p",{"trae-inspector-start-line":"706","trae-inspector-start-column":"26","trae-inspector-end-line":"708","trae-inspector-end-column":"30","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\PredictiveAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-sm text-muted-foreground mt-1",children:new Date(r.created_at).toLocaleString("pt-BR")})]}),e.jsxs(z,{variant:r.variance_percentage>20?"destructive":"secondary",children:[r.variance_percentage.toFixed(1),"%"]})]})})]})})},r.id)),L.length===0&&e.jsx(o,{children:e.jsx(l,{className:"pt-6",children:e.jsxs("div",{"trae-inspector-start-line":"723","trae-inspector-start-column":"18","trae-inspector-end-line":"726","trae-inspector-end-column":"24","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\PredictiveAlertsConfig.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-center py-8 text-muted-foreground",children:[e.jsx(De,{className:"mx-auto h-12 w-12 mb-4"}),e.jsx("p",{"trae-inspector-start-line":"725","trae-inspector-start-column":"20","trae-inspector-end-line":"725","trae-inspector-end-column":"56","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\PredictiveAlertsConfig.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Nenhum%20alerta%20disparado%20ainda%22%2C%22textStartLine%22%3A%22725%22%2C%22textStartColumn%22%3A%2223%22%2C%22textEndLine%22%3A%22725%22%2C%22textEndColumn%22%3A%2252%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",children:"Nenhum alerta disparado ainda"})]})})})]})]})]})})}function Lt(){const[R,U]=p.useState(!0),[C,q]=p.useState("6m"),[L,k]=p.useState([]),[P,A]=p.useState([]),[n,v]=p.useState([]),[S,M]=p.useState([]),[h,g]=p.useState({receita_total:0,custo_total:0,margem_liquida:0,total_ctes:0,total_clientes:0,ticket_medio:0,receita_por_kg:0,icms_total:0,icms_percentual:0}),{toast:t}=ie(),c=p.useCallback(async()=>{try{U(!0);const i=C==="3m"?3:C==="6m"?6:12,m=new Date;m.setMonth(m.getMonth()-i);const{data:_,error:I}=await j.from("revenue_records").select("*").gte("data_emissao",m.toISOString()).eq("status","ativo").order("data_emissao",{ascending:!0});if(I)throw I;const B=new Map,$=new Map,O=new Map,H=new Map;let r=0,a=0,y=0;const T=new Set;_==null||_.forEach(x=>{const b=new Date(x.data_emissao).toLocaleDateString("pt-BR",{month:"short",year:"2-digit"}),K=parseFloat(String(x.valor_frete||0)),ke=parseFloat(String(x.peso_kg||0)),Ae=parseFloat(String(x.valor_icms||0)),V=B.get(b)||{mes:b,receita:0,custo:0,margem:0};V.receita+=K,V.custo+=K*.7,V.margem=V.receita-V.custo,B.set(b,V);const ee=x.cliente_cnpj,fe=$.get(ee)||{valor:0,nome:x.cliente_nome,cnpj:ee};fe.valor+=K,$.set(ee,fe),T.add(ee);const be=`${x.origem_uf} → ${x.destino_uf}`,ae=O.get(be)||{valor:0,qtd:0};ae.valor+=K,ae.qtd+=1,O.set(be,ae);const ce=x.destino_uf||"—",oe=H.get(ce)||{uf:ce,icms:0,receita:0};oe.icms+=Ae,oe.receita+=K,H.set(ce,oe),r+=K,a+=ke,y+=Ae});const ne=Array.from(B.values());k(ne);const Z=Array.from($.entries()).map(([x,b])=>({cliente:b.nome,cnpj:x,valor:b.valor,percentual:b.valor/Math.max(1,r)*100})).sort((x,b)=>b.valor-x.valor).slice(0,5);A(Z);const Fe=Array.from(O.entries()).map(([x,b])=>({rota:x,valor:b.valor,qtd_ctes:b.qtd})).sort((x,b)=>b.valor-x.valor).slice(0,5);v(Fe);const Ee=Array.from(H.values()).sort((x,b)=>b.icms-x.icms).slice(0,10);M(Ee);const we=r*.7;g({receita_total:r,custo_total:we,margem_liquida:r?(r-we)/r*100:0,total_ctes:(_==null?void 0:_.length)||0,total_clientes:T.size,ticket_medio:_!=null&&_.length?r/_.length:0,receita_por_kg:a?r/a:0,icms_total:y,icms_percentual:r?y/r*100:0})}catch(i){const m=i instanceof Error?i.message:String(i);console.error("Erro ao carregar dados:",m),t({title:"Erro ao carregar dados",description:m,variant:"destructive"})}finally{U(!1)}},[C,t]);p.useEffect(()=>{c()},[c]);const s=()=>{const i=[["Mês","Receita","Custo","Margem"],...L.map(B=>[B.mes,B.receita.toFixed(2),B.custo.toFixed(2),B.margem.toFixed(2)])].map(B=>B.join(",")).join(`
`),m=new Blob([i],{type:"text/csv"}),_=window.URL.createObjectURL(m),I=document.createElement("a");I.href=_,I.download=`analise-receita-${new Date().toISOString().split("T")[0]}.csv`,I.click()};return R?e.jsx("div",{"trae-inspector-start-line":"213","trae-inspector-start-column":"11","trae-inspector-end-line":"213","trae-inspector-end-column":"77","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAnalysis.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Carregando%20dados...%22%2C%22textStartLine%22%3A%22213%22%2C%22textStartColumn%22%3A%2252%22%2C%22textEndLine%22%3A%22213%22%2C%22textEndColumn%22%3A%2271%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex justify-center p-8",children:"Carregando dados..."}):e.jsxs("div",{"trae-inspector-start-line":"217","trae-inspector-start-column":"4","trae-inspector-end-line":"500","trae-inspector-end-column":"10","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAnalysis.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"space-y-6",children:[e.jsxs("div",{"trae-inspector-start-line":"219","trae-inspector-start-column":"6","trae-inspector-end-line":"240","trae-inspector-end-column":"12","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAnalysis.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex justify-between items-center",children:[e.jsxs("div",{"trae-inspector-start-line":"220","trae-inspector-start-column":"8","trae-inspector-end-line":"223","trae-inspector-end-column":"14","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAnalysis.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",children:[e.jsx("h3",{"trae-inspector-start-line":"221","trae-inspector-start-column":"10","trae-inspector-end-line":"221","trae-inspector-end-column":"68","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAnalysis.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22An%C3%A1lise%20de%20Receita%22%2C%22textStartLine%22%3A%22221%22%2C%22textStartColumn%22%3A%2245%22%2C%22textEndLine%22%3A%22221%22%2C%22textEndColumn%22%3A%2263%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-2xl font-bold",children:"Análise de Receita"}),e.jsx("p",{"trae-inspector-start-line":"222","trae-inspector-start-column":"10","trae-inspector-end-line":"222","trae-inspector-end-column":"88","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAnalysis.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Indicadores%20financeiros%20e%20performance%22%2C%22textStartLine%22%3A%22222%22%2C%22textStartColumn%22%3A%2247%22%2C%22textEndLine%22%3A%22222%22%2C%22textEndColumn%22%3A%2284%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-muted-foreground",children:"Indicadores financeiros e performance"})]}),e.jsxs("div",{"trae-inspector-start-line":"224","trae-inspector-start-column":"8","trae-inspector-end-line":"239","trae-inspector-end-column":"14","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAnalysis.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex gap-2",children:[e.jsxs(Q,{value:C,onValueChange:q,children:[e.jsx(X,{className:"w-32",children:e.jsx(Y,{})}),e.jsxs(J,{children:[e.jsx(N,{value:"3m",children:"3 Meses"}),e.jsx(N,{value:"6m",children:"6 Meses"}),e.jsx(N,{value:"12m",children:"12 Meses"})]})]}),e.jsxs(w,{onClick:s,variant:"outline",children:[e.jsx(Re,{className:"mr-2 h-4 w-4"}),"Exportar"]})]})]}),e.jsxs("div",{"trae-inspector-start-line":"243","trae-inspector-start-column":"6","trae-inspector-end-line":"334","trae-inspector-end-column":"12","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAnalysis.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[e.jsxs(o,{children:[e.jsxs(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(u,{className:"text-sm font-medium",children:"Receita Total"}),e.jsx(_e,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(l,{children:[e.jsx("div",{"trae-inspector-start-line":"250","trae-inspector-start-column":"12","trae-inspector-end-line":"252","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAnalysis.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-2xl font-bold",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(h.receita_total)}),e.jsxs("p",{"trae-inspector-start-line":"253","trae-inspector-start-column":"12","trae-inspector-end-line":"255","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAnalysis.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-xs text-muted-foreground mt-1",children:["Margem: ",h.margem_liquida.toFixed(1),"%"]})]})]}),e.jsxs(o,{children:[e.jsxs(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(u,{className:"text-sm font-medium",children:"Ticket Médio"}),e.jsx(Oe,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(l,{children:[e.jsx("div",{"trae-inspector-start-line":"265","trae-inspector-start-column":"12","trae-inspector-end-line":"267","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAnalysis.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-2xl font-bold",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(h.ticket_medio)}),e.jsxs("p",{"trae-inspector-start-line":"268","trae-inspector-start-column":"12","trae-inspector-end-line":"270","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAnalysis.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-xs text-muted-foreground mt-1",children:[h.total_ctes," CT-es emitidos"]})]})]}),e.jsxs(o,{children:[e.jsxs(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(u,{className:"text-sm font-medium",children:"Clientes Ativos"}),e.jsx(Me,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(l,{children:[e.jsx("div",{"trae-inspector-start-line":"280","trae-inspector-start-column":"12","trae-inspector-end-line":"280","trae-inspector-end-column":"78","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAnalysis.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-2xl font-bold",children:h.total_clientes}),e.jsx("p",{"trae-inspector-start-line":"281","trae-inspector-start-column":"12","trae-inspector-end-line":"283","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAnalysis.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22No%20per%C3%ADodo%20selecionado%22%2C%22textStartLine%22%3A%22281%22%2C%22textStartColumn%22%3A%2262%22%2C%22textEndLine%22%3A%22283%22%2C%22textEndColumn%22%3A%2212%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-xs text-muted-foreground mt-1",children:"No período selecionado"})]})]}),e.jsxs(o,{children:[e.jsxs(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(u,{className:"text-sm font-medium",children:"Receita por KG"}),e.jsx(Te,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(l,{children:[e.jsx("div",{"trae-inspector-start-line":"293","trae-inspector-start-column":"12","trae-inspector-end-line":"295","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAnalysis.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-2xl font-bold",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(h.receita_por_kg)}),e.jsx("p",{"trae-inspector-start-line":"296","trae-inspector-start-column":"12","trae-inspector-end-line":"298","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAnalysis.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Frete%20por%20quilograma%22%2C%22textStartLine%22%3A%22296%22%2C%22textStartColumn%22%3A%2262%22%2C%22textEndLine%22%3A%22298%22%2C%22textEndColumn%22%3A%2212%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-xs text-muted-foreground mt-1",children:"Frete por quilograma"})]})]}),e.jsxs(o,{children:[e.jsxs(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(u,{className:"text-sm font-medium",children:"ROI"}),e.jsx(Ue,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(l,{children:[(()=>{const i=Ie({investment:h.custo_total,gain:h.receita_total});return e.jsxs("div",{"trae-inspector-start-line":"311","trae-inspector-start-column":"16","trae-inspector-end-line":"311","trae-inspector-end-column":"86","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAnalysis.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-2xl font-bold",children:[i.roiPercent.toFixed(2),"%"]})})(),e.jsx("p",{"trae-inspector-start-line":"314","trae-inspector-start-column":"12","trae-inspector-end-line":"316","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAnalysis.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Retorno%20sobre%20investimento%22%2C%22textStartLine%22%3A%22314%22%2C%22textStartColumn%22%3A%2262%22%2C%22textEndLine%22%3A%22316%22%2C%22textEndColumn%22%3A%2212%22%2C%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-xs text-muted-foreground mt-1",children:"Retorno sobre investimento"})]})]}),e.jsxs(o,{children:[e.jsxs(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(u,{className:"text-sm font-medium",children:"ICMS"}),e.jsx(_e,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(l,{children:[e.jsx("div",{"trae-inspector-start-line":"326","trae-inspector-start-column":"12","trae-inspector-end-line":"328","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAnalysis.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-2xl font-bold",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(h.icms_total)}),e.jsxs("p",{"trae-inspector-start-line":"329","trae-inspector-start-column":"12","trae-inspector-end-line":"331","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAnalysis.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-xs text-muted-foreground mt-1",children:[h.icms_percentual.toFixed(1),"% da receita"]})]})]})]}),e.jsxs(Ne,{defaultValue:"overview",className:"w-full",children:[e.jsxs(Le,{className:"grid w-full grid-cols-7",children:[e.jsx(F,{value:"overview",children:"Visão Geral"}),e.jsx(F,{value:"clients",children:"Clientes"}),e.jsx(F,{value:"routes",children:"Rotas"}),e.jsx(F,{value:"forecast",children:"Previsão ML"}),e.jsx(F,{value:"predictive",children:"Alertas ML"}),e.jsx(F,{value:"alerts",children:"Alertas"}),e.jsx(F,{value:"tax",children:"Tributário"})]}),e.jsx(E,{value:"overview",className:"space-y-4",children:e.jsxs("div",{"trae-inspector-start-line":"349","trae-inspector-start-column":"10","trae-inspector-end-line":"397","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAnalysis.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs(o,{children:[e.jsx(d,{children:e.jsx(u,{children:"Evolução de Receita e Custos"})}),e.jsx(l,{children:e.jsx(de,{width:"100%",height:300,children:e.jsxs(Ve,{data:L,children:[e.jsx(ge,{strokeDasharray:"3 3"}),e.jsx(ve,{dataKey:"mes"}),e.jsx(xe,{}),e.jsx(ue,{formatter:i=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(i)}),e.jsx(he,{}),e.jsx(W,{type:"monotone",dataKey:"receita",stroke:"#10b981",name:"Receita",strokeWidth:2}),e.jsx(W,{type:"monotone",dataKey:"custo",stroke:"#ef4444",name:"Custo",strokeWidth:2}),e.jsx(W,{type:"monotone",dataKey:"margem",stroke:"#3b82f6",name:"Margem",strokeWidth:2})]})})})]}),e.jsxs(o,{children:[e.jsx(d,{children:e.jsx(u,{children:"Margem Líquida por Mês"})}),e.jsx(l,{children:e.jsx(de,{width:"100%",height:300,children:e.jsxs(He,{data:L,children:[e.jsx(ge,{strokeDasharray:"3 3"}),e.jsx(ve,{dataKey:"mes"}),e.jsx(xe,{}),e.jsx(ue,{formatter:i=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(i)}),e.jsx(he,{}),e.jsx(Ge,{dataKey:"margem",fill:"#3b82f6",name:"Margem Líquida"})]})})})]})]})}),e.jsx(E,{value:"clients",className:"space-y-4",children:e.jsxs(o,{children:[e.jsx(d,{children:e.jsx(u,{children:"Top 5 Clientes por Receita"})}),e.jsx(l,{children:e.jsx("div",{"trae-inspector-start-line":"406","trae-inspector-start-column":"14","trae-inspector-end-line":"426","trae-inspector-end-column":"20","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAnalysis.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"space-y-4",children:P.map((i,m)=>e.jsxs("div",{"trae-inspector-start-line":"408","trae-inspector-start-column":"18","trae-inspector-end-line":"424","trae-inspector-end-column":"24","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAnalysis.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{"trae-inspector-start-line":"409","trae-inspector-start-column":"20","trae-inspector-end-line":"417","trae-inspector-end-column":"26","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAnalysis.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex items-center gap-4",children:[e.jsx("div",{"trae-inspector-start-line":"410","trae-inspector-start-column":"22","trae-inspector-end-line":"412","trae-inspector-end-column":"28","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAnalysis.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center font-bold text-primary",children:m+1}),e.jsxs("div",{"trae-inspector-start-line":"413","trae-inspector-start-column":"22","trae-inspector-end-line":"416","trae-inspector-end-column":"28","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAnalysis.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",children:[e.jsx("p",{"trae-inspector-start-line":"414","trae-inspector-start-column":"24","trae-inspector-end-line":"414","trae-inspector-end-column":"71","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAnalysis.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"font-medium",children:i.cliente}),e.jsx("p",{"trae-inspector-start-line":"415","trae-inspector-start-column":"24","trae-inspector-end-line":"415","trae-inspector-end-column":"86","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAnalysis.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-sm text-muted-foreground",children:i.cnpj})]})]}),e.jsxs("div",{"trae-inspector-start-line":"418","trae-inspector-start-column":"20","trae-inspector-end-line":"423","trae-inspector-end-column":"26","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAnalysis.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-right",children:[e.jsx("p",{"trae-inspector-start-line":"419","trae-inspector-start-column":"22","trae-inspector-end-line":"421","trae-inspector-end-column":"26","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAnalysis.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"font-bold text-lg",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(i.valor)}),e.jsxs("p",{"trae-inspector-start-line":"422","trae-inspector-start-column":"22","trae-inspector-end-line":"422","trae-inspector-end-column":"111","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAnalysis.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-sm text-muted-foreground",children:[i.percentual.toFixed(1),"% do total"]})]})]},i.cnpj))})})]})}),e.jsx(E,{value:"routes",className:"space-y-4",children:e.jsxs(o,{children:[e.jsx(d,{children:e.jsx(u,{children:"Top 5 Rotas por Receita"})}),e.jsx(l,{children:e.jsx("div",{"trae-inspector-start-line":"437","trae-inspector-start-column":"14","trae-inspector-end-line":"459","trae-inspector-end-column":"20","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAnalysis.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"space-y-4",children:n.map((i,m)=>e.jsxs("div",{"trae-inspector-start-line":"439","trae-inspector-start-column":"18","trae-inspector-end-line":"457","trae-inspector-end-column":"24","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAnalysis.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{"trae-inspector-start-line":"440","trae-inspector-start-column":"20","trae-inspector-end-line":"448","trae-inspector-end-column":"26","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAnalysis.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex items-center gap-4",children:[e.jsx("div",{"trae-inspector-start-line":"441","trae-inspector-start-column":"22","trae-inspector-end-line":"443","trae-inspector-end-column":"28","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAnalysis.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"w-8 h-8 rounded-full bg-secondary/10 flex items-center justify-center font-bold text-secondary",children:m+1}),e.jsxs("div",{"trae-inspector-start-line":"444","trae-inspector-start-column":"22","trae-inspector-end-line":"447","trae-inspector-end-column":"28","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAnalysis.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",children:[e.jsx("p",{"trae-inspector-start-line":"445","trae-inspector-start-column":"24","trae-inspector-end-line":"445","trae-inspector-end-column":"67","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAnalysis.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"font-medium",children:i.rota}),e.jsxs("p",{"trae-inspector-start-line":"446","trae-inspector-start-column":"24","trae-inspector-end-line":"446","trae-inspector-end-column":"95","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAnalysis.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-sm text-muted-foreground",children:[i.qtd_ctes," CT-es"]})]})]}),e.jsxs("div",{"trae-inspector-start-line":"449","trae-inspector-start-column":"20","trae-inspector-end-line":"456","trae-inspector-end-column":"26","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAnalysis.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-right",children:[e.jsx("p",{"trae-inspector-start-line":"450","trae-inspector-start-column":"22","trae-inspector-end-line":"452","trae-inspector-end-column":"26","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAnalysis.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"font-bold text-lg",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(i.valor)}),e.jsxs("p",{"trae-inspector-start-line":"453","trae-inspector-start-column":"22","trae-inspector-end-line":"455","trae-inspector-end-column":"26","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAnalysis.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-sm text-muted-foreground",children:[new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(i.valor/i.qtd_ctes)," /CT-e"]})]})]},i.rota))})})]})}),e.jsx(E,{value:"forecast",className:"space-y-4",children:e.jsx(Je,{})}),e.jsx(E,{value:"predictive",className:"space-y-4",children:e.jsx(Ze,{})}),e.jsx(E,{value:"alerts",className:"space-y-4",children:e.jsx(Ye,{})}),e.jsx(E,{value:"tax",className:"space-y-4",children:e.jsxs(o,{children:[e.jsx(d,{children:e.jsx(u,{children:"ICMS por Estado (Top 10)"})}),e.jsx(l,{children:e.jsx("div",{"trae-inspector-start-line":"481","trae-inspector-start-column":"14","trae-inspector-end-line":"495","trae-inspector-end-column":"20","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAnalysis.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"space-y-3",children:S.map(i=>e.jsxs("div",{"trae-inspector-start-line":"483","trae-inspector-start-column":"18","trae-inspector-end-line":"493","trae-inspector-end-column":"24","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAnalysis.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"flex items-center justify-between p-3 border rounded-md",children:[e.jsx("div",{"trae-inspector-start-line":"484","trae-inspector-start-column":"20","trae-inspector-end-line":"484","trae-inspector-end-column":"64","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAnalysis.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"font-medium",children:i.uf}),e.jsxs("div",{"trae-inspector-start-line":"485","trae-inspector-start-column":"20","trae-inspector-end-line":"492","trae-inspector-end-column":"26","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAnalysis.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-right",children:[e.jsx("div",{"trae-inspector-start-line":"486","trae-inspector-start-column":"22","trae-inspector-end-line":"488","trae-inspector-end-column":"28","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAnalysis.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"font-bold",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(i.icms)}),e.jsxs("div",{"trae-inspector-start-line":"489","trae-inspector-start-column":"22","trae-inspector-end-line":"491","trae-inspector-end-column":"28","trae-inspector-file-path":"src\\\\components\\\\revenue\\\\RevenueAnalysis.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22C%3A%5C%5CUsers%5C%5CCamila%20Lareste%5C%5CDocuments%5C%5Clogic-view-bright-main%5C%5Clogic-view-bright-main%22%7D",className:"text-xs text-muted-foreground",children:[(i.icms/Math.max(1,i.receita)*100).toFixed(1),"% da receita"]})]})]},i.uf))})})]})})]})]})}export{Lt as R};
